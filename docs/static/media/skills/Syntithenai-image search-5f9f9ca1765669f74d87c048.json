{"utterancesLists":[],"tags":[],"_id":"5fa3790fd8f09b28830abfda","id":"5f9f9ca1765669f74d87c048","title":"image search","invocation":"","entities":{"imageSearch":{"values":["factory","flock of seagulls","galaxies","jlkj4lkj","kittens","mountain range","pigs","space station","sunset"]}},"intents":{"show picture":[{"example":"show me a picture of jlkj4lkj","entities":[{"type":"imageSearch","value":"jlkj4lkj","start":21,"end":29}]},{"example":"show me a factory","entities":[{"type":"imageSearch","value":"factory","start":10,"end":17}]},{"example":"do you have a picture of a flock of seagulls","entities":[{"type":"imageSearch","value":"flock of seagulls","start":27,"end":44}]},{"example":"find pictures of a mountain range","entities":[{"type":"imageSearch","value":"mountain range","start":19,"end":33}]},{"example":"show me photos of sunset","entities":[{"type":"imageSearch","value":"sunset","start":18,"end":24}]},{"example":"i want to see some kittens","entities":[{"type":"imageSearch","value":"kittens","start":19,"end":26}]},{"example":"show me pictures of pigs","entities":[{"type":"imageSearch","value":"pigs","start":20,"end":24}]},{"example":"give me an image of a space station","entities":[{"type":"imageSearch","value":"space station","start":22,"end":35}]},{"example":"show me pictures of galaxies","entities":[{"type":"imageSearch","value":"galaxies","start":20,"end":28}]}]},"actions":{"search unsplash":{"id":"5fa3790318f696aef295cee2","value":"search unsplash","synonyms":"","tags":[],"apis":[{"text":"unsplash","functionCall":"showResults"}],"synonym":"\nvar entities = intent && intent.slots ? intent.slots : {}\nvar criteria = entities['imageSearch'] ? entities['imageSearch'] : ''\n//console.log(['CROTEROA',criteria])\n\napi('unsplash').search(criteria).then(function(result) {\n    api('unsplash').showResults().then(function(result) {\n        resolve(output,slots)\n    })\n    \n})\n\n","responses":[{"text":"search unsplash waiting"}]}},"apis":{"unsplash":{"id":"5fa37903ec5fa597b0d111c9","value":"unsplash","synonym":"console.log(['unsplash api',window])\n\n\nvar apiKey=\"rdQcxo3iExmblvSDF16A8gBMc5zXQLgk3yEkXk7FFks\"\n\n\nfunction search(criteria, limit=5 ,skip=0) {\n    slot('criteria',criteria)\n        console.log(['API SEARCH CRITERIA',criteria])\n            //+ (skip > 0 ? '&page='+skip/(limit>0 ? limit : 1) : '') +(limit > 0 ? '&per_page='+limit : '') \n    return new Promise(function(resolve,reject) {\n        if (!criteria) {\n            response('unsplash what do you want to see').then(function() {resolve()})\n        } else {\n            response('search unsplash waiting').then(function() {\n                var url='https://api.unsplash.com/search/photos/?client_id='+apiKey+'&per_page=5&query='+criteria ;\n                console.log(url)\n                utils.axios.get(url).then(function(res) {\n                    //console.log(['UNSP RES'])\n                    console.log(['UNSP RES',res])\n                    if (res && res.data && Array.isArray(res.data.results) && res.data.results.length > 0) { \n                        slot('unsplashResults',JSON.stringify(res && res.data && res.data.results  ? res.data.results : []))\n                        resolve(res)  \n                    } else {\n                        response('unsplash not found').then(function() {resolve()})\n                    }\n                })\n            })\n        }\n       //resolve()\n    })\n}\n\n\nfunction showResults() {\n    console.log(['SHOW RES',slots['unsplashResults']])\n    \n    var results= []\n    try {\n        if (slots['unsplashResults']) results = JSON.parse(slots['unsplashResults'])\n    } catch (e) {\n        console.log(e)\n    }\n    return new Promise(function(resolve,reject) {\n        console.log(['PICS',results]);\n        if (Array.isArray(results)) {\n            var promises = []\n            results.map(function(result) {\n                console.log(['PIC',result]);\n                if (result && result.urls && result.urls.regular) {\n                    console.log(['PIC',result.urls.regular]);\n                    promises.push(response('show unsplash images',{unsplashImage: result.urls.regular}))\n                }\n            })\n           // slot('playingYoutubeVideo','https://www.youtube.com/embed/'+ videos[0].id.videoId)\n            Promise.all(promises).then(function(allRes) {\n                resolve()\n            })\n        }\n    })\n} \n\nreturn {\n     search: search, showResults: showResults\n}\n// return object containing api functions\nreturn {\n    test : function() {\n        console.log(test)\n     }\n}","tags":[]}},"utterances":{"search unsplash waiting":{"id":"5fa3790358c7889a67ac12ed","value":"search unsplash waiting","synonym":"loading","tags":[]},"i can show pictures":{"id":"5fa37903a03dd52e96473738","value":"i can show pictures","synonym":"","tags":[],"buttons":[{"label":"show me pictures of the space station","utterance":"","link":""},{"label":"i want to see some kittens","utterance":"","link":""},{"label":"show me pictures of pigs","utterance":"","link":""},{"label":"show me a mountain range","utterance":"","link":""},{"label":"photo of a flock of seagulls","utterance":"","link":""},{"label":"show me a picture of jlkj4lkj","utterance":"","link":""}]}},"rules":[{"rule":"welcome","steps":["intent welcome","utter i can show pictures"]},{"rule":"show me pictures","steps":["intent show picture","action search unsplash"]}],"created_date":1604548879362,"updated_date":1604548879362,"user":"5f5eda81f38a86365b12efc8","userAvatar":"Syntithenai","__v":0}