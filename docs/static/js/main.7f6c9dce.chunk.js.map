{"version":3,"sources":["www/utils.js","www/useDB.js","www/useImportMergeFunctions.js","www/useImportUtils.js","www/useImportFunctions.js","www/components/TagAllDropDown.js","www/components/IntentAllDropDown.js","www/components/SkillAllDropDown.js","www/components/Components.js","www/components/JSONTextEditor.js","www/LocalStorageUploadManager.js","www/components/ListAllDropDown.js","www/components/SearchInput.js","www/components/ListsManagerSearchBar.js","www/useListItemRow.js","www/components/SuggestionComponent.js","www/components/DropDownComponent.js","www/components/TagComponent.js","www/ListsManagerRow.js","www/useDBSingleKey.js","www/useListItemEditor.js","www/ListsManager.js","www/components/UtterancesManagerSearchBar.js","www/UtterancesManagerRow.js","www/UtterancesManager.js","www/components/RegexpsManagerSearchBar.js","www/RegexpsManagerRow.js","www/RegexpsManager.js","www/useNluRow.js","www/NluExampleRow.js","www/components/EditorSearchBar.js","www/useNluEditor.js","www/NluExampleEditor.js","www/components/NavbarComponent.js","www/NluImportRow.js","www/NluImportEditor.js","www/export/createZip.js","www/export/exportJOVO.js","www/export/exportJSON.js","www/export/exportMycroft.js","www/export/RASATemplates.js","www/export/exportRASAMD.js","www/export/exportRASAJSON.js","www/export/index.js","www/PublishPage.js","www/components/SkillRegexTagComponent.js","www/components/NluSkillEditorComponent.js","www/useRestEndpoint.js","www/useSkillsEditor.js","www/NluSkillsEditor.js","www/ImportReviewPage.js","www/SkillSearchPage.js","../../react-express-oauth-login-system-components/dist/index.modern.js","www/App.js","www/serviceWorker.js","www/index.js","www/images/check.svg","www/images/helpoverview.svg","www/images/singingman.svg","www/images/waiting.gif","www/images/thumb-down.svg","www/images/arrow-thick-left.svg","www/images/arrow-thick-right.svg","index.js","www/images/thumb-up.svg"],"names":["balanced","require","RASA","slotTypes","unfeaturized","text","bool","list","float","min_value","max_value","categorical","values","autofillOptions","GoogleAssistant","entityTypes","Alexa","toSnakeCase","str","toLowerCase","replace","snakeToCamelCase","group","toUpperCase","camelToSnakeCase","letter","concat","generateObjectId","Date","getTime","toString","Math","random","parentUrl","url","split","slice","join","multiplyArrays","a","b","results","map","aval","bval","push","uniquifyArray","Array","isArray","index","value","Object","keys","uniquifyArrayOfObjects","field","emptyIndex","expandOptions","options","body","innerOptions","pre","post","sentence","replaceEntities","example","entities","sort","start","offset","newExample","entity","type","end","diff","length","replaceEntitiesWithValues","replacement","splitSentences","final","splits","splitText","trim","reducer","state","action","parseInt","item","toConsumableArray","items","Error","useDB","database","databaseTable","_useReducer","useReducer","_useReducer2","slicedToArray","dispatch","localforageStorage","localforage","createInstance","name","storeName","getId","id","findKeyBy","k","loadAll","then","ipromises","key","Promise","iresolve","ireject","getItem","res","all","updated_date","saveItem","isNewItem","setItem","found","listItem","listItemIndex","deleteItem","getIdForIndex","removeItem","setItems","clear","findBy","filter","matchFunction","filtered","i","useImportMergeFunctions","localforageStorageIntents","localforageStorageEntities","localforageStorageUtterances","localforageStorageRegexps","localforageStorageSkill","mergeIntents","examples","skill","resolve","reject","allItems","allItemsIndex","JSON","stringify","intent","newItems","replacements","skills","updated","created","error","mergeEntities","allLists","allListsIndex","newListItem","tags","existingAlternatives","synonym","newAlternatives","mergeUtterances","utterances","addTag","mergeRegexps","regexps","mergeSkill","title","detectFileType","json","parse","data","rasa_nlu_data","common_examples","intents","invocation","lists","e","JSZip","loadAsync","zip","forEach","relativePath","zipEntry","indexOf","unzip","content","pathFilters","promises","j","pathFilter","RegExp","test","file","async","fileContent","path","catch","filesWithContent","generateIntentSplits","newSplits","line","intentGen","latestText","limit","extractEntities","sortExampleSplits","generateEntitySplits","parts","extractSynonym","alternative","generateUtteranceSplits","tag","replaceAll","generateMycroftUtteranceSplits","utterance","cleanListItem","sortListSplits","generateIntentSplitsForMycroft","intentLabel","intentExample","intentKey","generateSplitsFromRasaMd","files","allIntents","allEntities","allRegexps","allSynonyms","entitiesFromLookup","intentData","lines","headerLine","section","dataLines","regexTitle","entityType","remainder","cleanString","undefined","remainderParts","remainderJSONParts","entityTypeParts","console","log","generateSplitsFromRasaJson","regex_features","regex","pattern","entity_synonyms","synonyms","lookup_tables","lookup","elements","cleanEntities","el","stop","entityData","synValue","generateSplitsFromJovoJson","phrases","phrase","inputs","inputKey","input","markerStart","entityi","yaml","useImportFunctions","sendPageMessage","_useImportMergeFuncti","_useImportUtils","useImportUtils_unzip","useImportUtils_generateIntentSplits","useImportUtils_generateEntitySplits","useImportUtils_generateUtteranceSplits","useImportUtils_generateMycroftUtteranceSplits","useImportUtils_cleanListItem","useImportUtils_extractSynonym","useImportUtils_sortListSplits","useImportUtils_sortExampleSplits","useImportUtils_detectFileType","useImportUtils_generateSplitsFromJovoJson","useImportUtils_generateSplitsFromRasaJson","useImportUtils_generateSplitsFromRasaMd","useImportUtils_generateIntentSplitsForMycroft","history","useHistory","importTextIntents","arguments","importTextEntities","importIntents","fileType","endsWith","importUtterances","importTextUtterances","importEntities","importAll","entitiesData","utterancesData","importSkillJson","setTimeout","fileParts","fullPath","pathParts","fileName","intentName","nameFromFilename","importMycroft","askill1","askill2","askill3","importJovo","rasa","config","credentials","endpoints","yml","safeLoad","actions","slots","newSlots","slot","newSlot","slotAutofill","auto_fill","slotType","responses","utteranceKey","alts","alt","session_config","configLines","configLine","session","importRASADomainFile","intentSkill","importRASA","TagAllDropDown","props","react_default","createElement","Dropdown","as","ButtonGroup","Toggle","size","Button","Menu","style","display","onSubmit","preventDefault","tagAll","target","InputGroup","className","onChange","setTagAllValue","tagAllValue","variant","onClick","lookups","tagLookups","skillKey","Item","untagAll","marginLeft","IntentAllDropDown","intentAll","setIntentAllValue","intentAllValue","intentLookups","SkillAllDropDown","skillSetAll","setSkillAllValue","skillAllValue","skillLookups","unskillAll","MatchesTallies","fontWeight","filteredItems","HelpMenu","react_router_dom","marginRight","to","HelpText","src","helpSVG","width","height","href","HelpTextImport","HelpTextAbout","HelpTextExport","NewFileButtons","match","FileSelector","lib_default","multiple","handleFileSelection","WithSelectedDropDowns","react","selectedTally","components_SkillAllDropDown","components_IntentAllDropDown","components_TagAllDropDown","JSONTextEditor","_useState","useState","_useState2","setTitle","_useState3","_useState4","setText","_useState5","_useState6","isJson","setIsJson","_useState7","_useState8","setJson","_useState9","_useState10","editorMode","setEditorMode","_useState11","_useState12","editorOptions","setEditorOptions","params","itemId","transforms","callMe","newLines","uniques","x","substr","useEffect","jsonParsed","parentLink","linkParts","editorModeOptions","minHeight","transform","Fragment","es","theme","ace","mode","allowedModes","IndexPage","FilesList","localforageStorageImport","saveSkill","showError","setPageMessage","ListGroup","window","confirm","generateAsync","blob","saveAs","downloadZip","Blob","importFunctions","LocalStorageUploadManager","_useDB","ev","result","_result","fileData","created_date","saveItemWrap","react_router","render","assign","exact","iprops","ListAllDropDown","listsLookups","SearchInput","_ref","searchFilter","setSearchFilter","placeholder","ListsManagerSearchBar","topTagOptions","setTopTagOptions","topTagOptionss","listKey","setListFilterValue","unshift","selectedListTally","resetSelection","checkImage","selectAll","components_SearchInput","listFilterValue","createEmptyItem","useListItemRow","splitNumber","lastSelected","setLastSelected","selectBetween","selectionState","setSelectionState","setTags","reactTags","React","createRef","onTagDelete","newTags","splice","newItem","newTag","onTagAddition","tagArray","updateExampleContent","updateExampleSynonym","selectItem","shiftKey","isSelected","deselectItem","SuggestionComponent","query","DropDownComponent","filterValue","setFilterValue","optionKey","TagComponent","Badge","pill","paddingTop","onDelete","ListsManagerRow","_useListItemRow","position","textAlign","borderTop","borderRadius","marginTop","ReactTags_umd_default","placeholderText","minQueryLength","maxSuggestionsLength","autoresize","allowNew","ref","tagComponent","setRegexpEntity","setRegexpIntent","suggestionComponent","suggestions","listName","onAddition","ret","singleKey","initialData","sortFunction","useListItemEditor","databaseKey","updateLists","_useDBSingleKey","useDBSingleKey","setFilteredItems","filteredItemsKeys","setFilteredItemsKeys","listRef","useParams","listId","matchText","matchPicklist","itemKeys","location","pathname","val","tagValue","finalTags","current","resetAfterIndex","getItemSize","baseSize","innerWidth","tallyExtras","deleteAll","min","max","RenderRow","saveNlu","ListsManager","_useListItemEditor","updateFunctions","components_ListsManagerSearchBar","components_ListAllDropDown","index_esm","itemData","itemKey","itemCount","itemSize","renderEditor","UtterancesManagerSearchBar","utteranceTagsLookups","selectedUtteranceTally","UtterancesManagerRow","minWidth","newContent","updateExampleSynonymWrap","UtterancesManager","updateUtterances","components_UtterancesManagerSearchBar","RegexpsManagerSearchBar","regexpTagsLookups","selectedRegexTally","bind","this","initData","RegexpsManagerRow_UtterancesManagerRow","RegexpsManager","updateRegexps","components_RegexpsManagerSearchBar","useNluRow","newEntity","setNewEntity","intentTitle","setIntentTitle","setSkills","reactSkills","createSelection","createTextRange","selRange","collapse","moveStart","moveEnd","select","setSelectionRange","selectionStart","selectionEnd","focus","entityTypeChanged","entityNumber","newEntities","typeChanged","textSelection","startTextSelection","endTextSelection","isOverlapProblem","bypass","isOverlap","onSkillDelete","newSkills","newSkill","onSkillAddition","diffPos","findFirstDiffPos","insertionLength","entityIndex","deletionLength","entityClicked","entityKey","document","getElementById","intentChanged","entityDelete","setSkill","NluExampleRow","_useNluRow","textInput","setTextInput","intentOptions","entitiesDropdowns","entityOptions","entityLookups","textSelectionFrom","onFocus","onSelect","getSelection","EditorSearchBar","topskillOptions","setSkillFilterValue","setIntentFilterValue","tagOptions","tagKey","setTagFilterValue","skillFilterValue","intentFilterValue","tagFilterValue","useNluEditor","updateLookups","_useState13","_useState14","skillId","intentId","intentFilter","tagFilter","skillFilter","searchFilterBool","newIntent","scrollToItem","intentValue","skillValue","heightPerLine","tagsPerLine","entitiesPerLine","skillsPerLine","round","saveAll","lsItems","exampleItems","saveLSItem","NluExampleEditor","_useNluEditor","components_EditorSearchBar","NavbarComponent","ReactGA","pageview","astyle","paddingLeft","currentPage","pages","/","show","/search","/sources","/regexps","/lists","/utterances","/examples","/skills","/help","links","link","page","Navbar","bg","border","message","top","left","background","padding","zIndex","fireImage","vAlign","isLoggedIn","doProfile","doLogout","doLogin","waitingImage","right","waiting","initialize","NluImportRow","thumbupImage","thumbdownImage","NluImportEditor","paddingRight","arrowthickleftImage","arrowthickrightImage","createZip","zipStructure","recurseZipStructure","base64","folders","folder","exportJOVO","_callee","regenerator_default","wrap","_context","prev","next","abrupt","jovo","entityTypeName","googleType","alexaType","dialogflow","alexa","synonymsIndex","entityExtrasList","inputTypes","_callee2","_context2","t0","t1","sent","exportJSON","listsStorage","utterancesStorage","dbEntities","usedLists","filledLists","useList","iitem","utterancesLists","allUtterances","thisUtterance","oresolve","oreject","exportMycroft","modelFiles","combinedEntities","RASATemplates","endpoint","single_action","actionName","domain","stories","generateFolderTree","nluContent","fileLookups","actionsContent","configContent","domainContent","credentialsContent","endpointsContent","actionFiles","storyData","storyContent","exportFormats","exportFunction","entityLists","entityValue","entityList","synonymsOut","nluOut","intentItem","rasaConfig","rasaCredentials","rasaEndpoint","domainActions","rasaActions","string","snake","substring","domainEntities","domainIntents","domainSlots","domainSlotsMeta","domainContentParts","rasaSession","rasaStories","exportRASAMD","exportRASAJSON","PublishPage","currentSkill","_id","startWaiting","skillToSave","setCurrentSkill","setMongoId","stopWaiting","loadSkills","SkillRegexTagComponent","components_DropDownComponent","NluSkillEditorComponent","utteranceTags","listItemKey","utteranceListTags","entitiesForSkill","skillTags","marginBottom","removeSkillTag","addSkillTag","collatedItems","collatedIntent","useCurrentIntent","currentIntent","completionVariant","collatedCounts","setCurrentIntent","collatedEntity","listTags","removeListFromSkillEntity","addListToSkillEntity","setAlexaEntityType","setGoogleAssistantEntityType","regexpsLookups","regexpsCompleteLookups","removeRegexp","addRegexp","utterancesLookups","removeUtterance","addUtterance","removeUtteranceList","addUtteranceList","Tabs","defaultActiveKey","Tab","eventKey","newSlotValue","setNewSlotValue","setRASASlotAutofill","setRASASlotType","deleteSlot","fontStyle","setRASAActions","setRASAConfig","setRASAStories","setRASACredentials","setRASAEndpoint","setRASASession","setInvocation","useRestEndpoint","axiosClient","restUrl","process","modelType","patch","headers","Content-Type","doPatch","put","doPut","doPost","delete","doDelete","get","doGet","searchItems","skip","populate","queryParts","encodeURIComponent","doGetMany","useSkillsEditor","user","skillKeys","setSkillKeys","setEntitiesForSkill","listsForEntity","setListsForEntity","listsManager","setCollatedItems","_useState15","_useState16","collatedTags","setCollatedTags","_useState17","_useState18","setCollatedCounts","_useState19","_useState20","_useState21","_useState22","skillMatches","setSkillMatches","_useState23","_useState24","skillUpdatedMatches","setSkillUpdatedMatches","skillsStorage","examplesStorage","token","access_token","_useRestEndpoint","getAxiosClient","_useState25","_useState26","_useState27","_useState28","mongoId","findOnlineSkill","loadedSkill","forceReload","thisSkill","entitiesListsData","utterancesListsData","mycroft","err","entityName","indexEntities","_indexIntentsAndTags","newCollatedItems","newCollatedCounts","newCollatedTags","indexIntentsAndTags","_indexIntentsAndTags2","listIndex","regexp","isNaN","NaN","utteranceListsLookups","utteranceStorage","NluSkillsEditor","skillsEditor","skillsList","toUTCString","publish","exportFormat","now","zipBody","ContextAwareToggle","children","callback","currentEventKey","useContext","AccordionContext","decoratedOnClick","useAccordionToggle","isCurrentEventKey","ImportReviewPage","skillTitle","setSkillTitle","collatedIntents","setCollatedIntents","collatedEntities","setCollatedEntities","importData","setImportData","Accordion","Card","Header","counts","Collapse","Body","iikey","ikey","SkillSearchPage","setSuggestions","searchResults","setSearchResults","sourcesDB","importItem","loadSkill","doSearch","queryIn","userAvatar","Form","Row","Col","dist_default","onSuggestionsFetchRequested","onSuggestionsClearRequested","getSuggestionValue","suggestion","renderSuggestion","onSuggestionSelected","event","_ref2","suggestionValue","suggestionIndex","sectionIndex","method","inputProps","Container","fluid","bStyle","sm","md","lg","xl","margin","index_modern_Logout","_Component","inherits","Logout","_super","createSuper","classCallCheck","apply","createClass","that","logout","standalone","allowedOrigins","close","node_modules_react_default","node_modules_react","getCookie","nameEQ","ca","cookie","c","charAt","index_modern_getMediaQueryString","refreshToken","md5_default","index_modern_getCsrfQueryString","scrollToTop","scrollTop","documentElement","index_modern_getAxiosClient","accessToken","axiosOptions","httpsAgent","https_browserify_default","Agent","rejectUnauthorized","axios_default","create","index_modern_Profile","_Component2","Profile","_super2","_this","call","change","assertThisInitialized","saveUser","saveUserReal","warning_message","redirect","redirTimeout","objectSpread2","startsWith","setUser","authServerHostname","authServer","submitWarning","esm_react_router","parentPath","esm_react_router_dom","fa_index_esm","autoComplete","htmlFor","readOnly","username","avatar","_extends","source","prototype","hasOwnProperty","index_modern_ref","fill","d","SvgGoogleBrands","aria-hidden","data-prefix","data-icon","viewBox","_extends$1","_ref$1","SvgTwitterBrands","_extends$2","_ref$2","SvgFacebookBrands","_extends$3","_ref$3","SvgGithubBrands","_extends$4","_ref$4","SvgAmazonBrands","index_modern_Login","_Component3","Login","_super3","_this2","signin_username","signin_password","rememberme","buttons","search","setState","loginButtons","color","isRoot","required","faker","__webpack_require__","index_modern_Register","_Component4","Register","_super4","_this3","signin_warning_message","signup_warning_message","email_login","password_login","email","password","password2","justSignedUp","forgotPassword","commerce","productAdjective","firstName","lastName","submitSignUp","submitSignUpReal","getParentPath","_this4","index_modern_TermsOfUse","_Component5","TermsOfUse","_super5","index_modern_ForgotPassword","_Component6","ForgotPassword","_super6","_this5","code","_this6","recoverPassword","index_modern_RegistrationConfirmation","_Component7","RegistrationConfirmation","_super7","index_modern_OAuth","_Component8","OAuth","_super8","_this7","cancelAuthRequest","authRequest","localStorage","paramsObject","keyAndData","response_type","client_id","redirect_uri","scope","fetch","Authorization","access_code","checkStatus","parseJSON","website_url","privacy_url","_authRequest","response","status","statusText","fontSize","client_secret","index_modern_ExternalLogin","_Component11","ExternalLogin","_super11","_this10","checkLoginIframe","loginPopup","pollLoginTimeout","pollCloseTimeout","receiveMessage","pollShouldClose","checkIsLoggedIn","checkLogin","loadUser","setCheckLoginIframe","addEventListener","origin","popup","allowedPages","pollTimeout","clearTimeout","closed","check_login","postMessage","count","authWeb","open","screen","availHeight","axios","SiteMenu","App","setWaiting","pageMessage","setPageMessageInner","messageTimeout","timeout","setIntentLookups","setEntityLookups","setTagLookups","setSkillLookups","setListsLookups","setSelectedTally","setUtterancesLookups","setUtteranceListsLookups","setUtteranceTagsLookups","setRegexpsLookups","setRegexpsCompleteLookups","regexpListsLookups","setRegexpListsLookups","_useState29","_useState30","setRegexpTagsLookups","_useState31","_useState32","listTally","setListTally","_useState33","_useState34","setSelectedListTally","_useState35","_useState36","listTallyByList","setListTallyByList","_useState37","_useState38","selectedListTallyByList","setSelectedListTallyByList","_useState39","_useState40","regexTally","setRegexTally","_useState41","_useState42","setSelectedRegexTally","_useState43","_useState44","utteranceTally","setUtteranceTally","_useState45","_useState46","setSelectedUtteranceTally","_useState47","_useState48","_useState49","_useState50","setSkillTags","selected","distinct","self","newSelectedLists","newLists","tally","utteranceLists","utteranceIndex","utteranceCompleteIndex","getMediaQueryString","getCsrfQueryString","component","www_ImportReviewPage","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","StrictMode","www_App","URL","Service-Worker","contentType","ready","unregister","reload","checkValidServiceWorker","module","exports","p"],"mappings":"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","file":"static/js/main.7f6c9dce.chunk.js","sourcesContent":["//const yaml = require('js-yaml');\n// FUNCTIONS \nvar balanced = require('balanced-match');\n\nconst RASA = {\n    slotTypes : {\n        'unfeaturized': {},\n        'text': {},\n        'bool': {},\n        'list': {},\n        'float': {'min_value':'int', 'max_value':'int'},\n        'categorical': {'values':'list'}\n    },\n    autofillOptions: ['Yes','No']\n}\n\n// https://cloud.google.com/dialogflow/docs/reference/system-entities\nconst GoogleAssistant = {\n    entityTypes: [\"@sys.date-time\",\"@sys.date\",\"@sys.date-period\",\"@sys.time\",\"@sys.time-period\",\"@sys.number\",\"@sys.cardinal\",\"@sys.ordinal\",\"@sys.number-integer\",\"@sys.number-sequence\",\"@sys.flight-number\",\"@sys.unit-area\",\"@sys.unit-currency\",\"@sys.unit-length\",\"@sys.unit-speed\",\"@sys.unit-volume\",\"@sys.unit-weight\",\"@sys.unit-information\",\"@sys.percentage\",\"@sys.temperature\",\"@sys.duration\",\"@sys.age\",\"@sys.currency-name\",\"@sys.unit-area-name\",\"@sys.unit-length-name\",\"@sys.unit-speed-name\",\"@sys.unit-volume-name\",\"@sys.unit-weight-name\",\"@sys.unit-information-name\",\"@sys.address\",\"@sys.zip-code\",\"@sys.geo-capital\",\"@sys.geo-country\",\"@sys.geo-country-code\",\"@sys.geo-city\",\"@sys.geo-state\",\"@sys.place-attraction\",\"@sys.airport\",\"@sys.location\",\"@sys.email\",\"@sys.phone-number\",\"@sys.person\",\"@sys.music-artist\",\"@sys.music-genre\",\"@sys.color\",\"@sys.language\",\"@sys.any\",\"@sys.url\"]\n}\n\n//https://developer.amazon.com/en-US/docs/alexa/custom-skills/slot-type-reference.html\",\nconst Alexa = {\n    entityTypes: [\"AMAZON.DATE\",\"AMAZON.DURATION\",\"AMAZON.FOUR_DIGIT_NUMBER\",\"AMAZON.NUMBER\",\"AMAZON.Ordinal\",\"AMAZON.PhoneNumber\",\"AMAZON.TIME\",\"AMAZON.SearchQuery\",\"AMAZON.Actor\",\"AMAZON.Airline\",\"AMAZON.Airport\",\"AMAZON.Anaphor\",\"AMAZON.Animal\",\"AMAZON.Artist\",\"AMAZON.Author\",\"AMAZON.Book\",\"AMAZON.City\",\"AMAZON.Color\",\"AMAZON.Corporation\",\"AMAZON.Country\",\"AMAZON.CreativeWorkType\",\"AMAZON.DayOfWeek\",\"AMAZON.FictionalCharacter\",\"AMAZON.FirstName\",\"AMAZON.Food\",\"AMAZON.Genre\",\"AMAZON.Language\",\"AMAZON.Month\",\"AMAZON.Movie\",\"AMAZON.MusicAlbum\",\"AMAZON.MusicGroup\",\"AMAZON.Musician\",\"AMAZON.MusicRecording\",\"AMAZON.Person\",\"AMAZON.RadioChannel\",\"AMAZON.Region\",\"AMAZON.RelativePosition\",\"AMAZON.Room\",\"AMAZON.Sport\",\"AMAZON.StreetName\",\"AMAZON.TVSeries\",\"AMAZON.VideoGame\",\"AMAZON.VisualModeTrigger\"]\n}\n\n\nfunction toSnakeCase(str) {\n    return str.toLowerCase().replace(/[^a-z]/g, '_').replace('__','_')\n}\n\nconst snakeToCamelCase = (str) => str.replace(\n    /([-_][a-z])/g,\n    (group) => group.toUpperCase()\n                    .replace('-', '')\n                    .replace('_', '')\n);\n\nconst camelToSnakeCase = str => str.replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`);\n\n\n\nfunction generateObjectId() {\n    var timestamp = (new Date().getTime() / 1000 | 0).toString(16);\n    return timestamp + 'xxxxxxxxxxxxxxxx'.replace(/[x]/g, function() {\n        return (Math.random() * 16 | 0).toString(16);\n    }).toLowerCase();\n}\n   \nfunction parentUrl(url) {\n    return url.split(\"/\").slice(0,-1).join(\"/\") \n}\n\nfunction concatText(text,words) {\n   let parts = text.split(' ')\n   let shorter = parts.slice(0,20).join(' ')\n   return (shorter.length < text.length) ? shorter + '...' : shorter;\n}\n\n\n\n    \n    function findFirstDiffPos(a, b) {\n      if (a === b) return -1;\n      for (var i=0; a[i] === b[i]; i++) {}\n      return i;\n    }\n    \n    function multiplyArrays(a,b) {\n        var results=[]\n        a.map(function(aval) {\n              b.map(function(bval) {\n                  results.push(aval + bval)\n              })\n        })\n        return results\n    }\n\n    function uniquifyArray(a) {\n        ////console.log(['UNIQARRAY',a])\n        if (Array.isArray(a)) {\n            var index = {}\n            a.map(function(value) {\n                index[value] = true \n                return null\n            })\n            return Object.keys(index)\n        } else {\n            return []\n        }\n    }\n\n    function uniquifyArrayOfObjects(a,field) {\n         if (Array.isArray(a)) {\n             var index = {}\n            var emptyIndex = null\n            a.map(function(value) {\n                if (value) {\n                    if (value[field]) {\n                        index[value[field]] = value \n                    } else {\n                        emptyIndex = value\n                    }\n                }\n                return null\n            })\n            if (emptyIndex) return [emptyIndex].concat(Object.values(index))\n            else return Object.values(index)\n        } else {\n            return []\n        }\n    }\n    \n    // recursively expand sentence containing options eg (the|an(y|)|my) into an array of expanded sentences\n    function expandOptions(text) {\n        var options = []\n        var b = balanced('(',')',text)\n        if (b && b.body) {\n            var innerOptions = null\n            var ib = balanced('(',')',b.body)\n            if (ib) {\n                innerOptions = expandOptions(b.body)\n            } else {\n                innerOptions = b.body.split(\"|\")\n            }\n            innerOptions = uniquifyArray(innerOptions)\n            var sentences = uniquifyArray(multiplyArrays(multiplyArrays([b.pre],innerOptions),[b.post]))\n            sentences.map(function(sentence) {\n               options=[].concat(options,expandOptions(sentence))  \n            })\n        } else {\n            options = text.split(\"|\")\n        }\n        return uniquifyArray(options)\n    }\n    \n    function replaceEntities(example,entities) {\n        // replace entity values with {entityName}\n        // first sort entities by start key\n        entities = entities.sort(function(a,b) {\n          if (a.start < b.start) return -1\n          else return 1  \n        })\n        var offset = 0\n        var newExample = example\n        entities.map(function(entity) {\n            newExample = newExample.slice(0,entity.start + offset)+\"{\"+entity.type+\"}\"+newExample.slice(entity.end + offset)\n            var diff = (entity.end - entity.start) - (entity.type.length + 2)\n            offset -= diff\n            return null\n        })\n        return newExample\n    }\n    \n    function replaceEntitiesWithValues(example,entities) {\n        // replace entity values with {entityName}\n        // first sort entities by start key\n        if (example && Array.isArray(entities)) {\n                entities = entities.sort(function(a,b) {\n              if (a.start < b.start) return -1\n              else return 1  \n            })\n            var offset = 0\n            var newExample = example\n            entities.map(function(entity) {\n                var replacement = \"[\"+entity.value+\"](\"+entity.type+\")\"\n                newExample = newExample.slice(0,entity.start + offset)+replacement+newExample.slice(entity.end + offset)\n                var diff = (entity.end - entity.start) - (replacement.length)\n                offset -= diff\n                return null\n            })\n            return newExample\n        } else {\n            return example\n        }\n    }\n    /**\n     *  create array by splitting on newline and fullstop\n     */\n    function splitSentences(text) {\n      var final = []\n      if (text) {\n          // split by newline and full stop\n         var splits = text.split('\\n').join('::::').split('.').join('::::').split('::::') //.map(function(value) { return value.trim()})\n        // trim all splits\n        for (var splitText in splits) {\n            if(splitText.trim().length > 0) final.push(splits[splitText])\n        }\n     }\n     return final;\n    }\n    \nexport {generateObjectId, parentUrl, concatText , findFirstDiffPos,uniquifyArray, multiplyArrays, expandOptions, splitSentences, uniquifyArrayOfObjects, replaceEntities,replaceEntitiesWithValues,  RASA, GoogleAssistant, Alexa, snakeToCamelCase, camelToSnakeCase, toSnakeCase }\n","import {useReducer} from 'react';\nimport {generateObjectId} from './utils'\nimport localforage from 'localforage'\n\n// handle list updates with minimum disruption to top level items\nfunction reducer(state, action) {\n    const index = parseInt(action.index)\n switch (action.type) {\n    case \"append\":\n      if (action.item) {\n        return [...state, action.item];\n      } else return state\n    case \"prepend\":\n      if (action.item) {\n        return [action.item, ...state];\n      } else return state\n    case \"insert\":\n      if (action.item && typeof index === \"number\" ) {\n          if (state.length > 0) {\n              return [\n                ...state.slice(0, index),\n                action.item,\n                ...state.slice(index)\n              ];\n          } else return state\n        } else return state\n    case \"remove\":\n      if (typeof index === \"number\" ) {\n          return [\n            ...state.slice(0, index),\n            ...state.slice(index + 1)\n          ];\n       } else return state \n    case \"update\":\n       if (action.item && typeof index === \"number\" ) {\n           return  [\n            ...state.slice(0, index),\n            action.item,\n            ...state.slice(index + 1)\n          ];\n        } else return state \n    case \"replaceall\":\n        if (typeof action.items === \"object\") {\n            return action.items\n        } else return state\n    default:\n      throw new Error('Invalid reduction in useDB');\n  }\n}\n   \n\n// state manager with local storage backing\nexport default function useDB(database, databaseTable) {\n     const [items, dispatch] = useReducer(reducer,[]);\n     var localforageStorage = localforage.createInstance({\n       name: database ? database : \"localstoragemanager\",\n       storeName   : databaseTable ? databaseTable : 'data',\n     });\n\n    function getId(item) {\n        if (item && item.id) {\n            return item.id\n        } else {\n            throw new Error(\"Missing ID value in getId\")\n        }\n    }\n    function getIdForIndex(index) {\n        if (items && items[index] && items[index].id) {\n            return items[index].id\n        } else {\n            throw new Error(\"Missing ID value in getIdForIndex\")\n        }\n    }\n    \n\n    function loadAll() {\n        localforageStorage.keys().then(function(keys) {\n            var ipromises = []\n            keys.map(function(key) {\n                ipromises.push(new Promise(function(iresolve,ireject) {\n                   localforageStorage.getItem(key).then(function(res) {\n                       iresolve(res)\n                   })\n                }))\n                return null\n            })\n            Promise.all(ipromises).then(function(res) {\n                res = res.sort(function(a,b) {if (a.updated_date < b.updated_date) return 1; else return -1})\n                dispatch({ type: \"replaceall\", items: res });\n            })\n        })\n    }\n\n    \n    // save or create\n    function saveItem(item,index) {\n        if (item) {\n            //console.log(['SAVEDB',item,index])\n            // update sources and save text in seperate localstorage\n            // ensure id\n            var isNewItem = false;\n            if (!item.id) {\n                isNewItem = true;\n                item.id = generateObjectId()\n            }\n            localforageStorage.setItem(item.id,item)\n            if (isNewItem) {\n                dispatch({ type: \"prepend\",item: item });\n            } else {\n                if (items) {\n                    var found = null\n                    items.map(function(listItem,listItemIndex) {\n                        if (listItem.id === item.id) {\n                            found = listItemIndex\n                        } \n                        return null\n                    })\n                    if (found != null) {\n                        dispatch({ type: \"update\",item: item , index: found});\n                    } else {\n                        dispatch({ type: \"prepend\",item: item });\n                    }\n                } \n            }  \n        }\n    }\n    \n    function findBy(field,value) {\n        var key = findKeyBy(field,value)\n        if (key) return items[key];\n        return null\n    }\n    \n    function findKeyBy(field,value) {\n        for (var k in items) {\n            if (items[k] && items[k][field] === value) return k\n        }\n        return null\n    }\n\n\n    function setItemsWrap(items) {\n        localforageStorage.clear().then(function() {\n            dispatch({ type: \"replaceall\", items: items})\n            if (items) {\n                items.map(function(item) { localforageStorage.setItem(getId(item),item); return null})\n            }\n        })\n        \n    }\n    \n    function deleteItem(index) {\n        var id = getIdForIndex(index)\n        if (id) {\n            localforageStorage.removeItem(id).then(function() {\n                dispatch({ type: \"remove\", index: index})\n            })\n        }\n        \n    }\n    \n    function filter(matchFunction) {\n        var filtered = []\n        if (matchFunction) {\n            items.map(function(item,i) {\n              if (matchFunction(item)) {\n                  filtered.push(item)\n              }  \n              return null\n            })\n        }\n        return filtered\n        \n    }\n    \n    return {getId:getId, loadAll:loadAll, saveItem:saveItem, deleteItem:deleteItem , items:items, setItems:setItemsWrap, findKeyBy:findKeyBy, findBy:findBy, filter: filter}\n    \n}\n","import localforage from 'localforage'\nimport {uniquifyArray, generateObjectId} from './utils'\n\nexport default function useImportMergeFunctions() {\n\n     var localforageStorageIntents = localforage.createInstance({\n       name: 'nlutool',\n       storeName   :'examples',\n     });\n     var localforageStorageEntities = localforage.createInstance({\n       name: 'nlutool',\n       storeName   :'lists',\n     });\n     var localforageStorageUtterances = localforage.createInstance({\n       name: 'nlutool',\n       storeName   :'utterances',\n     });\n     var localforageStorageRegexps = localforage.createInstance({\n       name: 'nlutool',\n       storeName   :'regexps',\n     });\n     var localforageStorageSkill = localforage.createInstance({\n       name: 'nlutool',\n       storeName   :'skills',\n     }); \n    /**\n     *  merge an array of json structured intents into the main intent database \n     * \n     *  every import records is tagged with the skill parameter when present\n     */\n    function mergeIntents(examples,skill) {\n        return new Promise(function(resolve, reject) {\n            //console.log(['import examples',examples, typeof examples,skill])\n            if (examples) {\n                localforageStorageIntents.getItem('alldata').then(function(allItems) {\n                    var allItemsIndex = {}\n                    if (!allItems) {\n                        allItems = []\n                    }\n                    // index existing items by example\n                    \n                    allItems.map(function(listItem) {\n                        const key = JSON.stringify({entities:listItem.entities ? listItem.entities : [], intent: listItem.intent ? listItem.intent : '', example: listItem.example ? listItem.example : ''})\n                        if (listItem && listItem.example && listItem.example.trim())  {\n                            allItemsIndex[key] = listItem\n                        }\n                        return null\n                    })\n                    var newItems=[]\n                    var replacements=[]\n                    \n                    examples.map(function(listItem) {\n                        if (listItem && listItem.example && listItem.example.trim())  {\n                            // intent example already exists\n                            const key = JSON.stringify({entities:listItem.entities ? listItem.entities : [], intent: listItem.intent ? listItem.intent : '', example: listItem.example ? listItem.example : ''})\n                            listItem.id = listItem.id ? listItem.id : generateObjectId()\n                            if (allItemsIndex[key]) {\n                                replacements.push(listItem)\n                            } else {\n                                newItems.push(listItem)\n                                if (skill) listItem.skills = listItem.skills ? uniquifyArray( listItem.skills.push(skill)) : [skill]\n                            }\n                            //allItemsIndex[listItem.value] = listItem\n                        } \n                        return null\n                    })\n                    var final = []\n                    if (replacements.length > 0) {\n                        replacements.map(function(listItem) {\n                            const key = JSON.stringify({entities:listItem.entities ? listItem.entities : [], intent: listItem.intent ? listItem.intent : '', example: listItem.example ? listItem.example : ''})\n                            if (skill) listItem.skills = listItem.skills ? uniquifyArray( listItem.skills.push(skill)) : [skill]\n                            allItemsIndex[key] = listItem\n                            return null\n                        }); \n                        final = [].concat(newItems,Object.values(allItemsIndex))\n                    } else {\n                        final = [].concat(newItems,allItems)\n                    }\n                    //console.log('IMPORT MERGE',final)\n                    localforageStorageIntents.setItem('alldata',final).then(function() {\n                      resolve({updated:replacements.length, created: newItems.length})  \n                    })\n                    //props.history.push('/import') \n                \n                })\n              } else {\n                reject({error:\"Missing import data\"})\n            }\n        })\n    }\n\n\n    function mergeEntities(entities, list) {\n        //console.log(['merge entities',entities, list])\n        return new Promise(function(resolve, reject) {\n            if (entities) {\n                localforageStorageEntities.getItem('alldata').then(function(allLists) {\n                    ////console.log(['got list ',allLists])\n                    var allListsIndex = {}\n                    if (!allLists) {\n                        allLists = []\n                    }\n                    // index by value\n                    allLists.map(function(listItem) {\n                        if (listItem && listItem.value && listItem.value.trim().length > 0)  {\n                            allListsIndex[listItem.value] = listItem\n                        }\n                        return null\n                    })\n                    var created = 0\n                    var updated = 0;\n                    entities.map(function(listItem,listItemIndex) {\n                        var newListItem = listItem;\n                        newListItem.id = newListItem.id ? newListItem.id : generateObjectId()\n                        // already there, just update tags\n                        if (allListsIndex[listItem.value]) {\n                            updated += 1\n                            newListItem.tags = newListItem.tags ? newListItem.tags : []\n                            if (list && list.trim().length > 0) newListItem.tags.push(list.trim())\n                            // merge alternatives\n                            var existingAlternatives = allListsIndex[listItem.value].synonym ? allListsIndex[listItem.value].synonym.split(\"\\n\") : []\n                            var newAlternatives = newListItem.synonym ? newListItem.synonym.split(\"\\n\") : []\n                            newListItem.synonym = uniquifyArray([].concat(existingAlternatives, newAlternatives)).sort().join(\"\\n\")\n                          \n                            // uniquify and sort tags\n                            newListItem.tags = uniquifyArray(newListItem.tags).sort()\n                            allListsIndex[newListItem.value] = newListItem\n                        // new list item    \n                        } else {\n                            created += 1\n                            newListItem = {id: generateObjectId() , value: newListItem.value, synonym: newListItem.synonym ? newListItem.synonym : '', tags:newListItem.tags ? newListItem.tags : []}\n                            if (list && list.trim().length > 0) newListItem.tags.push(list.trim())\n                            // uniquify and sort tags\n                            newListItem.tags = uniquifyArray(newListItem.tags).sort()\n                            allListsIndex[newListItem.value] = newListItem\n                        }\n                        return null\n                    })\n                    \n                    ////console.log('IMPORT MERGE',res,parsed,[].concat(parsed,res))\n                    localforageStorageEntities.setItem('alldata',Object.values(allListsIndex)).then(function() {\n                        resolve({updated:updated, created: created})  \n                    })\n                    //props.history.push('/lists') \n                    ////props.setPageMessage(<div><b>sdfsdf</b><br/><b>sdfsdf</b><br/><b>sdfsdf</b><br/><b>sdfsdf</b><br/></div>)\n                    //props.setPageMessage('Imported '+Object.keys(allListsIndex).length +' entities into the list '+ title)\n                    //setTimeout(function() {\n                        //props.setPageMessage('')\n                    //},2000)\n                })\n            } else {\n                reject({error:\"Failed import\"})\n            }\n        })\n    }\n    \n    function mergeUtterances(utterances,addTag) {\n        //console.log(['merge utterances',utterances, addTag])\n        return new Promise(function(resolve, reject) {\n            if (utterances) {\n                localforageStorageUtterances.getItem('alldata').then(function(allLists) {\n                    ////console.log(['got list ',allLists])\n                    var allListsIndex = {}\n                    if (!allLists) {\n                        allLists = []\n                    }\n                    // index by value\n                    allLists.map(function(listItem) {\n                        if (listItem && listItem.value && listItem.value.trim().length > 0)  {\n                            allListsIndex[listItem.value] = listItem\n                        }\n                        return null\n                    })\n                    var created = 0\n                    var updated = 0;\n                    utterances.map(function(listItem,listItemIndex) {\n                        var newListItem = listItem;\n                        newListItem.id = newListItem.id ? newListItem.id : generateObjectId()\n                        // already there, just append tag and alternatives\n                        if (allListsIndex[listItem.value]) {\n                            updated += 1\n                            newListItem.tags = newListItem.tags ? newListItem.tags : []\n                            // merge alternatives\n                            var existingAlternatives = allListsIndex[listItem.value].synonym ? allListsIndex[listItem.value].synonym.split(\"\\n\") : []\n                            var newAlternatives = newListItem.synonym ? newListItem.synonym.split(\"\\n\") : []\n                            newListItem.synonym = uniquifyArray([].concat(existingAlternatives, newAlternatives)).sort().join(\"\\n\")\n                            // add tag ?\n                            if (addTag && addTag.trim().length > 0) newListItem.tags.push(addTag.trim())\n                            // uniquify and sort tags\n                            newListItem.tags = uniquifyArray(newListItem.tags).sort()\n                            allListsIndex[newListItem.value] = newListItem\n                        // new list item    \n                        } else {\n                            created += 1\n                            newListItem = {id: generateObjectId() , value: newListItem.value, synonym: newListItem.synonym ? newListItem.synonym : '', tags:[]}\n                            if (addTag && addTag.trim().length > 0) newListItem.tags.push(addTag.trim())\n                            // uniquify and sort tags\n                            newListItem.tags = uniquifyArray(newListItem.tags).sort()\n                            allListsIndex[newListItem.value] = newListItem\n                        }\n                        return null\n                    })\n                    \n                    ////console.log('IMPORT MERGE',res,parsed,[].concat(parsed,res))\n                    localforageStorageUtterances.setItem('alldata',Object.values(allListsIndex)).then(function() {\n                        resolve({updated:updated, created: created})  \n                    })\n                    //props.history.push('/lists') \n                    ////props.setPageMessage(<div><b>sdfsdf</b><br/><b>sdfsdf</b><br/><b>sdfsdf</b><br/><b>sdfsdf</b><br/></div>)\n                    //props.setPageMessage('Imported '+Object.keys(allListsIndex).length +' entities into the list '+ title)\n                    //setTimeout(function() {\n                        //props.setPageMessage('')\n                    //},2000)\n                })\n            } else {\n                reject({error:\"Failed import\"})\n            }\n        })\n    }\n    \n    \n    function mergeRegexps(regexps,addTag) {\n        //console.log(['merge regexps',regexps, addTag])\n        return new Promise(function(resolve, reject) {\n            if (regexps) {\n                localforageStorageRegexps.getItem('alldata').then(function(allLists) {\n                    ////console.log(['got list ',allLists])\n                    var allListsIndex = {}\n                    if (!allLists) {\n                        allLists = []\n                    }\n                    // index by value\n                    allLists.map(function(listItem) {\n                        if (listItem && listItem.value && listItem.value.trim().length > 0)  {\n                            allListsIndex[listItem.value] = listItem\n                        }\n                        return null\n                    })\n                    var created = 0\n                    var updated = 0;\n                    regexps.map(function(listItem,listItemIndex) {\n                        var newListItem = listItem;\n                        newListItem.id = newListItem.id ? newListItem.id : generateObjectId()\n                        // already there, just append tag and alternatives\n                        if (allListsIndex[listItem.value]) {\n                            updated += 1\n                            newListItem.tags = newListItem.tags ? newListItem.tags : []\n                            // merge alternatives\n                            //var existingAlternatives = allListsIndex[listItem.value].synonym ? allListsIndex[listItem.value].synonym.split(\"\\n\") : []\n                            //var newAlternatives = newListItem.synonym ? newListItem.synonym.split(\"\\n\") : []\n                            //newListItem.synonym = uniquifyArray([].concat(existingAlternatives, newAlternatives)).sort().join(\"\\n\")\n                            // add tag ?\n                            if (addTag && addTag.trim().length > 0) newListItem.tags.push(addTag.trim())\n                            // uniquify and sort tags\n                            newListItem.tags = uniquifyArray(newListItem.tags).sort()\n                            allListsIndex[newListItem.value] = newListItem\n                        // new list item    \n                        } else {\n                            created += 1\n                            newListItem = {id: generateObjectId() , value: newListItem.value, synonym: newListItem.synonym ? newListItem.synonym : '', tags:[]}\n                            if (addTag && addTag.trim().length > 0) newListItem.tags.push(addTag.trim())\n                            // uniquify and sort tags\n                            newListItem.tags = uniquifyArray(newListItem.tags).sort()\n                            allListsIndex[newListItem.value] = newListItem\n                        }\n                        return null\n                    })\n                    \n                    //console.log('IMPORT MERGE reg',allListsIndex)\n                    localforageStorageRegexps.setItem('alldata',Object.values(allListsIndex)).then(function() {\n                        resolve({updated:updated, created: created})  \n                    })\n              \n                })\n            } else {\n                reject({error:\"Failed import\"})\n            }\n        })\n    }\n    \n    function mergeSkill(skill) {\n        //console.log(['merge skill',skill])\n        return new Promise(function(resolve, reject) {\n            if (skill && skill.title) {\n                localforageStorageSkill.getItem(skill.title).then(function(found) {\n                    // merge ?\n                    if (found) {\n                        //console.log(['found skill',skill])\n                        localforageStorageSkill.setItem(skill.title,skill).then(function() {\n                            resolve({})  \n                        })\n                    } else {\n                        //console.log(['create skill',skill])\n                        localforageStorageSkill.setItem(skill.title,skill).then(function() {\n                            resolve({})  \n                        })\n\n                    }\n                    \n                })\n            } else {\n                reject({error:\"Failed import\"})\n            }\n        })\n    }\n    \n\n    return  {mergeIntents, mergeEntities, mergeUtterances, mergeRegexps, mergeSkill}\n\n}\n","import JSZip from 'jszip'\nimport parenthesis from 'parenthesis'\nimport {generateObjectId, uniquifyArray, multiplyArrays, expandOptions, splitSentences} from './utils'\n\nvar balanced = require('balanced-match');\n\n\n    function detectFileType(item) {\n        return new Promise(function(resolve,reject) {\n            //console.log(['DETECT FILE TYPE',item])\n            try {\n                var json = JSON.parse(item.data)\n                // RASA JSON FORMAT\n                if (json && json.rasa_nlu_data && json.rasa_nlu_data.common_examples) {\n                    resolve( {type: 'rasa.json'})\n                // JOVO JSON { \"invocation\": \"my test app\", \"intents\": [{\"name\": \"HelloWorldIntent\",\"phrases\": [\"hello\",\"say hello\"]}] } ,\n                } else if (json && json.title && json.intents && json.entities && json.id) {\n                    resolve({type: 'opennlu.skill'})\n                } else if (json && json.invocation && json.intents) {\n                    resolve({type: 'jovo.json'})\n                } else if (json && json.utterances) {\n                    resolve({type: 'opennlu.utterances'})\n                } else if (json && json.lists) {\n                    resolve({type: 'opennlu.lists'})\n                } else if (json && json.regexps) {\n                    resolve({type: 'opennlu.regexps'})\n                } else {\n                    resolve({type: 'json'})\n                }\n            } catch (e) {\n                // try zip file\n                var zip = new JSZip();\n                 zip.loadAsync(item.data)                                   // 1) read the Blob\n                .then(function(zip) {\n                    var found={}\n                    zip.forEach(function (relativePath, zipEntry) {  // 2) print entries\n                        //console.log( zipEntry.name)\n                        // rasa\n                        if (zipEntry.name.indexOf('/domain.yml') !== -1) found['rasa_domain'] = true \n                        if (zipEntry.name.indexOf('/data/nlu.md') !== -1) found['rasa_data'] = true\n                        // jovo\n                        if (zipEntry.name.indexOf('/project.js') !== -1) found['jovo_project'] = true\n                        if (zipEntry.name.indexOf('/models/en-US.js') !== -1) found['jovo_lang'] = true\n                        // mycroft\n                        if (zipEntry.name.indexOf('/__init__.py') !== -1) found['mycroft_index'] = true\n                        if (zipEntry.name.indexOf('/vocab') !== -1) found['mycroft_vocab'] = true\n                        //console.log(['FOUND',found])\n                    });\n                    //console.log(['FOUND',found])\n                    if (found['rasa_domain'] && found['rasa_data']) {\n                        resolve({type: 'rasa.zip'})\n                    } else if (found['rasa_domain'] && found['rasa_data']) {\n                        resolve({type: 'jovo.zip'})\n                    } else if (found['mycroft_index'] && found['mycroft_vocab']) {\n                        resolve({type: 'mycroft.zip'})\n                    } else if (found['jovo_project'] && found['jovo_lang']) {\n                        resolve({type: 'jovo.zip'})\n                    } else {\n                        resolve()\n                    }\n                }, function (e) {\n                    ////console.log('NOT ZIP')\n                    ////console.log(e)\n                    \n                    if (item.data && item.data.indexOf('## intent:') !== -1) {\n                        resolve({type: 'rasa.markdown'})\n                    } else {\n                        resolve({type: 'text'})\n                    }\n                });\n                \n            }  \n        })\n               \n    }\n\n\n/**\n *  unzip a file and extract the content for files matching paths found in pathFilters array\n */\nfunction unzip(content,pathFilters) {\n    \n    function matchRuleShort(str, rule) {\n      var escapeRegex = (str) => str.replace(/([.*+?^=!:${}()|\\[\\]\\/\\\\])/g, \"\\\\$1\");\n      return new RegExp(\"^\" + rule.split(\"*\").map(escapeRegex).join(\".*\") + \"$\").test(str);\n    }\n    return new Promise (function( resolve, reject) {\n        var zip = new JSZip();\n        zip.loadAsync(content)\n        .then(function(zip) {\n            var promises=[]\n            zip.forEach(function (relativePath, zipEntry) {\n                ////console.log(relativePath,zipEntry)\n                var found = false\n                for (var j in pathFilters) {\n                    var pathFilter = pathFilters[j]\n                    //console.log(['COMPARE', matchRuleShort(relativePath, pathFilter), relativePath, pathFilter])\n                    if (matchRuleShort(relativePath, pathFilter)) { \n                        found = true\n                    }\n                }\n                //for (var j in pathFilters) {\n                    //var pathFilter = pathFilters[j]\n                    //if ( zipEntry.name.indexOf(pathFilter) !== -1) { \n                        //found = true\n                    //}\n                //}\n                if (found) { \n                    promises.push( new Promise(function(iresolve,ireject) {\n                        zip.file(relativePath).async(\"string\").then(function(fileContent) {\n                            \n                             ////console.log('got ont')\n                             iresolve({path:zipEntry.name, data: fileContent})\n                        })\n                    }).catch(function(e) {\n                            \n                    }))\n                }\n            })\n            Promise.all(promises).then(function(filesWithContent) {\n                resolve(filesWithContent)\n            })\n        });\n    })\n}\n\n\n\n\n/**\n *  create entity objects from split sentences\n */\n  \nfunction generateIntentSplits(text, intent) {\n    const splits = splitSentences(text)\n\n     function extractEntities(text) {\n        var entities=[]\n        var latestText = text\n        var b = balanced('{','}',latestText)\n        var limit = 20\n        while (b && limit) {\n            var entity = { value:b.body, start: b.start, end: b.end, type:b.body }\n            entities.push(entity)\n            latestText = b.pre + b.body + b.post\n            b = balanced('{','}',latestText)\n            limit --\n        }\n        return {'id':generateObjectId(), example: latestText, entities: entities, tags: []}\n    }\n        \n    var newSplits=[]\n    splits.map(function(text,i) {\n        if (text && text.trim().length > 0) {\n           expandOptions(text).map(function(line) {\n                var intentGen = extractEntities(line)\n                intentGen.intent = intent;\n                newSplits.push(intentGen)\n            }) \n           //newSplits.push({'id':generateObjectId(), 'example':text,'intent':intent ? intent : '',\"entities\":[], \"tags\":[]})\n        }\n        return null\n    })\n    return newSplits.sort(sortExampleSplits)\n}\n\n/**\n *  create entity objects from split sentences\n * eg synonym_value value value or value value value\n */\nfunction generateEntitySplits(text, entity) {\n    const splits = splitSentences(text)\n    var newSplits=[]\n    splits.map(function(text,i) {\n        if (text && text.trim().length > 0) {\n            var parts = extractSynonym(text.trim())\n            parts[1].map(function(alternative) {\n                newSplits.push({'id':generateObjectId(), 'value':alternative, synonym:parts[0], \"tags\":entity? [entity] : []})\n                return null\n            })\n        }\n        return null\n    })\n    return newSplits.sort(sortExampleSplits)\n}\n\n\n/**\n *  create entity objects from split sentences\n */\nfunction generateUtteranceSplits(text, tag) {\n        ////console.log(['GEN UTT',text,tag])\n    const splits = splitSentences(text)\n    var newSplits=[]\n    splits.map(function(text,i) {\n        if (text && text.trim().length > 0) {\n            newSplits.push({'id':generateObjectId(), 'value':text.trim().replaceAll(' ','_'), synonym:text, \"tags\":tag ? [tag] : []})\n        }\n        return null\n    })\n    return newSplits.sort(sortExampleSplits)\n}\n\n\n/**\n *  create entity objects from split sentences\n */\nfunction generateMycroftUtteranceSplits(text, utterance) {\n    var newSplits=[]\n    if (utterance) {\n        const splits = splitSentences(text)\n        //splits.map(function(text,i) {\n            if (text && text.trim().length > 0) {\n                newSplits.push({'id':generateObjectId(), 'value':utterance.trim().replaceAll(' ','_'), synonym:splits.join(\"\\n\"), \"tags\":[]})\n            }\n            //return null\n        //})\n    }\n    return newSplits.sort(sortExampleSplits)\n}\n    \nfunction cleanListItem(text) {\n    return text ? text.replace(/[^0-9a-z ,]/gi, '') : ''\n}\n\n/**\n *  try to extract a synonym from a line of text by splitting on _\n */\nfunction extractSynonym(text) {\n    if (text) { \n        var parts = text.split('___')\n        if (parts.length > 1) {\n           return [parts[0],parts.slice(1)]   \n        } else {\n            return ['',[text]]\n        }\n    } else {\n        return ['',[]]\n    }\n}\n/**\n *   extract utterances alternatives by splitting on _\n */\nfunction extractAlternatives(text) {\n    if (text) { \n        var parts = text.split('___')\n        if (parts.length > 1) {\n           return [parts[0],parts.slice(1).join(\"\\n\")]   \n        } else {\n            return [text,'']\n        }\n    } else {\n        return ['','']\n    }\n}\n\nfunction sortListSplits(a,b) {\n    if (a.value < b.value) return -1;  else return 1;\n}\n\nfunction sortExampleSplits(a,b) {\n    if (a.example < b.example) return -1 ;else return 1;\n}\n\n\n    function extractLookupFilenamesFromRasaMd(item) {\n        var filenames=[]\n        if (item.data) {\n            item.data.split(\"##\").map(function(intentData,intentKey) {\n                var lines = intentData.split(\"\\n\")  \n                var headerLine = lines[0].trim()\n                var dataLines = (lines.length > 1) ? lines.slice(1) : []\n                if (headerLine.startsWith(\"lookup\")) {\n                     for (var i in dataLines) {\n                         filenames.push(dataLines[i])\n                     }\n                }\n            })\n        }\n    }       \n\n    function generateIntentSplitsForMycroft(item, intentLabel) {\n        var intents = []\n        if (item) {\n            item.split(\"\\n\").map(function(intentExample,intentKey) {\n                expandOptions(intentExample).map(function(line) {\n                    var intent = extractEntities(line)\n                    intent.intent = intentLabel;\n                    intents.push(intent)\n                })\n            })\n        }\n        return intents\n        \n        function extractEntities(text) {\n            var entities=[]\n            var latestText = text\n            var b = balanced('{','}',latestText)\n            var limit = 20\n            while (b && limit) {\n                var entity = { value:b.body, start: b.start, end: b.end, type:b.body }\n                entities.push(entity)\n                latestText = b.pre + b.body + b.post\n                b = balanced('{','}',latestText)\n                limit --\n            }\n            return {'id':generateObjectId(), example: latestText, entities: entities, tags:[]}\n        }\n\n    }\n\n\n    function generateSplitsFromRasaMd(item, files) {\n        var allIntents=[]\n        var allEntities={}\n        var allRegexps={}\n        var allSynonyms={}\n        var entitiesFromLookup={}\n                                           \n        var items = []\n        if (item.data) {\n            item.data.split(\"##\").map(function(intentData,intentKey) {\n                var lines = intentData.split(\"\\n\")  \n                var headerLine = lines[0].trim()\n                var headerLineParts = headerLine.split(\":\")\n                var section = headerLineParts[0]\n                var dataLines = (lines.length > 1) ? lines.slice(1) : []\n                \n                if (section === \"regex\") {\n                    var regexTitle = headerLine.slice(6).trim()\n                    for (var i in dataLines) {\n                        var value = dataLines[i].slice(1).trim() // remove leading -\n                        if (regexTitle && value) {\n                            allRegexps[regexTitle] = Array.isArray(allRegexps[regexTitle]) ? allRegexps[regexTitle]  : []\n                            allRegexps[regexTitle].push({id: generateObjectId(), value: regexTitle, synonym: value})\n                        }\n                    }\n                } else if (section === \"synonym\") {\n                    var synonym = headerLine.slice(8).trim()\n                    for (var i in dataLines) {\n                        var value = dataLines[i].slice(1).trim() // remove leading -\n                        if (synonym && value) {\n                            allSynonyms[synonym] = Array.isArray(allSynonyms[synonym]) ? allSynonyms[synonym]  : []\n                            allSynonyms[synonym].push(value)\n                        }\n                    }\n                } else if (section === \"lookup\") {\n                    // NOTE lookups can only be loaded if files are also provided (from zip), reading a single MD/JSON nlu data file will skip the lookups\n                    if (files) {\n                        var entityType = headerLine.slice(7).trim()\n                        for (var i in dataLines) {\n                            var path = dataLines[i].trim()\n                            if (path && files[path]) {\n                                var entityLines = files[path].split(\"\\n\")\n                                entityLines.map(function(value) {\n                                    if (value && value.trim()) {\n                                        if (entitiesFromLookup[value]) {\n                                            entitiesFromLookup[value].tags = entitiesFromLookup[value].tags ? uniquifyArray(entitiesFromLookup[value].tags.push(entityType)) : []\n                                        } else {\n                                            entitiesFromLookup[value] = {tags:  [entityType]}\n                                        }\n                                    }\n                                })\n                            } \n                        }\n                    }\n                } else if (section === \"intent\") {\n                    \n                    var intent = headerLine.slice(7)\n                    for (var i in dataLines) {\n                        var entities = {}\n                        var example = dataLines[i].slice(1).trim() // remove leading -\n                        var intentData = {intent: intent, example: example}\n                        if (example.length > 0) {\n                            //console.log(example)// extract entities\n                            var remainder = example\n                            var cleanString = example\n                            var parts = balanced('[', ']', remainder)\n                            ////console.log(['PAREN',parts])\n                            var limit=10\n                            while (limit > 0 && parts && parts !== undefined && typeof parts === \"object\") {\n                                var entity = {}\n                            \n                                limit --\n                                remainder = parts.post\n                                entity.value = parts.body\n                                entity.start = parts.start\n                                entity.end = parts.end\n                                //cleanString = cleanString.slice(0,entity.start) + entity.value + cleanString.slice(entity.end+1)\n                                \n                                var remainderParts = balanced('(',')',parts.post)\n                                var remainderJSONParts = balanced('{','}',parts.post)\n                                ////console.log(['PARENEND',entity, cleanString, remainderParts])\n                                if ((remainderParts && remainderParts.body) && (remainderJSONParts && remainderJSONParts.body)) {\n                                    // both in remainder so use earliest start\n                                    if (remainderJSONParts.start < remainderParts.start) {\n                                        try {\n                                            var entityTypeParts = JSON.parse(\"{\"+remainderJSONParts.body+\"}\")\n                                            entity.type = entityTypeParts.entityTypes\n                                            if (entityTypeParts.synonym && entityTypeParts.synonym.length > 0) {\n                                                allSynonyms[entityTypeParts.synonym] = allSynonyms[entityTypeParts.synonym] ? allSynonyms[entityTypeParts.synonym] : []\n                                                allSynonyms[entityTypeParts.synonym].push(entity.value)\n                                                entity.synonym = entityTypeParts.synonym\n                                            }\n                                        } catch (e) {}\n                                        //cleanString = cleanString.slice(0,remainderJSONParts.start) + cleanString.slice(remainderJSONParts.end+1)\n                                    } else {\n                                        var entityTypeParts = remainderParts.body.split(\":\")\n                                        entity.type = entityTypeParts[0]\n                                        if (entityTypeParts.length > 1 && entityTypeParts[1].length > 0) {\n                                            allSynonyms[entityTypeParts[1]] = allSynonyms[entityTypeParts[1]] ? allSynonyms[entityTypeParts[1]] : []\n                                            allSynonyms[entityTypeParts[1]].push(entity.value)\n                                            entity.synonym = entityTypeParts[1]\n                                        }\n                                        //cleanString = cleanString.slice(0,remainderParts.start) + cleanString.slice(remainderParts.end+1)\n                                    } \n                                } else if (remainderJSONParts && remainderJSONParts.body) {\n                                    try {\n                                            var entityTypeParts = JSON.parse(\"{\"+remainderJSONParts.body+\"}\")\n                                            //console.log(['JS ent parts',entityTypeParts])\n                                            entity.type = entityTypeParts.entityTypes\n                                            if (entityTypeParts.synonym && entityTypeParts.synonym.length > 0) {\n                                                allSynonyms[entityTypeParts.synonym] = allSynonyms[entityTypeParts.synonym] ? allSynonyms[entityTypeParts.synonym] : []\n                                                allSynonyms[entityTypeParts.synonym].push(entity.value)\n                                                entity.synonym = entityTypeParts.synonym\n                                            }\n                                        } catch (e) {}\n                                        //cleanString = cleanString.slice(0,remainderJSONParts.start) + cleanString.slice(remainderJSONParts.end+1)\n                                } else if (remainderParts && remainderParts.body) {\n                                    var entityTypeParts = remainderParts.body.split(\":\")\n                                    //console.log(['OT ent parts',entityTypeParts])\n                                    entity.type = entityTypeParts[0]\n                                    if (entityTypeParts.length > 1 && entityTypeParts[1].length > 0) {\n                                        allSynonyms[entityTypeParts[1]] = allSynonyms[entityTypeParts[1]] ? allSynonyms[entityTypeParts[1]] : []\n                                        allSynonyms[entityTypeParts[1]].push(entity.value)\n                                        entity.synonym = entityTypeParts[1]\n                                    }\n                                    cleanString = parts.pre + entity.value + parts.post.slice(0,remainderParts.start) + parts.post.slice(remainderParts.end+1)\n                                } else {\n                                    throw new Error('Invalid bracket structure at line '+intentKey)\n                                }\n                                if (entity.value && entity.type) console.log(['ENTITY',entity, cleanString])\n                                else console.log(['NOENTITY',entity, cleanString])\n                                //allEntities[entity.type] = entity\n                                intentData.entities = Array.isArray(intentData.entities) ? intentData.entities : []\n                                intentData.entities.push(entity)\n                                if (entity.value) allEntities[entity.value] = {id: generateObjectId(), value: entity.value, synonym: entity.synonym, start: entity.start, end: entity.end, tags: [entity.type]}\n                                parts = balanced('[', ']', remainder)\n                            }\n                            intentData.example = cleanString\n                            allIntents.push(intentData)\n                            //console.log(['INTENT',intentData])\n                            \n                            \n                        }\n                    }\n                }\n                \n            })\n            \n        } \n        //// merge synonyms into all entities\n        //console.log(['rasa MD IMPORT MERGE',allSynonyms, entitiesFromLookup, allEntities])\n        //// merge entities from lookups\n        //Object.keys(entitiesFromLookup).map(function(entity) {\n            //var entityData = entitiesFromLookup[entity]\n            //if (entityData.value) {\n                //if (allEntities[entityData.value]) {\n                    //allEntities[entityData.value].tags = allEntities[entityData.value].tags ? uniquifyArray([].concat(allEntities[entityData.value].tags, entityData.tags)) : entityData.tags\n                //}\n            //}\n            //return null\n        //}) \n        //Object.keys(allSynonyms).map(function(synonym) {\n            //if (Array.isArray(allSynonyms[synonym])) allSynonyms[synonym].map(function(synValue) {\n                //if (allEntities[synValue]) {\n                    //allEntities[synValue].synonym = synonym\n                //} else {\n                    //allEntities[synValue] = {id: generateObjectId(), value: synValue, synonym: synonym}\n                //}\n            //})  \n            //return null\n        //}) \n   \n        var final = {intents: allIntents, regexps: Object.values(allRegexps), entities : Object.values(allEntities)}\n        //console.log(['rasa MD IMPORT',final])\n        return final\n    }\n\n    function generateSplitsFromRasaJson(item, files) {\n        var allIntents={}\n        var allEntities={}\n        var allRegexps={}\n        var allSynonyms={}\n        var entitiesFromLookup={}\n        try {\n            var json = JSON.parse(item.data)\n            console.log(['rasa JSON impORT',json])\n            if (json && json.rasa_nlu_data && json.rasa_nlu_data.regex_features) {\n                for (var i in json.rasa_nlu_data.regex_features) {\n                    var regex = json.rasa_nlu_data.regex_features[i]\n                    if (regex.name && regex.name.trim().length > 0 && regex.pattern && regex.pattern.trim().length > 0) {\n                        allRegexps[regex.name]={'id':generateObjectId(), 'value':regex.name,'synonym': synonym.pattern}\n                    }\n                }\n            }\n            if (json && json.rasa_nlu_data && json.rasa_nlu_data.entity_synonyms) {\n                for (var i in json.rasa_nlu_data.entity_synonyms) {\n                    var synonym = json.rasa_nlu_data.entity_synonyms[i]\n                    if (synonym.value && synonym.value.trim().length > 0 && synonym.synonyms && synonym.synonyms.length > 0) {\n                        allSynonyms[synonym.value] = allSynonyms[synonym.value] ? [].concat(allSynonyms[synonym.value], synonym.synonyms) : []\n                        //allSynonyms[synonym.value].push({'id':generateObjectId(), 'value':synonym.value,'synonym': synonym.pattern})\n                    }\n                }\n            }\n            if (files && json && json.rasa_nlu_data && json.rasa_nlu_data.lookup_tables) {\n                for (var i in json.rasa_nlu_data.lookup_tables) {\n                    var lookup = json.rasa_nlu_data.lookup_tables[i]\n                    var entityType = lookup.name\n                    var path = lookup.elements.trim()\n                    if (path && files[path]) {\n                        var entityLines = files[path].split(\"\\n\")\n                        entityLines.map(function(value) {\n                            if (value && value.trim()) {\n                                if (entitiesFromLookup[value]) {\n                                    entitiesFromLookup[value].tags = entitiesFromLookup[value].tags ? uniquifyArray(entitiesFromLookup[value].tags.push(entityType)) : []\n                                } else {\n                                    entitiesFromLookup[value] = {tags:  [entityType]}\n                                }\n                            }\n                        })\n                    } \n                \n                }\n            }\n \n            if (json && json.rasa_nlu_data && json.rasa_nlu_data.common_examples) {\n                for (var i in json.rasa_nlu_data.common_examples) {\n                    var entity = json.rasa_nlu_data.common_examples[i]\n                    //console.log(entity)\n                    var cleanEntities = entity.entities ? entity.entities.map(function(el,j) { return {type:el.entity, value:el.value, start:el.start, end:el.end} }) : []\n                    // entities\n                    cleanEntities.map(function(entity) {\n                        if (allEntities[entity.value]) {\n                            allEntities[entity.value].tags = allEntities[entity.value].tags ? uniquifyArray([].concat(allEntities[entity.value].tags, [entity.type])) : [entity.type]\n                        } else {\n                            allEntities[entity.value] = {id: generateObjectId(), value: entity.value, start: entity.start, stop: entity.stop,  tags: [entity.type]}\n                        }\n                        //= allEntities[entity.value] ? allEntities[entity.value] : {}\n                        //allEntities[entity.value].\n                    })\n                    //if (entity.text && entity.text.trim()) {\n                        allIntents[entity.text] = {'id':generateObjectId(), 'example':entity.text,'intent':entity.intent,\"entities\":cleanEntities, tags:[]}\n                    //}\n                }\n            }\n            //console.log(['rasa json IMPORT INTENTS',allIntents])\n        } catch(e) {\n            console.log(e)\n        }\n       \n        // merge synonyms into all entities\n        //console.log(['rasa MD IMPORT MERGE',allSynonyms, entitiesFromLookup, allEntities])\n        // merge entities from lookups\n        Object.keys(entitiesFromLookup).map(function(entity) {\n            var entityData = entitiesFromLookup[entity]\n            if (entityData.value) {\n                if (allEntities[entityData.value]) {\n                    allEntities[entityData.value].tags = allEntities[entityData.value].tags ? uniquifyArray([].concat(allEntities[entityData.value].tags, entityData.tags)) : entityData.tags\n                }\n            }\n            return null\n        }) \n        Object.keys(allSynonyms).map(function(synonym) {\n            if (Array.isArray(allSynonyms[synonym])) allSynonyms[synonym].map(function(synValue) {\n                if (allEntities[synValue]) {\n                    allEntities[synValue].synonym = synonym\n                } else {\n                    allEntities[synValue] = {id: generateObjectId(), value: synValue, synonym: synonym}\n                }\n            })  \n            return null\n        }) \n   \n        var final = {intents: Object.values(allIntents), regexps: Object.values(allRegexps), entities : Object.values(allEntities)}\n        console.log(['rasa MD IMPORT',final])\n        return final\n    }\n\n    function generateSplitsFromJovoJson(item) {\n        var items = []\n        try {\n            var json = JSON.parse(item.data)\n            console.log(['JOVO IMPORT',json])\n            if (json && json.invocation && json.intents) {\n                json.intents.map(function(intent) {\n                    if (intent && intent.phrases) {\n                        intent.phrases.map(function(phrase) {\n                            //console.log(['JOVO IMPORT',phrase])\n                            if (phrase && phrase.trim().length > 0)  {\n                                 var entities = []\n                                if (intent.inputs) {\n                                    for (var inputKey in intent.inputs) {\n                                       var input = intent.inputs[inputKey]\n                                       ////console.log([phrase,input.name])\n                                       const markerStart = phrase.indexOf(\"{\"+input.name+\"}\")\n                                       if (markerStart !== -1)  {\n                                           phrase = phrase.replace(\"{\"+input.name+\"}\",input.name)\n                                       }\n                                       var entityi = {type:input.name, value:input.name , start: markerStart , end: markerStart + input.name.length  }\n                                       entities.push(entityi)\n                                       return null\n                                    }\n                                }\n                                //console.log(['JOVO IMPORT pushg item',intent.name])\n                                \n                                items.push({'id':generateObjectId(), 'example':phrase.trim(),'intent':intent.name,\"entities\": entities, tags: []})\n                                //console.log(['JOVO IMPORT pushed item',JSON.parse(JSON.stringify(items))])\n                                \n                            }\n                            return null\n                        })\n                    }\n                    return null\n                })\n                console.log(['JOVO done IMPORT',items])\n            }\n        } catch(e) {}\n        return {intents: items}\n    }   \n\nexport default function useImportUtils() { return  {unzip, splitSentences, generateIntentSplits, generateEntitySplits, generateUtteranceSplits, generateMycroftUtteranceSplits,  cleanListItem, extractSynonym, sortListSplits, sortExampleSplits, detectFileType, generateSplitsFromJovoJson, generateSplitsFromRasaJson, generateSplitsFromRasaMd, generateIntentSplitsForMycroft}}\n","import useImportMergeFunctions from './useImportMergeFunctions'\nimport useImportUtils from './useImportUtils'\nimport {useHistory} from 'react-router-dom'\nimport {generateObjectId} from './utils'\nconst yaml = require('js-yaml');\n\nexport default function useImportFunctions(sendPageMessage) {\n    \n    const {mergeEntities, mergeIntents, mergeUtterances, mergeRegexps, mergeSkill} = useImportMergeFunctions()\n    const {unzip, splitSentences, generateIntentSplits, generateEntitySplits, generateUtteranceSplits, generateMycroftUtteranceSplits, generateIntentSplitsForMycroft, cleanListItem, extractSynonym, sortListSplits, sortExampleSplits, detectFileType, generateSplitsFromJovoJson, generateSplitsFromRasaJson, generateSplitsFromRasaMd} = useImportUtils()\n    const history = useHistory()\n    /* ONCLICK FUNCTIONS */   \n    \n\n    /**\n     * Import complete skill without review phase\n     */\n    \n    function importSkillJson(item) {\n        return new Promise(function( resolve, reject) {\n            var data = {}\n            try {\n                data = JSON.parse(item.data)\n                //console.log(['IMPSKILL',data])\n        \n                // create examples (intents)\n                if (data.title) {\n                    if (data.intents) {\n                        var intents = []\n                        Object.keys(data.intents).map(function(intent) {\n                            if (data.intents[intent]) {\n                                data.intents[intent].map(function(example) {\n                                      example.intent = intent\n                                      \n                                      intents.push(example)\n                                })\n                            }\n                        })\n                        mergeIntents(intents, data.title)\n                    }\n                    // create entities\n                    if (data.entitiesData) {\n                        var entities = []\n                        Object.keys(data.entitiesData).map(function(tag) {\n                            if (data.entitiesData[tag]) {\n                                data.entitiesData[tag].map(function(entity) {\n                                      entity.tags = Array.isArray(entity.tags) ? entity.tags : []\n                                      entity.tags.push(tag)\n                                      entities.push(entity)\n                                })\n                            }\n                        })\n                        mergeEntities(entities)\n                    }\n                    // create utterances\n                    if (data.utterancesData) {\n                        var utterances = []\n                        Object.values(data.utterancesData).map(function(utterance) {\n                            utterances.push(utterance)\n                        })\n                        mergeUtterances(utterances)\n                    }\n                    // create regexps\n                    if (data.regexps) {\n                        var regexps = data.regexps.map(function(utterance) {\n                            if (utterance) {\n                                return {value: utterance.name, synonym: utterance.synonym}\n                            }\n                            return {}\n                        })\n                        mergeRegexps(regexps)\n                    }\n                    mergeSkill(data)\n                }\n                // TODO CREATE OTHER RECORDS - INTENT,ENT,UTT,REG\n            } catch(e) {}\n            resolve(data)\n        })\n    }\n    \n\n    /**\n     * Import intents, entities, and utterances \n     */\n    function importAll(item) {\n        return new Promise(function(resolve, reject) {\n             //console.log(['import examples',item])\n             if (item) {\n                  switch(item.fileType) {\n                    case 'opennlu.skill':\n                        importSkillJson(item).then(function(skill) {\n                            //resolve(skill)  \n                            if (skill.title && skill.intents && Object.keys(skill.intents).length > 0) {\n                                setTimeout(function() {\n                                    history.push(\"/skills/skill/\"+skill.title)\n                                },500)\n                            } else {\n                                if (sendPageMessage) sendPageMessage('Failed to load skill. Missing title or intents.',3000)\n                            }\n                            if (sendPageMessage) sendPageMessage('Imported',2000)\n                        })\n                        break;\n                    case 'mycroft.zip':\n                        importMycroft(item).then(function(skill) {\n                            resolve(skill)  \n                        })\n                        break;\n                    case 'rasa.json':\n                        const askill1 = generateSplitsFromRasaJson(item)\n                        resolve(askill1)\n                        break;\n                    case 'rasa.markdown':\n                        const askill2 = generateSplitsFromRasaMd(item)\n                        resolve(askill2)\n                        break;\n                    \n                    case 'jovo.json':\n                        const askill3 = generateSplitsFromJovoJson(item)\n                        resolve(askill3)\n                        break;\n                    case 'jovo.zip':\n                        importJovo(item).then(function(skill) {\n                            resolve(skill)  \n                        })\n                        break;\n                    case 'rasa.zip':\n                        importRASA(item).then(function(skill) {\n                            resolve(skill)  \n                        })\n                        break;\n                    default:\n                        reject({error:'Invalid file type for import'})\n                  }\n             } else {\n                reject({error:'Failed to import'})\n            }\n        })\n    }\n    \n    \n    function importTextIntents(item, intent = '') {\n         //console.log(['text',item.data])\n         return generateIntentSplits(item.data, intent)\n       }\n    \n        \n    function importTextEntities(item, entity = '') {\n         //console.log(['text',item.data])\n         return generateEntitySplits(item.data, entity)\n    }\n    \n        \n    function importTextUtterances(item, utterance = '') {\n         //console.log(['text',item.data])\n         return {utterances: generateUtteranceSplits(item.data, utterance)}\n    }\n    \n    \n    function importJsonIntents(item) {\n        return new Promise(function( resolve, reject) {\n            //console.log(['json',item.data])\n            resolve([])\n        })\n    }\n    \n    function importJsonEntities(item) {\n        return new Promise(function( resolve, reject) {\n            //console.log(['json',item.data])\n            resolve([])\n        })\n    }\n    \n    function importJsonUtterances(item) {\n        return new Promise(function( resolve, reject) {\n            //console.log(['json',item.data])\n            resolve([])\n        })\n    }\n    \n    \n    function importJovo(item) {\n        console.log(['imp jovo',item])\n        return new Promise(function( resolve, reject) {\n            unzip(item.data,['*/en-US.json']).then(function(files) {\n                console.log(['jovo fil',files])\n                if (files) files.map(function(file) {\n                    var splits = generateSplitsFromJovoJson(file)\n                    console.log(['jovo spl',splits])\n                    resolve(splits)\n                \n                })\n            })\n        })\n    }\n    \n    function importRASADomainFile(content, skill) {\n        try {\n            var yml = yaml.safeLoad(content);\n            if (yml) {\n                skill.rasa.actions = yml.actions.join(\"\\n\")\n                if (yml.slots) {\n                    var newSlots = []\n                    skill.slots = Object.keys(yml.slots).map(function(slot) {\n                        var newSlot = {slotAutofill: slot.auto_fill ? true : false, slotType: slot.type ? slot.type : 'unfeaturized', values : Array.isArray(slot.values) ? slot.values  : [] }\n                        newSlots.push(newSlot)\n                    })\n                    skill.rasa.slots = newSlots\n                }\n                // TODO intent - use_entities intents[{ask_followup_attribute: {use_entities:  [\"attribute\", \"word\", \"person\", \"place\", \"thing\"]}}]\n                if (yml.responses) {\n                    var utterances=[]\n                    Object.keys(yml.responses).map(function(utteranceKey) {\n                        var alts=[]\n                        yml.responses[utteranceKey].map(function(alt) {\n                            alts.push(alt.text)\n                        })\n                        utterances.push({'id':generateObjectId(), 'value':utteranceKey, synonym:alts.join(\"\\n\")})\n                    })\n                }\n                if (yml.session_config) {\n                    var configLines = []\n                    Object.keys(yml.session_config).map(function(configLine) {\n                        configLines.push(\" - \"+configLine+\" : \"+yml.session_config[configLine])\n                    })\n                    skill.rasa.session = \"session_config:\\n\"+ configLines.join(\"\\n\")\n                }\n             }\n            \n            ////console.log('rasa domain',yml)\n        } catch(e) {}\n        return skill\n    }\n    \n    function importRASA(item) {\n        return new Promise(function( resolve, reject) {\n            unzip(item.data,['*/config.yaml','*/credentials.yaml','*/endpoints.yaml','*/domain.yaml','*/config.yml','*/credentials.yml','*/endpoints.yml','*/domain.yml','*.md','*.json']).then(function(files) {\n                ////console.log(['rasa',files])\n                var skill = {rasa: {}, entities:[], regexps: [], intents: []}\n                if (files) files.map(function(file) {\n                    if (file.path && (file.path.endsWith('config.yml') || file.path.endsWith('config.yaml'))) {\n                        skill.rasa.config = file.data\n                    } else if (file.path && (file.path.endsWith('credentials.yml')||file.path.endsWith('credentials.yml'))) {\n                        skill.rasa.credentials = file.data\n                    } else if (file.path && (file.path.endsWith('endpoints.yml') || file.path.endsWith('endpoints.yaml'))) {\n                        skill.rasa.endpoints = file.data\n                    } else if (file.path && (file.path.endsWith('domain.yml') || file.path.endsWith('domain.yaml'))) {\n                        skill = importRASADomainFile(file.data,skill)\n                    } else if (file.path && file.path.endsWith('.json')) {\n                        var intentSkill = generateSplitsFromRasaJson(file, files)\n                        console.log(['IMPORTED RASA JSON',intentSkill,file]) \n                        skill.intents = [].concat(skill.intents,intentSkill.intents)\n                        skill.regexps = [].concat(skill.regexps,intentSkill.regexps)\n                        skill.entities = [].concat(skill.entities,intentSkill.entities)\n                    } else if (file.path && file.path.endsWith('.md')) {\n                        var intentSkill = generateSplitsFromRasaMd(file, files)\n                        console.log(['IMPORTED RASA MD',intentSkill,file]) \n                        skill.intents = [].concat(skill.intents,intentSkill.intents)\n                        skill.regexps = [].concat(skill.regexps,intentSkill.regexps)\n                        skill.entities = [].concat(skill.entities,intentSkill.entities)\n                    }\n                    //console.log(file) \n                })\n                console.log(['IMPORTED RASA',skill]) \n                resolve(skill)\n            })\n        })\n    }\n    \n    function importMycroft(item) {\n        return new Promise(function( resolve, reject) {\n            unzip(item.data,['*.intent','*.dialog','*.entity']).then(function(files) {\n                ////console.log(['mycroft',files])\n                var skill = {}\n                var utterances=[]\n                var intents=[]\n                var entities = []\n                \n                function nameFromFilename(fullPath) {\n                    if (fullPath && fullPath.split) {\n                        var pathParts = fullPath.split(\"/\")\n                        var fileName = pathParts[pathParts.length -1]\n                        var intentName = fileName.slice(0,fileName.length - 7)\n                        return intentName\n                    }\n                    return '_'\n                }\n                \n                if (files) {\n                    files.map(function(file) {\n                        \n                        // for now no internationalisation\n                       if (file && file.path && file.path.toLowerCase().indexOf('/en-us/') !== -1)  {\n                           var fileParts = file.path.split(\"/\")\n                           var name = nameFromFilename(file.path)\n                           if (file.path.endsWith('.intent') && file.data) {\n                               //console.log(file.path, file.data, generateIntentSplits(file.data, name))\n                               var intent = fileParts.length > 1 ? fileParts[fileParts.length -1].replace('.intent','') : ''\n                               intents = [].concat(generateIntentSplitsForMycroft(file.data, intent), intents)\n                           } else if (file.path.endsWith('.dialog')) {\n                               var parts = file.path.split(\"/\")\n                               var fileName = parts[parts.length -1]\n                               //console.log(file.path, file.data, generateUtteranceSplits(file.data, name))   \n                               var utterance = fileParts.length > 1 ? fileParts[fileParts.length -1].replace('.dialog','')  : ''\n                               utterances = [].concat(generateMycroftUtteranceSplits(file.data, fileName.replace('.dialog','')), utterances)\n                           } else if (file.path.endsWith('.entity')) {\n                               //console.log(file.path, file.data, generateEntitySplits(file.data, name)) \n                               var entity = fileParts.length > 1 ? fileParts[fileParts.length -1].replace('.entity','')  : ''\n                               entities = [].concat(generateEntitySplits(file.data, entity), entities)\n                           }\n                       }\n                    })\n                }\n                skill.utterances = utterances\n                skill.intents = intents\n                skill.entities = entities\n                //console.log(['MYIMNPO',skill])\n                resolve(skill)\n            })\n        })\n    }\n\n    function importEntities(item) {\n          return new Promise(function(resolve, reject) {\n             //console.log(['import entities',item])\n             if (item) {\n                  if (item.fileType === 'text') {\n                        resolve({entities:importTextEntities(item, item.title)})\n                  } else if (item.fileType.endsWith('.json')) {\n                        importJsonEntities(item).then(function(entities) {\n                            resolve({entities:entities})  \n                        })\n                  } else {\n                        throw new Error('Invalid file type for import')\n                  }\n             }\n             \n             reject('Failed to import')\n        })\n    }\n\n    function importUtterances(item) {\n         return new Promise(function(resolve, reject) {\n             //console.log(['import utterances',item])\n             if (item) {\n                  if (item.fileType === 'text') {\n                        resolve(importTextUtterances(item, item.title))\n                  } else if (item.fileType.endsWith('.json')) {\n                        importJsonUtterances(item).then(function(utterances) {\n                            resolve({utterances:utterances})  \n                        })\n                  } else {\n                        throw new Error('Invalid file type for import')\n                  }\n             }\n             reject('Failed to import')\n        })\n    }\n    \n\n    function importIntents(item) {\n          return new Promise(function(resolve, reject) {\n             //console.log(['import intents',item])\n             if (item) {\n                  if (item.fileType === 'text') {\n                        resolve({intents:importTextIntents(item, item.title)})\n                  } else if (item.fileType.endsWith('.json')) {\n                        importJsonIntents(item).then(function(intents) {\n                            resolve({intents:intents})  \n                        })\n                  } else {\n                        throw new Error('Invalid file type for import')\n                  }\n             }\n             reject('Failed to import')\n        })\n    }\n        \n    \n \n    \n    \n    return {importIntents, importUtterances, importEntities, importAll, detectFileType}\n}\n\n","import React from 'react';\nimport {Button, Dropdown, ButtonGroup, InputGroup} from 'react-bootstrap'\n\nconst TagAllDropDown = function(props) {\n    return <Dropdown  as={ButtonGroup}>\n          <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button   size=\"sm\" >{'Tag'} </Button>\n          <Dropdown.Menu>\n           <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.tagAll(e.target.value)}} >\n                <InputGroup>\n                  <input type=\"text\" className=\"form-control\" onChange={function(e) {props.setTagAllValue(e.target.value)}}\n                value={props.tagAllValue} />\n                <Button variant=\"success\" onClick={function(e) {props.tagAll(props.tagAllValue)}} >Add</Button>\n                </InputGroup>\n                \n              </form>\n              {props.lookups.tagLookups && props.lookups.tagLookups.sort().map(function(skillKey,i) {\n              return <Dropdown.Item key={i} value={skillKey}  >\n                <Button variant=\"success\" onClick={function(e) {props.setTagAllValue(skillKey); props.tagAll(skillKey)}} >Add {skillKey}</Button>\n                <Button variant=\"danger\" onClick={function(e) { props.untagAll(skillKey)}} style={{marginLeft: '0.5em'}}>Remove</Button></Dropdown.Item>\n    })}\n          </Dropdown.Menu>\n      </Dropdown>\n      \n              //return <Dropdown  as={ButtonGroup}>\n              //<Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n              //<Button   size=\"sm\" >{'Tag'} </Button>\n              //<Dropdown.Menu>\n               //<form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.tagAll(e.target.value)}} >\n                    //<div className=\"form-group\">\n                      //<input type=\"text\" className=\"form-control\" onChange={function(e) {props.setTagAllValue(e.target.value)}}\n                    //value={props.tagAllValue} />\n                    //</div>\n                  //</form>\n                  //{props.lookups.tagLookups && props.lookups.tagLookups.sort().map(function(tagKey,i) {\n                      //return <Dropdown.Item key={i} value={tagKey} onClick={function(e) {props.setTagAllValue(tagKey); props.tagAll(tagKey)}}  >{tagKey}</Dropdown.Item>\n                   //})}\n              //</Dropdown.Menu>\n          //</Dropdown>\n}\nexport default TagAllDropDown\n","import React from 'react';\nimport {Button, Dropdown, ButtonGroup} from 'react-bootstrap'\n\nconst IntentAllDropDown = function(props) {\n    return  <Dropdown  as={ButtonGroup}>\n              <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n              <Button   size=\"sm\" >{'Intent'} </Button>\n              <Dropdown.Menu>\n               <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.intentAll(e.target.value)}} >\n                    <div className=\"form-group\">\n                      <input type=\"text\" className=\"form-control\" onChange={function(e) {props.setIntentAllValue(e.target.value)}}\n                    value={props.intentAllValue} />\n                    </div>\n                  </form>\n                  {props.lookups.intentLookups && props.lookups.intentLookups.sort().map(function(intentKey,i) {\n                      return <Dropdown.Item key={i} value={intentKey} onClick={function(e) {props.setIntentAllValue(intentKey); props.intentAll(intentKey)}}  >{intentKey}</Dropdown.Item>\n                   })}\n              </Dropdown.Menu>\n          </Dropdown>\n}\nexport default IntentAllDropDown\n","import React from 'react';\nimport {Button, Dropdown, ButtonGroup, InputGroup} from 'react-bootstrap'\n\nconst SkillAllDropDown = function(props) {\n    return <Dropdown  as={ButtonGroup}>\n          <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button   size=\"sm\" >{'Skill'} </Button>\n          <Dropdown.Menu>\n           <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.skillSetAll(e.target.value)}} >\n                <InputGroup>\n                  <input type=\"text\" className=\"form-control\" onChange={function(e) {props.setSkillAllValue(e.target.value)}}\n                value={props.skillAllValue} />\n                <Button variant=\"success\" onClick={function(e) {props.skillSetAll(props.tagAllValue)}} >Add</Button>\n                </InputGroup>\n                \n              </form>\n              {props.lookups.skillLookups && props.lookups.skillLookups.sort().map(function(skillKey,i) {\n              return <Dropdown.Item key={i} value={skillKey}  >\n                <Button variant=\"success\" onClick={function(e) {props.setSkillAllValue(skillKey); props.skillSetAll(skillKey)}} >Add to {skillKey}</Button>\n                <Button variant=\"danger\" onClick={function(e) { props.unskillAll(skillKey)}} style={{marginLeft: '0.5em'}}>Remove</Button></Dropdown.Item>\n    })}\n          </Dropdown.Menu>\n      </Dropdown>\n      \n      \n    \n    //return <Dropdown  as={ButtonGroup}>\n          //<Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          //<Button   size=\"sm\" >{'Skill'} </Button>\n          //<Dropdown.Menu>\n           //<form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.skillSetAll(e.target.value)}} >\n                //<div className=\"form-group\">\n                  //<input type=\"text\" className=\"form-control\" onChange={function(e) {props.setSkillAllValue(e.target.value)}}\n                //value={props.skillAllValue} />\n                //</div>\n              //</form>\n              //{props.lookups.skillLookups && props.lookups.skillLookups.sort().map(function(skillKey,i) {\n              //return <Dropdown.Item key={i} value={skillKey} onClick={function(e) {props.setSkillAllValue(skillKey); props.skillSetAll(skillKey)}}  >{skillKey}</Dropdown.Item>\n    //})}\n          //</Dropdown.Menu>\n      //</Dropdown>\n}\nexport default SkillAllDropDown\n","/* global window */\nimport {Link} from 'react-router-dom'\nimport {Button, ListGroup } from 'react-bootstrap'\nimport ImportListsDropDown from './ImportListsDropDown'\n\nimport React, {Fragment} from 'react';\nimport FileReaderInput from 'react-file-reader-input';\n\nimport TagAllDropDown from './TagAllDropDown'\nimport IntentAllDropDown from './IntentAllDropDown'\nimport SkillAllDropDown from './SkillAllDropDown'\n\n\nimport helpSVG from '../images/helpoverview.svg'\n\nfunction MatchesTallies(props) {\n    return <span style={{float:'left', fontWeight:'bold'}} >&nbsp;{props.filteredItems.length}/{props.items.length} matches </span>\n}\n\nfunction HelpMenu(props) {\n    return <div>\n        <Link style={{marginRight:'1em'}} to=\"/help\" ><Button>Home</Button></Link>\n        <Link style={{marginRight:'1em'}} to=\"/helpimport\" ><Button>Import</Button></Link>\n        <Link style={{marginRight:'1em'}} to=\"/helpexport\" ><Button>Export</Button></Link>\n        <Link style={{marginRight:'1em'}} to=\"/helpabout\" ><Button>About</Button></Link>\n    </div>\n}\n\nfunction HelpText(props) { \n    return <div style={{marginLeft:'0.5em'}}>\n        <HelpMenu/>\n        <h1>NLU tool</h1>\n        <img src={helpSVG} style={{width: '80%', height:'15em' }} alt=\"Help Overview\"/>\n<br/><br/>        \n        <div>This tool helps voice developers build vocabularies for their applications by providing <b>import and export of various NLU training data formats</b>, and a <b>searchable database of community submitted, open licensed skills.</b>\n        </div>\n\n       <hr/>\n       <p><Link to=\"/search\" ><Button>Search </Button></Link> the community database of NLU example records.</p>\n         <p><Link to=\"/sources\" ><Button>Sources</Button></Link> to edit and import skills, pasted text or uploaded files.</p>\n        <p><Link to=\"/examples\" ><Button>Organise</Button></Link> your examples using tags and markup the entities in your intent examples.</p>\n        <p><Link to=\"/skills\" ><Button>Skills</Button></Link> to add platform metadata for export in various training formats or publishing to the community database.</p>\n        \n        <hr/>\n        <h3>Features</h3>\n        <ul>\n            <li>Search for open licenced training data submitted by the community</li>\n            <li>Import training data from text files, RASA , JOVO (Alexa, Google), Mycroft and native JSON.</li>\n            <li>Edit training data and tag entities in intent examples</li>\n            <li>Filtering, tagging, multiple selection and bulk operations to quickly collect training data into an exportable skill</li>\n            <li>Virtual rendering with react-window is used to allow fast rendering of lists of intents and entities with many thousands of values</li>\n            <li>Export training data suitable for RASA, JOVO and Mycroft</li>\n            <li>Publish your skill to the community repository under an open source license</li>\n            \n        </ul>\n        <ul>\n            <li>This tool is a Progressive Web Application. Most features work without the Internet.</li>\n            <li>MIT Open Source licensed code at <a target=\"_new\" href=\"https://github.com/syntithenai/opennludata\" >Github</a></li>\n            <li>Cross platform nodejs server</li>\n            <li>Published skills are committed to Github to ensure long term availability of collected data.</li>\n            <li>To ensure ongoing availability, the web pages are hosted with github pages and the search interface relies on static data generated during publishing so a database/backend server is only required when publishing)</li>\n             <li>When the Internet is available, <b>this site uses Google Analytics to measure engagement and improve future versions.</b> </li>\n        </ul>\n        \n        \n        \n        \n    </div>\n}\n\nfunction HelpTextImport(props) { \n    return <div style={{marginLeft:'0.5em'}}>\n    <HelpMenu/>\n            <h1>Importing Data</h1>\n            <div>\n                This tool can import files a variety of file formats and allows you to cherry pick intents, entities and utterances.\n                <br/>\n                You can use zip files to to upload and import many files that make up a skill for Mycroft, RASA or JOVO.\n                <br/><br/>\n                <br/>\n                <h3>Supported File Types</h3>\n                <h4>OpenNlu JSON</h4>\n                The native format for this tool is a JSON based structure that describes a skill and related data. Grab and edit a skill from the search page to see the structure.\n                <br/><br/>\n                \n                <h4>Text</h4>\n                    Text files can be imported as intents, entities or utterances.<br/>\n                    The editor for text files provides sort and transformation tools.<br/>\n                    <ul>\n                    <li>One record is created for each line in the import file.</li>\n                    <li>When importing intents, multiple records are created for lines that use Mycroft style options expansion eg <i>the (man|woman|child) (walked to the (zoo|park)|ran to the train)</i></li>\n                    <li>It is possible to use RASA style entity markup which is converted to entities on import.</li>\n                    <li>When importing entities, ____ can be used to split a value and synonym from a line eg <i>synonymvalue____entityvalue</i></li>\n                    <li>When importing utterances, ____ can be used to create many addition alternatives eg <i>hi there____gday____howsitgoing</i>  </li>\n                    </ul>\n                <br/><br/>\n                \n                <h4>RASA</h4>\n                The tool can import rasa intent training data files in MD and JSON format.<br/>\n                Intents, entities, regular expressions (but not lookups) are imported.<br/><br/>\n                A zip file containing a root level domain.yml and some .md or .json files can also be imported.<br/>\n                Where the training data references lookup files, and those files are available in the zip, the lookup files will be used to import entities.\n                <br/><br/>\n                \n                <h4>JOVO</h4>\n                The tool can read either a single JSON model file or search in zip file for models/en-US.json.\n                This file is used to import intents and entities and an invocation for the skill.\n                JOVO entity markers provide an entity type but no example value so intents are imported with the entity type as the value. :(\n                <br/><br/>\n                \n                <h4>Mycroft</h4>\n                The tool can read a zip file containing .dialog, .intent and .entity files.\n                <br/><br/>\n                \n                \n            </div>\n            <hr/>\n        </div>\n}\n\nfunction HelpTextAbout(props) { \n    return <div style={{marginLeft:'0.5em'}}>\n    <HelpMenu/>\n            <h1>About</h1>\n<br/>\n            <div><h3>Bugs/Feedback</h3>Please share any feedback on the <a target=\"_new\" href=\"https://github.com/syntithenai/opennludata/issues\" >Github Issues Page</a></div>\n            <br/>\n             <div>The <a target=\"_new\" href=\"https://github.com/syntithenai/opennludata\" >source code</a> for this tool is available under an MIT Open Source Licence. </div>\n            <hr/>\n            \n             <div>Icons from  The Noun Project and others.</div>\n             <ul>\n             <li>Man Singing by Gan Khoon Lay from  <a href='https://thenounproject.com/term/man-singing/642288/' target=\"_new\" >The Noun Project</a></li>\n             <li>Head by hunotika from <a href='https://thenounproject.com/term/head/184237/' target=\"_new\" >The Noun Project</a></li>\n             </ul>\n             <hr/>\n              <div>Using many open source libraries including</div>\n                <ul>\n                <li><a target=\"_new\" href=\"https://www.npmjs.com/package/create-node-app\" >create-node-app</a> </li>\n                <li><a target=\"_new\" href=\"https://github.com/syntithenai/react-express-oauth-login-system\" >react-express-oauth-login-system</a> for oauth based login with support for social providers</li>\n                <li><a target=\"_new\" href=\"https://github.com/localForage/localForage\" >localForage</a> for cross platform local persistence.</li>\n                <li><a target=\"_new\" href=\"https://github.com/florianholzapfel/express-restify-mongoose\" >express-restify-mongoose</a> to simplify API development.</li>\n                <li><a target=\"_new\" href=\"https://github.com/bvaughn/react-window\" >react-window</a> for virtual rendering, allowing for lists with many thousands of elements.</li>\n                <li><a target=\"_new\" href=\"https://github.com/josdejong/jsoneditor\" >JSON editor</a> for editing uploaded sources.</li>\n                <li>react, bootstrap, express, mongodb and mongoose</li>\n                </ul>\n            <hr/>\n        </div>\n}\n\nfunction HelpTextExport(props) { \n    return <div style={{marginLeft:'0.5em'}}>\n    <HelpMenu/>\n            <h1>Exporting</h1>\n            <div>This tool can currently export to a number of formats including\n            <ul>\n                <li>Native JSON format</li>\n                <li>Mycroft intents and entities for Padatious NLU</li>\n                <li>RASA training data</li>\n                <li>JOVO model files</li>\n            </ul>\n            </div>\n\n        </div>\n}\n\n\nfunction NewFileButtons(props) {\n    return <span>\n        <Link to={props.match.url + '/text'} style={{float:'right'}} ><Button>Paste Text</Button></Link>\n        <FileSelector {...props}/>   \n    </span>\n}\n\n\nfunction ListsList(props) {\n     const { items} = props  \n     if (items) {\n       const list = Object.values(items).map(function(item,i) {\n            return <ListGroup.Item  key={i}  >\n                   <Button style={{float:'right', marginLeft:'0.5em'}} variant=\"danger\" onClick={function(e) {if(window.confirm('Really delete list '+items[i].title)) props.deleteItem(i)}} >Delete</Button>\n                   <Link to={props.match.url+\"/text/\"+item.id} ><Button style={{float:'right',marginLeft:'0.5em'}}  >Edit</Button></Link>\n                   <span style={{width:'90%'}}  >{item.title}</span>\n               </ListGroup.Item>\n        })\n        return <ListGroup>{list}</ListGroup>\n    } else {\n        return null\n    }\n}\n\nfunction FileSelector(props) {\n    return <form onSubmit={function(e) {e.preventDefault()}} style={{float:'right'}}>\n            <FileReaderInput multiple as=\"binary\" id=\"my-file-input\"\n                             onChange={props.handleFileSelection}>\n              <Button style={{ marginRight:'0.5em'}} >Select files</Button>\n            </FileReaderInput>\n          </form>\n}\n\nfunction WithSelectedDropDowns(props) {\n    return <Fragment>\n        <span>With {props.lookups.selectedTally} selected&nbsp;</span>\n               \n        <SkillAllDropDown skillSetAll={props.skillSetAll} skillAllValue={props.skillAllValue}  setSkillAllValue={props.setSkillAllValue}  lookups={props.lookups} untagAll={props.untagAll} unskillAll={props.unskillAll} />\n        <IntentAllDropDown intentAll={props.intentAll} intentAllValue={props.intentAllValue} setIntentAllValue={props.setIntentAllValue}  lookups={props.lookups} untagAll={props.untagAll} unskillAll={props.unskillAll} />\n        <TagAllDropDown tagAll={props.tagAll} tagAllValue={props.tagAllValue} setTagAllValue={props.setTagAllValue}  lookups={props.lookups} untagAll={props.untagAll} unskillAll={props.unskillAll} />\n    </Fragment>\n\n}\n\nexport { MatchesTallies,  HelpTextImport,HelpTextExport,HelpTextAbout,HelpText, NewFileButtons, ListsList, FileSelector, WithSelectedDropDowns}\n","import {Link} from 'react-router-dom'\nimport {Button,  Dropdown, ButtonGroup } from 'react-bootstrap'\nimport React, {useState, useEffect} from 'react';\n//import FileReaderInput from 'react-file-reader-input';\nimport {generateObjectId, parentUrl} from '../utils'\nimport { JsonEditor } from 'jsoneditor-react';\nimport 'jsoneditor-react/es/editor.min.css';\nimport ace from 'brace';\nimport 'brace/mode/json';\nimport 'brace/theme/github';\n//import useDB from './useDB'\n//import useDBSingleKey from './useDBSingleKey'\n//import {parseImportText} from './utils'\n//import localforage from 'localforage'\n//import {NewFileButtons, FileSelector, FilesList} from './Components'\n\nexport default function JSONTextEditor(props) {\n    const [title,setTitle] = useState(props.item && props.item.title ? props.item.title : '')\n    const [text, setText ] = useState(props.item && props.item.data ? props.item.data : '') \n    const [isJson, setIsJson ] = useState(false) \n    const [json, setJson ] = useState([]) \n    const [editorMode, setEditorMode] = useState('json')\n    const [editorOptions, setEditorOptions] = useState(['json','text'])\n    \n    const id = props.match.params.itemId ? props.match.params.itemId  : generateObjectId()\n    const { findKeyBy} = props  \n    const index = findKeyBy('id',id)\n   \n    \n    const transforms = [\n        {\n            name: 'sort',\n            callMe : function() {\n                var lines = text ? text.split(\"\\n\") : []\n                lines.sort()\n                setText(lines.join(\"\\n\"))\n            }\n        },\n        {\n            name: 'trim',\n            callMe : function() {\n                var lines = text ? text.split(\"\\n\") : []\n                var newLines=[]\n                lines.map(function(line) {\n                    newLines.push(line.trim())\n                })\n                setText(lines.join(\"\\n\"))\n            }\n        },\n        {\n            name: 'unique',\n            callMe : function() {\n                var lines = text ? text.split(\"\\n\") : []\n                var uniques={}\n                lines.map(function(line) {\n                    uniques[line] = true\n                })\n                setText(Object.keys(uniques).join(\"\\n\"))\n            }\n        },\n        {\n            name: 'lowercase',\n            callMe : function() {\n                setText(text? text.toLowerCase() : '')\n            }\n        },\n        {\n            name: 'uppercase',\n            callMe : function() {\n                setText(text? text.toUpperCase() : '')\n            }\n        },\n        {\n            name: 'capitalise',\n            callMe : function() {\n                var lines = text ? text.split(\"\\n\") : []\n                var newLines = lines.map(function(line) {\n                    var str = line.split(\" \");\n                    for (var i = 0, x = str.length; i < x; i++) {\n                        str[i] = str[i][0].toUpperCase() + str[i].substr(1);\n                    }\n                    return str.join(\" \");\n                })\n                setText(newLines.join(\"\\n\"))\n            }\n        },\n        {\n            name: 'JSON values',\n            callMe : function() {\n                var lines = text ? text.split(\"\\n\") : []\n                var newLines = lines.map(function(line) {\n                    return JSON.stringify({value: line})\n                })\n                setText(\"[\"+newLines.join(\",\\n\")+\"]\")\n            }\n        },\n        {\n            name: 'JSON examples',\n            callMe : function() {\n                var lines = text ? text.split(\"\\n\") : []\n                var newLines = lines.map(function(line) {\n                    return JSON.stringify({example: line})\n                })\n                setText(\"[\"+newLines.join(\",\\n\")+\"]\")\n            }\n        }\n        \n    ]\n    \n    useEffect(() => {\n        try {\n            if ((text[0] === \"[\" && text[text.length - 1] === \"]\") || (text[0] === \"{\" && text[text.length - 1] === \"}\")) {\n                var jsonParsed = JSON.parse(text)\n                setJson(jsonParsed)\n                setIsJson(true)\n                setEditorOptions(['json','text'])\n                setEditorMode('json')\n            } else {\n                setIsJson(false)\n                setEditorOptions(['text'])\n                setEditorMode('text')\n            }\n        } catch (e) {\n            setIsJson(false)\n            setEditorOptions(['text'])\n            setEditorMode('text')\n        }\n    \n    },[text])\n     \n    var parentLink = parentUrl(props.match.url)\n    var linkParts = props.match.url.split(\"/\")\n    // link up two where id is present\n    if (linkParts[linkParts.length -1] !== \"text\") {\n       parentLink = parentUrl(parentUrl(props.match.url)) \n    }\n    var editorModeOptions = editorOptions.map(function(value,j) {\n      return <Dropdown.Item key={j} value={value} onClick={function(e) {setEditorMode(value); }}  >{value}</Dropdown.Item>\n   })\n\n    return <div style={{minHeight:'60em'}}>\n          <Dropdown variant='info'  as={ButtonGroup}>\n\n          <Dropdown.Toggle variant='info'  split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button variant='info'   size=\"sm\"  >\n          <b>{editorMode}</b>\n          </Button>\n          <Dropdown.Menu>\n              {editorModeOptions}\n          </Dropdown.Menu>\n        </Dropdown>\n        {(!isJson || editorMode === \"text\") && <Dropdown variant='info'  style={{marginLeft:'1em'}}  as={ButtonGroup}>\n                  <Dropdown.Toggle variant='info'  split  size=\"sm\"  id=\"dropdown-transforms\" ></Dropdown.Toggle>\n                  <Button  variant='info'   size=\"sm\"  ><b>{'Transform'}</b></Button>\n                  <Dropdown.Menu>\n                      {transforms.map(function(transform) {return <Dropdown.Item key={transform.name} value={transform.name} onClick={transform.callMe}  >{transform.name}</Dropdown.Item>})}\n                  </Dropdown.Menu>\n                </Dropdown>}\n            <span style={{float:'right'}} >\n                \n                {(text && title) && <Link to={parentLink} ><Button onClick={function(e) {props.saveItem({id:id,title:title,data:text},index)}} variant='success' >Save</Button></Link>}\n                {!(text && title) && <Button variant='secondary' >Save</Button>}\n                \n                <Link  to={parentLink} ><Button variant=\"danger\" >Cancel</Button></Link>\n            </span>\n            <label>&nbsp;Title <input size={60}  type='text' onChange={function(e) { setTitle(e.target.value)}}  value={title} /></label>\n            {(!isJson || editorMode === \"text\") && <>\n                    \n                    <textarea style={{marginLeft: '0.2em', height:'100%', minHeight:'60em', width:'98%'}}  onChange={function(e) { setText(e.target.value)}}  value={text} ></textarea>\n                </>\n            }\n            {(isJson && editorMode === \"json\") && <div style={{marginLeft: '0.2em', height:'100%', minHeight:'60em', width:'98%'}} >\n                <JsonEditor\n                value={json}\n                theme={\"ace/theme/github\"}\n                ace={ace}\n                history={true}\n                mode={'code'}\n                allowedModes={['tree','code']}\n                onChange={function(value) { setText(JSON.stringify(value))}}\n            /></div>}\n           \n    </div>\n}\n","import {Route} from 'react-router-dom'\nimport React, {useEffect} from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport useDB from './useDB'\nimport useImportFunctions from './useImportFunctions'\nimport { saveAs } from 'file-saver';\nimport JSZip from 'jszip'\nimport {NewFileButtons} from './components/Components'\nimport JSONTextEditor from './components/JSONTextEditor'\n//import {generateObjectId, uniquifyArray } from './utils'\nimport {Link} from 'react-router-dom'\nimport {Button, ListGroup } from 'react-bootstrap'\n//import ImportListsDropDown from './components/ImportListsDropDown'\nimport localforage from 'localforage'\n\n// COMPONENTS\nfunction IndexPage(props) {\n    ////console.log(['man index ',props])\n    return <div>\n                 <NewFileButtons {...props} />\n                 <h1>Sources</h1>\n                 <FilesList {...props} />\n            </div>\n}\n\n\n\nfunction FilesList(props) {\n    ////console.log(['man fl ',props])\n       \n    var localforageStorageImport = localforage.createInstance({\n        name: 'nlutool',\n        storeName   :'importing',\n    });\n    \n    \n     const { items} = props  \n     var saveSkill=function (skill) {\n        localforageStorageImport.setItem('alldata',skill).then(function() {\n            props.history.push('/importreview')\n        })\n     }\n     var showError = function(e) {\n         if (e.error) props.setPageMessage(e.error,2000)\n         else props.setPageMessage(e.toString(),2000)\n     }\n     \n    function downloadZip(item) {\n        var zip = new JSZip();\n        zip.loadAsync(item.data)\n        .then(function(zip) {\n            zip.generateAsync({type:\"blob\"}).then(function (blob) { // 1) generate the zip file\n                saveAs(blob, item.title);      \n            })\n        });\n     }\n    \n     \n     if (items) {\n       const list = Object.values(items).map(function(item,i) {\n            return <ListGroup.Item  key={i}  >\n\n                   \n                  \n                    {(item && item.fileType) && <>\n                         <Button style={{float:'right', marginLeft:'0.5em'}} variant=\"danger\" onClick={function(e) {if(window.confirm('Really delete source '+item.title+'-'+i)) props.deleteItem(i)}} >Delete</Button>\n                    \n                    {item.fileType.endsWith(\".zip\") && <Button style={{float:\"right\", marginLeft:'0.5em'}} onClick={function() {downloadZip(item)}}>Download</Button>}\n\n                    {!item.fileType.endsWith(\".zip\") && <Button style={{float:\"right\", marginLeft:'0.5em'}} onClick={function() {saveAs(new Blob([item.data], {type: 'application/'+item.fileType}), item.title+'.'+item.fileType)}}>Download</Button>}\n    \n                   {/* Can't edit zip files*/}\n                   {!item.fileType.endsWith('.zip') && <Link to={props.match.url+\"/text/\"+item.id} ><Button style={{float:'right',marginLeft:'0.5em'}}  >Edit</Button></Link>}\n                   \n                   {item.fileType === \"text\" && <div className=\"textimportbuttons\" >\n                       <Button style={{float:'right', marginLeft:'0.5em'}} variant=\"success\" onClick={function(e) { props.importFunctions.importIntents(item).then(saveSkill).catch(showError)  }}    >Import Intents</Button>\n                       <Button style={{float:'right', marginLeft:'0.5em'}} variant=\"success\" onClick={function(e) { props.importFunctions.importEntities(item).then(saveSkill).catch(showError)  }}    >Import Entities</Button>\n                       <Button style={{float:'right', marginLeft:'0.5em'}} variant=\"success\" onClick={function(e) { props.importFunctions.importUtterances(item).then(saveSkill).catch(showError)  }}    >Import Utterances</Button>\n                    </div>}\n                    \n                    {item.fileType !== \"text\" && <>\n                       {/* Import whatever is available */}\n                       {<Button style={{float:'right', marginLeft:'0.5em'}} variant=\"success\" \n                           onClick={function(e) { \n                               props.importFunctions.importAll(item)\n                               // save import results and redirect to import overview\n                               .then(saveSkill).catch(showError) \n                            }}    >Import</Button>}\n                    </>}\n                    \n                   \n                   <span style={{width:'90%'}}  > {item.fileType && <Button>{item.fileType}</Button>}&nbsp;&nbsp;&nbsp;{item.title}</span>\n                 \n                  </>}\n               </ListGroup.Item>\n        })\n        return <ListGroup>{list}</ListGroup>\n    } else {\n        return null\n    }\n}\n //{/* Only import utterances */}\n                       //{(item.fileType === \"rasa.zip\" || item.fileType === \"mycroft.zip\"  || item.fileType === \"opennlu.zip\"  || item.fileType !== \"opennlu.lists\") && <Button style={{float:'right', marginLeft:'0.5em'}} variant=\"success\" onClick={function(e) { props.importFunctions.importUtterances(items[i]) }}    >Import Utterances</Button>}\n                       //{/* Only import entities */}\n                       //{<ImportListsDropDown lookups={props.lookups} importListTo={function(listName) {props.importFunctions.importEntities(items[i],listName)}} importTo={items[i].title} /> }\nexport default function LocalStorageUploadManager(props) {\n    ////console.log('man')\n    ////console.log(props)\n     \n    var importFunctions = useImportFunctions(props.setPageMessage)\n     \n\n     const {loadAll, saveItem, deleteItem ,items, findKeyBy, findBy} = useDB('nlutool','sources');\n    \n    // just on mount \n    useEffect(() => {\n        loadAll()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n    \n    \n    \n    function handleFileSelection(ev, results) {\n        ev.preventDefault()\n        if (results) {\n            results.forEach(result => {\n              const [e, file] = result;\n              //console.log(['upl result',e, file,e.target.result])\n               var item = {id:null, data:e.target.result, title:file.name}\n               importFunctions.detectFileType(item).then(function(fileData) {\n                    if (fileData && fileData.type) {\n                        item.fileType = fileData.type\n                        item.created_date = new Date().getTime()\n                        //if (item.fileType.endsWith('.zip')) {\n                            //item.data = new File([item.data],'application/zip')\n                        //}\n                        //console.log(['SET ITEM TYPE', item.fileType])\n                        saveItem(item,0)\n                    } else {\n                        props.setPageMessage('Invalid file type')\n                        setTimeout(function() {\n                            props.setPageMessage('')\n                        },2000)\n                    }\n                })\n            });\n            \n        }\n    }    \n  \n    function saveItemWrap(item,index) {\n        importFunctions.detectFileType(item).then(function(fileData) {\n            item.fileType = fileData.type\n            item.created_date = new Date().getTime()\n            //console.log(['SET ITEM TYPE', item.fileType])\n            saveItem(item,index)\n        })\n    }\n    \n    ////console.log(['RENDER LOMAN',props])\n    return (\n        <div className=\"LocalStorageUploadManager\" >\n            <Route \n                path={[`${props.match.path}/text/:itemId?`, `${props.match.path}/text`]}  \n                render={(props) => <JSONTextEditor {...props} \n                    item={findBy('id',props.match.params.itemId)} \n                    saveItem={saveItemWrap} deleteItem={deleteItem} findKeyBy={findKeyBy} \n                    \n                />}     \n            />\n            <Route {...props} exact path={props.match.path} \n                render={function(iprops) { return  <IndexPage {...props} \n                    items={items}\n                    deleteItem={deleteItem} saveItem={saveItemWrap} importFunctions={importFunctions} \n                    handleFileSelection={handleFileSelection} \n                />}} \n            />\n\n        </div>\n    );\n}\n","import React from 'react';\nimport {Button, Dropdown, ButtonGroup, InputGroup} from 'react-bootstrap'\n\nconst ListAllDropDown = function(props) {\n    return <Dropdown  as={ButtonGroup}>\n          <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button   size=\"sm\" >{'Set List'} </Button>\n          <Dropdown.Menu>\n           <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.tagAll(e.target.value)}} >\n                <InputGroup>\n                  <input type=\"text\" className=\"form-control\" onChange={function(e) {props.setTagAllValue(e.target.value)}}\n                value={props.tagAllValue} />\n                <Button variant=\"success\" onClick={function(e) {props.tagAll(props.tagAllValue)}} >Add</Button>\n                </InputGroup>\n                \n              </form>\n              {props.lookups.listsLookups && props.lookups.listsLookups.sort().map(function(skillKey,i) {\n              return <Dropdown.Item key={i} value={skillKey}  >\n                <Button variant=\"success\" onClick={function(e) {props.setTagAllValue(skillKey); props.tagAll(skillKey)}} >Add to {skillKey}</Button>\n                <Button variant=\"danger\" onClick={function(e) { props.untagAll(skillKey)}} style={{marginLeft: '0.5em'}}>Remove</Button></Dropdown.Item>\n    })}\n          </Dropdown.Menu>\n      </Dropdown>\n}\nexport default ListAllDropDown\n","import React from 'react'\nconst SearchInput = function({searchFilter,setSearchFilter}) {\n    return (<input style={{marginLeft:'0.5em'}}  type='text' value={searchFilter} \n            onChange={\n                function(e) {\n                    const filter = e.target.value\n                    setSearchFilter(filter); \n                }\n            } placeholder='Search' />)\n}\n    \nexport default SearchInput\n","import React, {useEffect, useState} from 'react';\n//import {Link} from 'react-router-dom'\nimport {Button, Dropdown, ButtonGroup} from 'react-bootstrap'\nimport SearchInput from './SearchInput'\nimport checkImage from '../images/check.svg'\n\n\nconst ListsManagerSearchBar = function(props) {\n    const [topTagOptions,setTopTagOptions] = useState([])\n    useEffect(() => {\n        //console.log(['kust nabager ',props.lookups.listsLookups])\n        var topTagOptionss = props.lookups.listsLookups && props.lookups.listsLookups.sort().map(function(listKey,i) {\n              return <Dropdown.Item key={i} value={listKey} onClick={function(e) {props.setListFilterValue(listKey)}}  >{listKey}</Dropdown.Item>\n        })\n        topTagOptionss.unshift(<Dropdown.Item key={'empty_key_value_empty'} value={''} onClick={function(e) {props.setListFilterValue('')}}  >&nbsp;</Dropdown.Item>)\n        topTagOptionss.push(<Dropdown.Item key={'Not In A List'} value={'Not In A List'} onClick={function(e) {props.setListFilterValue('Not In A List')}}  ><b>Not In A List</b></Dropdown.Item>)\n        setTopTagOptions(topTagOptionss)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.lookups])\n    \n    return <div>\n            {<span>\n            \n                {props.lookups.selectedListTally > 0 && <Button size=\"lg\"  onClick={function(e) { props.resetSelection(e) }} variant=\"success\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\" /></Button> }\n                {props.lookups.selectedListTally <= 0 && <Button size=\"lg\" onClick={function(e) { props.selectAll(e) }} variant=\"secondary\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Select\" /></Button> }\n                \n                \n           </span>}   \n            {<span style={{marginLeft:'0.4em'}}><SearchInput searchFilter={props.searchFilter} setSearchFilter={props.setSearchFilter} /></span>}   \n            {<Dropdown style={{marginLeft:'0.5em'}}  as={ButtonGroup}>\n                  <Dropdown.Toggle split   id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button  >{'List'+(props.listFilterValue ? ' - '+ props.listFilterValue : '')} </Button>\n                  <Dropdown.Menu>\n                      {topTagOptions}\n                  </Dropdown.Menu>\n                </Dropdown>}\n              \n              <Button  style={{marginLeft:'1em'}} variant=\"success\" onClick={function(e) {props.createEmptyItem(props.listFilterValue)}} >New Entity</Button>\n              <Button  style={{marginLeft:'1em'}} variant=\"primary\" onClick={function(e) {props.sort(function(a,b) { if (a.value < b.value) return -1; else return 1;})}} >Sort</Button>\n        </div>\n}\nexport default ListsManagerSearchBar\n","import React, {useState, useEffect} from 'react'\nimport {uniquifyArray, uniquifyArrayOfObjects} from './utils'\nfunction useListItemRow(item, saveItem, splitNumber, style, lastSelected, setLastSelected, selectBetween) {\n    const [selectionState, setSelectionState] = useState({})\n    //const [newEntity, setNewEntity] = useState('')\n    // for ReactTags format using objects\n    const [tags, setTags] = useState([])\n    ////console.log(['USENLUROW',splitNumber])\n    const reactTags = React.createRef()\n     // tags\n    useEffect(() => {\n        if (item.tags) setTags(item.tags.map(function(tag,i) {return {id:i, name:tag}}))\n    },[item, JSON.stringify(item.tags)])\n\n     function onTagDelete (i) {\n        //console.log(['ontagdel',i, tags])\n        const newTags = tags.slice(0)\n        newTags.splice(i, 1)\n        setTags(newTags)\n        var newItem = item\n        newItem.tags = newTags.map(function(newTag) { return newTag.name})\n        saveItem(newItem,splitNumber)\n        return true\n      }\n     \n     function onTagAddition (tag) {\n         //console.log(['ontagad',tag, tags])\n         if (tag && tag.name.trim().length > 0) {\n            const newTags = [].concat(tags, tag)\n            //console.log(['ontagad new',newTags])\n            var newItem = item\n            var tagArray = uniquifyArray(newTags.map(function(newTag) { return newTag.name}))\n            newItem.tags = tagArray.sort()\n            //console.log(['ontagad presave',tagArray,JSON.parse(JSON.stringify(newItem)),splitNumber])\n            saveItem(newItem,splitNumber)\n            //console.log(['ontagad saved'])\n            //setTags(uniquifyArrayOfObjects(newTags,'name').sort(function(a,b) {if (a.name > b.name) return 1; else return -1} ))\n            return true\n        }\n      }\n    \n    function updateExampleContent(content) {\n        //console.log(['UPDTEXT', item, content])\n        if (item && typeof content === \"string\") {\n            ////console.log('UPDTEXTREAL')\n            const newItem = item //JSON.parse(JSON.stringify(item));\n            \n            newItem.value = content;\n            saveItem(newItem,splitNumber)\n        }\n    }\n    \n     function updateExampleSynonym(content) {\n        //console.log('UPDTEXT')\n        if (item && typeof content === \"string\") {\n            ////console.log('UPDTEXTREAL')\n            const newItem = item //JSON.parse(JSON.stringify(item));\n            \n            newItem.synonym = content;\n            saveItem(newItem,splitNumber)\n        }\n    }\n    \n    function selectItem(splitNumber,e) {\n        if (e.shiftKey && lastSelected >= 0)  {\n            //console.log(['SELECT INTENT WITH SHIFT '+splitNumber, lastSelected])\n            selectBetween(splitNumber,lastSelected) \n            setLastSelected(splitNumber)  \n        } else {\n            //console.log(['SELECT INTENT WITHOUT  SHIFT ',lastSelected])\n            var newItem = item\n            item.isSelected = true;\n            saveItem(newItem,splitNumber)\n            setLastSelected(splitNumber)\n            //console.log(['LASTSEL ',lastSelected])\n        }\n    }\n   \n    \n    function deselectItem(splitNumber) {\n        var newItem = item\n        item.isSelected = false;\n        //console.log(['DESELECT LIST ITEM',newItem,splitNumber])\n        saveItem(newItem,splitNumber)\n    } \n    \n    return {    \n        selectionState, setSelectionState, tags, setTags, reactTags, onTagDelete, onTagAddition, updateExampleContent, updateExampleSynonym, selectItem, deselectItem\n    }\n    \n}\nexport default useListItemRow\n","import React from 'react';\nexport default function SuggestionComponent({ item, query }) {\n  return (\n    <span  id={item.id} className={item.name === query ? 'match' : 'no-match'}>\n      {item.name}\n    </span>\n  )\n}\n","import React, {useState} from 'react';\nimport {Button, Dropdown, ButtonGroup, InputGroup} from 'react-bootstrap'\n\nconst DropDownComponent = function(props) {\n    \n    var [filterValue, setFilterValue] = useState(props.value ? props.value : '')\n    \n    return <Dropdown  as={ButtonGroup}>\n          <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button   size=\"sm\" >{props.value ? props.title + \" - \" + props.value : props.title} </Button>\n          <Dropdown.Menu>\n               <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; }} >\n                <InputGroup>\n                  <input type=\"text\" className=\"form-control\" onChange={function(e) {setFilterValue(e.target.value)}}\n                value={filterValue} />\n                </InputGroup>\n                \n              </form>\n              {Array.isArray(props.options) && props.options.map(function(optionKey,i) {\n                  ////console.log([optionKey, filterValue])\n                   //if (filterValue.trim().length == 0 || optionKey.toLowerCase().indexOf(filterValue.toLowerCase()) !== -1) {\n                       return <Dropdown.Item style={{minHeight:'1.4em'}} key={i} value={optionKey} onClick={function(e) {setFilterValue(optionKey); props.selectItem(optionKey)}}  >\n                            {optionKey ? optionKey : <b>None</b>}\n                        </Dropdown.Item>\n                    //} else return null;\n              })}\n          </Dropdown.Menu>\n      </Dropdown>\n\n}\nexport default DropDownComponent\n","//{ tag, removeButtonText, onDelete }\nimport React from 'react';\nimport {ListGroup, Button, Badge} from 'react-bootstrap'\n//import { Link  } from 'react-router-dom'\nimport DropDownComponent from './DropDownComponent'\n\nexport default function TagComponent(props) {\n     let that = this\n     ////console.log(props.tag)\n    // hack to pass functions through\n    //const {lookups, setRegexpEntity, setRegexpIntent}  = props\n  return (\n    <Button type='button'  size=\"sm\" variant='warning' style={{marginLeft:'0.3em', height:'2.5em'}}  >\n       <Badge pill variant=\"danger\" size=\"lg\"  style={{float:'right', fontWeight:'bold', height:'2em', paddingTop:'0.5em'}}  onClick={props.onDelete} >X</Badge>\n      {props.tag.name}  &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; \n        \n    </Button>\n  )\n}\n","/* global window */\nimport {Button } from 'react-bootstrap'\nimport React from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ReactTags from 'react-tag-autocomplete'\nimport useListItemRow from './useListItemRow'\nimport SuggestionComponent from './components/SuggestionComponent'\nimport TagComponent from './components/TagComponent'\nimport checkImage from './images/check.svg'\n\nexport default function ListsManagerRow(props) {\n        const  {item, splitNumber , style} = props;\n       const {    \n            tags, reactTags, \n            onTagDelete, onTagAddition, updateExampleContent,updateExampleSynonym,  selectItem, deselectItem\n        } = useListItemRow(props.item, props.saveItem, props.splitNumber, props.style, props.lastSelected, props.setLastSelected, props.selectBetween)\n            \n       \n       //var buttonImageStyle={color:'white', height:'2em'}\n       return item && <div style={style} className={splitNumber % 2 ? 'ListItemOdd' : 'ListItemEven'}>\n               <div style={{position:'relative', width: '100%', textAlign:'left',  borderTop: '2px solid black'}}>\n                   \n                   <div style={{float:'right'}} > \n                        <Button  variant=\"danger\"  size=\"sm\" style={{float:'right', fontWeight:'bold', borderRadius:'15px', marginTop:'0.2em'}} onClick={function(e) {if (window.confirm('Really delete')) {props.deleteItem(splitNumber,(item.id ? item.id : ''))}}} >X</Button>\n               \n                    </div>\n                   \n                  <div style={{float:'left'}}>\n                     {!item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"secondary\" onClick={function(e) {selectItem(splitNumber,e)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Select\"  /></Button>}\n                      {item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"success\" onClick={function() {deselectItem(splitNumber)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\"  /></Button>}\n                </div>\n                \n                <input style={{float:'left'}} size='25'   \n                       type='text'  value={item.value}  onChange={function(e) { updateExampleContent(e.target.value)}} />\n                    \n                     \n                   \n                     <label style={{float:'left', marginLeft:'0.5em'}} >Synonym <input size='15' type='text' value={item.synonym} onChange={function(e) {updateExampleSynonym(e.target.value)}} /></label>\n                     <label style={{float:'left', marginLeft:'0.5em'}} >\n                     <span  style={{float:'left', marginRight:'0.5em'}}>Lists </span>\n                     <span  style={{float:'left'}}>\n                       <ReactTags\n                        placeholderText=\"Add to list\"\n                        minQueryLength={0}\n                        maxSuggestionsLength={50}\n                        autoresize={false}\n                        allowNew={true}\n                        ref={reactTags}\n                        tags={tags}\n                        tagComponent={function(iprops) {return <TagComponent {...iprops}   setRegexpEntity={props.setRegexpEntity} setRegexpIntent={props.setRegexpIntent}  lookups={props.lookups}  />}}\n                        suggestionComponent={SuggestionComponent}\n                        suggestions={props.lookups.listsLookups.map(function(listName,i) {return {id: i, name: listName}})}\n                        onDelete={onTagDelete}\n                        onAddition={onTagAddition} /> \n                        </span>\n                    </label>\n                  </div> \n               \n                \n                 \n           \n      </div>\n}\n","// USE A SINGLE LOCALSTORAGE KEY FOR PERSISTENCE\n// this is much faster than using set/getItem for each item\n// workable for many thousands of rows\nimport { useEffect, useReducer} from 'react';\n\nimport {generateObjectId} from './utils'\nimport localforage from 'localforage'\n\n// handle list updates with minimum disruption to top level items\nfunction reducer(state, action) {\n    const index = parseInt(action.index)\n    ////console.log(['REDUCE',action.type,action.index, action.item,action.items,state])\n    switch (action.type) {\n    case \"append\":\n      if (action.item) {\n        return [...state, action.item];\n      } else return state\n    case \"prepend\":\n      if (action.item) {\n        return [action.item,...state];\n      } else return state\n    case \"insert\":\n      if (action.item && typeof index === \"number\" ) {\n          if (state.length > 0) {\n              return [\n                ...state.slice(0, index),\n                action.item,\n                ...state.slice(index)\n              ];\n          } else return state\n        } else return state\n    case \"remove\":\n      if (typeof index === \"number\" ) {\n          return [\n            ...state.slice(0, index),\n            ...state.slice(index + 1)\n          ];\n       } else return state \n    case \"update\":\n       if (action.item && typeof index === \"number\" ) {\n           return  [\n            ...state.slice(0, index),\n            action.item,\n            ...state.slice(index + 1)\n          ];\n        } else return state \n    case \"replaceall\":\n        if (typeof action.items === \"object\") {\n            return action.items\n        } else return state\n    case \"sort\":\n        console.log(['DISP SORT',action.sort])\n        if (typeof action.sort === \"function\") {\n            var ret = state.sort(action.sort)\n            console.log(['DISP SORT ret',ret, ret[0],ret[1]])\n            return [...ret]\n        } else return state\n    default:\n      throw new Error('Invalid reduction in useDBSingleKey');\n  }\n    \n}\n\n// state manager with local storage backing\nexport default function useDB(database, databaseTable,singleKey, initialData=[]) {\n    ////console.log(['use db single key', database, databaseTable,singleKey])\n    if (!singleKey) singleKey = 'data'\n     const [items, dispatch] = useReducer(reducer,initialData);\n     var localforageStorage = localforage.createInstance({\n       name: database ? database : \"localstoragemanager\",\n       storeName   : databaseTable ? databaseTable : 'single_key_data',\n     });\n\n    \n    useEffect(function() {\n        ////console.log(['dbsingle key items loaded',items])\n        //loadAll()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n    \n    useEffect(function() {\n        ////console.log(['dbsingle key items updated',items])\n        localforageStorage.setItem(singleKey,items)  \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[items])\n\n    function getId(item) {\n        if (item && item.id) {\n            return item.id\n        } else {\n            throw new Error(\"Missing ID value in getId\")\n        }\n    }\n\n    function loadAll() {\n        return new Promise(function(resolve, reject) {\n            localforageStorage.getItem(singleKey).then(function(res) {\n              ////console.log(['loadall',database, databaseTable,singleKey,res])\n              dispatch({ type: \"replaceall\", items: res ? res : initialData});\n              resolve(res)\n            })\n        })\n    }\n\n    \n    // save or create\n    function saveItem(item,index) {\n        ////console.log(['save',item,index])\n        if (item) {\n            // update sources and save text in seperate localstorage\n            // ensure id\n            var isNewItem = false;\n            if (!item.id) {\n                isNewItem = true;\n                item.id = generateObjectId()\n            }\n             \n            if (isNewItem) {\n                dispatch({ type: \"prepend\",item: item });\n            } else {\n                //var intIndex = parseInt(index)\n                //if (intIndex != NaN) {\n                    //if (intIndex > 0) {\n                        //dispatch({ type: \"update\",item: item , index: intIndex});\n                    //} else {\n                        //dispatch({ type: \"prepend\",item: item });\n                    //}\n                //} else \n                if (items) {\n                    var found = null\n                    items.map(function(listItem,listItemIndex) {\n                        if (listItem.id === item.id) {\n                            found = listItemIndex\n                        } \n                        return null\n                    })\n                    if (found != null) {\n                        dispatch({ type: \"update\",item: item , index: found});\n                    } else {\n                        dispatch({ type: \"prepend\",item: item });\n                    }\n              \n                } \n            }  \n            \n        }\n    }\n    \n    function findBy(field,value) {\n        var key = findKeyBy(field,value)\n        return items[key];\n    }\n    \n    function findKeyBy(field,value) {\n        for (var k in items) {\n            if (items[k] && items[k][field] === value) return k\n        }\n    }\n\n    function setItemsWrap(items) {\n        localforageStorage.clear().then(function() {\n            dispatch({ type: \"replaceall\", items: items})\n        })\n    }\n    \n    function sort(sortFunction) {\n        dispatch({ type: \"sort\", sort: sortFunction})\n    }\n    \n    function filter(matchFunction) {\n        var filtered = []\n        if (matchFunction) {\n            items.map(function(item,i) {\n              if (item && matchFunction(item)) {\n                  filtered.push(item)\n              } \n              return null \n            })\n        }\n        return filtered\n        \n    }\n    \n    function deleteItem(index) {\n        dispatch({ type: \"remove\", index: index})\n    }\n    return {getId:getId, loadAll:loadAll, saveItem:saveItem, deleteItem:deleteItem , items:items, setItems:setItemsWrap, findKeyBy:findKeyBy, findBy:findBy, filter: filter, sort: sort}\n    \n}\n","import React, {useState, useEffect} from 'react';\nimport useDBSingleKey from './useDBSingleKey'\nimport {useParams, useHistory} from 'react-router-dom'\n\nfunction useListItemEditor(database, databaseTable, databaseKey, updateLists, initialData) {\n    const {loadAll, saveItem, deleteItem , items, setItems, findKeyBy, filter, sort} = useDBSingleKey(database, databaseTable, databaseKey, initialData)\n    const [filteredItems, setFilteredItems] = useState([])\n    const [filteredItemsKeys, setFilteredItemsKeys] = useState([])\n    const [searchFilter, setSearchFilter] = useState('')\n    const [tagAllValue, setTagAllValue] = useState('')\n    const listRef = React.createRef()\n    //const [listFilterValue, setListFilterValue] = useState('')\n    const [lastSelected, setLastSelected] = useState(-1)\n    \n    var params = useParams()\n    var listFilterValue = params.listId ? params.listId : '';\n    var history = useHistory()\n    function setListFilterValue(value) {\n        var root = history.location.pathname.split(\"/\")\n        var parts=['/'+root[1]]\n        parts.push('/'+value)\n        history.push(parts.join(''))\n    }\n   \n      \n    useEffect(() => {\n         var filteredItems = filter(function(item) {\n            //return true;\n            var matchText = true\n            if (searchFilter && searchFilter.trim().length >0) {\n                if (item.value && item.value.toLowerCase().indexOf(searchFilter.toLowerCase()) !== -1 ) {\n                    matchText = true\n                } else {\n                    matchText = false\n                }\n            }\n            var matchPicklist = true\n            if (listFilterValue === \"Not In A List\") {\n                ////console.log(['tags',item.tags])\n                if (!item.tags || (item.tags && item.tags.length === 0)) {\n                    matchPicklist =  true\n                } else {\n                    matchPicklist = false\n                }\n            } else if (listFilterValue && listFilterValue.trim().length >0) {\n                if (item.tags && item.tags.indexOf(listFilterValue) !== -1) {\n                    matchPicklist = true\n                } else {\n                    matchPicklist = false\n                }\n            }\n            \n            return matchText && matchPicklist\n            //return (item.value.indexOf(searchFilter) !== -1 \n                        //|| (item.tags && item.tags.indexOf(searchFilter) !== -1)) ? true : false\n        })\n        var itemKeys = {}\n        filteredItems.map(function(item) {if (item.id) itemKeys[item.id] = true; return null})\n        filteredItems.sort(function(a,b) { return (a.value ? a.value.toLowerCase() : '') < (b.value ? b.value.toLowerCase() : '') ? true : false})\n        setFilteredItems(filteredItems)\n        setFilteredItemsKeys(itemKeys)\n        updateLists(filteredItems)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[items, searchFilter, listFilterValue])\n    \n    function deleteAll(e)  {\n        if (window.confirm('Really delete all selected')) {\n            if (items) {\n                var newItems = []\n                items.map(function(item,i) {\n                    // dump items without id\n                    if (item && item.id) {\n                        // only delete filtered items\n                        if (filteredItemsKeys[item.id]) {\n                           // only delete selected filtered items\n                           if (!item.isSelected) {\n                               newItems.push(item)\n                           }\n                        // not filtered so push\n                        } else {\n                            newItems.push(item)\n                        }\n                    }\n                    return null\n                })\n                setItems(newItems)\n                listRef.current.resetAfterIndex(0);\n            }\n        }\n    }\n    \n    function tagAll(val) {\n        //console.log(['tagall',tagAllValue,val])\n        var tagValue = val ? val : tagAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                if (item && item.id) { \n                    if (item.isSelected && filteredItemsKeys[item.id]) {\n                       var newItem = JSON.parse(JSON.stringify(item));\n                       if (!newItem.tags) newItem.tags=[]\n                       if (newItem.tags.indexOf(tagValue) === -1) newItem.tags.push(tagValue)\n                       newItems.push(newItem)\n                    } else {\n                       newItems.push(item)\n                    }\n                }\n               return null\n            })\n            setItems(newItems)\n        }\n    }\n\n    function untagAll(val) {\n        //console.log(['untagall',tagAllValue,val])\n        //var tagValue = val ? val : tagAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n               if (item && item.id) {\n                   if (item.isSelected && filteredItemsKeys[item.id]) {\n                       var newItem = JSON.parse(JSON.stringify(item));\n                       if (!newItem.tags) newItem.tags=[]\n                       var finalTags = []\n                       newItem.tags.map(function(tag) {\n                           if (tag !== val) {\n                               finalTags.push(tag)\n                           }  \n                           return null\n                       })\n                       newItem.tags = finalTags\n                       newItems.push(newItem)\n                   } else {\n                       newItems.push(item)\n                   }  \n               }\n               return null\n            })\n            setItems(newItems)\n        }\n    }\n    \n    \n    function resetSelection() {\n         ////console.log('reset sa')\n         if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                if (item) {\n                    var newItem = item\n                   newItem.isSelected = false\n                   newItems.push(newItem)\n                }\n               return null\n            })\n            setItems(newItems)\n            \n        }\n    }\n    \n     function selectAll() {\n         //console.log(['SELECTALL',items])\n         if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                if (item && item.id) {\n                    var newItem = item\n                    if (item.id && filteredItemsKeys[item.id]) {\n                       newItem.isSelected = true\n                       newItems.push(newItem)\n                    } else {\n                        newItem.isSelected = false\n                        newItems.push(newItem)\n                    }\n                }\n                return null\n            })\n            setItems(newItems)\n        }\n    }\n        \n    function selectBetween(a,b) {\n         var min = a\n         var max = b\n         if (max <  min) {\n             min = b\n             max = a\n         }\n         if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                if (item && item.id) {\n                    var newItem = item\n                    if (item.id && filteredItemsKeys[item.id]) {\n                       if (i >= min && i <= max) newItem.isSelected = true\n                       newItems.push(newItem)\n                    } \n                }\n                return null\n            })\n            setItems(newItems)\n        }\n    }\n    //function sort() {\n         ////console.log(['SORT',items])\n         //if (items) {\n            //var newItems = items.sort(function(a,b) { if (a.value < b.value) return -1; else return 1;})\n            //setItems(newItems)\n            //listRef.current.resetAfterIndex(0);\n            ////console.log(['SORTed',newItems])\n        //}\n    //}\n    \n    function saveItemWrap(item,index) {\n        //console.log(['SAVE ITEM WRAP LI',listRef, JSON.parse(JSON.stringify(item)),index])\n        if (item) {\n            saveItem(item,index)\n            \n            listRef.current.resetAfterIndex(index);\n            updateLists(items)\n        }\n    }\n    \n    function getItemSize(index) {\n        ////console.log(window.innerWidth,window.innerHeight)\n        // set parameters for full size > 1024\n        var baseSize = 40\n        //// tiny screen mobile \n        if (window.innerWidth < 430) {\n            baseSize = 120\n        // medium screen tablet\n        } else if (window.innerWidth <= 768) {\n            baseSize = 70\n        }\n        var tallyExtras = 0;\n        var item = items[index]\n        if (item && item.tags) tallyExtras += 1;\n        return baseSize + parseInt(tallyExtras+1/3) * 40\n    }\n    \n   function createEmptyItem(list) {\n       var tags=[]\n        if (list && list !== \"Not In A List\" && list.trim().length > 0) tags.push(list)\n        setSearchFilter('')\n        saveItem({id:null, value:'', synonym:'',tags:tags})\n   }\n    \n    return {\n        loadAll, saveItem, deleteItem , items, setItems, findKeyBy, filter, filteredItems, setFilteredItems, sort, \n        searchFilter, setSearchFilter, tagAllValue, setTagAllValue,listRef, listFilterValue, setListFilterValue,\n        tagAll,untagAll, resetSelection, selectAll, saveItemWrap, getItemSize, deleteAll, createEmptyItem, lastSelected, setLastSelected, selectBetween\n    }\n}\nexport default useListItemEditor\n","import React, { useEffect} from 'react';\nimport './App.css';\n//import {Link, useParams, useHistory} from 'react-router-dom'\nimport {Button } from 'react-bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { VariableSizeList as List } from 'react-window';\nimport ListAllDropDown from './components/ListAllDropDown'\n\nimport ListsManagerSearchBar from './components/ListsManagerSearchBar'\nimport ListsManagerRow from './ListsManagerRow'\nimport useListItemEditor from './useListItemEditor'\n\nconst RenderRow = function(props) {\n    const index = props.index\n    const style = props.style\n    const item = props.data.items[index]\n    return <ListsManagerRow  \n         item={item}  splitNumber={index} style={style}\n         saveItem={props.data.saveItem} deleteItem={props.data.deleteItem} saveNlu={props.data.saveNlu}\n         lookups={props.data.lookups}  lastSelected={props.data.lastSelected} setLastSelected={props.data.setLastSelected} selectBetween={props.data.selectBetween}  />\n}\n\nexport default  function ListsManager(props) {\n    const {listFilterValue, setListFilterValue, loadAll, deleteItem ,items, findKeyBy, searchFilter, setSearchFilter, tagAllValue, setTagAllValue, listRef, tagAll,untagAll, resetSelection, selectAll, saveItemWrap, getItemSize,  filteredItems, deleteAll, createEmptyItem, sort, lastSelected, setLastSelected, selectBetween} = useListItemEditor('nlutool','lists','alldata', props.updateFunctions.updateLists)\n    //const [currentList, setCurrentList] = useState('')\n\n    useEffect(() => {\n        loadAll()\n        props.updateFunctions.updateLists(items)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n    \n    useEffect(() => {\n        //props.updateFunctions.updateLists(filteredItems)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[filteredItems])\n    \n    \n  \n    \n    function renderEditor(props) {\n                \n            if (filteredItems && filteredItems.length > 0) {\n                return <div>\n                    \n                    \n                    <span style={{float:'left', fontWeight:'bold'}} >&nbsp;{filteredItems.length} matches </span>\n                    \n                     \n                     {props.lookups.selectedListTally > 0 && <span style={{float:'right'}}> \n                        \n                        <span>With {props.lookups.selectedListTally} selected&nbsp;</span>\n                        <ListAllDropDown tagAll={tagAll} tagAllValue={tagAllValue} setTagAllValue={setTagAllValue} untagAll={untagAll} lookups={props.lookups}/>\n                        <Button style={{marginLeft:'1em'}} onClick={deleteAll} variant=\"danger\"  >Delete Selected</Button> \n                    </span>} \n                    \n                      <div style={{clear:'both'}}>\n                        <div style={{clear:'both'}}>\n                            <List\n                                key=\"list\"\n                                ref={listRef}\n                                itemData={{items: filteredItems, saveItem: saveItemWrap, deleteItem, findKeyBy, lookups: props.lookups, lastSelected, setLastSelected, selectBetween}}\n                                itemKey={index => index}  \n                                className=\"List\"\n                                height={700}\n                                itemCount={filteredItems.length}\n                                itemSize={getItemSize}\n                                width={'100%'}\n                              >{RenderRow}\n                            </List>\n                        </div>\n                    </div>\n               </div>\n          }\n    }\n    \n   return <div>\n   \n        {<ListsManagerSearchBar {...props} searchFilter={searchFilter} setSearchFilter={setSearchFilter} listFilterValue={listFilterValue} setListFilterValue={setListFilterValue} resetSelection={resetSelection} selectAll={selectAll} createEmptyItem={createEmptyItem} sort={sort} />}\n         \n         {renderEditor(props)}\n    </div>\n            \n}\n      \n","import React, {useEffect, useState} from 'react';\n//import {Link} from 'react-router-dom'\nimport {Button, Dropdown, ButtonGroup} from 'react-bootstrap'\nimport SearchInput from './SearchInput'\nimport checkImage from '../images/check.svg'\n\n\nconst UtterancesManagerSearchBar = function(props) {\n    const [topTagOptions,setTopTagOptions] = useState([])\n    useEffect(() => {\n        ////console.log(['kust nabager ',props.lookups.listsLookups])\n        var topTagOptionss = props.lookups.utteranceTagsLookups && props.lookups.utteranceTagsLookups.sort().map(function(listKey,i) {\n              return <Dropdown.Item key={i} value={listKey} onClick={function(e) {props.setListFilterValue(listKey)}}  >{listKey}</Dropdown.Item>\n        })\n        topTagOptionss.unshift(<Dropdown.Item key={'empty_key_value_empty'} value={''} onClick={function(e) {props.setListFilterValue('')}}  >&nbsp;</Dropdown.Item>)\n        topTagOptionss.push(<Dropdown.Item key={'Not In A List'} value={'Not In A List'} onClick={function(e) {props.setListFilterValue('Not In A List')}}  ><b>Not In A List</b></Dropdown.Item>)\n        setTopTagOptions(topTagOptionss)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.lookups])\n    \n    return <div>\n            {<span>\n            \n                {props.lookups.selectedUtteranceTally > 0 && <Button size=\"lg\"  onClick={function(e) {props.resetSelection(e) }} variant=\"success\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\" /></Button> }\n                {props.lookups.selectedUtteranceTally <= 0 && <Button size=\"lg\" onClick={function(e) {props.selectAll(e) }} variant=\"secondary\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Select\" /></Button> }\n                \n                \n           </span>}   \n            {<span style={{marginLeft:'0.4em'}}><SearchInput searchFilter={props.searchFilter} setSearchFilter={props.setSearchFilter} /></span>}   \n            {<Dropdown style={{marginLeft:'0.5em'}}  as={ButtonGroup}>\n                  <Dropdown.Toggle split   id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button  >{'List'+(props.listFilterValue ? ' - '+ props.listFilterValue : '')} </Button>\n                  <Dropdown.Menu>\n                      {topTagOptions}\n                  </Dropdown.Menu>\n                </Dropdown>}\n              <Button  style={{marginLeft:'1em'}} variant=\"success\" onClick={function(e) {props.createEmptyItem(props.listFilterValue)}} >New Utterance</Button>\n              <Button  style={{marginLeft:'1em'}} variant=\"primary\" onClick={function(e) {props.sort(function(a,b) { if (a.value < b.value) return -1; else return 1;})}} >Sort</Button>\n        </div>\n}\nexport default UtterancesManagerSearchBar\n","/* global window */\nimport {Button } from 'react-bootstrap'\nimport React from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ReactTags from 'react-tag-autocomplete'\nimport useListItemRow from './useListItemRow'\nimport SuggestionComponent from './components/SuggestionComponent'\nimport checkImage from './images/check.svg'\nimport TagComponent from './components/TagComponent'\nexport default function UtterancesManagerRow(props) {\n        const  {item, splitNumber , style} = props;\n       const {    \n            tags, reactTags, \n            onTagDelete, onTagAddition, updateExampleContent,updateExampleSynonym,  selectItem, deselectItem\n        } = useListItemRow(props.item, props.saveItem, props.splitNumber, props.style, props.lastSelected, props.setLastSelected, props.selectBetween)\n        \n        function updateExampleSynonymWrap(content) {\n            updateExampleSynonym(content)\n            //console.log(['UES',content])\n            var lines = content ? content.split(\"\\n\") : []\n            //console.log(['UES lines ',lines])\n                \n            if (lines && lines.length > 1) {\n                if (!(item && item.value && item.value.trim().length > 0)) {\n                    var newContent = lines[0].trim().replaceAll(' ','_')\n                    //console.log(['UES update ',newContent])\n                    updateExampleContent(newContent)\n                }\n            }\n            \n        }    \n       \n       //var buttonImageStyle={color:'white', height:'2em'}\n       return item && <div style={style} className={splitNumber % 2 ? 'ListItemOdd' : 'ListItemEven'}>\n               <div style={{position:'relative', width: '100%', textAlign:'left',  borderTop: '2px solid black'}}>\n                   \n                   <div style={{float:'right'}} > \n                        <Button  variant=\"danger\"  size=\"sm\" style={{float:'right', fontWeight:'bold', borderRadius:'15px', marginTop:'0.2em'}} onClick={function(e) {if (window.confirm('Really delete')) {props.deleteItem(splitNumber,(item.id ? item.id : ''))}}} >X</Button>\n                    </div>\n                   \n                  <div style={{float:'left'}}>\n                     {!item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"secondary\" onClick={function(e) {selectItem(splitNumber,e)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Select\"  /></Button>}\n                      {item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"success\" onClick={function() {deselectItem(splitNumber)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\"  /></Button>}\n                </div>\n                   <label style={{float:'left', marginLeft:'0.5em'}}  >Key <input size=\"50\"\n                       type='text'  value={item.value}  onChange={function(e) { updateExampleContent(e.target.value)}} /></label>\n                    \n                    \n                    <label style={{float:'left', marginLeft:'0.5em'}} >\n                     <span  style={{float:'left', marginRight:'0.5em'}}>Lists </span>\n                     <span  style={{float:'left'}}>\n                       <ReactTags\n                        placeholderText=\"Add to list\"\n                        minQueryLength={0}\n                        maxSuggestionsLength={50}\n                        autoresize={false}\n                        allowNew={true}\n                        ref={reactTags}\n                        tags={tags}\n                        tagComponent={function(iprops) {return <TagComponent {...iprops}   setRegexpEntity={props.setRegexpEntity} setRegexpIntent={props.setRegexpIntent}  lookups={props.lookups}  />}}suggestionComponent={SuggestionComponent}\n                        suggestions={props.lookups.utteranceTagsLookups.map(function(listName,i) {return {id: i, name: listName}})}\n                        onDelete={onTagDelete}\n                        onAddition={onTagAddition} /> \n                        </span>\n                        </label>\n                        \n              \n                     \n                        \n                        \n                        \n                    <label style={{width:'100%'}} ><span style={{float:'left', marginRight:'0.5em'}}>Alternatives</span> \n                        <textarea style={{width:'90%', minWidth:\"34em\", height:\"5em\"}} type='text' value={item.synonym} onChange={function(e) {updateExampleSynonymWrap(e.target.value)}} />\n                    </label>\n                  </div> \n               \n                \n                 \n           \n      </div>\n}\n","/* global window */\nimport React, { useEffect} from 'react';\nimport './App.css';\n//import {Link, useParams, useHistory} from 'react-router-dom'\nimport {Button } from 'react-bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { VariableSizeList as List } from 'react-window';\nimport ListAllDropDown from './components/ListAllDropDown'\n\nimport UtterancesManagerSearchBar from './components/UtterancesManagerSearchBar'\nimport UtterancesManagerRow from './UtterancesManagerRow'\nimport useListItemEditor from './useListItemEditor'\n\nconst RenderRow = function(props) {\n    const index = props.index\n    const style = props.style\n    const item = props.data.items[index]\n    return <UtterancesManagerRow  \n         item={item}  splitNumber={index} style={style}\n         saveItem={props.data.saveItem} deleteItem={props.data.deleteItem} saveNlu={props.data.saveNlu}\n         lookups={props.data.lookups}  lastSelected={props.data.lastSelected} setLastSelected={props.data.setLastSelected} selectBetween={props.data.selectBetween}  />\n}\n\nexport default  function UtterancesManager(props) {\n    const {listFilterValue, setListFilterValue, loadAll, deleteItem , findKeyBy, searchFilter, setSearchFilter, tagAllValue, setTagAllValue, listRef, tagAll,untagAll, resetSelection, selectAll, saveItemWrap,  filteredItems, deleteAll, createEmptyItem, sort, lastSelected, setLastSelected, selectBetween} = useListItemEditor('nlutool','utterances','alldata', props.updateFunctions.updateUtterances)\n    //const [currentList, setCurrentList] = useState('')\n\n    function getItemSize() {\n        if (window.innerWidth < 430) {\n               return 380\n        // medium screen tablet\n        } else if (window.innerWidth <= 768) {\n               return 230\n        } else {\n            return 180\n        }\n    }\n\n    useEffect(() => {\n        loadAll()\n        //props.updateFunctions.updateLists(items)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n   \n    \n    function renderEditor(props) {\n            if (filteredItems && filteredItems.length > 0) {\n            \n                return <div>\n                    <span style={{float:'left', fontWeight:'bold'}} >&nbsp;{filteredItems.length} matches </span>\n                     \n                     {props.lookups.selectedUtteranceTally > 0 && <span style={{float:'right'}}> \n                        \n                        <span>With {props.lookups.selectedUtteranceTally} selected&nbsp;</span>\n                        <ListAllDropDown tagAll={tagAll} tagAllValue={tagAllValue} setTagAllValue={setTagAllValue} untagAll={untagAll} lookups={props.lookups}/>\n                        <Button style={{marginLeft:'1em'}} onClick={deleteAll} variant=\"danger\"  >Delete Selected</Button> \n                    </span>} \n                    \n                      <div style={{clear:'both'}}>\n                        <div style={{clear:'both'}}>\n                            <List\n                                key=\"list\"\n                                ref={listRef}\n                                itemData={{items: filteredItems, saveItem: saveItemWrap, deleteItem, findKeyBy, lookups: props.lookups, lastSelected, setLastSelected, selectBetween}}\n                                itemKey={index => index}  \n                                className=\"List\"\n                                height={700}\n                                itemCount={filteredItems.length}\n                                itemSize={getItemSize}\n                                width={'100%'}\n                              >{RenderRow}\n                            </List>\n                        </div>\n                    </div>\n               </div>\n\n            }\n              \n    }\n    \n  \n    return <div>\n       \n                   \n        {<UtterancesManagerSearchBar {...props} searchFilter={searchFilter} setSearchFilter={setSearchFilter} listFilterValue={listFilterValue} setListFilterValue={setListFilterValue} resetSelection={resetSelection} selectAll={selectAll} createEmptyItem={createEmptyItem} sort={sort} />}\n         \n         \n         {renderEditor(props)}\n    </div>\n            \n}\n      \n\n //{JSON.stringify(items)}\n    //<hr/>\n    \n    \n    //<hr/>\n    //{JSON.stringify(filteredItems)}\n\n\n","import React, {useEffect, useState} from 'react';\n//import {Link} from 'react-router-dom'\nimport {Button, Dropdown, ButtonGroup} from 'react-bootstrap'\nimport SearchInput from './SearchInput'\nimport checkImage from '../images/check.svg'\n\n\nconst RegexpsManagerSearchBar = function(props) {\n    const [topTagOptions,setTopTagOptions] = useState([])\n    useEffect(() => {\n        ////console.log(['kust nabager ',props.lookups.listsLookups])\n        var topTagOptionss = props.lookups.regexpTagsLookups && props.lookups.regexpTagsLookups.sort().map(function(listKey,i) {\n              return <Dropdown.Item key={i} value={listKey} onClick={function(e) {props.setListFilterValue(listKey)}}  >{listKey}</Dropdown.Item>\n        })\n        topTagOptionss.unshift(<Dropdown.Item key={'empty_key_value_empty'} value={''} onClick={function(e) {props.setListFilterValue('')}}  >&nbsp;</Dropdown.Item>)\n        topTagOptionss.push(<Dropdown.Item key={'Not In A List'} value={'Not In A List'} onClick={function(e) {props.setListFilterValue('Not In A List')}}  ><b>Not Tagged</b></Dropdown.Item>)\n        setTopTagOptions(topTagOptionss)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.lookups])\n    \n    return <div>\n            {<span>\n                {props.lookups.selectedRegexTally > 0 && <Button size=\"lg\"  onClick={function(e) { props.resetSelection(e) }} variant=\"success\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\" /></Button> }\n                {props.lookups.selectedRegexTally <= 0 && <Button size=\"lg\" onClick={function(e) { props.selectAll(e) }} variant=\"secondary\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Select\" /></Button> }\n                \n           </span>}   \n            {<span style={{marginLeft:'0.4em'}}><SearchInput searchFilter={props.searchFilter} setSearchFilter={props.setSearchFilter} /></span>}   \n            {<Dropdown style={{marginLeft:'0.5em'}}  as={ButtonGroup}>\n                  <Dropdown.Toggle split   id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button  >{'Tag'+(props.listFilterValue ? ' - '+ props.listFilterValue : '')} </Button>\n                  <Dropdown.Menu>\n                      {topTagOptions} \n                  </Dropdown.Menu>\n                </Dropdown>}\n              <Button  style={{marginLeft:'1em'}} variant=\"success\" onClick={function(e) {props.createEmptyItem(props.listFilterValue)}} >New Expression</Button>\n              <Button  style={{marginLeft:'1em'}} variant=\"primary\" onClick={function(e) {props.sort(function(a,b) { if (a.value < b.value) return -1; else return 1;})}} >Sort</Button>\n        </div>\n}\nexport default RegexpsManagerSearchBar\n","/* global window */\nimport {Button } from 'react-bootstrap'\nimport React from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ReactTags from 'react-tag-autocomplete'\nimport useListItemRow from './useListItemRow'\nimport SuggestionComponent from './components/SuggestionComponent'\nimport TagComponent from './components/TagComponent'\nimport checkImage from './images/check.svg'\n\nexport default function UtterancesManagerRow(props) {\n        const  {item, splitNumber , style} = props;\n       const {    \n            tags, reactTags, \n            onTagDelete, onTagAddition, updateExampleContent,updateExampleSynonym,  selectItem, deselectItem\n        } = useListItemRow(props.item, props.saveItem, props.splitNumber, props.style, props.lastSelected, props.setLastSelected, props.selectBetween)\n        \n        \n       //var buttonImageStyle={color:'white', height:'2em'}\n       return item && <div style={style} className={splitNumber % 2 ? 'ListItemOdd' : 'ListItemEven'}>\n               <div style={{position:'relative', width: '100%', textAlign:'left',  borderTop: '2px solid black'}}>\n                   \n                   <div style={{float:'right'}} > \n                        <Button  variant=\"danger\"  size=\"sm\" style={{float:'right', fontWeight:'bold', borderRadius:'15px', marginTop:'0.2em'}} onClick={function(e) {if (window.confirm('Really delete')) {props.deleteItem(splitNumber,(item.id ? item.id : ''))}}} >X</Button>\n               \n                    </div>\n                   \n                  <div style={{float:'left'}}>\n                     {!item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"secondary\" onClick={function(e) {selectItem(splitNumber,e)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Select\"  /></Button>}\n                      {item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"success\" onClick={function() {deselectItem(splitNumber)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\"  /></Button>}\n                  </div>\n                  \n                  <label><span style={{float:'left', marginLeft:'0.5em', marginRight:'0.5em'}}>Description </span> <input style={{float:'left'}} size='50'   \n                       type='text'  value={item.value}  onChange={function(e) { updateExampleContent(e.target.value)}} /></label>\n                \n                   <label style={{float:'right', marginRight:'2em'}} >\n                     <span  style={{float:'left', marginRight:'0.5em'}}>Tags </span>\n                     <span  style={{float:'left'}}>\n                       <ReactTags\n                        placeholderText=\"Add tag\"\n                        minQueryLength={0}\n                        maxSuggestionsLength={50}\n                        autoresize={false}\n                        allowNew={true}\n                        ref={reactTags}\n                        tags={tags}\n                        tagComponent={function(iprops) {return <TagComponent {...iprops}   setRegexpEntity={props.setRegexpEntity} setRegexpIntent={props.setRegexpIntent}  lookups={props.lookups}  />}}\n                        suggestionComponent={SuggestionComponent}\n                        suggestions={props.lookups.regexpTagsLookups.map(function(listName,i) {return {id: i, name: listName}})}\n                        onDelete={onTagDelete.bind(this)}\n                        onAddition={onTagAddition.bind(this)} /> \n                        </span>\n                    </label>\n                    <label style={{float:'left', marginLeft:'0.5em'}} ><span style={{float:'left', marginRight:'0.5em'}}>Regular Expression</span> \n                        <textarea style={{width:'60em',height:'6em'}}  type='text' value={item.synonym} onChange={function(e) {updateExampleSynonym(e.target.value)}} />\n                    </label>\n                    \n                    \n                  </div> \n               \n                \n                 \n           \n      </div>\n}\n","/* global window */\nimport React, { useEffect} from 'react';\nimport './App.css';\n//import {Link, useParams, useHistory} from 'react-router-dom'\nimport {Button } from 'react-bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { VariableSizeList as List } from 'react-window';\nimport ListAllDropDown from './components/ListAllDropDown'\nimport {generateObjectId} from './utils'\nimport RegexpsManagerSearchBar from './components/RegexpsManagerSearchBar'\nimport RegexpsManagerRow from './RegexpsManagerRow'\nimport useListItemEditor from './useListItemEditor'\n\nvar initData = [\n    {\n      \"value\": \"Proper Noun/Name\",\n      \"synonym\": \"\\t\\n(?<FirstName>[A-Z]\\\\.?\\\\w*\\\\-?[A-Z]?\\\\w*)\\\\s?(?<MiddleName>[A-Z]\\\\w*|[A-Z]?\\\\.?)\\\\s?(?<LastName>[A-Z]\\\\w*\\\\-?[A-Z]?\\\\w*)(?:,\\\\s|)(?<Suffix>Jr\\\\.|Sr\\\\.|IV|III|II|)\"\n    },\n    {\n      \"value\": \"Credit Card (Visa/Mastercard/Discover/American Express/Diners Club)\",\n      \"synonym\": \"^((4\\\\d{3})|(5[1-5]\\\\d{2})|(6011))-?\\\\d{4}-?\\\\d{4}-?\\\\d{4}|3[4,7]\\\\d{13}$\\t\\n^((?:4\\\\d{3})|(?:5[1-5]\\\\d{2})|(?:6011)|(?:3[68]\\\\d{2})|(?:30[012345]\\\\d))[ -]?(\\\\d{4})[ -]?(\\\\d{4})[ -]?(\\\\d{4}|3[4,7]\\\\d{13})$\"\n    },\n    {\n      \"value\": \"Positive Integer\",\n      \"synonym\": \"^(0|(\\\\+)?[1-9]{1}[0-9]{0,8}|(\\\\+)?[1-3]{1}[0-9]{1,9}|(\\\\+)?[4]{1}([0-1]{1}[0-9]{8}|[2]{1}([0-8]{1}[0-9]{7}|[9]{1}([0-3]{1}[0-9]{6}|[4]{1}([0-8]{1}[0-9]{5}|[9]{1}([0-5]{1}[0-9]{4}|[6]{1}([0-6]{1}[0-9]{3}|[7]{1}([0-1]{1}[0-9]{2}|[2]{1}([0-8]{1}[0-9]{1}|[9]{1}[0-5]{1})))))))))$\"\n    },\n    {\n      \"value\": \"US Currency\",\n      \"synonym\": \"^\\\\$(\\\\d{1,3}(\\\\,\\\\d{3})*|(\\\\d+))(\\\\.\\\\d{2})?$\\n^\\\\$?([0-9]{1,3},([0-9]{3},)*[0-9]{3}|[0-9]+)(\\\\.[0-9][0-9])?$\"\n    },\n    {\n      \"value\": \"URL\",\n      \"synonym\": \"^(ht|f)tp(s?)\\\\:\\\\/\\\\/[a-zA-Z0-9\\\\-\\\\._]+(\\\\.[a-zA-Z0-9\\\\-\\\\._]+){2,}(\\\\/?)([a-zA-Z0-9\\\\-\\\\.\\\\?\\\\,\\\\'\\\\/\\\\\\\\\\\\+&amp;%\\\\$#_]*)?$\"\n    },\n    {\n      \"value\": \"Domain Name\",\n      \"synonym\": \"^([a-zA-Z0-9]([a-zA-Z0-9\\\\-]{0,61}[a-zA-Z0-9])?\\\\.)*[a-zA-Z0-9]([a-zA-Z0-9\\\\-]{0,61}[a-zA-Z0-9])?$\\n^([a-zA-Z0-9]([a-zA-Z0-9\\\\-]{0,61}[a-zA-Z0-9])?\\\\.)+[a-zA-Z]{2,6}$\"\n    },\n    {\n      \"value\": \"Email Address\",\n      \"synonym\": \"^([a-zA-Z0-9_\\\\-\\\\.]+)@((\\\\[[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.[0-9]{1,3}\\\\.)|(([a-zA-Z0-9\\\\-]+\\\\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\\\\]?)$\"\n    },\n    {\n      \"value\": \"US Zipcode\",\n      \"synonym\": \"(^(?!0{5})(\\\\d{5})(?!-?0{4})(-?\\\\d{4})?$)\\n(^(?!0{5})(\\\\d{5})(?!-?0{4})(-?\\\\d{4})?$)\"\n    },\n    {\n      \"value\": \"UK Postcode\",\n      \"synonym\": \"^[A-Za-z]{1,2}[0-9A-Za-z]{1,2}[ ]?[0-9]{0,1}[A-Za-z]{2}$\"\n    }\n  ]\n\ninitData = initData.map(function(item) {\n  return Object.assign(item,{id:generateObjectId()})  \n})\n\nconst RenderRow = function(props) {\n    const index = props.index\n    const style = props.style\n    const item = props.data.items[index]\n    return <RegexpsManagerRow  \n         item={item}  splitNumber={index} style={style}\n         saveItem={props.data.saveItem} deleteItem={props.data.deleteItem} saveNlu={props.data.saveNlu}\n         lookups={props.data.lookups}  lastSelected={props.data.lastSelected} setLastSelected={props.data.setLastSelected} selectBetween={props.data.selectBetween}  />\n}\n\nexport default  function RegexpsManager(props) {\n    const {listFilterValue, setListFilterValue, loadAll, deleteItem , findKeyBy, searchFilter, setSearchFilter, tagAllValue, setTagAllValue, listRef, tagAll,untagAll, resetSelection, selectAll, saveItemWrap,  filteredItems, deleteAll, createEmptyItem, sort, lastSelected, setLastSelected, selectBetween} = useListItemEditor('nlutool','regexps','alldata', props.updateFunctions.updateRegexps, initData)\n    //const [currentList, setCurrentList] = useState('')\n\n    function getItemSize() {\n        if (window.innerWidth < 430) {\n               return 390\n        // medium screen tablet\n        } else if (window.innerWidth <= 768) {\n               return 325\n        } else {\n            return 205\n        }\n    }\n\n    useEffect(() => {\n        loadAll()\n        //props.updateFunctions.updateLists(items)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n   \n    function renderEditor(props) {\n            if (filteredItems && filteredItems.length > 0) {\n            \n                return <div>\n                    <span style={{float:'left', fontWeight:'bold'}} >&nbsp;{filteredItems.length} matches </span>\n                     \n                     {props.lookups.selectedRegexTally > 0 && <span style={{float:'right'}}> \n                        <span>With {props.lookups.selectedRegexTally} selected&nbsp;</span>\n                        <ListAllDropDown tagAll={tagAll} tagAllValue={tagAllValue} setTagAllValue={setTagAllValue} untagAll={untagAll} lookups={props.lookups}/>\n                        <Button style={{marginLeft:'1em'}} onClick={deleteAll} variant=\"danger\"  >Delete Selected</Button> \n                    </span>} \n                    \n                      <div style={{clear:'both'}}>\n                        <div style={{clear:'both'}}>\n                            <List\n                                key=\"list\"\n                                ref={listRef}\n                                itemData={{items: filteredItems, saveItem: saveItemWrap, deleteItem, findKeyBy, lookups: props.lookups, lastSelected, setLastSelected, selectBetween}}\n                                itemKey={index => index}  \n                                className=\"List\"\n                                height={700}\n                                itemCount={filteredItems.length}\n                                itemSize={getItemSize}\n                                width={'100%'}\n                              >{RenderRow}\n                            </List>\n                        </div>\n                    </div>\n               </div>\n\n            }\n              \n    }\n    \n  \n    return <div>\n        \n                   \n        {<RegexpsManagerSearchBar {...props} searchFilter={searchFilter} setSearchFilter={setSearchFilter} listFilterValue={listFilterValue} setListFilterValue={setListFilterValue} resetSelection={resetSelection} selectAll={selectAll} createEmptyItem={createEmptyItem} sort={sort} />}\n         \n         \n         {renderEditor(props)}\n    </div>\n            \n}\n      \n\n //{JSON.stringify(items)}\n    //<hr/>\n    \n    \n    //<hr/>\n    //{JSON.stringify(filteredItems)}\n\n\n","import React, {useState, useEffect} from 'react'\nimport {findFirstDiffPos, uniquifyArray, uniquifyArrayOfObjects } from './utils'\nfunction useNluRow(item, saveItem, splitNumber, style, setPageMessage, lastSelected, setLastSelected, selectBetween) {\n    const [selectionState, setSelectionState] = useState({})\n    const [newEntity, setNewEntity] = useState('')\n    const [intentTitle, setIntentTitle] = useState(item && item.intent ? item.intent : '')\n    // for ReactTags format using objects\n    const [tags, setTags] = useState([])\n    const [skills, setSkills] = useState([])\n    ////console.log(['USENLUROW',splitNumber])\n    const reactTags = React.createRef()\n    const reactSkills = React.createRef()\n     // tags\n    useEffect(() => {\n        if (item.tags) setTags(item.tags.map(function(tag,i) {return {id:i, name:tag}}))\n        if (item.skills) setSkills(item.skills.map(function(skill,i) {return {id:i, name:skill}}))\n    },[item])\n\n     function onTagDelete (i) {\n        const newTags = tags.slice(0)\n        newTags.splice(i, 1)\n        setTags(newTags)\n        var newItem = item\n        newItem.tags = newTags.map(function(newTag) { return newTag.name})\n        saveItem(newItem,splitNumber)\n      }\n     \n     function onTagAddition (tag) {\n        if (tag && tag.name.trim().length > 0) {\n            const newTags = [].concat(tags, tag)\n            setTags(uniquifyArrayOfObjects(newTags,'name').sort(function(a,b) {if (a.name > b.name) return 1; else return -1} ))\n            var newItem = item\n            newItem.tags = uniquifyArray(newTags.map(function(newTag) { return newTag.name})).sort()\n            saveItem(newItem,splitNumber)\n        }\n      }\n      \n      function onSkillDelete (i) {\n        const newSkills = skills.slice(0)\n        newSkills.splice(i, 1)\n        setSkills(newSkills)\n        var newItem = item\n        newItem.skills = newSkills.map(function(newSkill) { return newSkill.name})\n        saveItem(newItem,splitNumber)\n      }\n     \n     function onSkillAddition (skill) {\n         if (skill && skill.name.trim().length > 0) {\n            const newSkills = [].concat(skills, skill)\n            setSkills(uniquifyArrayOfObjects(newSkills,'name').sort(function(a,b) {if (a.name > b.name) return 1 ;else return -1} ))\n            var newItem = item\n            newItem.skills = uniquifyArray(newSkills.map(function(newSkill) { return newSkill.name})).sort()\n            saveItem(newItem,splitNumber)\n        }\n     }\n    \n        \n    function createSelection(field, start, end) {\n        if (field) {\n            if( field.createTextRange ) {\n                var selRange = field.createTextRange();\n                selRange.collapse(true);\n                selRange.moveStart('character', start);\n                selRange.moveEnd('character', end-start);\n                selRange.select();\n            } else if( field.setSelectionRange ) {\n                field.setSelectionRange(start, end);\n            } else if( field.selectionStart ) {\n                field.selectionStart = start;\n                field.selectionEnd = end;\n            }\n            field.focus();\n        }\n    }\n    \n    function updateExampleContent(content) {\n        ////console.log('UPDTEXT')\n        if (item && typeof item.example === \"string\" && typeof content === \"string\") {\n            ////console.log('UPDTEXTREAL')\n            const newItem = JSON.parse(JSON.stringify(item));\n            if (item.entities && item.entities.length > 0) {\n                var entities = item.entities\n                // deal with entity ranges * allow for delete multiple\n                const diffPos = findFirstDiffPos(content,item.example)\n                // insertion\n                if (content.length - item.example.length > 0) {\n                    \n                    ////console.log('UPDTEXT insert')\n                    const insertionLength = content.length - item.example.length\n                    // update start and end subtract deletionLength\n                    newItem.entities = entities.map(function(entity,entityIndex) {\n                        if (diffPos < entity.start) {\n                            entity.start += insertionLength\n                            entity.end += insertionLength;\n                        } else if (diffPos < entity.end) {\n                            // update entity value\n                            entity.end += insertionLength;\n                            entity.value = content.slice(entity.start,entity.end)\n                        }\n                        return entity \n                    })\n                // replace    \n                } \n                else if (content.length === item.example.length) {\n                    ////console.log('UPDTEXT replace')\n                    // check if was inside an entity and update value as required\n                    newItem.entities = entities.map(function(entity,entityIndex) {\n                        if (diffPos >= entity.start && diffPos < entity.end) {\n                            // update entity value\n                            entity.value = content.slice(entity.start,entity.end)\n                        }\n                        return entity \n                    })\n                // deletion\n                } else {\n                    ////console.log('UPDTEXT delete')\n                    const deletionLength = content.length - item.example.length\n                    // update start and end subtract deletionLength\n                    newItem.entities = entities.map(function(entity,entityIndex) {\n                        if (diffPos < entity.start) {\n                            entity.start += deletionLength\n                            entity.end += deletionLength;\n                        } else if (diffPos < entity.end) {\n                            // update entity value\n                            entity.end += deletionLength;\n                            entity.value = content.slice(entity.start,entity.end)\n                        }\n                        return entity \n                    })\n                }\n            }\n            newItem.example = content;\n            saveItem(newItem,splitNumber)\n        }\n    }\n    \n    function entityClicked(entityKey,entityType) {\n        if (item.entities)  {\n            var entities = item.entities\n            if (! selectionState || !selectionState.textSelection || selectionState.textSelection.length === 0) {\n                // select text in string\n                if (entities[entityKey]) {\n                   createSelection(document.getElementById('example_input_'+splitNumber),entities[entityKey].start,entities[entityKey].end)\n                }\n            } else {\n                entityTypeChanged(entityKey,entityType);\n            }\n        }\n    }\n    \n    function entityTypeChanged(entityNumber,type) {\n        ////console.log(['ENTY TYPE CHANGE',entityNumber,type])\n        var newItem = item\n        if (!Array.isArray(item.entities)) {\n            item.entities = []\n        }\n         ////console.log(['ENTY TYPE CHANGE ITEM ENT',item.entities])\n        var newEntities = item.entities \n        var entity = newEntities[entityNumber] ? newEntities[entityNumber] : {}\n        const typeChanged = !(type && type.length > 0 && type === entity.type)\n        ////console.log(['ENTY TYPE CHANGED',typeChanged,type,entity.type])\n        entity.type = type\n        if (selectionState && selectionState.textSelection) {\n            ////console.log(['HAVE SELECTION',selectionState.textSelection])\n            const start = selectionState.startTextSelection\n            const end = selectionState.endTextSelection\n            var isOverlapProblem = false;\n            if (typeof parseInt(start) === \"number\" && typeof parseInt(end) === \"number\") {\n                item.entities.map(function(entity) {\n                    // is OK if updating entity \n                    const bypass = !typeChanged && entity.type === type\n                    const isOverlap = (entity.start > start && entity.start < end) || (entity.end > start && entity.end < end)\n                    ////console.log(['CHECK ENTITY',bypass, isOverlap, entity.type,start,end,entity.start,entity.end])\n                    if (!bypass && isOverlap) isOverlapProblem = true\n                    return null\n                })\n            }\n            if (isOverlapProblem) {\n                setPageMessage('Overlap with existing entity !')\n                setTimeout(function() {\n                    setPageMessage('')\n                },2000)\n            } else {\n                entity.value = selectionState.textSelection\n                entity.start = selectionState.startTextSelection\n                entity.end = selectionState.endTextSelection\n                if (!newEntities[entityNumber]) newEntities.push(entity)\n                else newEntities[entityNumber] = entity\n                newItem.entities = newEntities\n                setSelectionState(null)\n                saveItem(newItem,splitNumber)\n            }\n        } else {\n            if (!newEntities[entityNumber]) newEntities.push(entity)\n            else newEntities[entityNumber] = entity\n            newItem.entities = newEntities\n            setSelectionState(null)\n            saveItem(newItem,splitNumber)\n        }\n        \n    }\n    \n    function intentChanged(intent) {\n        var newItem = item \n        newItem.intent = intent\n        saveItem(newItem,splitNumber)\n    }\n \n    \n    function entityDelete(entityNumber) {\n        if (item.entities) {\n            var newItem = item \n            var newEntities = item.entities.slice(0,entityNumber).concat(item.entities.slice(entityNumber + 1))\n            newItem.entities = newEntities\n            saveItem(newItem,splitNumber)\n        }\n    }\n    \n    function selectItem(splitNumber,e) {\n        if (e.shiftKey && lastSelected >= 0)  {\n            //console.log(['SELECT INTENT WITH SHIFT '+splitNumber, lastSelected])\n            selectBetween(splitNumber,lastSelected) \n            setLastSelected(splitNumber)  \n        } else {\n            //console.log(['SELECT INTENT WITHOUT  SHIFT ',lastSelected])\n            var newItem = item\n            item.isSelected = true;\n            saveItem(newItem,splitNumber)\n            setLastSelected(splitNumber)\n            //console.log(['LASTSEL ',lastSelected])\n        }\n    }\n    \n    \n    function setSkill(skill, splitNumber) {\n        //var newItem = item\n        //item.isSelected = true;\n        //props.saveItem(newItem,splitNumber)\n    }\n    \n    function deselectItem(splitNumber,e) {\n        if (e.shiftKey) //console.log(['DESELECT INTENT WITH SHIFT '+splitNumber, lastSelected])\n        //else //console.log(['DESELECT INTENT WITHOUT  SHIFT ',lastSelected])\n        var newItem = item\n        item.isSelected = false;\n        saveItem(newItem,splitNumber)\n        setLastSelected(-2)\n        //console.log(['LASTSEL ',lastSelected])\n    } \n    \n    return {    \n        intentTitle, setIntentTitle, selectionState, setSelectionState, newEntity, setNewEntity, tags, setTags, skills, setSkills, reactTags, reactSkills, onTagDelete, onTagAddition, onSkillDelete,onSkillAddition, createSelection, updateExampleContent, entityClicked, entityTypeChanged, intentChanged, entityDelete, selectItem, setSkill, deselectItem\n    }\n    \n}\nexport default useNluRow\n","/* global window */\nimport {Button,   Dropdown, ButtonGroup } from 'react-bootstrap'\nimport React, {useState} from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ReactTags from 'react-tag-autocomplete'\nimport useNluRow from './useNluRow'\nimport SuggestionComponent from './components/SuggestionComponent'\nimport checkImage from './images/check.svg'\nimport TagComponent from './components/TagComponent'\n\nexport default function NluExampleRow(props) {\n       const  {item, splitNumber , style} = props;\n       const {    \n            intentTitle, setIntentTitle, selectionState, setSelectionState, newEntity, setNewEntity, tags, skills, reactTags, reactSkills, \n            onTagDelete, onTagAddition, onSkillDelete,onSkillAddition, updateExampleContent, entityClicked, entityTypeChanged, intentChanged, entityDelete, selectItem,  deselectItem\n        } = useNluRow(props.item, props.saveItem, props.splitNumber, props.style, props.setPageMessage, props.lastSelected, props.setLastSelected, props.selectBetween)\n        const [textInput, setTextInput] = useState(props.item && props.item.example ? props.item.example  : '')\n         \n       var intentOptions = props.lookups.intentLookups && props.lookups.intentLookups.sort().map(function(intentKey,i) {\n          return <Dropdown.Item key={i} value={intentKey} onClick={function(e) {intentChanged(intentKey)}}  >{intentKey}</Dropdown.Item>\n       })\n       //var skillOptions = props.lookups.skillLookups && props.lookups.skillLookups.sort().map(function(skillKey,i) {\n          //return <Dropdown.Item key={i} value={skillKey} onClick={function(e) {setSkill(skillKey,props.splitNumber)}}  >{skillKey}</Dropdown.Item>\n       //})\n       // ONE PER ENTITY FOR THIS EXAMPLE\n       var entitiesDropdowns = item && item.entities ? item.entities.map(function(entity,i) {\n           var entityOptions = props.lookups.entityLookups.sort().map(function(entityKey,j) {\n              return <Dropdown.Item  key={j} value={entityKey} onClick={function(e) {entityTypeChanged(i,entityKey)}}  >{entityKey}</Dropdown.Item>\n           })\n           return<Dropdown style={{marginLeft:'0.2em'}} variant='info'  key={i}  as={ButtonGroup}>\n              <Dropdown.Toggle variant='info'  split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n              <Button variant='info'   size=\"sm\"  onClick={function(e) {entityClicked(i,entity.type)}} >\n              <b>{entity.type}</b> \n                -\n              {entity.value ? entity.value : 'Select Entity Type'}\n              </Button>\n              <Button variant=\"info\" size=\"sm\" onClick={function(e) {entityDelete(i,'')}} >X</Button>\n              <Dropdown.Menu>\n                  <form  style={{display:'inline'}}>\n                    <div className=\"form-group\">\n                      <input type=\"text\" className=\"form-control\" onChange={function(e) {entityTypeChanged(i,e.target.value)}}\n                    value={entity.type} />\n                    </div>\n                  </form>\n                  {entityOptions}\n              </Dropdown.Menu>\n            </Dropdown>\n       }) : [];\n        //PLUS CREATE NEW WHEN TEXT IS SELECTED\n       if (selectionState  && selectionState.textSelection && selectionState.textSelection.length > 0 &&  selectionState.textSelectionFrom === splitNumber) {\n           var entityOptions =  props.lookups.entityLookups && props.lookups.entityLookups.sort().map(function(entityKey,j) {\n              return <Dropdown.Item key={j} value={entityKey} onClick={function(e) {entityTypeChanged(-1,entityKey)}}  >{entityKey}</Dropdown.Item>\n           })\n           entitiesDropdowns.push(<Dropdown key=\"new\" variant='success'  as={ButtonGroup}>\n\n          <Dropdown.Toggle variant='success'  split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button  variant='success' size=\"sm\" >New Entity</Button>\n\n          <Dropdown.Menu>\n           <form style={{display:'inline'}} onSubmit={function(e) {e.preventDefault(); entityTypeChanged(-1,newEntity)}}>\n                <div className=\"form-group\">\n                  <input type=\"text\" className=\"form-control\" onChange={function(e) {setNewEntity(e.target.value)}}\n                value={newEntity} />\n                </div>\n              </form>\n              {entityOptions}\n          </Dropdown.Menu>\n        </Dropdown>)\n       }\n       //var buttonImageStyle={color:'white', height:'2em'}\n       return item && <div style={style} className={splitNumber % 2 ? 'ListItemOdd' : 'ListItemEven'}>\n               <div style={{position:'relative', width: '100%', textAlign:'left',  borderTop: '2px solid black'}}>\n                  \n                   {!item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"secondary\" onClick={function(e) {selectItem(splitNumber,e)}} ><img  style={{height:'1em'}} src={checkImage} alt=\"Select\" /></Button>}\n                  {item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"success\" onClick={function(e) {deselectItem(splitNumber,e)}} ><img  style={{height:'1em'}} src={checkImage} alt=\"Deselect\" /></Button>}\n                  \n                <Button  variant=\"danger\" size=\"sm\" style={{float:'right', fontWeight:'bold', borderRadius:'15px', marginTop:'0.2em'}} onClick={function(e) {if (window.confirm('Really delete')) {props.deleteItem(splitNumber,(item.id ? item.id : ''))}}} >X</Button>\n                 \n                 \n                  <Dropdown  style={{float:'left'}} as={ButtonGroup}>\n                  <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button   size=\"sm\" >{item.intent ? item.intent.toString() : 'Select Intent'} </Button>\n                  <Dropdown.Menu>\n                   <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault(); intentChanged(intentTitle)}}>\n                        <div className=\"form-group\">\n                          <input type=\"text\" className=\"form-control\" value={intentTitle} onChange={function(e) {setIntentTitle(e.target.value)}}\n                         />\n                        </div>\n                      </form>\n                      {intentOptions}\n                  </Dropdown.Menu>\n                  </Dropdown>\n                  <span style={{float:'left'}}>{entitiesDropdowns}</span>\n                 \n                   <div style={{float:'left'}}>\n                   <ReactTags\n                    placeholderText=\"Add to skill\"\n                    minQueryLength={0}\n                    maxSuggestionsLength={50}\n                    autoresize={false}\n                    allowNew={true}\n                    ref={reactSkills}\n                    tags={skills}\n                    suggestionComponent={SuggestionComponent}\n                    suggestions={props.lookups.skillLookups.map(function(tag,i) {return {id: i, name: tag}})}\n                    onDelete={onSkillDelete}\n                    onAddition={onSkillAddition} /> \n                    </div>\n                    \n                  <div style={{float:'left'}}>\n                   <ReactTags\n                    placeholderText=\"Add new tag\"\n                    minQueryLength={0}\n                    maxSuggestionsLength={50}\n                    autoresize={false}\n                    allowNew={true}\n                    ref={reactTags}\n                    tags={tags}\n                    tagComponent={function(iprops) {return <TagComponent {...iprops}   setRegexpEntity={props.setRegexpEntity} setRegexpIntent={props.setRegexpIntent}  lookups={props.lookups}  />}}\n                    suggestionComponent={SuggestionComponent}\n                    suggestions={props.lookups.tagLookups.map(function(tag,i) {return {id: i, name: tag}})}\n                    onDelete={onTagDelete}\n                    onAddition={onTagAddition} /> \n                    </div>\n                  \n                  <input  \n                   onFocus={ function(e) {\n                       setSelectionState(null)\n                    }}\n                   onSelect={ function(e) {\n                     var textSelection = window.getSelection().toString(); \n                     setSelectionState({textSelection:textSelection, textSelectionFrom: splitNumber, startTextSelection: e.target.selectionStart, endTextSelection: e.target.selectionEnd})\n                  }}  \n                   type='text' style={{width:'80%'}} value={textInput} id={\"example_input_\"+splitNumber} onChange={function(e) { setTextInput(e.target.value); updateExampleContent(e.target.value)}} />\n                  \n                  \n                \n                \n            </div>\n      </div>\n}\n","import React from 'react';\n//import {Link} from 'react-router-dom'\nimport {Button, Dropdown, ButtonGroup} from 'react-bootstrap'\nimport SearchInput from './SearchInput'\nimport checkImage from '../images/check.svg'\n\nconst EditorSearchBar = function(props) {\n    var topskillOptions = props.lookups.skillLookups && props.lookups.skillLookups.sort().map(function(skillKey,i) {\n          return <Dropdown.Item key={i} value={skillKey} onClick={function(e) {props.setSkillFilterValue(skillKey)}}  >{skillKey}</Dropdown.Item>\n    })\n    topskillOptions.unshift(<Dropdown.Item key={'empty_key_value_empty'} value={''} onClick={function(e) {props.setSkillFilterValue('')}}  >&nbsp;</Dropdown.Item>)\n        \n    var intentOptions = props.lookups.intentLookups && props.lookups.intentLookups.sort().map(function(intentKey,i) {\n          return <Dropdown.Item key={i} value={intentKey} onClick={function(e) {props.setIntentFilterValue(intentKey)}}  >{intentKey}</Dropdown.Item>\n    })\n    intentOptions.unshift(<Dropdown.Item key={'empty_key_value_empty'} value={''} onClick={function(e) {props.setIntentFilterValue('')}}  >&nbsp;</Dropdown.Item>)\n    var tagOptions = props.lookups.tagLookups && props.lookups.tagLookups.sort().map(function(tagKey,i) {\n          return <Dropdown.Item key={i} value={tagKey} onClick={function(e) {props.setTagFilterValue(tagKey)}}  >{tagKey}</Dropdown.Item>\n    })\n    tagOptions.unshift(<Dropdown.Item key={'empty_key_value_empty'} value={''} onClick={function(e) {props.setTagFilterValue('')}}  >&nbsp;</Dropdown.Item>)\n      \n    return <div>\n            {<span>\n            \n                {props.lookups.selectedTally > 0 && <Button size=\"lg\"  onClick={function(e) { props.resetSelection(e) }} variant=\"success\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\" /></Button> }\n                {props.lookups.selectedTally <= 0 && <Button size=\"lg\" onClick={function(e) { props.selectAll(e) }} variant=\"secondary\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Select\" /></Button> }\n                \n                \n           </span>}   \n            {<span style={{marginLeft:'0.4em'}}><SearchInput searchFilter={props.searchFilter} setSearchFilter={props.setSearchFilter} /></span>}   \n            \n            {<Dropdown style={{marginLeft:'0.5em'}}  as={ButtonGroup}>\n                  <Dropdown.Toggle split   id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button  >{'Skill '+(props.skillFilterValue ? ' - '+ props.skillFilterValue : '')} </Button>\n                  <Dropdown.Menu>\n                      {topskillOptions}\n                  </Dropdown.Menu>\n                </Dropdown>}\n                \n            {<Dropdown style={{marginLeft:'0.5em'}}  as={ButtonGroup}>\n                  <Dropdown.Toggle split   id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button  >{'Intent '+(props.intentFilterValue ? ' - '+ props.intentFilterValue : '')} </Button>\n                  <Dropdown.Menu>\n                      {intentOptions}\n                  </Dropdown.Menu>\n                </Dropdown>}\n                \n            {<Dropdown style={{marginLeft:'0.5em'}}  as={ButtonGroup}>\n                  <Dropdown.Toggle split   id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button  >{'Tag '+(props.tagFilterValue ? ' - '+ props.tagFilterValue : '')} </Button>\n                  <Dropdown.Menu>\n                      {tagOptions}\n                  </Dropdown.Menu>\n                </Dropdown>}\n             <Button  style={{marginLeft:'1em'}} variant=\"success\" onClick={function(e) {props.createEmptyItem(props.skillFilterValue, props.intentFilterValue, props.tagFilterValue)}} >New Intent</Button>\n             <Button  style={{marginLeft:'1em'}} variant=\"primary\" onClick={function(e) {props.sort(function(a,b) { if (a.value < b.value) return -1; else return 1;})}} >Sort</Button>\n        <hr/>\n        </div>\n}\nexport default EditorSearchBar\n","import React, {useState, useEffect} from 'react';\nimport localforage from 'localforage'\nimport useDBSingleKey from './useDBSingleKey'\nimport {uniquifyArray, generateObjectId} from './utils'\nimport {useParams, useHistory} from 'react-router-dom'\n\nfunction useNluEditor(database, databaseTable, databaseKey, updateLookups) {\n    ////console.log([\"USENLUEDITOR\",database, databaseTable, databaseKey])\n    const {loadAll, saveItem, deleteItem , items, setItems, findKeyBy, filter, sort} = useDBSingleKey(database, databaseTable, databaseKey)\n    ////console.log([\"USENLUEDITOR items\",items])\n    const [filteredItems, setFilteredItems] = useState([])\n    const [filteredItemsKeys, setFilteredItemsKeys] = useState([])\n    const [searchFilter, setSearchFilter] = useState('')\n    const [tagAllValue, setTagAllValue] = useState('')\n    const [skillAllValue, setSkillAllValue] = useState('')\n    //const [skillFilterValue, setSkillFilterValue] = useState('')\n    //const [intentFilterValue, setIntentFilterValue] = useState('')\n    const [intentAllValue, setIntentAllValue] = useState('')\n    const listRef = React.createRef()\n    const [lastSelected, setLastSelected] = useState(-1)\n    \n    const params = useParams()\n    const history = useHistory()\n    var skillFilterValue = params.skillId ? params.skillId : '';\n    function setSkillFilterValue(value) {\n        ////console.log('SETSKILLVAL')\n        ////console.log(history)\n        var root = history.location.pathname.split(\"/\")\n        var parts=['/'+root[1]]\n        skillFilterValue = value;\n        if (skillFilterValue.length > 0) {\n            parts.push('/skill/'+skillFilterValue)\n        }\n        if (intentFilterValue.length > 0) {\n            parts.push('/intent/'+intentFilterValue)\n        }\n        if (tagFilterValue.length > 0) {\n            parts.push('/tag/'+tagFilterValue)\n        }////console.log(['ssv',parts,value])\n        history.push(parts.join(''))\n    }\n    var intentFilterValue = params.intentId ? params.intentId : '';\n    \n    function setIntentFilterValue(value) {\n        var root = history.location.pathname.split(\"/\")\n        var parts=['/'+root[1]]\n        intentFilterValue = value;\n        if (skillFilterValue.length > 0) {\n            parts.push('/skill/'+skillFilterValue)\n        }\n        if (intentFilterValue.length > 0) {\n            parts.push('/intent/'+intentFilterValue)\n        }\n        if (tagFilterValue.length > 0) {\n            parts.push('/tag/'+tagFilterValue)\n        }\n        history.push(parts.join(''))\n    }\n    \n    var tagFilterValue = params.tag ? params.tag : '';\n    function setTagFilterValue(value) {\n        //console.log(['STETAGFIL',value,tagFilterValue])\n        var root = history.location.pathname.split(\"/\")\n        var parts=['/'+root[1]]\n        tagFilterValue = value;\n        if (skillFilterValue.length > 0) {\n            parts.push('/skill/'+skillFilterValue)\n        }\n        if (intentFilterValue.length > 0) {\n            parts.push('/intent/'+intentFilterValue)\n        }\n        if (tagFilterValue.length > 0) {\n            parts.push('/tag/'+tagFilterValue)\n        }\n        history.push(parts.join(''))\n    }\n    \n    //const examplesDB = useDBSingleKey('nlutool','examples','alldata')\n    //var updateLookupsTimeout = null\n    //var updateFilteredTimeout = null\n    //useEffect(() => {\n        ////clearTimeout(updateLookupsTimeout)\n        ////updateLookupsTimeout = setTimeout(function() {\n            \n        ////},2000)\n    //// eslint-disable-next-line react-hooks/exhaustive-deps\n    //},[items])\n     \n    useEffect(() => {\n        //clearTimeout(updateFilteredTimeout)\n        ////console.log('UPDATE FILTERED'+intentFilterValue)\n        //updateFilteredTimeout = setTimeout(function() {\n             ////console.log('UPDATE FILTERED NOW')\n             var filteredItems = filter(function(item) {\n                if ((!searchFilter || searchFilter.trim().length <=0 ) && (!skillFilterValue || skillFilterValue.trim().length <=0 ) && (!intentFilterValue || intentFilterValue.trim().length <=0 ) && (!tagFilterValue || tagFilterValue.trim().length <=0 )) return true;\n                var intentFilter = true\n                if (intentFilterValue && intentFilterValue.length > 0) {\n                    if (item.intent === intentFilterValue) {\n                        intentFilter = true\n                    } else {\n                        intentFilter = false\n                    }\n                }\n\n                var tagFilter = true\n                if (tagFilterValue && tagFilterValue.length > 0) {\n                    if (item.tags && item.tags.indexOf(tagFilterValue) !== -1) {\n                        tagFilter = true\n                    } else {\n                        tagFilter = false\n                    }\n                }\n\n                var skillFilter = true\n                if (skillFilterValue && skillFilterValue.length > 0) {\n                    if (item.skills && item.skills.indexOf(skillFilterValue) !== -1) {\n                        skillFilter = true\n                    } else {\n                        skillFilter = false\n                    }\n                }\n                var searchFilterBool = true\n                if (searchFilter && searchFilter.length > 0) {\n                    if (item.example && item.example.toLowerCase().indexOf(searchFilter.toLowerCase()) !== -1 ) {\n                        searchFilterBool = true\n                    } else {\n                        searchFilterBool = false\n                    }\n                }         \n                return searchFilterBool && skillFilter && intentFilter && tagFilter;       \n                //intentFilterValue\n                //return (item.example.indexOf(searchFilter) !== -1 \n                            //&& intentFilter \n                            //&& ((skillFilterValue.length <= 0 || (skillFilterValue.length > 0 && typeof item.skills ===\"object\" && item.skills.indexOf(skillFilterValue) !== -1)) ? true : false\n            })\n            var itemKeys = {}\n            filteredItems.map(function(item) {if (item.id) itemKeys[item.id] = true; return null})\n            filteredItems.sort(function(a,b) { return (a.value ? a.value.toLowerCase() : '') < (b.value ? b.value.toLowerCase() : '') ? true : false})\n            setFilteredItems(filteredItems)\n            setFilteredItemsKeys(itemKeys)\n            updateLookups(filteredItems)\n        //},800)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[items, searchFilter, skillFilterValue, intentFilterValue])\n    \n    function deleteAll(e)  {\n        if (window.confirm('Really delete all selected')) {\n            if (items) {\n                var newItems = []\n                items.map(function(item,i) {\n                    // dump items without id\n                    if (item && item.id) {\n                        // only delete filtered items\n                        if (filteredItemsKeys[item.id]) {\n                           // only delete selected filtered items\n                           if (!item.isSelected) {\n                               newItems.push(item)\n                           }\n                        // not filtered so push\n                        } else {\n                            newItems.push(item)\n                        }\n                    }\n                    return null\n                })\n                setItems(newItems)\n                listRef.current.resetAfterIndex(0);\n            }\n        }\n    }\n    \n    function tagAll(val) {\n        //console.log(['tagall',tagAllValue,val])\n        var tagValue = val ? val : tagAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                if (item && item.id) { \n                    if (item.isSelected && filteredItemsKeys[item.id]) {\n                       var newItem = JSON.parse(JSON.stringify(item));\n                       if (!newItem.tags) newItem.tags=[]\n                       if (newItem.tags.indexOf(tagValue) === -1) newItem.tags.push(tagValue)\n                       newItems.push(newItem)\n                    } else {\n                       newItems.push(item)\n                    }\n                }\n               return null\n            })\n            setItems(newItems)\n        }\n    }\n\n    function untagAll(val) {\n        //console.log(['untagall',tagAllValue,val])\n        //var tagValue = val ? val : tagAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n               if (item && item.id) {\n                   if (item.isSelected && filteredItemsKeys[item.id]) {\n                       var newItem = JSON.parse(JSON.stringify(item));\n                       if (!newItem.tags) newItem.tags=[]\n                       var finalTags = []\n                       newItem.tags.map(function(tag) {\n                           if (tag !== val) {\n                               finalTags.push(tag)\n                           }  \n                           return null\n                       })\n                       newItem.tags = finalTags\n                       newItems.push(newItem)\n                   } else {\n                       newItems.push(item)\n                   }  \n               }\n               return null\n            })\n            setItems(newItems)\n        }\n    }\n    \n    function intentAll(val) {\n        ////console.log(['intentall',intentAllValue,val])\n        var intentValue = val ? val : intentAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                if (item && item.id) {\n                   if (item.isSelected && filteredItemsKeys[item.id]) {\n                       var newItem = item\n                       newItem.intent = intentValue\n                       newItems.push(newItem)\n                   } else {\n                       newItems.push(item)\n                   }  \n                }\n               return null\n            })\n            setItems(newItems)\n        }\n    }\n    function resetSelection() {\n         if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                if (item) {\n                   var newItem = item\n                   newItem.isSelected = false\n                   newItems.push(newItem)\n                } \n               return null\n            })\n            setItems(newItems)\n            \n        }\n    }\n    \n    function selectAll() {\n         //console.log(['SELECTALL',items])\n         if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                if (item && item.id) {\n                    var newItem = item\n                    if (item.id && filteredItemsKeys[item.id]) {\n                       newItem.isSelected = true\n                       newItems.push(newItem)\n                    } else {\n                        newItem.isSelected = false\n                        newItems.push(newItem)\n                    }\n                }\n                return null\n            })\n            setItems(newItems)\n        }\n    }\n    \n    function selectBetween(a,b) {\n         //console.log(['SELECTBETWEEN',a,b,items])\n         var min = a\n         var max = b\n         if (max <  min) {\n             min = b\n             max = a\n         }\n         if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                if (item && item.id) {\n                    var newItem = item\n                    if (item.id && filteredItemsKeys[item.id]) {\n                       if (i >= min && i <= max) newItem.isSelected = true\n                       newItems.push(newItem)\n                    } \n                }\n                return null\n            })\n            setItems(newItems)\n        }\n    }\n    \n     function skillSetAll(val) {\n         ////console.log(['set skill all',tagAllValue,val])\n        var skillValue = val ? val : skillAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n               if (item && item.id) { \n                   if (item.isSelected && filteredItemsKeys[item.id]) {\n                       var newItem = JSON.parse(JSON.stringify(item));\n                       if (!newItem.skills) newItem.skills=[]\n                       if (newItem.skills.indexOf(skillValue) === -1) newItem.skills.push(skillValue)\n                       newItem.skills = uniquifyArray(newItem.skills)\n                       newItems.push(newItem)\n                   } else {\n                       newItems.push(item)\n                   }  \n                }\n               return null\n            })\n            setItems(newItems)\n        }\n    }\n\n       function unskillAll(val) {\n        ////console.log(['unskillall',tagAllValue,val])\n        //var tagValue = val ? val : tagAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n               if (item && item.id) { \n                   if (item.isSelected && filteredItemsKeys[item.id]) {\n                       var newItem = JSON.parse(JSON.stringify(item));\n                       if (!newItem.skills) newItem.skills=[]\n                       var finalTags = []\n                       newItem.skills.map(function(tag) {\n                           if (tag !== val) {\n                               finalTags.push(tag)\n                           }  \n                           return null\n                       })\n                       newItem.skills = finalTags\n                       newItems.push(newItem)\n                   } else {\n                       newItems.push(item)\n                   }  \n                }\n               return null\n            })\n            setItems(newItems)\n        }\n    }\n        \n       \n    function saveAll(e)  {\n        //console.log(['save akk',filteredItems])\n        if (items) {\n            var newItems = []\n            var lsItems = []\n            filteredItems.map(function(item,i) {\n                if (item.intent && item.intent.length > 0 && item.id && filteredItemsKeys[item.id]) {\n                   if (item.isSelected) {\n                       lsItems.push(item)\n                   } else {\n                       newItems.push(item)\n                   }\n                } else {\n                    newItems.push(item)\n               }\n               return null\n            })\n            //saveLSItems(lsItems)\n            setItems(newItems)\n            listRef.current.resetAfterIndex(0);\n        }\n         \n    }\n   \n    function createEmptyItem(skill, intent, tag) {\n        //console.log(['CREATE EMPTY EXAMPLE'])\n        setSearchFilter('')\n        var skills=[]\n        if (skill && skill.trim().length > 0) skills.push(skill)\n        var tags=[]\n        if (tag && tag.trim().length > 0) tags.push(tag)\n        \n        var newIntent=''\n        if (intent && intent.trim().length > 0) newIntent = intent\n        saveItem({id:null, example:'', intent:newIntent, skills:skills,tags:tags})\n        setTimeout(function() {\n            if (listRef && listRef.current) {\n                console.log(['HAVE CURRENT',listRef.current.resetAfterIndex])\n                listRef.current.resetAfterIndex(0);\n                listRef.current.scrollToItem(20);\n                listRef.current.scrollToItem(0);\n            }\n        },1000)\n        //console.log(['SAVED NEW EXAMPLE',{id:null, example:'', intent:newIntent, skills:skills,tags:tags}])\n    }\n    \n    function saveItemWrap(item,index) {\n        saveItem(item,index)\n        updateLookups(items)\n        //console.log(['SAVEITEMWRAP',listRef ? listRef.current : 'notcurrent'])\n        if (listRef && listRef.current) {\n            //console.log(['HAVE CURRENT',listRef.current.resetAfterIndex, index])\n            listRef.current.resetAfterIndex(index);\n            //listRef.current.scrollToItem(20);\n            //listRef.current.scrollToItem(0);\n        }\n        \n    }\n    \n    function getItemSize(index) {\n        ////console.log(window.innerWidth,window.innerHeight)\n        // set parameters for full size > 1024\n        var baseSize = 100\n        var heightPerLine = 70\n        var tagsPerLine = 10\n        var entitiesPerLine = 8\n        var skillsPerLine = 6\n        // tiny screen mobile \n        if (window.innerWidth < 430) {\n            baseSize = 140\n            heightPerLine = 50\n            tagsPerLine = 4\n            entitiesPerLine = 1\n            skillsPerLine = 1\n        // medium screen tablet\n        } else if (window.innerWidth <= 768) {\n            baseSize = 120\n            heightPerLine = 30\n            tagsPerLine = 2\n            entitiesPerLine = 1\n            skillsPerLine = 2\n        }\n        var tallyExtras = 0;\n        var item = items[index]\n        if (item && item.entities) tallyExtras += item.entities.length/entitiesPerLine;\n        if (item && item.tags) tallyExtras += item.tags.length/tagsPerLine;\n        if (item && item.skills) tallyExtras += item.skills.length/skillsPerLine;\n        var size = baseSize + (Math.round(tallyExtras)) * heightPerLine\n        ////console.log(['ITEM SIZE',size, baseSize,heightPerLine,tagsPerLine,entitiesPerLine,tallyExtras,item])\n        return size \n    }\n    \n    function saveLSItem(item) {\n        var localforageStorage = localforage.createInstance({\n           name: 'nlutool',\n           storeName   :'examples',\n         });\n         localforageStorage.getItem('alldata').then(function(exampleItems) {\n                exampleItems.push(item)\n                localforageStorage.setItem('alldata',exampleItems)\n         })\n       \n    }\n    \n    function saveLSItems(newItems) {\n        if (newItems) {\n            var localforageStorage = localforage.createInstance({\n               name: 'nlutool',\n               storeName   :'examples',\n             });\n             localforageStorage.getItem('alldata').then(function(exampleItems) {\n                 if (exampleItems) {\n                    newItems.map(function(newItem) { exampleItems.push(newItem ); return null})\n                    localforageStorage.setItem('alldata',exampleItems)\n                 }\n             })\n        }\n    }\n\n     \n    function saveNlu(splitNumber) {\n        if (items && items[splitNumber]) {\n            //props.saveNluItem(items[splitNumber]) \n            saveLSItem(items[splitNumber])\n            deleteItem(splitNumber)\n        }\n    }\n\n    //function sortItems() {\n        \n    //}\n    \n\n    \n    return {\n        loadAll, saveItem, deleteItem , items, setItems, findKeyBy, filter, filteredItems, setFilteredItems,createEmptyItem, sort, \n        searchFilter, setSearchFilter, tagAllValue, setTagAllValue, skillAllValue, setSkillAllValue, skillFilterValue, setSkillFilterValue,intentFilterValue, setIntentFilterValue,\n         intentAllValue, setIntentAllValue, listRef, tagFilterValue, setTagFilterValue,\n        tagAll,untagAll, unskillAll, intentAll, resetSelection, selectAll,  skillSetAll, saveItemWrap, getItemSize, deleteAll, saveAll, saveNlu,  lastSelected, setLastSelected, selectBetween,\n    }\n}\nexport default useNluEditor\n","import React, { useEffect, useState} from 'react';\nimport './App.css';\nimport {Link} from 'react-router-dom'\nimport {Button} from 'react-bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { VariableSizeList as List } from 'react-window';\nimport NluExampleRow from './NluExampleRow'\nimport EditorSearchBar from './components/EditorSearchBar'\nimport useNluEditor from './useNluEditor'\nimport {generateObjectId} from './utils'\nimport {MatchesTallies,WithSelectedDropDowns} from './components/Components'\nconst RenderRow = function(props) {\n    const index = props.index\n    const style = props.style\n    const item = props.data.items[index]\n    return <NluExampleRow  \n         item={item} splitNumber={index} style={style}\n         saveItem={props.data.saveItem} deleteItem={props.data.deleteItem} \n         lookups={props.data.lookups} setPageMessage={props.data.setPageMessage} lastSelected={props.data.lastSelected} setLastSelected={props.data.setLastSelected} selectBetween={props.data.selectBetween} />\n}\n\nexport default function NluExampleEditor(props) {\n    const {loadAll, deleteItem , items, findKeyBy, searchFilter, setSearchFilter, skillFilterValue, setSkillFilterValue, intentFilterValue, setIntentFilterValue, tagAllValue, setTagAllValue, skillAllValue, setSkillAllValue,  intentAllValue, setIntentAllValue, listRef, tagAll,untagAll, unskillAll, intentAll, resetSelection, selectAll,  skillSetAll, saveItemWrap, getItemSize, deleteAll, filteredItems, createEmptyItem, sort, lastSelected, setLastSelected, selectBetween,  tagFilterValue, setTagFilterValue} = useNluEditor('nlutool','examples','alldata', props.updateFunctions.updateLookups)\n \n    useEffect(() => {\n        loadAll()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n\n    \n    function createEmptyItemWrap(skill, intent, tag) {\n        createEmptyItem(skill, intent, tag)\n    }\n    \n    //useEffect(() => {\n        //if (importFrom) {\n            //var parsed = parseImportText(importFrom)\n            //setItems(parsed)\n            //props.setImportFrom('')\n        //}\n    //// eslint-disable-next-line react-hooks/exhaustive-deps\n    //},[props.importFrom])\n    \n\n    function renderEditor(props) {\n        // filter rendered list using callback \n       //var filteredItems = filter(function(item) {\n                //if (!searchFilter || searchFilter.length <=0 ) return true;\n                //const matchSearchFilter = item.example.indexOf(searchFilter) !== -1 \n                        //|| item.intent.indexOf(searchFilter) !== -1 \n                        //|| (item.tags && item.tags.indexOf(searchFilter) !== -1)\n                //return matchSearchFilter && skillFilterValue && item.skills && item.skills.indexOf(skillFilterValue) !== -1\n            //})\n          \n        if (filteredItems && filteredItems.length > 0) {\n            return <div>\n           \n          <MatchesTallies items={items} filteredItems={filteredItems}/>\n             {props.lookups.selectedTally > 0 && <span style={{float:'right'}}> \n                 <WithSelectedDropDowns\n                  skillSetAll={skillSetAll} skillAllValue={skillAllValue}  setSkillAllValue={setSkillAllValue}  untagAll={untagAll} unskillAll={unskillAll} \n                     intentAll={intentAll} intentAllValue={intentAllValue} setIntentAllValue={setIntentAllValue}  \n                     tagAll={tagAll} tagAllValue={tagAllValue} setTagAllValue={setTagAllValue}  lookups={props.lookups}\n                 />\n                 <Button style={{marginLeft:'1em'}} onClick={deleteAll} variant=\"danger\"  >Delete Selected</Button> \n               \n            </span> } \n              \n                <List\n                    key=\"intentlist\"  \n                    ref={listRef}\n                    itemData={{items: filteredItems, saveItem: saveItemWrap, deleteItem, findKeyBy, lookups: props.lookups, setPageMessage: props.setPageMessage, lastSelected, setLastSelected, selectBetween}}\n                    itemKey={index => index}  \n                    className=\"List\"\n                    height={700}\n                    itemCount={filteredItems.length}\n                    itemSize={getItemSize}\n                    width={'100%'}\n                  >{RenderRow}</List>\n            </div>\n        } else {\n            //{JSON.stringify(filteredItems)}\n            return <div >\n             \n                <div style={{textAlign:'center'}}>\n            <br/><b>No items</b><br/><br/>Upload <Link to=\"/sources\" ><Button>Sources</Button></Link> then <Link to=\"/import\" ><Button>Import</Button></Link>.</div></div>\n        }\n    }\n    \n     return <div>\n        <EditorSearchBar {...props} searchFilter={searchFilter} setSearchFilter={setSearchFilter} skillFilterValue={skillFilterValue} setSkillFilterValue={setSkillFilterValue} tagFilterValue={tagFilterValue} setTagFilterValue={setTagFilterValue} resetSelection={resetSelection} selectAll={selectAll}  createEmptyItem={createEmptyItemWrap} intentFilterValue={intentFilterValue} setIntentFilterValue={setIntentFilterValue} untagAll={untagAll} unskillAll={unskillAll} sort={sort}  />\n         {renderEditor(props)}\n    </div>\n    \n}\n      \n\n\n\n\n","/* global window */\nimport React , {useState} from 'react';\nimport {Button, Navbar } from 'react-bootstrap'\nimport {Link} from 'react-router-dom'\nimport fireImage from '../images/singingman.svg'\nimport waitingImage from '../images/waiting.gif'\nimport ReactGA from 'react-ga';\n\n\nReactGA.initialize('UA-3712973-4');\n\nexport default function NavbarComponent(props) {\n    ////console.log(props)\n    ReactGA.pageview(props.history.location.pathname);\n    var astyle={paddingLeft:'0.3em'}\n    const currentPage = props.history && props.history.location && props.history.location.pathname ? props.history.location.pathname : '/'\n    const pages = {\n        '/': {name: 'NLU Tool',show: false},\n        '/search': {name: 'Search',show: true},//link:'https://github.com/syntithenai/opennludata/wiki'\n        '/sources': {name: 'Import',show: true},\n        '/regexps': {name: 'RegExps',show: true},\n        '/lists': {name: 'Entities',show: true},\n        '/utterances': {name: 'Utterances',show: true},\n        '/examples': {name: 'Intents',show: true},\n        '/skills': {name: 'Skills',show: true},\n        '/help': {name: 'Help',show: true},\n        \n    }\n    //var [stuff, setStuff] = useState('')\n   \n    //useEffect(() => {\n        //if (props.user && props.user.token && props.user.token.access_token) { \n             ////console.log('GETresS' )\n            //var axiosClient = props.getAxiosClient(props.user.token.access_token)\n            //axiosClient.get('http://localhost:5000/api/v1/skill/count').then(function(res) {\n                //setStuff(res)\n                ////console.log(res)\n            //})\n        //}\n    //},[(props.user && props.user.token && props.user.token.access_token ? props.user.token.access_token: '')])\n    \n    const links = Object.keys(pages).map(function(link,k) {\n        const page = pages[link]\n        if (page.show) {\n            if (page.link) {\n                return <a key={k} style={astyle} href={page.link} ><Button variant='primary' >{page.name}</Button></a>                \n            } else {\n                return <Link key={k} style={astyle} to={link} ><Button variant={currentPage.indexOf(link) !== -1 ? 'success' : 'primary'}>{page.name}</Button></Link>\n            }\n        }\n        return null\n    })\n    \n    //const helpButton = pages[currentPage] && pages[currentPage].helpComponent ? pages[currentPage].helpComponent : <Link to=\"/help\" ><Button>Help</Button></Link>\n    \n//        <Navbar.Text><Button><img src='/menu.svg' alt='menu' /></Button></Navbar.Text>\n\n    return <Navbar  bg=\"dark\" variant=\"dark\"  style={{width:'100%', border:''}} >\n        \n        {props.message && <div style={{position:'fixed',top:100,left:window.innerWidth ? (window.innerWidth /2 - 40) : 100, border: '2px solid red', background: 'pink', padding: '0.5em', minWidth:'400px' ,borderRadius:'5px', zIndex:999}} >\n            <Button variant=\"danger\" size=\"sm\"  style={{float:'right', fontWeight: 'bold',borderRadius:'20px',marginLeft:'1em'}} onClick={function(e) {props.setPageMessage('')}}>X</Button>{props.message} \n        </div>}\n        \n        <img src={fireImage}  style={{height:'5em', marginRight:'0.4em'}} alt=\"logo\"/>\n         <div style={{width: '100%'}}>\n        \n        {links}\n        </div>\n        \n         <div style={{float:'right', vAlign:'top', minWidth:'10em', marginRight:'0em'}}>\n        {props.isLoggedIn() && \n            <>\n                <Button variant=\"primary\" onClick={props.doProfile} >{'Profile'}</Button>\n                <Button variant=\"danger\" onClick={props.doLogout}  >{'Logout'}</Button>\n            </>\n        }\n        { !props.isLoggedIn() && \n            <Button variant=\"success\" onClick={props.doLogin} >{'Login'}</Button>\n        }\n        \n        </div>\n        \n         <img src={waitingImage} alt='waiting' style={{position:'fixed', top:5, right:5, zIndex:99, display: props.waiting ? 'block' : 'none' }} />\n    </Navbar>\n}\n//<a style={{display:'inline'}}  href=\"/login/profile\" ><Button variant=\"primary\" >{'Profile'}</Button></a>\n                //<a style={{display:'inline'}}  href=\"/login/logout\" ><Button variant=\"danger\" >Logout</Button></a>\n\n        //<Navbar.Text><Link to=\"/organise\" ><Button>Organise</Button></Link></Navbar.Text>\n        //<Navbar.Text><Link to=\"/skills\" ><Button>My Skills</Button></Link></Navbar.Text>\n        //<Navbar.Text><Link to=\"/search\" ><Button>Search Community</Button></Link></Navbar.Text>\n","/* global window */\nimport {Button,   Dropdown, ButtonGroup } from 'react-bootstrap'\nimport React from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ReactTags from 'react-tag-autocomplete'\nimport useNluRow from './useNluRow'\nimport SuggestionComponent from './components/SuggestionComponent'\nimport checkImage from './images/check.svg'\nimport thumbdownImage from './images/thumb-down.svg'\nimport thumbupImage from './images/thumb-up.svg'\n\n\nexport default function NluImportRow(props) {\n     const  {item, splitNumber , style} = props;\n       const {    \n            intentTitle, setIntentTitle, selectionState, setSelectionState, newEntity, setNewEntity, tags, skills, reactTags, reactSkills, \n            onTagDelete, onTagAddition, onSkillDelete,onSkillAddition,  updateExampleContent, entityClicked, entityTypeChanged, intentChanged, entityDelete, selectItem,  deselectItem\n        } = useNluRow(props.item, props.saveItem, props.splitNumber, props.style, props.setPageMessage)\n                \n       var intentOptions = props.lookups.intentLookups && props.lookups.intentLookups.sort().map(function(intentKey,i) {\n          return <Dropdown.Item key={i} value={intentKey} onClick={function(e) {intentChanged(intentKey)}}  >{intentKey}</Dropdown.Item>\n       })\n       // ONE PER ENTITY FOR THIS EXAMPLE\n       var entitiesDropdowns = item && item.entities ? item.entities.map(function(entity,i) {\n           var entityOptions = props.lookups.entityLookups.sort().map(function(entityKey,j) {\n              return <Dropdown.Item  key={j} value={entityKey} onClick={function(e) {entityTypeChanged(i,entityKey)}}  >{entityKey}</Dropdown.Item>\n           }) \n           return<Dropdown style={{marginLeft:'0.2em'}} variant='info'  key={i}  as={ButtonGroup}>\n              <Dropdown.Toggle variant='info'  split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n              <Button variant='info'   size=\"sm\"  onClick={function(e) {entityClicked(i,entity.type)}} >\n              <b>{entity.type}</b> \n                -\n              {entity.value ? entity.value : 'Select Entity Type'}\n              </Button>\n              <Button variant=\"info\" size=\"sm\" onClick={function(e) {entityDelete(i,'')}} >X</Button>\n              <Dropdown.Menu>\n                  <form  style={{display:'inline'}}>\n                    <div className=\"form-group\">\n                      <input type=\"text\" className=\"form-control\" onChange={function(e) {entityTypeChanged(i,e.target.value)}}\n                    value={entity.type} />\n                    </div>\n                  </form>\n                  {entityOptions}\n              </Dropdown.Menu>\n            </Dropdown>\n       }): [] ;\n        //PLUS CREATE NEW WHEN TEXT IS SELECTED\n       if (selectionState  && selectionState.textSelection && selectionState.textSelection.length > 0 &&  selectionState.textSelectionFrom === splitNumber) {\n           var entityOptions =  props.lookups.entityLookups && props.lookups.entityLookups.sort().map(function(entityKey,j) {\n              return <Dropdown.Item key={j} value={entityKey} onClick={function(e) {entityTypeChanged(-1,entityKey)}}  >{entityKey}</Dropdown.Item>\n           })\n           entitiesDropdowns.push(<Dropdown key=\"new\" variant='success'  as={ButtonGroup}>\n\n          <Dropdown.Toggle variant='success'  split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button  variant='success' size=\"sm\" >New Entity</Button>\n\n          <Dropdown.Menu>\n           <form style={{display:'inline'}} onSubmit={function(e) {e.preventDefault(); entityTypeChanged(-1,newEntity)}}>\n                <div className=\"form-group\">\n                  <input type=\"text\" className=\"form-control\" onChange={function(e) {setNewEntity(e.target.value)}}\n                value={newEntity} />\n                </div>\n              </form>\n              {entityOptions}\n          </Dropdown.Menu>\n        </Dropdown>)\n       }\n       //var buttonImageStyle={color:'white', height:'2em'}\n       return item && <div style={style} className={splitNumber % 2 ? 'ListItemOdd' : 'ListItemEven'}>\n               <div style={{position:'relative', width: '100%', textAlign:'left',  borderTop: '2px solid black'}}>\n                  \n                   {!item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"secondary\" onClick={function() {selectItem(splitNumber)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Select\" /></Button>}\n                  {item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"success\" onClick={function() {deselectItem(splitNumber)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\" /></Button>}\n                  \n                  {item.intent && <Button  style={{float:'right', marginLeft:'0.2em'}}  variant=\"success\"  onClick={function() {props.saveNlu(splitNumber)}} ><img src={thumbupImage} alt=\"Save\" /> Save</Button>}\n                  {!item && <Button   style={{float:'right', marginLeft:'0.2em'}} variant=\"secondary\" ><img src={thumbupImage} alt=\"Save\" /> Import</Button>} \n                  <Button  variant=\"danger\" style={{float:'right'}} onClick={function(e) {props.deleteItem(splitNumber,(item.id ? item.id : ''))}} ><img src={thumbdownImage} alt=\"Delete\" /> Delete</Button>\n                  \n                 \n                  <Dropdown  style={{float:'left'}} as={ButtonGroup}>\n                  <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button   size=\"sm\" >{item.intent ? item.intent.toString() : 'Select Intent'} </Button>\n                  <Dropdown.Menu>\n                   <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault(); intentChanged(intentTitle)}}>\n                        <div className=\"form-group\">\n                          <input type=\"text\" className=\"form-control\" value={intentTitle} onChange={function(e) {setIntentTitle(e.target.value)}}\n                         />\n                        </div>\n                      </form>\n                      {intentOptions}\n                  </Dropdown.Menu>\n                  </Dropdown>\n                  <span style={{float:'left'}}>{entitiesDropdowns}</span>\n                 \n                  \n                  <div style={{float:'left'}}>\n                   <ReactTags\n                    placeholderText=\"Add to skill\"\n                    minQueryLength={0}\n                    maxSuggestionsLength={50}\n                    autoresize={false}\n                    allowNew={true}\n                    ref={reactSkills}\n                    tags={skills}\n                    suggestionComponent={SuggestionComponent}\n                    suggestions={props.lookups.skillLookups.map(function(tag,i) {return {id: i, name: tag}})}\n                    onDelete={onSkillDelete}\n                    onAddition={onSkillAddition} /> \n                    </div>\n                    \n                  <div style={{float:'left'}}>\n                   <ReactTags\n                    placeholderText=\"Add new tag\"\n                    minQueryLength={0}\n                    maxSuggestionsLength={50}\n                    autoresize={false}\n                    allowNew={true}\n                    ref={reactTags}\n                    tags={tags}\n                    suggestionComponent={SuggestionComponent}\n                    suggestions={props.lookups.tagLookups.map(function(tag,i) {return {id: i, name: tag}})}\n                    onDelete={onTagDelete}\n                    onAddition={onTagAddition} /> \n                    </div>\n                  \n                  <input  \n                 \n                   onFocus={ function(e) {\n                       setSelectionState(null)\n                    }}\n                   onSelect={ function(e) {\n                     var textSelection = window.getSelection().toString(); \n                     setSelectionState({textSelection:textSelection, textSelectionFrom: splitNumber, startTextSelection: e.target.selectionStart, endTextSelection: e.target.selectionEnd})\n                  }}  \n                   type='text'   style={{clear:'both', width:'80%'}}  value={item.example} id={\"example_input_\"+splitNumber} \n                   onChange={function(e) { updateExampleContent(e.target.value)}} />\n                  \n                  \n                \n                \n            </div>\n      </div>\n}\n","import React, {useEffect} from 'react';\nimport './App.css';\nimport {Link} from 'react-router-dom'\nimport {Button} from 'react-bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { VariableSizeList as List } from 'react-window';\nimport NluImportRow from './NluImportRow'\nimport EditorSearchBar from './components/EditorSearchBar'\nimport useNluEditor from './useNluEditor'\nimport TagAllDropDown from './components/TagAllDropDown'\nimport IntentAllDropDown from './components/IntentAllDropDown'\nimport SkillAllDropDown from './components/SkillAllDropDown'\nimport arrowthickleftImage from './images/arrow-thick-left.svg'\nimport arrowthickrightImage from './images/arrow-thick-right.svg'\n\n\nconst RenderRow = function(props) {\n    const index = props.index\n    const style = props.style\n    const item = props.data.items[index]\n    //console.log(['USENLUROW rr',index])\n    return <NluImportRow  \n         item={item}  splitNumber={index} style={style}\n         saveItem={props.data.saveItem} deleteItem={props.data.deleteItem} saveNlu={props.data.saveNlu}\n         lookups={props.data.lookups}  setPageMessage={props.data.setPageMessage} />\n}\n\n\nexport default function NluImportEditor(props) {\n    \n    //const examplesDB = useDBSingleKey('nlutool','examples','alldata')\n    const {loadAll, deleteItem ,items,  findKeyBy, searchFilter, setSearchFilter, tagAllValue, setTagAllValue, skillAllValue, setSkillAllValue, skillFilterValue, setSkillFilterValue, intentFilterValue, setIntentFilterValue, intentAllValue, setIntentAllValue, listRef, tagAll, untagAll, unskillAll, intentAll, resetSelection, selectAll,  skillSetAll, saveItemWrap, getItemSize, deleteAll, saveAll, saveNlu, filteredItems, createEmptyItem, sort} = useNluEditor('nlutool','import','alldata', props.updateFunctions.updateLookups)\n    useEffect(() => {\n        loadAll()\n        //examplesDB.loadAll()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n    \n    //useEffect(() => {\n        //if (importFrom) {\n            //var parsed = parseImportText(importFrom)\n            //setItems(parsed)\n            //props.setImportFrom('')\n        //}\n    //// eslint-disable-next-line react-hooks/exhaustive-deps\n    //},[props.importFrom])\n    \n    \n    \n   \n    \n    function renderEditor(props) {\n        // filter rendered list using callback \n       \n         //filteredItems.sort(function(oldItem,item) {console.log( ['SORT',oldItem.example,item.example]); return (item.example && oldItem.example && item.example.trim().toLowerCase <= oldItem.example.trim().toLowerCase) })\n           \n        if (filteredItems && filteredItems.length > 0) {\n            \n           //var skillOptions = props.lookups.skillLookups && props.lookups.skillLookups.sort().map(function(skillKey,i) {\n                  //return <Dropdown.Item key={i} value={skillKey} onClick={function(e) {setSkillAllValue(skillKey); skillSetAll(skillKey)}}  >{skillKey}</Dropdown.Item>\n            //})\n            \n            //var tagOptions = props.lookups.tagLookups && props.lookups.tagLookups.sort().map(function(tagKey,i) {\n              //return <Dropdown.Item key={i} value={tagKey} onClick={function(e) {setTagAllValue(tagKey); tagAll(tagKey)}}  >{tagKey}</Dropdown.Item>\n           //})\n           //var intentOptions = props.lookups.intentLookups && props.lookups.intentLookups.sort().map(function(intentKey,i) {\n              //return <Dropdown.Item key={i} value={intentKey} onClick={function(e) {setIntentAllValue(intentKey);intentAll(intentKey)}}  >{intentKey}</Dropdown.Item>\n           //})\n            return <div>\n             <span style={{float:'left', fontWeight:'bold'}} >&nbsp;{filteredItems.length}/{items.length} matches </span>\n             {props.lookups.selectedTally > 0 && <span style={{float:'right'}}> \n                <span>With {props.lookups.selectedTally} selected&nbsp;\n              <SkillAllDropDown skillSetAll={skillSetAll} skillAllValue={skillAllValue}  setSkillAllValue={setSkillAllValue}  lookups={props.lookups}  untagAll={untagAll} unskillAll={unskillAll}/>\n                <IntentAllDropDown intentAll={intentAll} intentAllValue={intentAllValue} setIntentAllValue={setIntentAllValue}  lookups={props.lookups}  untagAll={untagAll} unskillAll={unskillAll}/>\n                <TagAllDropDown tagAll={tagAll} tagAllValue={tagAllValue} setTagAllValue={setTagAllValue}  lookups={props.lookups}  untagAll={untagAll} unskillAll={unskillAll}/>\n                \n                </span>\n                <Button style={{marginLeft:'1em'}} onClick={saveAll} variant=\"success\"  >Save Selected</Button> \n                <Button style={{marginLeft:'1em'}} onClick={deleteAll} variant=\"danger\"  >Delete Selected</Button> \n                \n            </span> } \n                \n              \n                \n                <List\n                    ref={listRef}\n                    itemData={{items: filteredItems, saveItem: saveItemWrap, saveNlu, deleteItem, findKeyBy, lookups:props.lookups, setPageMessage: props.setPageMessage}}\n                    itemKey={index => index}  \n                    className=\"List\"\n                    height={700}\n                    itemCount={filteredItems.length}\n                    itemSize={getItemSize}\n                    width={'100%'}\n                  >{RenderRow}</List>\n            </div>\n            \n            \n        } else {\n            //{JSON.stringify(filteredItems)}\n            return <div >\n                <div style={{textAlign:'center'}}>\n            <br/><b>No more items to import</b><br/><br/>Open <Link to=\"/sources\" ><Button><img style={{height:'1em', paddingRight:'1em'}}  src={arrowthickleftImage} alt=\"Sources\" />Sources</Button></Link> to create more or <Link to=\"/examples\" ><Button>Organise<img src={arrowthickrightImage} alt=\"Intents\" style={{height:'1em', paddingLeft:'1em'}}  /></Button></Link> what you have imported into skills.\n            </div></div>\n        }\n    }\n    // {JSON.stringify(items)}\n    return <div>\n         \n        <EditorSearchBar {...props} searchFilter={searchFilter} setSearchFilter={setSearchFilter} skillFilterValue={skillFilterValue} setSkillFilterValue={setSkillFilterValue} resetSelection={resetSelection} selectAll={selectAll} createEmptyItem={createEmptyItem} untagAll={untagAll} unskillAll={unskillAll} intentFilterValue={intentFilterValue} setIntentFilterValue={setIntentFilterValue}  sort={sort} />\n         {renderEditor(props)}\n    </div>\n    \n    \n}\n      \n\n","import JSZip from 'jszip'\n\nfunction createZip(zipStructure) {\n    var zip = new JSZip();\n     //console.log(['ZIP',zipStructure])\n    function recurseZipStructure(zipStructure, path) {\n        if (Array.isArray(zipStructure.files)) {\n            zipStructure.files.map(function(file) {\n                //console.log(['ZIP file',file])\n                var options = (file.base64 && file.base64.length > 0) ? {base64: true} : {} \n                if (file.name && file.name.length > 0 && file.content) zip.file(path+\"/\"+file.name,file.content, options);\n                return null\n            })\n        }\n        if (Array.isArray(zipStructure.folders)) {\n            zipStructure.folders.map(function(folder) {\n                //console.log(['ZIP folder',folder])\n                if (folder.name && folder.name.length > 0) zip.folder(folder.name);\n                if ((folder.files && folder.files.length > 0) || (folder.folders && folder.folders.length > 0)) {\n                    recurseZipStructure(folder, path+\"/\"+folder.name)\n                }\n                return null\n            })\n        }\n         \n    } \n     \n    recurseZipStructure(zipStructure,'')\n     \n    return new Promise(function(resolve,reject) {\n        zip.generateAsync({type:\"blob\"}).then(function(content) {\n            resolve(content)\n        })\n    })\n}\n\nexport {createZip}\n","import {  uniquifyArray, replaceEntities } from '../utils';\nimport {createZip} from './createZip'\nimport localforage from 'localforage'\n\nasync function exportJOVO(skill) {\n     return new Promise(function(resolve,reject) {\n         var listsStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"lists\",\n         });\n         listsStorage.getItem('alldata').then(function(lists) {\n             var jovo={invocation: skill.invocation}\n             ////console.log(['JVO export',skill])\n             var intents = {}\n             var entityTypes={}\n             if (skill.intents) {\n                 Object.keys(skill.intents).map(function(intentKey) {\n                     var examples = skill.intents[intentKey]\n                     if (!intents[intentKey])  intents[intentKey] = {name:intentKey, phrases:[], inputs: []}\n                     var inputs = {}\n                     if (Array.isArray(examples)) {\n                         examples.map(function(example) {\n                            intents[intentKey].phrases.push(replaceEntities(example.example,example.entities))\n                            if (Array.isArray(example.entities)) {\n                                example.entities.map(function(entity) {\n                                   inputs[entity.type] = true  \n                                   if (!Array.isArray(entityTypes[entity.type])) entityTypes[entity.type] = []\n                                   entityTypes[entity.type].push(entity.value)\n                                   return null\n                                })\n                            }\n                            return null\n                         })\n                     }\n                     intents[intentKey].phrases = uniquifyArray(intents[intentKey].phrases).sort()\n                     intents[intentKey].inputs = Object.keys(inputs).map(function(entityType) { \n                         var entityTypeName = entityType+\"Type\"\n                         if (skill.entities && skill.entities[entityType] && (skill.entities[entityType].googleType || skill.entities[entityType].alexaType)) {\n                             entityTypeName ={}\n                             if (skill.entities[entityType].googleType) entityTypeName.dialogflow = skill.entities[entityType].googleType\n                             if (skill.entities[entityType].alexaType) entityTypeName.alexa = skill.entities[entityType].alexaType\n                         } \n                         return {name: entityType, type: entityTypeName} \n                    })\n                    return null\n                 }) \n             }\n             jovo.intents = Object.values(intents)\n             ////console.log(['skill lists',entityTypes, skill.lists])\n             //var usedLists = {}\n             //if (skill.entities) {\n                //Object.keys(skill.entities).map(function(entity,i) {\n                    //if (skill.entities[entity] && Array.isArray(skill.entities[entity].lists)) {\n                        //skill.entities[entity].lists.map(function(list) {\n                           //usedLists[list] = true  \n                        //})\n                    //}\n                //})\n             //}\n            \n             //lists.map(function(item) {\n                 ////console.log(['LIST',item])\n                 //Object.keys(usedLists).map(function(listKey) {\n                    ////console.log([listKey,item.tags.indexOf(listKey) !== -1, item.tags])\n                    //if (item && item.tags && item.tags.indexOf(listKey) !== -1) {\n                        ////console.log('list item used ')\n                        //entityTypes[listKey].push(item.value)\n                    //}\n                //})\n            //})\n            var synonyms = {}\n            var synonymsIndex = {}\n            lists.map(function(item) {\n                 if (item.value && item.value.trim().length > 0) {\n                    if (item.synonym) {\n                        if (!Array.isArray(synonymsIndex[item.synonym])) synonymsIndex[item.synonym] = [] \n                        synonyms[item.value] = item.synonym\n                        synonymsIndex[item.synonym].push(item.value)\n                    }\n                    Object.keys(entityTypes).map(function(entityType) {\n                        if (skill.entities && skill.entities[entityType]  && skill.entities[entityType].lists)  {\n                            skill.entities[entityType].lists.map(function(entityExtrasList) {\n                                ////console.log(['li',entityExtrasList,item.tags,item.tags.indexOf(entityExtrasList)])\n                                if (item && item.tags && item.tags.indexOf(entityExtrasList) !== -1) {\n                                    ////console.log(['USE ENTITY',entityType, entityExtrasList,lists[entityExtrasList]])\n                                    entityTypes[entityType].push(item.value)\n                               }\n                               return null\n                            })\n                        }\n                        return null\n                    })\n                }\n                return null\n            })\n             \n            //console.log(['synonyms',synonyms, synonymsIndex])\n        \n            jovo.inputTypes = Object.keys(entityTypes).map(function(entityType) {\n            ////console.log(['JOVOEX',lists,entityType])\n                const values = []\n                uniquifyArray(entityTypes[entityType]).sort().map(function(value) {\n                    if (!synonyms[value]) {\n                        if (value && value.trim().length > 0) values.push( {value:value})\n                    }\n                    return null\n                })\n                Object.keys(synonymsIndex).map(function(synonym) {\n                    if (synonym && synonym.trim().length > 0) values.push({value:synonym, synonyms:synonymsIndex[synonym] })\n                    return null\n                })\n                return {name: entityType+\"Type\", values:values}  \n            })\n                    \n            \n            \n            //console.log(['inputtypes',jovo.inputTypes])\n            ////console.log(['JVO final',jovo])\n            const content = JSON.stringify(jovo)\n             const final =  {folders:[{'name':'models', files:[{name:'en-US.json', content: content}] }]   }\n             ////console.log(['JVO final',final])\n             resolve(final)\n              \n        })\n    })\n}\n\n\nasync function exportJOVOZip(skill) {\n    return createZip(await exportJOVO(skill))\n}\n\nexport {exportJOVO, exportJOVOZip}\n","import localforage from 'localforage'\n\n\n/* export skill\n * to ensure the completeness of the skill model add\n *   - utterancesData\n *   - entitiesData\n * which are both arrays of objects containing value and synonym(alternatives) eg {value:\"cat\", synonym:\"kitty\\npussy\"}\n */\nfunction exportJSON(skill) {\n    //console.log(['EXPPORT JSON',skill])\n    var listsStorage = localforage.createInstance({\n        name: \"nlutool\",\n        storeName   : \"lists\",\n    });\n    var utterancesStorage = localforage.createInstance({\n        name: \"nlutool\",\n        storeName   : \"utterances\",\n    });\n    var promises = []    \n    // entities - just entities in entity lists\n    promises.push(new Promise(function(resolve,reject) {\n        if (skill && skill.entities) {\n             listsStorage.getItem('alldata').then(function(dbEntities) {\n                 var usedLists = {}\n                 var filledLists = {}\n                 //console.log(skill.entities)\n                 if (skill && skill.entities) {\n                     Object.values(skill.entities).map(function(entity) {\n                        if (entity.lists) entity.lists.map(function(list) {\n                            usedLists[list] = true  \n                        })  \n                        return null\n                     })\n                     //console.log(['USEDLISTS',usedLists])\n                     Object.keys(usedLists).map(function(useList) {\n                         filledLists[useList] = dbEntities.filter(function(item) {if (item.tags && item.tags.indexOf(useList) !== -1) return true; else return false }).map(function(iitem) {\n                             return {value:iitem.value, synonym: iitem.synonym}  \n                         })\n                     })\n                     //console.log(['FILLEDLISTS',filledLists])\n                    //console.log(['SETSKILL',JSON.parse(JSON.stringify(skill))])\n                 }\n                 resolve(filledLists)\n             })\n        } else {\n            resolve({})\n        }\n    }))\n    promises.push(new Promise(function(resolve,reject) {\n        var utterances = {}\n        //console.log(['SHOULD ADD UTTS',skill.utterancesLists, skill.utterances])\n        if (skill.utterancesLists || skill.utterances) { \n            utterancesStorage.getItem('alldata').then(function(allUtterances) {\n                if (Array.isArray(allUtterances)) {\n                    allUtterances.map(function(thisUtterance) {\n                        if (skill.utterances) { \n                            skill.utterances.map(function(listKey) {\n                                if (thisUtterance.value === listKey) utterances[thisUtterance.value] = {value:thisUtterance.value, synonym:thisUtterance.synonym, tags: thisUtterance.tags}\n                                return null\n                            })\n                            \n                        }\n                        if (skill.utterancesLists) { \n                            skill.utterancesLists.map(function(listKey) {\n                                if (thisUtterance.tags && thisUtterance.tags.indexOf(listKey) !== -1) utterances[thisUtterance.value] = {value:thisUtterance.value, synonym:thisUtterance.synonym, tags: thisUtterance.tags}\n                                return null\n                            })\n                            \n                        }\n                        return null \n                    })\n                    //console.log(['SET UITTER GLOLBA',utterances])\n                    \n                }\n                resolve(utterances)\n            })\n       } else {\n           resolve({})\n       }\n    }))\n            \n    return new Promise(function(oresolve,oreject) {\n       //skill.entitiesData = filledLists\n        //skill.utterancesData = utterances                   \n        Promise.all(promises).then(function(data) {\n            //console.log(['LOIADED LOOKUPS',data])\n            var newSkill = skill\n            newSkill.entitiesData = data[0]\n            newSkill.utterancesData = data[1]\n            //console.log(['resolve JSON',newSkill])\n            oresolve(newSkill)\n        })\n        \n    })\n}\n\nfunction exportJSONZip(skill) {\n    return new Promise(function(resolve,reject) {\n        exportJSON(skill).then(function(content) {\n            //console.log(['content',skill])\n            const blob = new Blob([JSON.stringify(content, null, 2)], {type : 'application/json'});\n            resolve(blob)\n        })\n    })\n    //return createZip({files:[{name:'skill.json', content: await exportJSON(skill)}]})\n}\n\nexport {exportJSON, exportJSONZip}\n\n\n          \n //listsStorage.getItem('alldata').then(function(lists) {\n             ////console.log(['LISTS',lists])\n            //var usedLists = {}\n            //if (skill.entities) {\n                //Object.keys(skill.entities).map(function(entity,i) {\n                    //if (skill.entities[entity] && Array.isArray(skill.entities[entity].lists)) {\n                        //skill.entities[entity].lists.map(function(list) {\n                           //usedLists[list] = true  \n                           //return null\n                        //})\n                    //}\n                    //return null\n                //})\n            //}\n            //var skillLists = {}\n            //Object.keys(usedLists).map(function(listKey) {\n              //skillLists[listKey] = []  \n              //return null\n            //})\n            //if (lists) lists.map(function(item) {\n                //Object.keys(usedLists).map(function(listKey) {\n                    //////console.log([listKey,item.tags.indexOf(listKey) !== -1, item.tags])\n                    //if (item && item.tags && item.tags.indexOf(listKey) !== -1) {\n                        //////console.log('list item used ')\n                        //skillLists[listKey].push(item.value)\n                    //}\n                    //return null\n                //})\n                //return null\n            //})\n            //skill.lists = skillLists\n            \n                //// utterances\n                //if (props.currentSkill && props.currentSkill.utterances) {\n                     //utterancesStorage.getItem('alldata').then(function(dbUtterances) {\n                         //var usedLists = {}\n                         //var filledLists = {}\n                         ////console.log(props.currentSkill.utterances)\n                         //if (props.currentSkill && props.currentSkill.utterancesLists) {\n                             //Object.values(props.currentSkill.utterancesLists).map(function(utterance) {\n                                //usedLists[utterance] = true  \n                                //return null\n                             //})\n                             ////console.log(['USEDLISTS',usedLists])\n                             //Object.keys(usedLists).map(function(useList) {\n                                 //filledLists[useList] = dbUtterances.filter(function(item) {if (item.tags && item.tags.indexOf(useList) !== -1) return true; else return false }).map(function(iitem) {\n                                     //return {value:iitem.value, synonym: iitem.synonym}  \n                                 //})\n                             //})\n                             ////console.log(['FILLEDLISTS',filledLists])\n                              //var skill = props.currentSkill\n                              //skill.utterancesData = filledLists\n                              //resolve(skill)\n                         //}\n                     //})\n                    \n                //}\n","import {  uniquifyArray, replaceEntities } from '../utils';\nimport {createZip} from './createZip'\nimport localforage from 'localforage'\n\nasync function exportMycroft(skill) {\n    return new Promise(function(resolve,reject) {\n        var listsStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"lists\",\n         });\n         var modelFiles=[]\n         listsStorage.getItem('alldata').then(function(lists) {\n            //var usedLists = {}\n            //if (skill.entities) {\n                //Object.keys(skill.entities).map(function(entity,i) {\n                    //if (skill.entities[entity] && Array.isArray(skill.entities[entity].lists)) {\n                        //skill.entities[entity].lists.map(function(list) {\n                           //usedLists[list] = true  \n                        //})\n                    //}\n                    //return null\n                //})\n            //}\n           \n            \n            \n           \n             // intents - \n             // collate examples, one file per intent\n             var intents={}\n             if (skill.intents) {\n                 Object.keys(skill.intents).map(function(intentKey) {\n                     var examples = skill.intents[intentKey]\n                     if (!Array.isArray(intents[intentKey]))  intents[intentKey] = []\n                     if (Array.isArray(examples)) {\n                         examples.map(function(example) {\n                            intents[intentKey].push(replaceEntities(example.example,example.entities))\n                            return null\n                         })\n                     }\n                     intents[intentKey] = uniquifyArray(intents[intentKey]).sort()\n                    return null\n                 }) \n             }\n             // one per file\n             // entities - merge values and lists values , one entity per file\n             var entities={}\n             if (skill.entities) { \n                 Object.keys(skill.entities).map(function(entityKey) {\n                     var combinedEntities = []\n                     var entity = skill.entities[entityKey]\n                     if (entity.values) {\n                         combinedEntities = combinedEntities.concat(entity.values)\n                     } \n                     if (entity.lists) {\n                         //var skillLists = {}\n                         //Object.keys(usedLists).map(function(listKey) {\n                          //skillLists[listKey] = []  \n                          //return null\n                        //})\n                       \n                       //console.log(['add from lists',entity.lists])\n                       lists.map(function(item) {\n                            entity.lists.map(function(listKey) {\n                                //console.log([listKey,item.tags.indexOf(listKey) !== -1, item.tags])\n                                if (item && item.tags && item.tags.indexOf(listKey) !== -1) {\n                                    //console.log('list item used ')\n                                    combinedEntities.push(item.value)\n                                }\n                                return null\n                            })\n                            return null\n                        })\n                     }\n                     entities[entityKey] = uniquifyArray(combinedEntities).sort()\n                     return null\n                 }) \n             }\n             \n             Object.keys(intents).map(function(intent) {\n                 modelFiles.push({name:intent+'.intent',content: intents[intent].join(\"\\n\")})\n                 return null\n             })\n             Object.keys(entities).map(function(entity) {\n                 modelFiles.push({name: entity+'.entity',content: entities[entity].join(\"\\n\")})\n                 return null\n             })\n             if (skill.utterances) {\n                  Object.keys(skill.utterances).map(function(utterance) {\n                     modelFiles.push({name: utterance.value+'.dialog',content: utterance.synonym})\n                     return null\n                  })   \n             }\n             \n              resolve( modelFiles)\n        })\n    })\n}\n\n\nasync function exportMycroftZip(skill) {\n    const files = await exportMycroft(skill)\n    return createZip({files:files})\n}\n\nexport {exportMycroft, exportMycroftZip}\n\n","const RASATemplates = {\n    config: `\nlanguage: en\npipeline:\n  - name: WhitespaceTokenizer\n  - name: RegexFeaturizer\n  - name: LexicalSyntacticFeaturizer\n  - name: CountVectorsFeaturizer\n  - name: CountVectorsFeaturizer\n    analyzer: \"char_wb\"\n    min_ngram: 1\n    max_ngram: 4\n  - name: ResponseSelector\n    epochs: 100\n  - name: DIETClassifier\n    epochs: 100\n  - name: EntitySynonymMapper\n\npolicies:\n  - name: FormPolicy\n  - name: MemoizationPolicy\n  - name: TEDPolicy\n    max_history: 5\n    epochs: 100\n  - name: MappingPolicy\n  - name: \"FallbackPolicy\"\n    nlu_threshold: 0.5\n    core_threshold: 0.3\n    fallback_action_name: \"action_default_fallback\"\n    `,\n    credentials: `\n# This file contains the credentials for the voice & chat platforms\n# which your bot is using.\n# https://rasa.com/docs/rasa/user-guide/messaging-and-voice-channels/\n\nrest:\n#  # you don't need to provide anything here - this channel doesn't\n#  # require any credentials\n\n\n#facebook:\n#  verify: \"<verify>\"\n#  secret: \"<your secret>\"\n#  page-access-token: \"<your page access token>\"\n\n#slack:\n#  slack_token: \"<your slack token>\"\n#  slack_channel: \"<the slack channel>\"\n\n#socketio:\n#  user_message_evt: <event name for user message>\n#  bot_message_evt: <event name for but messages>\n#  session_persistence: <true/false>\n\n#mattermost:\n#  url: \"https://<mattermost instance>/api/v4\"\n#  token: \"<bot token>\"\n#  webhook_url: \"<callback URL>\"\n\n#rasa:\n  #url: \"http://localhost:5002/api\"\n \n    `,\n    endpoint: `\n#action_endpoint:\n#  url: http://localhost:5055/webhook\n\n    `,\n    actions:  `\n\"\"\" RASA actions \"\"\"\n \n    `,\n    single_action: function(className, actionName) {\n        return `\n\"\"\" RASA action \"\"\"\nimport sys\nimport logging\nfrom typing import Any, Text, Dict, List\nfrom datetime import datetime\nfrom rasa_sdk import Action, Tracker\nfrom rasa_sdk.executor import CollectingDispatcher\nfrom rasa_sdk.events import SlotSet, FollowupAction\n\nclass `+className+`(Action):\n    def name(self) -> Text:\n        return \"`+actionName+`\"\n    def run(self, dispatcher: CollectingDispatcher,\n            tracker: Tracker,\n            domain: Dict[Text, Any]) -> List[Dict[Text, Any]]:\n        var slotsets = []\n        logger = logging.getLogger(__name__)    \n        logger.debug('Action `+actionName+`')\n        return [SlotSet(\"hermod_force_end\", \"true\"),SlotSet(\"hermod_force_continue\", None)] \n        \n        dispatcher.utter_message(text=\"Action `+actionName+`\")\n        return slotsets\n    \n    `\n    }\n    ,\n    domain: `\nsession_config:\n  carry_over_slots_to_new_session: true\n  session_expiration_time: 5    \n\n`,\n    stories:`\n## greet + location/price + cuisine + num people    <!-- name of the story - just for debugging -->\n* greet\n   - action_ask_howcanhelp\n* inform{\"location\": \"rome\", \"price\": \"cheap\"}  <!-- user utterance, in format intent{entities} -->\n   - action_on_it\n   - action_ask_cuisine\n* inform{\"cuisine\": \"spanish\"}\n   - action_ask_numpeople        <!-- action that the bot should execute -->\n* inform{\"people\": \"six\"}\n   - action_ack_dosearch    \n`,\n    session:`\nsession_config:\n  carry_over_slots_to_new_session: true\n  session_expiration_time: 5\n`\n}\nexport default RASATemplates\n","import { replaceEntitiesWithValues, uniquifyArray, snakeToCamelCase, camelToSnakeCase, toSnakeCase} from '../utils';\nimport {createZip} from './createZip'\nimport localforage from 'localforage'\nimport RASATemplates from './RASATemplates'\n\n\n function generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContent, credentialsContent, endpointsContent, actionFiles, storyData) {\n    var folderTree = {\n        files:[\n            {name:'actions.py',content:actionsContent},\n            {name:'config.yml',content:configContent},\n            {name:'domain.yml',content:domainContent},\n            {name:'credentials.yml',content:credentialsContent},\n            {name:'endpoints.yml',content:endpointsContent}\n        ], \n        folders:[\n            {name:'actions', files:actionFiles}, \n            {name:'data', \n                files:[{name:'nlu.md', content: nluContent}, {name:'stories.md', content: storyData ? storyData : ''}], \n                folders:[{name:'lookups', files:fileLookups}]\n            }\n        ]\n    }\n    //console.log(['TREE GEN',folderTree])\n    return folderTree\n}\n\n// just the models subfolder\n// one file per intent\n// one file per entity\nfunction exportRASAMD(skill) {\n     //\"rasa_nlu_data\": {\n        //\"common_examples\": [],\n        //\"regex_features\" : [],\n        //\"lookup_tables\"  : [],\n        //\"entity_synonyms\": []\n    //}\n    //{\"rasa_nlu_data\":{\"regex_features\":[],\"entity_synonyms\":[{\"synonyms\":[\"biggest city\",\"capital city\"],\"value\":\"capital\"}],\"common_examples\":[{\"text\":\"sounds good sounds good thank you\",\"intent\":\"affirmative\",\"entities\":[]},\n      //{\"text\":\"what is the use of a actinometer\",\"intent\":\"ask_attribute\",\"entities\":[{\"end\":15,\"entity\":\"attribute\",\"start\":12,\"value\":\"use\"},{\"end\":32,\"entity\":\"thing\",\"start\":21,\"value\":\"actinometer\"}]}\n    //console.log(['EXPPORT RASA',skill])\n    return new Promise(function(resolve,reject) {\n         var listsStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"lists\",\n         });\n         var utterancesStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"utterances\",\n         });\n        \n        //resolve({files:[{name:'nlu.md', content: content}]})\n         \n         // LOAD ENTITY LISTS\n         listsStorage.getItem('alldata').then(function(lists) {\n            \n            //console.log(['LISTS',lists])\n            \n            // for each entity, collate entity values and lists values\n            var entityLists = {}\n            if (skill.entities) {\n                Object.keys(skill.entities).map(function(entity,i) {\n                    const entityValue = skill.entities[entity]\n                    // values from examples\n                    if (entityValue && entityValue.values) {\n                        entityLists[entity] = entityValue.values\n                    } \n                    // values from tags\n                    if (skill.entities[entity] && Array.isArray(skill.entities[entity].lists)) {\n                        lists.map(function(listItem,listItemIndex) {\n                            skill.entities[entity].lists.map(function(entityList) {\n                               if (listItem.tags && listItem.tags.indexOf(entityList) !== -1) {\n                                   entityLists[entity].push(listItem.value)\n                               }\n                               return null\n                            })\n                            return null\n                        })\n                    }\n                    return null\n                })\n            }\n             //console.log(['LISTS2',entityLists])\n             // lookup lists\n             var fileLookups=[]\n             var lookups = []\n             Object.keys(entityLists).map(function(entity) {\n                 var values = entityLists[entity]\n                 fileLookups.push({name:entity+\".txt\",content:values.join(\"\\n\")})\n                 lookups.push('## lookup:'+entity)\n                 lookups.push(\"data/lookups/\"+entity+\".txt\")\n                 return null\n             })\n             \n            \n            // collate synonyms\n            //var synonyms = {}\n            var synonymsIndex = {}\n            lists.map(function(item) {\n                 if (item.value && item.value.trim().length > 0) {\n                    if (item.synonym) {\n                        if (!Array.isArray(synonymsIndex[item.synonym])) synonymsIndex[item.synonym] = [] \n                        //synonyms[item.value] = item.synonym\n                        synonymsIndex[item.synonym].push(item.value)\n                    }\n                }\n                return null\n            })\n            //console.log(['synonyms',synonymsIndex])\n            var synonymsOut = []\n            Object.keys(synonymsIndex).map(function(synonym) {\n                synonymsOut.push('## synonym:'+synonym)\n                uniquifyArray(synonymsIndex[synonym]).sort().map(function(item) {\n                    // TODO CONVERT TO RASA MD EXAMPLE WITH ENTITIES\n                    synonymsOut.push('- '+item)\n                    return null\n                }) \n                synonymsOut.push(\"\\n\")\n                return null\n            })\n            //console.log(['synonyms OUT',synonymsOut])\n            \n            // COMMON EXAMPLES  \n            var nluOut=[]\n            if (skill.intents) {\n                //console.log(['have intents',skill.intents])\n                Object.keys(skill.intents).map(function(intentKey) {\n                    const intentItem = skill.intents[intentKey]\n                    //console.log('have intent ',intentKey,intentItem)\n                    nluOut.push('## intent:'+intentKey)\n                    var examples = []\n                    intentItem.map(function(example) {\n                        // TODO CONVERT TO RASA MD EXAMPLE WITH ENTITIES\n                        //console.log(['INTY',example])\n                        if (example && example.example && example.example.trim().length > 0) {  \n                            var key = replaceEntitiesWithValues(example.example, example.entities)\n                            examples[key] = '- '+key\n                        }\n                        return null\n                    }) \n                    nluOut=[...nluOut, ...Object.values(examples)]\n                    nluOut.push(\"\\n\")\n                    return null\n                })\n            }\n            var nluContent = nluOut.join(\"\\n\")+\"\\n\"+synonymsOut.join(\"\\n\")+lookups.join(\"\\n\")\n            //console.log(nluContent)\n            // CONSTANTS\n             var configContent = skill.rasaConfig ? skill.rasaConfig : RASATemplates.config\n            //var domainContent = ''\n            var credentialsContent = skill.rasaCredentials ? skill.rasaCredentials : RASATemplates.credentials\n            var endpointsContent = skill.rasaEndpoint ? skill.rasaEndpoint : RASATemplates.endpoint\n            \n            // RASA ACTIONS\n            var actionsContent = RASATemplates.actions\n            var domainActions = []\n            \n            var actionFiles = []\n            if (Array.isArray(skill.rasaActions)) {\n                skill.rasaActions.map(function(action) {\n                    if (action && action.trim().length > 0) {\n                        var string = snakeToCamelCase(toSnakeCase(camelToSnakeCase(action)))\n                        var snake = camelToSnakeCase(string)+'_action'\n                        domainActions.push(snake)\n                        var name = string && string.trim().length > 0 ? string[0].toUpperCase() + string.substring(1) : ''\n                        actionFiles.push({name:name+'Action.py', content:RASATemplates.single_action(name+'Action',snake)})\n                        actionsContent+=\"\\n import \"+name+'Action.py'\n                    }\n                    return null\n                })\n            }\n            var domainEntities = skill.entities ? Object.keys(skill.entities) : []\n            var domainIntents = skill.intents ? Object.keys(skill.intents) : []\n            var domainSlots = skill.slots ?  Object.keys(skill.slots) : (skill.entities ? Object.keys(skill.entities) : [])\n            var domainSlotsMeta = {}\n            domainSlots.map(function(slot) {\n               domainSlotsMeta[slot] = {\n                   type: skill.slots && skill.slots[slot] &&  skill.slots[slot].slotType ? skill.slots[slot].slotType : 'unfeaturized'\n                }\n               return null\n            })\n            //console.log(['DOMAIN',domainEntities, domainIntents, domainSlots, domainSlotsMeta])\n            \n            var domainContentParts=[]\n            if (domainIntents.length > 0) {\n                domainContentParts.push(\"intents:\")\n                domainIntents.map(function(intent) {\n                    domainContentParts.push(\"- \"+intent)\n                    // TODO\n                    // TODO +\":\" plus intent entities\n                    // domainContentParts.push(\"  use_entities:\\n\")\n                    // domainContentParts.push(\"  - \"+entityForIntent)\n                    return null\n                })\n                domainContentParts.push(\"\\n\")\n            }\n            \n            if (domainEntities.length > 0) {\n                domainContentParts.push(\"entities:\")\n                domainEntities.map(function(entity) {\n                    domainContentParts.push(\"- \"+entity)\n                    return null\n                })\n                domainContentParts.push(\"\\n\")\n            }\n            if (domainSlots.length > 0) {\n                domainContentParts.push(\"slots:\")\n                domainSlots.map(function(slot,i) {\n                    domainContentParts.push(\"  \"+slot+\":\")\n                    domainContentParts.push(\"    type: \"+domainSlotsMeta[slot].type)\n                    return null\n                })\n                domainContentParts.push(\"\\n\")\n            }\n            // append session config\n            if (skill.rasaSession) skill.rasaSession.trim().split(\"\\n\").map(function(line) {\n                domainContentParts.push(line)\n                return null\n            })\n            \n            // UTTERANCES\n            var utterances = {}\n            if (skill.utterancesLists || skill.utterances) { \n                utterancesStorage.getItem('alldata').then(function(allUtterances) {\n                    if (Array.isArray(allUtterances)) {\n                        allUtterances.map(function(thisUtterance) {\n                            if (skill.utterances) { \n                                skill.utterances.map(function(listKey) {\n                                    if (thisUtterance.value === listKey) utterances[thisUtterance.value] = thisUtterance  \n                                    return null\n                                })\n                            }\n                            if (skill.utterancesLists) { \n                                skill.utterancesLists.map(function(listKey) {\n                                    if (thisUtterance.tags && thisUtterance.tags.indexOf(listKey) !== -1) utterances[thisUtterance.value] = thisUtterance  \n                                    return null\n                                })\n                                \n                            }\n                            return null\n                        })\n                        \n                         //fileLookups.push({name:toSnakeCase(utterance.value)+'.txt',content:''})\n                             \n                        \n                         // generate domainContent\n                         if (Object.keys(utterances).length > 0) {\n                             domainContentParts.push('responses:')\n                             Object.keys(utterances).map(function(utteranceKey) {\n                                    var utterance = utterances[utteranceKey]\n                                    domainContentParts.push('utter_'+toSnakeCase(utterance.value))\n                                    domainContentParts.push('- text: '+utterance.value)\n                                    if (utterance.synonyms && utterance.synonyms.length > 0) {\n                                        utterance.synonyms.map(function(synonym) {\n                                            domainContentParts.push('- text: '+synonym)\n                                            return null\n                                        })\n                                    } \n                                    return null\n                             })\n                         }\n                         resolve(generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContentParts.join(\"\\n\"), credentialsContent, endpointsContent, actionFiles, skill.rasaStories) )\n                    } else {\n                        resolve(generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContentParts.join(\"\\n\"), credentialsContent, endpointsContent, actionFiles, skill.rasaStories) )\n                    }\n                })\n               \n                \n            } else {\n                resolve(generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContentParts.join(\"\\n\"), credentialsContent, endpointsContent, actionFiles, skill.rasaStories) )\n            }\n        })\n        \n    })\n}\n\n\nfunction exportRASAMDZip(skill) {\n    return new Promise(function(resolve,reject) {\n        exportRASAMD(skill).then(function(data) {\n            createZip(data).then(function(res) {\n                resolve(res)\n            })\n        })\n    })\n}\n\nexport {exportRASAMD, exportRASAMDZip}\n","import { replaceEntitiesWithValues, snakeToCamelCase, camelToSnakeCase, toSnakeCase} from '../utils';\nimport {createZip} from './createZip'\nimport localforage from 'localforage'\nimport RASATemplates from './RASATemplates'\n\n function generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContent, credentialsContent, endpointsContent, actionFiles, storyContent) {\n    var folderTree = {\n        files:[\n            {name:'actions.py',content:actionsContent},\n            {name:'config.yml',content:configContent},\n            {name:'domain.yml',content:domainContent},\n            {name:'credentials.yml',content:credentialsContent},\n            {name:'endpoints.yml',content:endpointsContent}\n        ], \n        folders:[\n            {name:'actions', files:actionFiles}, \n            {name:'data', \n                files:[{name:'nlu.json', content: nluContent}, {name:'stories.md', content: storyContent ? storyContent : ''}], \n                folders:[{name:'lookups', files:fileLookups}]\n            }\n        ]\n    }\n    //console.log(['TREE GEN',folderTree])\n    return folderTree\n}\n\n// just the models subfolder\n// one file per intent\n// one file per entity\nfunction exportRASAJSON(skill) {\n //\"rasa_nlu_data\": {\n        //\"common_examples\": [],\n        //\"regex_features\" : [],\n        //\"lookup_tables\"  : [],\n        //\"entity_synonyms\": []\n    //}\n    //{\"rasa_nlu_data\":{\"regex_features\":[],\"entity_synonyms\":[{\"synonyms\":[\"biggest city\",\"capital city\"],\"value\":\"capital\"}],\"common_examples\":[{\"text\":\"sounds good sounds good thank you\",\"intent\":\"affirmative\",\"entities\":[]},\n      //{\"text\":\"what is the use of a actinometer\",\"intent\":\"ask_attribute\",\"entities\":[{\"end\":15,\"entity\":\"attribute\",\"start\":12,\"value\":\"use\"},{\"end\":32,\"entity\":\"thing\",\"start\":21,\"value\":\"actinometer\"}]}\n    //console.log(['EXPPORT RASA',skill])\n    return new Promise(function(resolve,reject) {\n         var listsStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"lists\",\n         });\n         var utterancesStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"utterances\",\n         });\n        \n        //resolve({files:[{name:'nlu.md', content: content}]})\n         \n         // LOAD ENTITY LISTS\n         listsStorage.getItem('alldata').then(function(lists) {\n            \n            //console.log(['LISTS',lists])\n            \n            // for each entity, collate entity values and lists values\n            var entityLists = {}\n            if (skill.entities) {\n                Object.keys(skill.entities).map(function(entity,i) {\n                    const entityValue = skill.entities[entity]\n                    // values from examples\n                    if (entityValue && entityValue.values) {\n                        entityLists[entity] = entityValue.values\n                    } \n                    // values from tags\n                    if (skill.entities[entity] && Array.isArray(skill.entities[entity].lists)) {\n                        lists.map(function(listItem,listItemIndex) {\n                            skill.entities[entity].lists.map(function(entityList) {\n                               if (listItem.tags && listItem.tags.indexOf(entityList) !== -1) {\n                                   entityLists[entity].push(listItem.value)\n                               }\n                               return null\n                            })\n                            return null\n                        })\n                    }\n                    return null\n                })\n            }\n             //console.log(['LISTS2',entityLists])\n             // lookup lists\n             var fileLookups=[]\n             var lookups = []\n             Object.keys(entityLists).map(function(entity) {\n                 var values = entityLists[entity]\n                 fileLookups.push({name:entity+\".txt\",content:values.join(\"\\n\")})\n                 lookups.push('## lookup:'+entity)\n                 lookups.push(\"data/lookups/\"+entity+\".txt\")\n                 return null\n             })\n             \n            \n            // collate synonyms\n            //var synonyms = {}\n            var synonymsIndex = {}\n            if (lists) lists.map(function(item) {\n                 if (item.value && item.value.trim().length > 0) {\n                    if (item.synonym) {\n                        if (!Array.isArray(synonymsIndex[item.synonym])) synonymsIndex[item.synonym] = [] \n                        //synonyms[item.value] = item.synonym\n                        synonymsIndex[item.synonym].push(item.value)\n                    }\n                }\n                return null\n            })\n            //console.log(['synonyms',synonymsIndex])\n            //var synonymsOut = []\n            //Object.keys(synonymsIndex).map(function(synonym) {\n                //synonymsOut.push('## synonym:'+synonym)\n                //uniquifyArray(synonymsIndex[synonym]).sort().map(function(item) {\n                    //// TODO CONVERT TO RASA MD EXAMPLE WITH ENTITIES\n                    //synonymsOut.push('- '+item)\n                    //return null\n                //}) \n                //synonymsOut.push(\"\\n\")\n                //return null\n            //})\n            ////console.log(['synonyms OUT',synonymsOut])\n            \n            // COMMON EXAMPLES  \n            var nluOut={}\n            if (skill.intents) {\n                //console.log(['have intents',skill.intents])\n                Object.keys(skill.intents).map(function(intentKey) {\n                    const intentItem = skill.intents[intentKey]\n                    //console.log('have intent ',intentKey,intentItem)\n                    //nluOut.push('## intent:'+intentKey)\n                    //var examples = []\n                    intentItem.map(function(example) {\n                        // TODO CONVERT TO RASA MD EXAMPLE WITH ENTITIES\n                        if (example && example.example && example.example.trim().length > 0) {\n                            //console.log(['INTY',example])\n                            var key = replaceEntitiesWithValues(example.example, example.entities)\n                            nluOut[key] = {\n                                \"text\":key,\n                                \"intent\":intentKey,\n                                \"entities\":example.entities ? example.entities.map(function(entity) {\n                                    return {\"end\":entity.end,\"entity\":entity.type,\"start\":entity.start,\"value\":entity.value}\n                                }) : []\n                            }\n                        }\n                        //'- '+replaceEntitiesWithValues(example.example, example.entities))\n                        return null\n                    }) \n                    //nluOut=[...nluOut, ...uniquifyArray(examples)]\n                    //nluOut.push(\"\\n\")\n                    return null\n                })\n            }\n            var nluContent=JSON.stringify({\n                \"rasa_nlu_data\":{\n                    \"regex_features\":[],\n                    \"entity_synonyms\":Object.keys(synonymsIndex).map(function(synonym) {\n                       //var synValues =synonymsIndex[synonym]  \n                       return {synonyms:synonymsIndex[synonym]  , value:synonym}\n                    }),\n                    \"common_examples\":Object.values(nluOut)\n                }\n            })\n            \n           \n            //var nluContent = nluOut.join(\"\\n\")+\"\\n\"+synonymsOut.join(\"\\n\")+lookups.join(\"\\n\")\n            \n            \n            //console.log(nluContent)\n            // CONSTANTS\n            var configContent = skill.rasaConfig ? skill.rasaConfig : RASATemplates.config\n            //var domainContent = ''\n            var credentialsContent = skill.rasaCredentials ? skill.rasaCredentials : RASATemplates.credentials\n            var endpointsContent = skill.rasaEndpoint ? skill.rasaEndpoint : RASATemplates.endpoint\n            \n            // RASA ACTIONS\n            var actionsContent = RASATemplates.actions\n            var domainActions = []\n            \n            var actionFiles = []\n            if (Array.isArray(skill.rasaActions)) {\n                skill.rasaActions.map(function(action) {\n                    if (action && action.trim().length > 0) {\n                        var string = snakeToCamelCase(toSnakeCase(camelToSnakeCase(action)))\n                        var snake = camelToSnakeCase(string)+'_action'\n                        domainActions.push(snake)\n                        var name = string && string.trim().length > 0 ? string[0].toUpperCase() + string.substring(1) : ''\n                        actionFiles.push({name:name+'Action.py', content:RASATemplates.single_action(name+'Action',snake)})\n                        actionsContent+=\"\\n import \"+name+'Action.py'\n                    }\n                    return null\n                })\n            }\n            var domainEntities = skill.entities ? Object.keys(skill.entities) : []\n            var domainIntents = skill.intents ? Object.keys(skill.intents) : []\n            var domainSlots = skill.slots ?  Object.keys(skill.slots) : (skill.entities ? Object.keys(skill.entities) : [])\n            var domainSlotsMeta = {}\n            domainSlots.map(function(slot) {\n               domainSlotsMeta[slot] = {\n                   type: skill.slots && skill.slots[slot] &&  skill.slots[slot].slotType ? skill.slots[slot].slotType : 'unfeaturized'\n                }\n               return null\n            })\n            //console.log(['DOMAIN',domainEntities, domainIntents, domainSlots, domainSlotsMeta])\n            \n            var domainContentParts=[]\n            if (domainIntents.length > 0) {\n                domainContentParts.push(\"intents:\")\n                domainIntents.map(function(intent) {\n                    domainContentParts.push(\"- \"+intent)\n                    // TODO\n                    //+\":\" to intent line\n                    // domainContentParts.push(\"  use_entities:\\n\")\n                    // domainContentParts.push(\"  - \"+entityForIntent)\n                    return null\n                })\n                domainContentParts.push(\"\\n\")\n            }\n            \n            if (domainEntities.length > 0) {\n                domainContentParts.push(\"entities:\")\n                domainEntities.map(function(entity) {\n                    domainContentParts.push(\"- \"+entity)\n                    return null\n                })\n                domainContentParts.push(\"\\n\")\n            }\n            if (domainSlots.length > 0) {\n                domainContentParts.push(\"slots:\")\n                domainSlots.map(function(slot,i) {\n                    domainContentParts.push(\"  \"+slot+\":\")\n                    domainContentParts.push(\"    type: \"+domainSlotsMeta[slot].type)\n                    return null\n                })\n                domainContentParts.push(\"\\n\")\n            }\n            // append session config\n            if (skill.rasaSession) skill.rasaSession.trim().split(\"\\n\").map(function(line) {\n                domainContentParts.push(line)\n                return null\n            })\n            \n            // UTTERANCES\n            var utterances = {}\n            if (skill.utterancesLists || skill.utterances) { \n                utterancesStorage.getItem('alldata').then(function(allUtterances) {\n                    if (Array.isArray(allUtterances)) {\n                        allUtterances.map(function(thisUtterance) {\n                            if (skill.utterances) { \n                                skill.utterances.map(function(listKey) {\n                                    if (thisUtterance.value === listKey) utterances[thisUtterance.value] = thisUtterance  \n                                    return null\n                                })\n                            }\n                            if (skill.utterancesLists) { \n                                skill.utterancesLists.map(function(listKey) {\n                                    if (thisUtterance.tags && thisUtterance.tags.indexOf(listKey) !== -1) utterances[thisUtterance.value] = thisUtterance  \n                                    return null\n                                })\n                                \n                            }\n                            return null\n                        })\n                        \n                         //fileLookups.push({name:toSnakeCase(utterance.value)+'.txt',content:''})\n                             \n                        \n                         // generate domainContent\n                         if (Object.keys(utterances).length > 0) {\n                             domainContentParts.push('responses:')\n                             Object.keys(utterances).map(function(utteranceKey) {\n                                    var utterance = utterances[utteranceKey]\n                                    domainContentParts.push('utter_'+toSnakeCase(utterance.value))\n                                    domainContentParts.push('- text: '+utterance.value)\n                                    if (utterance.synonyms && utterance.synonyms.length > 0) {\n                                        utterance.synonyms.map(function(synonym) {\n                                            domainContentParts.push('- text: '+synonym)\n                                            return null\n                                        })\n                                    } \n                                    return null\n                             })\n                         }\n                         resolve(generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContentParts.join(\"\\n\"), credentialsContent, endpointsContent, actionFiles, skill.rasaStories) )\n                    } else {\n                        resolve(generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContentParts.join(\"\\n\"), credentialsContent, endpointsContent, actionFiles, skill.rasaStories) )\n                    }\n                })\n               \n                \n            } else {\n                resolve(generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContentParts.join(\"\\n\"), credentialsContent, endpointsContent, actionFiles, skill.rasaStories) )\n            }\n        })\n        \n    })\n}\n\n\nfunction exportRASAJSONZip(skill) {\n    return new Promise(function(resolve,reject) {\n        exportRASAJSON(skill).then(function(data) {\n            createZip(data).then(function(res) {\n                resolve(res)\n            })\n        })\n    })\n}\n\nexport {exportRASAJSON, exportRASAJSONZip}\n","import {exportJOVOZip} from './exportJOVO'\nimport {exportJSONZip} from './exportJSON'\nimport {exportMycroftZip} from './exportMycroft'\n//import {exportRASAZip} from './exportRASA'\nimport {exportRASAMDZip} from './exportRASAMD'\nimport {exportRASAJSONZip} from './exportRASAJSON'\n\nvar exportFormats = [\n        {name:'JSON',exportFunction:exportJSONZip},\n        {name:'JOVO',exportFunction:exportJOVOZip},\n        {name:'Mycroft',exportFunction:exportMycroftZip},\n        //{name:'RASA',exportFunction:exportRASAZip},\n        {name:'RASA Markdown',exportFunction:exportRASAMDZip},\n        {name:'RASA JSON',exportFunction:exportRASAJSONZip}\n    ]\n\nexport default exportFormats\n\n","//,   Dropdown, ButtonGroup\nimport {Button } from 'react-bootstrap'\nimport React, {useEffect} from 'react';\nimport {Link} from 'react-router-dom'\nimport localforage from 'localforage'\nimport {exportJSON} from './export/exportJSON'\n \nexport default  function PublishPage(props) {\n \n\n\n    return <div>\n             <Link to={\"/skills/skill/\"+props.currentSkill.title} ><Button variant=\"success\" style={{float:'right'}} >Back to Skill</Button></Link>\n             <h1>Publish</h1>\n                <div>Ready to share your skill - <b>{props.currentSkill.title}</b>,  so other people can download and remix your intents, entities and utterances into new skills.</div>\n                <br/>\n                <div ><b>By publishing your extension, you are agreeing to the following</b>\n                <ul>\n                    <li>Your skill will be available for download under an MIT Open Source License, allowing people to download the data and do whatever they want with it.</li>\n                    <li>Your skill will be committed to the <a href=\"https://github.com/syntithenai/opennludata\" target=\"_new\">Github repository</a> </li>\n                    <li>Your skill can be unpublished/deleted from the searchable index but will remain in the history of the git repository.</li>\n                </ul>\n                </div>\n                \n                <div>Submitted skills can be found using the search tools on this website. </div>\n                <br/>\n               \n                <div style={{width: '100%',textAlign:'center'}}>\n                   {!props.currentSkill._id && <Button variant=\"success\" style={{display:'inline'}} onClick={function(e) {\n                       props.startWaiting()\n                       exportJSON(props.currentSkill).then(function(skillToSave) {\n                           props.saveItem('Skill',skillToSave)\n                           //{_id:props.currentSkill._id, id:props.currentSkill.id, title:props.currentSkill.title, json: JSON.stringify(props.currentSkill)})\n                           .then(function(res) {\n                               //console.log(['SSKIL created',res]) \n                               if (res && res.data && res.data._id) {\n                                   props.setCurrentSkill(res.data)\n                                   props.setMongoId(res.data._id)\n                                   props.setPageMessage('Published',3000)\n                                   props.stopWaiting()\n                                   props.updateFunctions.loadSkills().then(function() {\n                                        props.history.push(\"/skills/skill/\"+props.currentSkill.title)\n                                   })\n                                   ////console.log('updtecurrent skill ',currentSkill)\n                               } \n                            })\n                        })\n                    }} >Publish {props.currentSkill.title}</Button>}\n                   \n                   \n                   {props.currentSkill._id && <Button variant=\"success\" style={{display:'inline'}} onClick={function(e) {\n                       props.startWaiting()\n                       exportJSON(props.currentSkill).then(function(skillToSave) {\n                           props.saveItem('Skill',skillToSave)\n                           //{_id:props.currentSkill._id, id:props.currentSkill.id, title:props.currentSkill.title, json: JSON.stringify(props.currentSkill)})\n                           .then(function(res) {\n                               //console.log(['SSKIL updated',res]) \n                               if (res && res.data && res.data._id) {\n                                   props.setCurrentSkill(res.data)\n                                   props.setMongoId(res.data._id)\n                                   props.setPageMessage('Published',3000)\n                                   props.stopWaiting()\n                                   props.updateFunctions.loadSkills().then(function() {\n                                        props.history.push(\"/skills/skill/\"+props.currentSkill.title)\n                                   })\n                               } \n                            })  \n                        })  \n                    }} >Publish Again</Button>}\n                    \n                    \n                    {props.currentSkill._id && <Button variant=\"danger\" style={{display:'inline'}} onClick={function(e) {\n                       props.setMongoId('') \n                       props.startWaiting()\n                       props.deleteItem('Skill',props.currentSkill._id).then(function(res) {\n                           props.setMongoId(null)\n                           //console.log(['SSKIL deleted',res]) \n                               props.setPageMessage('Unpublished',3000)\n                               props.stopWaiting()\n                               props.updateFunctions.loadSkills().then(function() {\n                                    props.history.push(\"/skills/skill/\"+props.currentSkill.title)\n                                })\n                       }) \n                       \n                    }} >Unpublish</Button>}\n                </div>\n       </div>\n}\n","//{ tag, removeButtonText, onDelete }\nimport React from 'react';\nimport {ListGroup, Button} from 'react-bootstrap'\n//import { Link  } from 'react-router-dom'\nimport DropDownComponent from './DropDownComponent'\n\nexport default function SkillRegexTagComponent(props) {\n     let that = this\n     //console.log(props.tag)\n    // hack to pass functions through\n    const {lookups, setRegexpEntity, setRegexpIntent}  = props\n  return (\n    <ListGroup.Item type='button'  style={{width:'100%'}} >\n       <Button  variant=\"danger\" size=\"sm\" style={{float:'right', fontWeight:'bold', borderRadius:'15px', marginTop:'0.2em'}}  onClick={function(e) {if (window.confirm('Really delete')) {props.onDelete(e)}}} >X</Button>\n      {props.tag.name}  &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; \n        <div style={{float:'right'}}> \n          &nbsp;&nbsp;<DropDownComponent title={'Intent'} value={props.tag && props.tag.intent ? props.tag.intent :''} options={lookups && lookups.intentLookups ? lookups.intentLookups : []} selectItem={function(e) {setRegexpIntent(props.tag.id,e)}} />\n          &nbsp;&nbsp;<DropDownComponent title={'Entity'} value={props.tag && props.tag.entity ? props.tag.entity :''} options={lookups && lookups.entityLookups ? lookups.entityLookups : []} selectItem={function(e) {setRegexpEntity(props.tag.id,e)}} />&nbsp;&nbsp;\n        </div>\n    </ListGroup.Item>\n  )\n}\n","import React from 'react';\nimport {Link} from 'react-router-dom'\nimport {Button, Badge , ListGroup , Tabs, Tab} from 'react-bootstrap'\n//import useNluEditor from './useNluEditor'\n//import exportFormats from './export/index'\n////import {exportJSON} from './export/exportJSON'\n//import useDB from './useDB'\nimport {RASA, GoogleAssistant, Alexa} from '../utils'\nimport ReactTags from 'react-tag-autocomplete'\nimport SuggestionComponent from './SuggestionComponent'\nimport SkillRegexTagComponent from './SkillRegexTagComponent'\nimport DropDownComponent from './DropDownComponent'\nimport RASATemplates from '../export/RASATemplates'\n//import ExportPage from './ExportPage'\n//import PublishPage from './PublishPage'\n//import { saveAs } from 'file-saver';\n//import useRestEndpoint from './useRestEndpoint'\n       \nexport default function NluSkillEditorComponent(props) {\n    ////console.log(['skill ',props])\n    if (props.skillFilterValue && props.skillFilterValue.length > 0) {\n        if (props.filteredItems && props.filteredItems.length > 0) {\n           \n            const utteranceTags = props.currentSkill && props.currentSkill.utterances ? props.currentSkill.utterances.map(function(listItem,listItemKey) {return {id:listItemKey, name:listItem} }) : []\n            const utteranceListTags = props.currentSkill && props.currentSkill.utterancesLists ? props.currentSkill.utterancesLists.map(function(listItem,listItemKey) {return {id:listItemKey, name:listItem} }) : []\n            const slots = props.currentSkill && props.currentSkill.rasa && props.currentSkill.rasa.slots ? props.currentSkill.rasa.slots : props.entitiesForSkill;\n            const skillTags = props.currentSkill && props.currentSkill.tags ? props.currentSkill.tags.map(function(tag,i) {return {id: i, name: tag}}):[]\n            return <div>\n                 <div><h3>{props.skillFilterValue} </h3></div>\n                    <div style={{marginTop:'0.7em', marginBottom:'0.7em'}} >\n                        <b style={{marginRight:'1em', marginLeft:'0.5em'}} >Tags</b>\n                         <ReactTags\n                            placeholderText=\"Select Tags  \"\n                            minQueryLength={0}\n                            maxSuggestionsLength={50}\n                            autoresize={true}\n                            allowNew={true}\n                            tags={skillTags}\n                            suggestions={[]}                           \n                            onDelete={function(index) {props.removeSkillTag(index)}}\n                            onAddition={function(tag) {props.addSkillTag(tag)}} />\n                    </div>\n                    <div style={{marginTop:'0.7em', marginBottom:'0.7em', borderTop: '2px solid black'}} >\n                        <b style={{marginRight:'1em', marginLeft:'0.5em'}} >Intents</b>\n                        <span>{Object.keys(props.collatedItems).sort().map(function(collatedIntent, i) {\n                                var useCurrentIntent = props.currentIntent ? props.currentIntent : Object.keys(props.collatedItems)[0]\n                                var completionVariant = 'danger'\n                                if (props.collatedItems[collatedIntent].length > 300) {\n                                    completionVariant = 'success'\n                                } else if (props.collatedItems[collatedIntent].length > 100) {\n                                    completionVariant = 'primary'\n                                } else if (props.collatedItems[collatedIntent].length > 10) {\n                                    completionVariant = 'warning'\n                                } \n                                \n                                \n                                if (props.collatedItems[collatedIntent].length  === props.collatedCounts[collatedIntent]) {\n                                        return <Link key={collatedIntent} to={\"/examples/skill/\"+props.skillFilterValue+\"/intent/\"+collatedIntent} ><Button key={collatedIntent} variant={collatedIntent === useCurrentIntent ? \"primary\" : \"outline-primary\"} onClick={function() {props.setCurrentIntent(collatedIntent)}}>\n                                            <Badge variant={completionVariant} > {props.collatedItems[collatedIntent].length} </Badge>\n                                            &nbsp;{collatedIntent}\n                                        </Button></Link>\n                                } else {\n                                    return <Link key={collatedIntent} to={\"/examples/skill/\"+props.skillFilterValue+\"/intent/\"+collatedIntent} ><Button variant={collatedIntent === useCurrentIntent ? \"primary\" : \"outline-primary\"} onClick={function() {props.setCurrentIntent(collatedIntent)}}>\n                                            <Badge variant=\"danger\" > {props.collatedItems[collatedIntent].length}/{props.collatedCounts[collatedIntent]} </Badge>\n                                            &nbsp;{collatedIntent}\n                                        </Button></Link>\n                                }\n                                \n                        })}</span>\n                    </div>\n                    <div style={{marginTop:'0.7em', borderTop: '2px solid black'}} >\n                  <b style={{marginRight:'1em', marginLeft:'0.5em'}} >Entities</b><ListGroup>{Object.keys(props.entitiesForSkill).map(function(collatedEntity, i) {\n                            \n                           \n                            const listTags = props.currentSkill && props.currentSkill.entities && props.currentSkill.entities[collatedEntity] && props.currentSkill.entities[collatedEntity].lists ? props.currentSkill.entities[collatedEntity].lists.map(function(listItem,listItemKey) {return {id:listItemKey, name:listItem} }) : []\n                            ////console.log(listTags)\n                                return <ListGroup.Item key={collatedEntity} >\n                                        \n                                         <span style={{marginLeft:'1em', float:'left', fontWeight:'bold'}}>&nbsp;{collatedEntity}</span>\n                                      \n                                        <span style={{marginLeft:'1em', float:'left'}}>&nbsp;{props.entitiesForSkill[collatedEntity] && props.entitiesForSkill[collatedEntity].values && props.entitiesForSkill[collatedEntity].values.slice(0,5).join(\", \")}{props.entitiesForSkill[collatedEntity] && props.entitiesForSkill[collatedEntity].values && props.entitiesForSkill[collatedEntity].values.length > 5 ? <Badge>... {props.entitiesForSkill[collatedEntity] && props.entitiesForSkill[collatedEntity].values && props.entitiesForSkill[collatedEntity].values.length - 5} more </Badge> : ''}</span>\n                                        <span style={{marginLeft:'1em', float:'left'}}>\n                                       <label><i></i> <ReactTags\n                                        placeholderText=\"Also use values from \"\n                                        minQueryLength={0}\n                                        maxSuggestionsLength={50}\n                                        autoresize={true}\n                                        allowNew={false}\n                                        tags={listTags}\n                                        suggestionComponent={SuggestionComponent}\n                                        suggestions={props.lookups.listsLookups.map(function(tag,i) {return {id: i, name: tag}})}\n                                        onDelete={function(index) {props.removeListFromSkillEntity(collatedEntity, index)}}\n                                        onAddition={function(tag) {props.addListToSkillEntity(collatedEntity, tag)}} /> </label>\n                                        </span>\n                                        <div style={{float:'right'}} >\n                                            <DropDownComponent options={[\"\",...Alexa.entityTypes]} title=\"Alexa\" value={props.currentSkill.entities && props.currentSkill.entities[collatedEntity] && props.currentSkill.entities[collatedEntity].alexaType ? props.currentSkill.entities[collatedEntity].alexaType : ''} selectItem={function(entityType) {\n                                                props.setAlexaEntityType(collatedEntity,entityType)\n                                            }} />\n                                            &nbsp;&nbsp;<DropDownComponent options={[\"\",...GoogleAssistant.entityTypes]} title=\"Google\" value={props.currentSkill.entities && props.currentSkill.entities[collatedEntity] &&  props.currentSkill.entities[collatedEntity].googleType ? props.currentSkill.entities[collatedEntity].googleType : ''}  selectItem={function(entityType) {\n                                                props.setGoogleAssistantEntityType(collatedEntity,entityType)\n                                            }} />\n                                        </div>\n                                    </ListGroup.Item>\n                            //}\n                                                \n\n                    })}</ListGroup>\n                    </div>\n                    <div style={{marginTop:'0.7em', marginLeft:'0.4em', borderTop: '2px solid black'}} >\n                        <div ><b>Regular Expressions</b></div>\n                      <div style={{clear:'both'}}>\n                             <div style={{marginLeft:'1em'}}>\n                           <ListGroup style={{minWidth:'500px'}}>\n                            <ReactTags\n                            placeholderText=\"Select Regular Expression  \"\n                            minQueryLength={0}\n                            maxSuggestionsLength={50}\n                            autoresize={true}\n                            allowNew={false}\n                            tags={props.currentSkill && props.currentSkill.regexps ? props.currentSkill.regexps.map(function(tag,i) {return {id: i, name: tag.name, intent: tag.intent ? tag.intent : '', entity: tag.entity ? tag.entity : '', synonym: tag.synonym}}):[]}\n                            tagComponent={function(iprops) {return <SkillRegexTagComponent {...iprops}   setRegexpEntity={props.setRegexpEntity} setRegexpIntent={props.setRegexpIntent}  lookups={props.lookups}  />}}\n                            suggestionComponent={SuggestionComponent}\n                            suggestions={props.lookups.regexpsLookups ? props.lookups.regexpsCompleteLookups.map(function(tag,i) {return {id: i, name: tag.value, intent: tag.intent ? tag.intent : '', entity: tag.entity ? tag.entity : '', synonym: tag.synonym}}):[]}\n                           \n                            onDelete={function(index) {props.removeRegexp(index)}}\n                            onAddition={function(tag) {props.addRegexp(tag)}} /></ListGroup>\n                            </div>\n                            \n                        </div>\n                </div>\n  \n                   \n                    <div style={{marginTop:'0.7em', marginLeft:'0.4em', borderTop: '2px solid black'}} >\n                        <div ><b>Utterances</b></div>\n                      <div style={{clear:'both'}}>\n                             <div style={{marginLeft:'1em'}}>\n                            <label>Utterances\n                            <ReactTags\n                            placeholderText=\"Use utterance \"\n                            minQueryLength={0}\n                            maxSuggestionsLength={50}\n                            autoresize={true}\n                            allowNew={true}\n                            tags={utteranceTags}\n                            suggestionComponent={SuggestionComponent}\n                            suggestions={props.lookups.utterancesLookups ? props.lookups.utterancesLookups.map(function(tag,i) {return {id: i, name: tag}}):[]}\n                            onDelete={function(index) {props.removeUtterance(index)}}\n                            onAddition={function(tag) {props.addUtterance(tag)}} /> </label>\n                            </div>\n                            \n                             <div style={{marginLeft:'1em'}}>\n                            <label>Utterance Lists\n                            <ReactTags\n                            placeholderText=\"Use utterances from \"\n                            minQueryLength={0}\n                            maxSuggestionsLength={50}\n                            autoresize={true}\n                            allowNew={false}\n                            tags={utteranceListTags}\n                            suggestionComponent={SuggestionComponent}\n                            suggestions={props.lookups.utteranceTagsLookups ? props.lookups.utteranceTagsLookups.map(function(tag,i) {return {id: i, name: tag}}) : []}\n                            onDelete={function(index) {props.removeUtteranceList(index)}}\n                            onAddition={function(tag) {props.addUtteranceList(tag)}} /> </label>\n                            </div>\n                            \n                            \n                        </div>\n                </div>\n     \n                  <div style={{marginTop:'0.7em', borderTop: '2px solid black'}} >\n                    <div><b>Platform</b></div>\n                    <Tabs defaultActiveKey=\"rasa\" id=\"platform-tabs\">\n                      <Tab eventKey=\"rasa\" title=\"RASA\">\n                            <div style={{marginTop:'0.7em', marginLeft:'1.4em'}} >\n                                <Tabs defaultActiveKey=\"slots\" id=\"platform-rasa\">\n                                    <Tab eventKey=\"slots\" title=\"Slots\">\n                                         <div style={{marginLeft:'1.4em', marginTop:'0.7em', borderTop: '2px solid black'}} >\n                                             <form onSubmit={function(e) {e.preventDefault(); props.newSlot(props.newSlotValue,slots)}} ><input value={props.newSlotValue} onChange={function(e) {props.setNewSlotValue(e.target.value)}} /><Button size=\"sm\" onClick={function() {props.newSlot(props.newSlotValue,slots)}}>New Slot</Button>\n                                             </form>\n                                              <ListGroup>{Object.keys(slots).map(function(collatedEntity, i) { \n                                                    return <ListGroup.Item key={collatedEntity} >\n                                                                    <span style={{marginLeft:'1em', float:'left', fontWeight:'bold'}}>&nbsp;{collatedEntity}</span>\n                                                                    <div style={{float:'right'}} >\n                                                                         {props.entitiesForSkill[collatedEntity] &&  <DropDownComponent \n                                                                             options={RASA.autofillOptions} \n                                                                             title=\"Autofill\" \n                                                                             value={props.currentSkill.rasa && props.currentSkill.rasa.slots && props.currentSkill.entities[collatedEntity] && props.currentSkill.rasa.slots[collatedEntity] && props.currentSkill.rasa.slots[collatedEntity].slotAutofill && props.currentSkill.rasa.slots[collatedEntity].slotAutofill.trim().length > 0 ? props.currentSkill.rasa.slots[collatedEntity].slotAutofill : 'Yes'} selectItem={function(entityType) {\n                                                                            props.setRASASlotAutofill(collatedEntity,entityType,slots)\n                                                                        }} />}\n                                                                        &nbsp;&nbsp;\n                                                                        <DropDownComponent options={Object.keys(RASA.slotTypes)} title=\"Slot\" value={props.currentSkill.rasa && props.currentSkill.rasa.slots && props.currentSkill.rasa.slots[collatedEntity] && props.currentSkill.rasa.slots[collatedEntity].slotType ? props.currentSkill.rasa.slots[collatedEntity].slotType : 'unfeaturized'} selectItem={function(entityType) {\n                                                                            props.setRASASlotType(collatedEntity,entityType,slots)\n                                                                        }} />\n                                                                        <Button variant=\"danger\"  size=\"sm\" style={{marginLeft:'0.5em', float:'right', fontWeight:'bold', borderRadius:'15px', marginTop:'0.2em'}} onClick={function(e) {props.deleteSlot(collatedEntity,slots)}}>X</Button>\n                                                                    </div>\n                                                            </ListGroup.Item>\n                                                        //}\n                                                        \n                                                })}</ListGroup>\n                                        </div>\n                               \n                          \n                                 </Tab>\n                                  <Tab eventKey=\"actions\" title=\"Actions\">\n                                    <div style={{marginTop:'0.7em', marginLeft:'1.4em', borderTop: '2px solid black'}} >\n                                      <label>\n                                      \n                                        <div style={{fontStyle:'italic'}}>One per line, _action will be appended to each line</div>\n                                        <textarea style={{width:'40em', height:'10em'}}  value={props.currentSkill.rasa && Array.isArray(props.currentSkill.rasa.actions) ? props.currentSkill.rasa.actions.join(\"\\n\") : ''} onChange={function(e) {props.setRASAActions(e.target.value ? e.target.value.split(\"\\n\") : [])}} placeholder={`fred\nfindSname\nis_whatsi\nblah name`} ></textarea>\n                                      </label>\n                                </div>\n                                  </Tab>\n                                   <Tab eventKey=\"config\" title=\"Config\">\n                                    <div style={{marginTop:'0.7em', marginLeft:'1.4em', borderTop: '2px solid black'}} >\n                                      <label>\n                                    \n                                        <textarea style={{width:'60em', height:'30em'}}  value={props.currentSkill.rasa && props.currentSkill.rasa.config? props.currentSkill.rasa.config : ''} onChange={function(e) {props.setRASAConfig(e.target.value)}} placeholder={RASATemplates.config} ></textarea>\n                                      </label>\n                                </div>\n                                  </Tab>\n                                 <Tab eventKey=\"stories\" title=\"Stories\">\n                                    <div style={{marginTop:'0.7em', marginLeft:'1.4em', borderTop: '2px solid black'}} >\n                                      <label>\n                                    \n                                        <textarea style={{width:'60em', height:'30em'}}  value={props.currentSkill.rasa && props.currentSkill.rasa.stories? props.currentSkill.rasa.stories : ''} onChange={function(e) {props.setRASAStories(e.target.value)}} placeholder={RASATemplates.stories} ></textarea>\n                                      </label>\n                                </div>\n                                  </Tab> \n                                 <Tab eventKey=\"credentials\" title=\"Credentials\">\n                                    <div style={{marginTop:'0.7em', marginLeft:'1.4em', borderTop: '2px solid black'}} >\n                                      <label>\n                                    \n                                        <textarea style={{width:'60em', height:'30em'}}  value={props.currentSkill.rasa && props.currentSkill.rasa.credentials ? props.currentSkill.rasa.credentials : RASATemplates.credentials} onChange={function(e) {props.setRASACredentials(e.target.value)}}  ></textarea>\n                                      </label>\n                                </div>\n                                  </Tab> \n                                                        \n                                <Tab eventKey=\"endpoints\" title=\"Endpoints\">\n                                    <div style={{marginTop:'0.7em', marginLeft:'1.4em', borderTop: '2px solid black'}} >\n                                      <label>\n                                    \n                                        <textarea style={{width:'60em', height:'30em'}}  value={props.currentSkill.rasa && props.currentSkill.rasa.endpoint? props.currentSkill.rasa.endpoint : RASATemplates.endpoint} onChange={function(e) {props.setRASAEndpoint(e.target.value)}}  ></textarea>\n                                      </label>\n                                </div>\n                                  </Tab> \n                              \n                               <Tab eventKey=\"session\" title=\"Session Config\">\n                                    <div style={{marginTop:'0.7em', marginLeft:'1.4em', borderTop: '2px solid black'}} >\n                                      <label>\n                                    \n                                        <textarea style={{width:'60em', height:'30em'}}  value={props.currentSkill.rasa && props.currentSkill.rasa.session ? props.currentSkill.rasa.session : RASATemplates.session} onChange={function(e) {props.setRASASession(e.target.value)}}  ></textarea>\n                                      </label>\n                                </div>\n                                  </Tab> \n                              \n                            </Tabs>\n                                  \n                          </div>  \n                      </Tab>\n                      \n                      <Tab eventKey=\"mycroft\" title=\"Mycroft\">\n                        <div style={{marginTop:'0.7em', marginLeft:'1.4em'}} >\n                           <b>not yet</b>\n                        </div>\n                      </Tab>\n                       <Tab eventKey=\"jovo\" title=\"JOVO\">\n                        <div style={{marginTop:'0.7em', marginLeft:'1.4em'}} >\n                            <label style={{fontWeight:'bold', marginLeft:'0.5em'}} > Invocation <input type='text' value={props.invocation} onChange={function(e) {props.setInvocation(e.target.value)}} /></label>\n                        </div>\n                      </Tab>\n                      <Tab eventKey=\"alexa\" title=\"Alexa\">\n                        <div style={{marginTop:'0.7em', marginLeft:'1.4em'}} >\n                            <label style={{fontWeight:'bold', marginLeft:'0.5em'}} > Invocation <input type='text' value={props.invocation} onChange={function(e) {props.setInvocation(e.target.value)}} /></label>\n                        </div>\n                      </Tab>\n                      <Tab eventKey=\"google_assistant\" title=\"Google Assistant\">\n                        <div style={{marginTop:'0.7em', marginLeft:'1.4em'}} >\n                            <label style={{fontWeight:'bold', marginLeft:'0.5em'}} > Invocation <input type='text' value={props.invocation} onChange={function(e) {props.setInvocation(e.target.value)}} /></label>\n                        </div>\n                      </Tab>\n                    </Tabs>\n                 </div>\n                 \n            </div>\n        } else {\n            return <b></b>\n        }\n        \n    }\n    return []\n}\n","export default function useRestEndpoint(axiosClient,restUrl=process.env.REACT_APP_restBaseUrl) {\n   \n    // to  endpoint root\n    function doPost(modelType,data) {\n        //console.log(['POST', modelType, data, restUrl])  \n        return new Promise(function(resolve,reject) {\n            if (modelType && data) {\n                axiosClient.post(restUrl+modelType,\n                  data,\n                  {\n                    headers: {\n                        'Content-Type': 'application/json'\n                      },\n                  }\n                ).then(function(res) {\n                  //console.log(res)  \n                  resolve(res)\n                }).catch(function(res) {\n                  //console.log(res)  \n                  reject(res)\n                })\n            } else {\n                //console.log('Missing post params')\n                reject('Missing post params')\n            }\n        })\n    }\n    \n    // to  endpoint with id\n    function doPut(modelType,data) {\n        //console.log('PUT')  \n        return new Promise(function(resolve,reject) {\n            if (modelType && data && data._id) {\n                axiosClient.put(restUrl+modelType+\"/\"+data._id,\n                  data,\n                  {\n                    headers: {\n                        'Content-Type': 'application/json'\n                      },\n                  }\n                ).then(function(res) {\n                  //console.log(res)  \n                  resolve(res)\n                }).catch(function(res) {\n                  //console.log(res)  \n                  reject(res)\n                })\n            } else {\n                //console.log('Missing post params')\n                reject('Missing post params')\n            }\n        })\n    }\n    \n    function doGet(modelType,id) {\n        return new Promise(function(resolve,reject) {\n            if (id) {\n                axiosClient.get(restUrl+modelType+\"/\"+id,\n                  {\n                   \n                  },\n                  {\n                    headers: {\n                        'Content-Type': 'application/json'\n                      },\n                  }\n                ).then(function(res) {\n                  //console.log(['GET',res])  \n                  resolve(res)\n                }).catch(function(res) {\n                  //console.log(res)  \n                  reject(res)\n                })\n            } else {\n                reject(\"GET request missing id\")\n            }\n        })\n    }\n    \n    function doGetMany(modelType,filter, limit=20, skip=0, sort='', populate=null) {\n        return new Promise(function(resolve,reject) {\n            var queryParts=[\n                'query='+encodeURIComponent(JSON.stringify(filter)),\n                'limit='+limit,\n                'skip='+skip,\n                \n            ]\n            if (populate) queryParts.push('populate='+encodeURIComponent(JSON.stringify(populate)))\n            if (sort) queryParts.push('sort='+encodeURIComponent(JSON.stringify(sort)))\n            axiosClient.get(restUrl+modelType+'?'+queryParts.join(\"&\"),\n              {\n               \n              },\n              {\n                headers: {\n                    'Content-Type': 'application/json'\n                  },\n              }\n            ).then(function(res) {\n              //console.log(['GET many',res])  \n              resolve(res)\n            }).catch(function(res) {\n              //console.log(res)  \n              reject(res)\n            })\n        })\n    }\n    \n    // to  endpoint with id\n    function doDelete(modelType,id) {\n        return new Promise(function(resolve,reject) {\n            if (id) {\n                return axiosClient.delete(restUrl+modelType+\"/\"+id,\n                  {\n                  },\n                  {\n                    headers: {\n                        'Content-Type': 'application/json'\n                    },\n                  }\n                ).then(function(res) {\n                  //console.log(['DEL',res])  \n                  resolve(res)\n                }).catch(function(res) {\n                  //console.log(res)  \n                  reject(res)\n                })\n            } else {\n                 //console.log(['DEL request missing id'])  \n                 reject('DELETE request missing id')\n            }\n        })\n    }\n    // to  endpoint with id\n    function doPatch(modelType, data) {\n        //console.log('patch')  \n        return new Promise(function(resolve,reject) {\n            if (modelType && data && data._id) {\n                axiosClient.patch(restUrl+modelType+\"/\"+data._id,\n                  data,\n                  {\n                    headers: {\n                        'Content-Type': 'application/json'\n                      },\n                  }\n                ).then(function(res) {\n                      //console.log(['update',res])  \n                      resolve(res)\n                }).catch(function(res) {\n                  //console.log(res)  \n                  reject(res)\n                })\n            } else {\n                //console.log('Missing post params')\n                reject('Missing post params')\n            }\n        })\n    }\n    \n    // EXPOSED METHODS\n    \n    function saveItem(modelType, data, patch=true) {\n        return new Promise(function(resolve, reject) {\n            if (modelType) {\n                if (data._id && data._id.trim && data._id.trim())  {\n                    if (patch) {\n                        doPatch(modelType,data).then(function(res) {\n                          resolve(res)  \n                        })\n                    } else {\n                        doPut(modelType,data).then(function(res) {\n                          resolve(res)  \n                        })\n                    }\n                } else {\n                    delete data._id \n                    doPost(modelType,data).then(function(res) {\n                      resolve(res)  \n                    })\n                }\n            }\n        })\n    }\n    \n    function deleteItem(modelType, id) {\n        return new Promise(function(resolve, reject) {\n            if (modelType && id) {\n                doDelete(modelType,id).then(function(res) {\n                  resolve(res)  \n                })\n            }\n        })\n    }\n    \n    function getItem(modelType,id) {\n        return new Promise(function(resolve, reject) {\n            if (modelType && id) {\n                doGet(modelType,id).then(function(res) {\n                  resolve(res)  \n                })\n            }\n        })\n    }\n    \n    function searchItems(modelType,query,limit,skip) {\n        return new Promise(function(resolve, reject) {\n            if (modelType) {\n                doGetMany(modelType,query,limit,skip).then(function(res) {\n                  resolve(res)  \n                })\n            }\n        })\n    }\n    \n    \n    return {saveItem, deleteItem, getItem, searchItems}\n    \n}\n","import {useState, useEffect} from 'react';\nimport {useParams, useHistory} from 'react-router-dom'\n\n//import useNluEditor from './useNluEditor'\n//import exportFormats from './export/index'\nimport useDB from './useDB'\nimport {generateObjectId, uniquifyArray} from './utils'\n//import { saveAs } from 'file-saver';\nimport useRestEndpoint from './useRestEndpoint'\nimport localforage from 'localforage'\n\n\nexport default function useSkillsEditor(props) {\n    console.log(['USE SKILLS ED',props.user])\n\n    //const {loadAll, skillFilterValue, setSkillFilterValue, filteredItems} = useNluEditor('nlutool','examples','alldata', props.updateFunctions.updateLookups)\n    const [skillKeys, setSkillKeys] = useState([])\n    const [filteredItems, setFilteredItems] = useState([])\n    const [currentIntent, setCurrentIntent] = useState('')\n    const [entitiesForSkill, setEntitiesForSkill] = useState({})\n    const [listsForEntity, setListsForEntity] = useState({})\n    const [currentSkill, setCurrentSkill] = useState(null)\n    //const skillsManager = useDB('nlutool','skills')\n    const listsManager = useDB('nlutool','lists')\n    //const [showExportDialog, setShowExportDialog] = useState(false)\n    const [collatedItems, setCollatedItems] = useState({})\n    const [collatedTags, setCollatedTags] = useState({})\n    const [collatedCounts, setCollatedCounts] = useState({})\n    const [newSlotValue, setNewSlotValue] = useState('')\n    const [skillMatches, setSkillMatches] = useState([])\n    const [skillUpdatedMatches, setSkillUpdatedMatches] = useState([])\n    var skillsStorage = localforage.createInstance({\n       name: \"nlutool\",\n       storeName   : \"skills\",\n     });\n     var examplesStorage = localforage.createInstance({\n       name: \"nlutool\",\n       storeName   : \"examples\",\n     });\n    const token = props.user && props.user.token && props.user.token.access_token ? props.user.token.access_token : ''\n    console.log(['SETOKE',token])\n    const axiosClient = props.getAxiosClient(token)\n    const {saveItem, deleteItem, searchItems} = useRestEndpoint(axiosClient,process.env.REACT_APP_restBaseUrl)\n\n    const [invocation, setInvocation] = useState('')\n    const [mongoId, setMongoId] = useState('')\n    \n    const params = useParams()\n    const history = useHistory()\n    \n    var skillFilterValue = params.skillId ? params.skillId : '';\n    function setSkillFilterValue(value) {\n        ////console.log('SETSKILLVAL')\n        ////console.log(history)\n        var root = history.location.pathname.split(\"/\")\n        var parts=['/'+root[1]]\n        skillFilterValue = value;\n        if (skillFilterValue.length > 0) {\n            parts.push('/skill/'+skillFilterValue)\n        }\n        ////console.log(['ssv',parts,value])\n        history.push(parts.join(''))\n    }\n    \n    // load skill on init\n    useEffect(() => {\n        loadSkill()\n         //props.updateFunctions.updateLists(listsManager.items[0])\n            //props.updateFunctions.updateRegexps(listsManager.items[0])\n            //props.updateFunctions.updateUtterances(listsManager.items[0])\n            //props.updateFunctions.updateLookups(listsManager.items[0])\n    },[])\n        \n    //// load list lookups\n    useEffect(() => {\n        if (listsManager.items.length > 0) { \n            ////console.log(['UPD ITEMS',listsManager.items,listsManager.items[0]])\n            props.updateFunctions.updateLists(listsManager.items[0])\n            //props.updateFunctions.updateRegexps(listsManager.items[0])\n            //props.updateFunctions.updateUtterances(listsManager.items[0])\n            props.updateFunctions.updateLookups(listsManager.items[0])\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[listsManager.items])\n \n    // load mongo id into skill when changed\n    useEffect(() => {\n        if (currentSkill) {\n          ////console.log(['SET mongoid HAVE CURRENT SKILL',currentSkill,mongoId])\n          var skill = currentSkill\n          skill._id = mongoId\n          setCurrentSkill(skill)\n       }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[mongoId])\n    \n    // load invocation into skill when changed\n    useEffect(() => {\n        if (currentSkill) {\n          ////console.log(['SET INVOC HAVE CURRENT SKILL',currentSkill,invocation])\n          var skill = currentSkill\n          skill.invocation = invocation\n          setCurrentSkill(skill)\n      }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[invocation])    \n    \n    // look for published version of skill \n    useEffect(() => {\n        ////console.log(['USER UPDATE',currentSkill,props.user,props.user._id])\n        if (currentSkill && props.user && props.user._id) {\n          ////console.log(['USER UPDATE FIND ONLINE'])\n          findOnlineSkill(props.user,currentSkill)\n      }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[props.user,listsForEntity]) \n    \n    // save skill\n    useEffect(() => {\n        //\n        var skill = currentSkill\n        if (skill && skill.title && skill.title.length > 0) {\n            // merge in latest entity values derived from intents\n            if (entitiesForSkill) {\n                Object.keys(entitiesForSkill).map(function(entity) {\n                   if (skill.entities && skill.entities[entity]) {\n                       skill.entities[entity].values = entitiesForSkill[entity].values;\n                   }  \n                   return null\n                })\n            }\n            // merge in intents\n            skill.intents = collatedItems\n            //console.log('SAVE NOW - change cs or inv',JSON.parse(JSON.stringify(skill)))\n            skillsStorage.setItem(skillFilterValue, currentSkill, function (err) {\n                if (err)  {\n                    //console.log(err)\n                    throw new Error(err)\n                }\n            })\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[mongoId,currentSkill,listsForEntity, invocation])\n    \n  \n  \n  //function setInvocation(val) {\n      ////console.log('SET INVOCK')\n      ////if (currentSkill) {\n          //////console.log(['SET INVOCK HAVE CURRENT SKILL',currentSkill,val])\n          ////var skill = currentSkill\n          ////skill.invocation = val \n          ////setCurrentSkill(skill)\n      ////}\n  //}\n\n    function loadSkill() {\n        examplesStorage.getItem('alldata').then(function(allItems) {\n            if (allItems && Array.isArray(allItems)) {\n                var filteredItems = []\n                var skillKeys = {}\n                allItems.map(function(item)   {\n                    // collate unique skill keys\n                    if (item.skills) {\n                        item.skills.map(function(skill) {\n                            skillKeys[skill] = true\n                            return null\n                        })\n                    }\n                    // filter \n                    if (skillFilterValue && item.skills && item.skills.indexOf(skillFilterValue) !== -1) {\n                        filteredItems.push(item)\n                    }\n                    return null\n                })\n                setSkillKeys(Object.keys(skillKeys))\n                setFilteredItems(filteredItems)\n                ////console.log('loaded skill items for init',filteredItems, Object.keys(skillKeys),allItems)\n                if (skillFilterValue) {\n                    ////console.log(['LOAD SKILL',skillFilterValue])\n                    skillsStorage.getItem(skillFilterValue, function (err, skill) {\n                        if (err) throw new Error(err)\n                        var newSkill = skill && skill.id ? skill : {}\n                        newSkill.id = newSkill.id ? newSkill.id : generateObjectId()\n                        newSkill.title = skillFilterValue\n                        newSkill.invocation = newSkill.invocation ? newSkill.invocation : ''\n                        newSkill.entities = indexEntities(newSkill,filteredItems)\n                        if (newSkill.title) findOnlineSkill(props.user,newSkill) \n                        var [intents, tags] = indexIntentsAndTags(skill,filteredItems)\n                        newSkill.intents = intents\n                       // newSkill.tags = tags    \n                        setCurrentSkill(newSkill)\n                        setInvocation(newSkill.invocation)\n                        setMongoId(newSkill._id)\n                        listsManager.loadAll()\n                        props.updateFunctions.updateUtterances()\n                        props.updateFunctions.updateRegexps()\n                        props.updateFunctions.updateLookups()\n                        ////console.log(['LOADED LOCAL SKILL ',JSON.parse(JSON.stringify(newSkill))])\n                        forceReload(newSkill)\n                    })\n                }\n            }\n        })\n    }\n    \n    function findOnlineSkill(user,skill) {\n        //console.log(['FINDONLINESKILL',user,skill,props.lookups, props.lookups.skills])\n        // if user is logged in, try load the matching online skill\n        if (user && user._id && skill.title) {\n            //var query = {user:user._id, title:skill.title}\n            if (props.lookups.skills) {\n                setSkillMatches( Object.values(props.lookups.skills).filter(function(loadedSkill) {\n                    //console.log(['FINDONLINESKILL compare',user._id, loadedSkill.user, skill.title, loadedSkill.title])\n                    if (loadedSkill && loadedSkill.title ===  skill.title) {\n                        if (user._id === loadedSkill.user) {\n                            //console.log(['FINDONLINESKILL match', loadedSkill,   loadedSkill.updated_date  ,skill.updated_date , loadedSkill.updated_date - skill.updated_date ])\n                            //setSkillMatches([loadedSkill])\n                            if (!skill.updated_date || skill.updated_date < loadedSkill.updated_date) {\n                                 //console.log(['FINDONLINESKILL match newer', loadedSkill])\n                                setSkillUpdatedMatches([loadedSkill])\n                            }\n                        }\n                    }\n                }))\n            }\n        }    \n            //if (skill._id) query._id = skill._id\n            ////console.log(['SEARCH ONLINE ',query])\n            //searchItems('Skill',query).then(function (res) {\n                ////console.log(['SKILL RESULTS'])\n                ////console.log(res.data)\n                //if (res.data && res.data.length > 0) {\n                    //var found = false\n                    //res.data.map(function(skillItem) {\n                        ////console.log(['SKILL RESULTS', skill ? skill._id : '',skillItem ? skillItem._id:''])\n                        //if (skill._id && skill._id === skillItem._id) {\n                            //found = true\n                            ////console.log(['SKILL RESULTS DATES',skill.updated_date ,skillItem.updated_date, skill.updated_date - skillItem.updated_date])\n                            //if (skill.updated_date < skillItem.updated_date) {\n                                //setSkillUpdatedMatches([res.data[0]])\n                            //}\n                            //// matching skill OK\n                            ////setSkillMatches([res.data[0]])\n                        //} \n                        //return null\n                    //})\n                    //if (!found) {\n                        //// potential match\n                        //setSkillMatches(res.data)\n                    //}\n                //} else {\n                    //// no match existing so create new OK\n                   //setSkillMatches([])\n                //}\n            //}).catch(function(err) {\n                ////console.log(err)  \n            //})\n            \n        //} else {\n            //// no match existing so create new OK\n           //setSkillMatches([])\n        //}\n    }\n    \n    function indexEntities(currentSkill, filteredItems) {\n         ////console.log(['INDEX ENETITIES',currentSkill,filteredItems])\n         var entities = {}\n            // collate entities from filteredItems\n            if (Array.isArray(filteredItems)) {\n                filteredItems.map(function (item,itemKey) {\n                  if (Array.isArray(item.entities)) {\n                      item.entities.map(function(entity,entityKey) {\n                         if (entity && entity.type && entity.type.length > 0) {\n                             if (typeof entities[entity.type] !== \"object\") entities[entity.type] = {} //\n                             //currentSkill.entities && currentSkill.entities[entity.type] ?  currentSkill.entities[entity.type] : {}\n                             if (!Array.isArray(entities[entity.type].values )) entities[entity.type].values = []\n                             if (currentSkill && currentSkill.entities && currentSkill.entities[entity.type]&& currentSkill.entities[entity.type].alexaType) entities[entity.type].alexaType = currentSkill.entities[entity.type].alexaType\n                             if (currentSkill && currentSkill.entities && currentSkill.entities[entity.type]&& currentSkill.entities[entity.type].googleType) entities[entity.type].googleType = currentSkill.entities[entity.type].googleType\n                             if (currentSkill && currentSkill.entities && currentSkill.entities[entity.type]&& currentSkill.entities[entity.type].lists) entities[entity.type].lists = currentSkill.entities[entity.type].lists\n                             entities[entity.type].values.push(entity.value)\n                         }\n                         return null\n                      })\n                  }\n                  return null\n                })\n            }\n            // sort and uniquify values\n            //var slots = currentSkill && currentSkill.slots ? currentSkill.slots : {}\n            Object.keys(entities).map(function(entityName,entityKey) {\n               const entity = entities[entityName]\n               entity.values = uniquifyArray(entity.values).sort()\n               \n               //if (slots[entityName]) {\n               //} else {\n                   //slots[entityName] = {values:[]}\n               //}\n               return null\n            })\n            ////console.log([\"ENT\",entities])\n            setEntitiesForSkill(entities)\n            return entities;\n    }\n    function indexIntentsAndTags(currentSkill, filteredItems) {\n        ////console.log(['INDEX INTENTS',currentSkill])\n        if (currentSkill) {\n            // collate intents and tags from items\n             var newCollatedItems = collatedItems\n             var newCollatedCounts = collatedCounts\n             var newCollatedTags = {}\n             if (filteredItems) {\n                 filteredItems.map(function(item) {\n                    if (item.intent) {\n                        if (!newCollatedItems[item.intent]) newCollatedItems[item.intent]=[]\n                        newCollatedCounts[item.intent] =   (newCollatedCounts[item.intent] > 0) ? newCollatedCounts[item.intent] + 1 : 1;\n                        //if (collatedItems[item.intent].length < 300) {\n                            newCollatedItems[item.intent].push({example: item.example, entities: item.entities})\n                        //}\n                    }\n                    if (Array.isArray(item.tags)) {\n                        item.tags.map(function(tag) {\n                            newCollatedTags[tag] = true\n                            return null\n                        })\n                    } \n                   return null;  \n                 })\n                 setCollatedItems(newCollatedItems)\n                 setCollatedCounts(newCollatedCounts)\n                 setCollatedTags(newCollatedTags)\n                return [collatedItems, Object.keys(newCollatedTags)]\n             } \n        }\n        return [[],[]]\n    }\n       \n\n    \n    \n\n\n    function setSkill(skill) {\n        //console.log(['SETSKILL',currentSkill,skill])\n        if (skill && skill.id) {\n            setCurrentSkill(skill)\n            //setInvocation(skill.invocation)\n            setMongoId(skill._id)\n           // forceReload()\n        } else {\n            //console.log(['NOSETSKILL',currentSkill,skill])\n        }\n    }\n\n    function addListToSkillEntity(entity,list) {\n      ////console.log(['ADSKOI',currentSkill,currentSkill.entities,entity,list])\n      if (entity && list && list.name) {\n            var skill = currentSkill;\n            if (!skill.entities) skill.entities={}\n            if (!skill.entities[entity]) skill.entities[entity] = {lists:[]}\n            if (!Array.isArray(skill.entities[entity].lists)) skill.entities[entity].lists = []\n            //var newListsForEntity = listsForEntity\n            ////console.log(['ADSKOI1.5',skill])\n            skill.entities[entity].lists.push(list.name)\n            skill.entities[entity].lists = uniquifyArray(skill.entities[entity].lists).sort()\n           //newListsForEntity[entity] = uniquifyArray(newListsForEntity).sort()\n            setCurrentSkill(skill)  \n            // force render\n            forceReload()  \n            //} else {\n                ////console.log(['ADSKOI new'])\n               //newListsForEntity[entity] = [list.name]\n            //}\n             ////console.log(['ADSKOI2 final',newListsForEntity])\n            //setListsForEntity(newListsForEntity)\n       } else {\n           //console.log([' missing data'])\n       }\n    }\n  \n    function removeListFromSkillEntity(entity, listIndex) {\n      var skill = currentSkill\n      ////console.log(['REMOVESKILLFROMLIST',entity,listIndex])\n      if (skill && skill.entities && entity && skill.entities[entity] && skill.entities[entity].lists) {\n          var lists = skill.entities[entity].lists\n          //lists = uniquifyArray([lists.slice(0, listIndex),lists.slice(listIndex + 1)]).sort()\n          lists = lists.slice(0, listIndex).concat(lists.slice(listIndex + 1))\n          \n          skill.entities[entity].lists = lists\n          setCurrentSkill(skill)  \n          forceReload()  \n          ////console.log(['REMOVESKILLFROMLIST ddd',lists])\n      } \n       //var newEntitiesForSkill = entitiesForSkill\n       //if (newEntitiesForSkill[entity]) {\n           //var lists = newEntitiesForSkill[entity].lists && Array.isArray(newEntitiesForSkill[entity].lists) ? newEntitiesForSkill[entity].lists : [];\n           //newEntitiesForSkill[entity].lists = uniquifyArray([lists.slice(0, listIndex),lists.slice(listIndex + 1)]).sort()\n           //setEntitiesForSkill(newEntitiesForSkill)\n       //}\n    }\n  \n    function setGoogleAssistantEntityType(entity, type) {\n        if (currentSkill && entity) {\n            var skill = currentSkill;\n            if (!skill.entities) skill.entities={}\n            if (!skill.entities[entity]) skill.entities[entity] = {}\n            skill.entities[entity].googleType = type\n            setCurrentSkill(skill)  \n           forceReload()  \n       } \n    }\n    \n    function setAlexaEntityType(entity, type) {\n        if (currentSkill && entity) {\n            var skill = currentSkill;\n            if (!skill.entities) skill.entities={}\n            if (!skill.entities[entity]) skill.entities[entity] = {}\n            skill.entities[entity].alexaType = type\n            setCurrentSkill(skill)  \n            //console.log('ALEXA')\n            //console.log(skill)\n            forceReload()  \n       } \n    }\n    \n    function setRASASlotType(entity, type, slots) {\n        if (currentSkill && entity && type) {\n            var skill = currentSkill;\n            var newSlots = slots ? slots : {}\n            newSlots[entity].slotType = type\n            var rasa = skill.rasa ? skill.rasa : {}\n            rasa.slots = newSlots\n            skill.rasa = rasa\n            setCurrentSkill(skill)  \n            //console.log('RASA')\n            //console.log(skill)\n            forceReload()  \n       } \n    }\n       \n    function setRASASlotAutofill(entity, type, slots) {\n        \n            \n        if (currentSkill && entity && type) {\n            var skill = currentSkill;\n            var newSlots = slots ? slots : {}\n            newSlots[entity].slotAutofill = type\n            var rasa = skill.rasa ? skill.rasa : {}\n            rasa.slots = newSlots\n            skill.rasa = rasa\n            setCurrentSkill(skill)  \n            forceReload()  \n       } \n    }\n    \n    function newSlot(name,slots) {\n        if (name && name.trim().length > 0) {\n            var skill = currentSkill;\n            var newSlots = slots ? slots : {}\n            var rasa = skill.rasa ? skill.rasa : {}\n            newSlots[name] = {}\n            rasa.slots = slots\n            skill.rasa = rasa\n            setCurrentSkill(skill)  \n            setNewSlotValue('')\n            forceReload()  \n        }\n    }\n    \n    function deleteSlot(slot, slots) {\n        if (currentSkill && slot && slots ) {\n            var skill = currentSkill;\n            delete slots[slot]\n            skill.rasa = skill.rasa ? skill.rasa : {}\n            skill.rasa.slots = slots\n            setCurrentSkill(skill)  \n            forceReload()  \n        }\n    }\n\n    function setRASAActions(data) {\n          if (currentSkill && data) {\n            var skill = currentSkill;\n            skill.rasa = skill.rasa ? skill.rasa : {}\n            skill.rasa.actions = data\n            setCurrentSkill(skill)  \n            forceReload()  \n       }\n    }\n    \n    function setRASAConfig(data) {\n        //console.log(['setrasaconfig',data, currentSkill])\n          if (currentSkill) {\n            var skill = currentSkill;\n            skill.rasa = skill.rasa ? skill.rasa : {}\n            skill.rasa.config = data\n            setCurrentSkill(skill)  \n            forceReload()  \n       }\n    }\n    \n    function setRASAStories(data) {\n          if (currentSkill) {\n            var skill = currentSkill;\n            skill.rasa = skill.rasa ? skill.rasa : {}\n            skill.rasa.stories = data\n            setCurrentSkill(skill)  \n            forceReload()  \n       }\n    }\n    function setRASAEndpoint(data) {\n          if (currentSkill) {\n            var skill = currentSkill;\n            skill.rasa = skill.rasa ? skill.rasa : {}\n            skill.rasa.endpoint = data\n            setCurrentSkill(skill)  \n            forceReload()  \n       }\n    }\n    function setRASACredentials(data) {\n          if (currentSkill) {\n            var skill = currentSkill;\n            skill.rasa = skill.rasa ? skill.rasa : {}\n            skill.rasa.credentials = data\n            setCurrentSkill(skill)  \n            forceReload()  \n       }\n    }  \n    \n    function setRASASession(data) {\n       if (currentSkill) {\n            var skill = currentSkill;\n            skill.rasa = skill.rasa ? skill.rasa : {}\n            skill.rasa.session = data\n            setCurrentSkill(skill)  \n            forceReload()  \n       }\n    }  \n        \n    function addRegexp(regexp) {\n        //console.log(['ADDREGEX',regexp])\n        if (currentSkill && regexp) {\n            var skill = currentSkill;\n            if (!Array.isArray(skill.regexps)) skill.regexps=[]\n            skill.regexps.push({name: regexp.name, synonym: regexp.synonym })\n            //skill.regexps = uniquifyArray(skill.regexps)\n            setCurrentSkill(skill)  \n            //// if this is a new regexp, add it to the main database\n            //if (!props.lookups.regexpListsLookups[regexp.name] && !props.lookups.regexpsLookups[regexps.name]) {\n                //var regexpStorage = localforage.createInstance({\n                   //name: \"nlutool\",\n                   //storeName   : \"regexps\",\n                 //});\n                 //regexpStorage.getItem('alldata', function (err,regexps) {\n                     //if (err) throw new Error(err)\n                     //if (Array.isArray(regexps)) {\n                         //regexps.unshift({id:generateObjectId(), value:regexp.name, synonyms:'', tags:[]})\n                         //regexpStorage.setItem('alldata',utterances)\n                     //}\n                 //})\n            //}\n            forceReload()\n       } \n    }\n    \n    function removeRegexp(index) {\n        //console.log(['RE UTTERANCE',index])\n        if (typeof index === \"number\" && currentSkill && currentSkill.regexps && currentSkill.regexps.length > index) {\n            var skill = currentSkill;\n            skill.regexps = [...skill.regexps.slice(0,index),...skill.regexps.slice(index+1)]\n            setCurrentSkill(skill)  \n            //console.log('RASA')\n            //console.log(skill)\n            forceReload()\n        }\n    }\n    \n    function setRegexpIntent(index, intent) {\n        //console.log(['set reg intent',index, intent])\n        if (typeof index === \"number\" && currentSkill && currentSkill.regexps && currentSkill.regexps.length > index) {\n            var skill = currentSkill;\n            skill.regexps = skill.regexps ? skill.regexps : []\n            var key = (!isNaN(parseInt(index)) ? parseInt(index) : 0)\n            var regexp = skill.regexps[key] ? skill.regexps[key] : {}\n            regexp.intent = intent\n            skill.regexps[key] = regexp\n            setCurrentSkill(skill)  \n            //console.log('RASA')\n            //console.log(skill)\n            forceReload()\n        }\n    }\n    \n    function setRegexpEntity(index,entity) {\n        //console.log(['set reg entity',index, entity])\n        if (typeof index === \"number\" && currentSkill && currentSkill.regexps && currentSkill.regexps.length > index) {\n            var skill = currentSkill;\n            skill.regexps = skill.regexps ? skill.regexps : []\n            var key = (parseInt(index) != NaN ? parseInt(index) : 0)\n            var regexp = skill.regexps[key] ? skill.regexps[key] : {}\n            regexp.entity = entity\n            skill.regexps[key] = regexp\n            setCurrentSkill(skill)  \n            //console.log('RASA')\n            //console.log(skill)\n            forceReload()\n        }\n    }\n    \n    function addUtterance(utterance) {\n        if (currentSkill && utterance && utterance.name) {\n            var skill = currentSkill;\n            if (!Array.isArray(skill.utterances)) skill.utterances=[]\n            skill.utterances.push(utterance.name)\n            skill.utterances = uniquifyArray(skill.utterances)\n            setCurrentSkill(skill)  \n            //console.log('RASA')\n            //console.log(skill)\n            // if this is a new utterance, add it to the main database\n            if (!props.lookups.utteranceListsLookups[utterance.name] && !props.lookups.utterancesLookups[utterance.name]) {\n                var utteranceStorage = localforage.createInstance({\n                   name: \"nlutool\",\n                   storeName   : \"utterances\",\n                 });\n                 utteranceStorage.getItem('alldata', function (err,utterances) {\n                     if (err) throw new Error(err)\n                     if (Array.isArray(utterances)) {\n                         utterances.unshift({id:generateObjectId(), value:utterance && utterance.name ? utterance.name.trim().replaceAll(' ','_') : '', synonym:utterance.name, tags:[]})\n                         utteranceStorage.setItem('alldata',utterances)\n                     }\n                 })\n            }\n            forceReload()\n       } \n    }\n    \n    function removeUtterance(index) {\n        //console.log(['RE UTTERANCE',index])\n        if (typeof index === \"number\" && currentSkill && currentSkill.utterances && currentSkill.utterances.length > index) {\n            var skill = currentSkill;\n            skill.utterances = [...skill.utterances.slice(0,index),...skill.utterances.slice(index+1)]\n            setCurrentSkill(skill)  \n            //console.log('RASA')\n            //console.log(skill)\n            forceReload()\n        }\n    }\n    function addUtteranceList(utterance) {\n          //console.log(['ADD UTTERANCE LIST',utterance, currentSkill])\n          if (currentSkill && utterance) {\n            var skill = currentSkill;\n            if (!Array.isArray(skill.utterancesLists)) skill.utterancesLists=[]\n            skill.utterancesLists.push(utterance.name)\n            skill.utterancesLists = uniquifyArray(skill.utterancesLists)\n            setCurrentSkill(skill)  \n            //console.log('add ut list')\n            //console.log(skill.utterancesLists)\n            forceReload()\n       } \n    }\n     \n    function removeUtteranceList(index) {\n        if (typeof index === \"number\" && currentSkill && currentSkill.utterancesLists) {\n            var skill = currentSkill;\n            skill.utterancesLists = [...skill.utterancesLists.slice(0,index),...skill.utterancesLists.slice(index+1)]\n            setCurrentSkill(skill)  \n            //console.log('RASA')\n            //console.log(skill)\n            forceReload()\n        }\n    }  \n    \n    function addSkillTag(tag) {\n          //console.log(['ADD skill tag',tag, currentSkill])\n          if (currentSkill && tag) {\n            var skill = currentSkill;\n            if (!Array.isArray(skill.tags)) skill.tags=[]\n            skill.tags.push(tag.name)\n            skill.utterancesLists = uniquifyArray(skill.utterancesLists).sort()\n            setCurrentSkill(skill)  \n            forceReload()\n       } \n    }\n     \n    function removeSkillTag(index) {\n          //console.log(['rm skill tag',index, currentSkill])\n        if (typeof index === \"number\" && currentSkill && currentSkill.tags) {\n            var skill = currentSkill;\n            skill.tags = [...skill.tags.slice(0,index),...skill.tags.slice(index+1)]\n            setCurrentSkill(skill)  \n            forceReload()\n        }\n    }  \n    \n\n   \n    function forceReload(skill) {\n        var thisSkill = skill && skill.id ? skill : (currentSkill && currentSkill.id ? currentSkill : {})\n        setListsForEntity(JSON.stringify([thisSkill._id,thisSkill.entitiesListsData,thisSkill.utterancesListsData,thisSkill.rasa,\n        thisSkill.jovo,thisSkill.mycroft,thisSkill.entities,thisSkill.utterances,thisSkill.utterancesLists, thisSkill.regexps, thisSkill.tags]))  \n    }\n        \n    //addRegexpUtteranceTags,\n    return {setAlexaEntityType,setGoogleAssistantEntityType,  removeListFromSkillEntity, addListToSkillEntity,\n    currentSkill,setCurrentSkill,  skillFilterValue, invocation, setInvocation, entitiesForSkill, collatedItems, collatedCounts, setCurrentIntent, setSkillFilterValue,\n     addRegexp, removeRegexp, setRegexpIntent, setRegexpEntity, setMongoId, saveItem, deleteItem, searchItems,\n     removeUtterance, addUtterance,  addUtteranceList, removeUtteranceList, skillKeys, addSkillTag, removeSkillTag,\n     newSlot, newSlotValue,    setNewSlotValue,  slots: props.slots, setRASASlotAutofill, setRASASlotType, deleteSlot ,\n     setRASAActions, setRASASession , setRASAEndpoint , setRASACredentials  ,setRASAStories ,setRASAConfig, \n     filteredItems, currentIntent, listsForEntity, listsManager, collatedTags, skillMatches, skillUpdatedMatches,setSkillMatches, setSkillUpdatedMatches, setSkill, forceReload\n     }\n    \n}\n","import React from 'react';\nimport './App.css';\nimport {Link} from 'react-router-dom'\nimport {Button, Dropdown, ButtonGroup} from 'react-bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport exportFormats from './export/index'\nimport PublishPage from './PublishPage'\nimport { saveAs } from 'file-saver';\nimport NluSkillEditorComponent from './components/NluSkillEditorComponent'\n\nimport useSkillsEditor from './useSkillsEditor'\n\nexport default  function NluSkillsEditor(props) {\n\n    const skillsEditor = useSkillsEditor(Object.assign({},props,{user:props.user, lookups: props.lookups}))\n    \n    const {\n    currentSkill, setCurrentSkill, skillFilterValue, setSkillFilterValue,\n      skillKeys,\n     setMongoId, saveItem, deleteItem, \n       listsForEntity, skillMatches, skillUpdatedMatches, setSkillMatches, setSkillUpdatedMatches, setSkill, forceReload\n     } = skillsEditor\n   \n    \n     var skillOptions = skillKeys && skillKeys.sort().map(function(skillKey,i) {\n          return <Dropdown.Item key={i} value={skillKey} onClick={function(e) {setSkillFilterValue(skillKey)}}  >{skillKey}</Dropdown.Item>\n       })\n       skillOptions.unshift(<Dropdown.Item key={'empty_key_value_empty'} value={''} onClick={function(e) {setSkillFilterValue('')}}  >&nbsp;</Dropdown.Item>)\n   \n        //<Button style={{float:'right',marginLeft:'0.5em'}}  variant=\"success\" onClick={function() {setShowExportDialog(true)}} >Publish</Button>\n        // {JSON.stringify(skillMatches)}\n     const skillsList = skillKeys ? skillKeys.map(function(skill,i) {return <Button key={i}  onClick={function(e) {setSkillFilterValue(skill)}}  style={{marginLeft:'1em'}} >{skill}</Button>} )   : []\n     \n     function loadSkill(skill) {\n        //console.log(['LOaD SKIL',skill])  \n        return new Promise(function(resolve,reject) {\n            if (skill && skill.file) {\n                //console.log(['LOaD SKIL have file',(process.env.REACT_APP_githubSkillsUrl ? process.env.REACT_APP_githubSkillsUrl : '/static/media/skills/')+skill.file])  \n                const axiosClient = props.getAxiosClient()\n                axiosClient.get((process.env.REACT_APP_githubSkillsUrl ? process.env.REACT_APP_githubSkillsUrl : '/static/media/skills/')+skill.file).then(function(res) {\n                  //console.log(['LOaDed SKIL',res.data])  \n                  if (res.data) {\n                      ////console.log(res.data)\n                      //try {\n                          //var data = JSON.parse(res.data)\n                          setSkill(res.data)\n                          resolve({fileType:'opennlu.skill', created_date: new Date().getTime(), title: res.data.title, data: JSON.stringify(res.data)})\n                      //} catch (e) {\n                        ////console.log(e)      \n                    //}\n                  } else {\n                      reject('Failed to load skill')  \n                  }\n                }).catch(function(e) {\n                   reject('Failed to load skill')  \n                })\n            } else {\n                reject('Incomplete skill data')\n            }\n        })\n    }\n            \n    return <div>\n \n    <hr/>\n\n        \n        {currentSkill && skillUpdatedMatches && skillUpdatedMatches.length > 0 && <span>\n                You have a more recent published version of this skill&nbsp;\n                {skillUpdatedMatches.map(function(match) {\n                    return <span>saved {new Date(match.updated_date).toUTCString()} <Button variant=\"warning\"  onClick={function(e) {loadSkill(match); setSkillUpdatedMatches([]); forceReload()}} >Merge</Button></span>\n                })}\n        </span>}         \n         {currentSkill && !props.publish && skillFilterValue && skillFilterValue.length > 0 && <><Dropdown style={{float:'right',marginLeft:'0.5em'}}  as={ButtonGroup}>\n          <Dropdown.Toggle split variant=\"primary\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button  variant=\"primary\">Export</Button>\n          <Dropdown.Menu variant=\"primary\" >\n              {exportFormats.map(function(exportFormat,i) {\n                  var title = skillFilterValue+'_opennludata_'+exportFormat.name+'_'+Date.now()\n                  var variant= exportFormat.name === \"JSON\" ? \"success\" : \"primary\"\n                return <Dropdown.Item variant={variant} key={i} value={exportFormat.name} \n                onClick={function(e) {\n                    //var skill = currentSkill\n                    //skill.intents = \n                    //skill.entities = \n                    exportFormat.exportFunction(currentSkill).then(function(zipBody) {\n                        //console.log(['TRIGGER DL',title,zipBody])\n                        if (exportFormat.name==='JSON') {\n                            saveAs(zipBody, title+'.json')\n                        } else {\n                            saveAs(zipBody, title+'.zip')\n                        }\n                })}}  >{exportFormat.name}</Dropdown.Item>\n           })}\n          </Dropdown.Menu>\n        </Dropdown>\n       </>\n         }\n         {(currentSkill && !props.publish && props.user && props.user.token && props.user.token.access_token ) && <Link to={\"/skills/skill/\"+currentSkill.title+\"/publish\"} ><Button variant=\"success\" style={{float:'right'}} >Publish</Button></Link>}\n       \n       {(currentSkill && !props.publish && !(props.user && props.user.token && props.user.token.access_token)) && <Button variant=\"success\" style={{float:'right'}} onClick={props.doLogin} >{'Login to Publish'}</Button>}\n       \n      \n        \n        {currentSkill && !props.publish && <NluSkillEditorComponent user={props.user} lookups={props.lookups} {...skillsEditor  } />}\n        {!currentSkill && <div>\n            <h1>Skills</h1>\n            {skillsList.length > 0 && skillsList}\n            {skillsList.length <= 0 && <div>\n                You dont have any skills yet. Import some <Link to='/sources'><Button>Sources</Button></Link> or <Link to='/search'><Button>Search</Button></Link> the community archive.\n            </div>}\n        </div>}\n         \n         {(currentSkill && props.publish ) && <PublishPage {...props} setCurrentSkill={setCurrentSkill} listsForEntity={listsForEntity} forceReload={forceReload}  user={props.user} setMongoId={setMongoId} currentSkill={currentSkill} saveItem={saveItem} deleteItem={deleteItem} />}\n     \n    </div>\n            \n}\n      \n\n\n       \n         //{!props.publish && renderEditor(props)}\n         \n         //{props.publish && <div>\n             //<Link to={\"/skills/skill/\"+currentSkill.title} ><Button variant=\"success\" style={{float:'right'}} >Back to Skill</Button></Link>\n             //<h1>Publish</h1>\n             //<textarea style={{height: '20em', width:'60em'}}  value={JSON.stringify(currentSkill)}></textarea>\n             \n        //</div>}\n","//, Modal\nimport React, {useState, useEffect, useContext} from 'react';\nimport {ListGroup, Button, Accordion, Card, AccordionContext} from 'react-bootstrap'\nimport { Link  } from 'react-router-dom'\nimport { useAccordionToggle } from 'react-bootstrap/AccordionToggle';\n\nimport localforage from 'localforage'\nimport useImportMergeFunctions from './useImportMergeFunctions'\nimport useImportFunctions from './useImportFunctions'\n\n\n\nfunction ContextAwareToggle({ children, eventKey, callback }) {\n  const currentEventKey = useContext(AccordionContext);\n\n  const decoratedOnClick = useAccordionToggle(\n    eventKey,\n    () => callback && callback(eventKey),\n  );\n\n  const isCurrentEventKey = currentEventKey === eventKey;\n\n  return (\n    <>\n    {!isCurrentEventKey && <Button\n      onClick={decoratedOnClick}\n    >+</Button>\n    }\n    \n    {isCurrentEventKey && <Button\n      onClick={decoratedOnClick}\n    >-</Button>\n    }\n    \n    </>\n  );\n}\n\nfunction ImportReviewPage(props) {\n    const {mergeEntities, mergeIntents, mergeUtterances} = useImportMergeFunctions()\n    const [skillTitle, setSkillTitle] = useState('')\n    \n    const [collatedIntents, setCollatedIntents] = useState({})\n    const [collatedEntities, setCollatedEntities] = useState({})\n    const [importData, setImportData] = useState({})\n    var localforageStorageImport = localforage.createInstance({\n        name: 'nlutool',\n        storeName   :'importing',\n    });\n    useEffect(() => {\n        localforageStorageImport.getItem('alldata').then(function(importData) {\n             console.log('importData')  \n             console.log(importData)  \n             setImportData(importData)\n             if (importData.title) setSkillTitle(importData.title)\n             if (importData.intents) {\n                 var collatedIntents = {}\n                 importData.intents.map(function(intent) {\n                     if (intent) {\n                         var key = intent.intent ? intent.intent : '_'\n                         collatedIntents[key] = collatedIntents[key] ? collatedIntents[key] : []\n                         collatedIntents[key].push(intent)\n                    }\n                    return null\n                 })\n                 setCollatedIntents(collatedIntents)\n             }\n             if (importData.entities) {\n                 var collatedEntities = {}\n                 importData.entities.map(function(entity,index) {\n                     if (entity && entity.tags  && entity.tags.length > 0) {\n                         entity.tags.map(function(tag) {\n                             collatedEntities[tag]  = collatedEntities[tag] ? collatedEntities[tag] : []\n                             collatedEntities[tag].push(index)\n                         })\n                     } else {\n                         collatedEntities[\"untagged\"] = collatedEntities[\"untagged\"] ? collatedEntities[\"untagged\"] : []\n                         collatedEntities[\"untagged\"].push(index)\n                     }\n                     return null\n                 })\n                 setCollatedEntities(collatedEntities)\n             }\n        })\n    },[])\n    const blockStyle={borderTop: '2px solid black', minHeight:'5em'}\n    const [visible, setVisible] = useState({})\n    //<pre>{JSON.stringify(importData,null,2)}</pre>\n        \n    return <div style={{marginLeft:'1em'}}>\n        <h3>Import Review</h3>\n        \n          <Accordion >\n\n           {/* INTENTS */}\n              {importData.intents && <Card>\n                <Card.Header>\n                  <ContextAwareToggle as={Button} variant=\"link\" eventKey=\"root-0\"  >\n                  </ContextAwareToggle>\n                  {importData.intents && <span style={{marginLeft:'2em'}}  id='intents' >{Object.keys(collatedIntents).length } intents with {importData.intents ? Object.keys(importData.intents).length : 0} examples <Button \n                    style={{marginLeft:'2em'}} \n                    onClick={function(e) {\n                                    mergeIntents(importData.intents , skillTitle)\n                                    .then(function(counts) {\n                                        props.setPageMessage('Updated '+(counts.updated ? counts.updated : 0) +' and created '+(counts.created ? counts.created : 0),4000)\n                                        // TODO remove item from import data\n                                    })\n                                }}>Import All Intents</Button></span>}\n                </Card.Header>\n                \n                {<Accordion.Collapse eventKey=\"root-0\"><Card.Body>{Object.keys(collatedIntents).map(function(intent, key) {\n                    return <Card key={key}>\n                        <Accordion >\n                                 \n                            <Card.Header>\n                               <ContextAwareToggle as={Button} variant=\"link\" eventKey={\"intent-\"+key}  >\n                                    </ContextAwareToggle>&nbsp;&nbsp;\n                                    \n                              <b>{intent}</b> with {collatedIntents[intent].length} examples\n                              <Button \n                                style={{marginLeft:'2em'}} \n                                onClick={function(e) {\n                                    mergeIntents(collatedIntents[intent], skillTitle)\n                                    .then(function(counts) {\n                                        props.setPageMessage('Updated '+(counts.updated ? counts.updated : 0) +' and created '+(counts.created ? counts.created : 0),4000)\n                                        // TODO remove item from import data\n                                    })\n                                }}>Import {intent}</Button>\n                            </Card.Header>\n                            {<Accordion.Collapse eventKey={\"intent-\"+key}>\n                            <Card.Body>\n                                   \n                                        <ul>{collatedIntents[intent].map(function(example,iikey) {\n                                            return <li key={iikey}>{example.example}</li> \n                                        })}</ul>\n                                    \n                            </Card.Body>\n                            </Accordion.Collapse>}\n                        </Accordion >\n                    </Card>\n                          \n                    \n                })}\n                </Card.Body></Accordion.Collapse>}\n                \n              </Card>}\n              \n              \n                             \n  \n              \n              {/* ENTITIES */}\n              {importData.entities && <Card>\n                <Card.Header>\n                  <ContextAwareToggle as={Button} variant=\"link\" eventKey=\"root-1\"  >\n                  </ContextAwareToggle>\n                  {importData.entities && <span style={{marginLeft:'2em'}}  id='entities' >{importData.entities ? Object.keys(importData.entities).length : 0} entities <Button \n                    style={{marginLeft:'2em'}} \n                    onClick={function(e) {\n                        mergeEntities(importData.entities, skillTitle)\n                        .then(function(counts) {\n                            props.setPageMessage('Updated '+(counts.updated ? counts.updated : 0) +' and created '+(counts.created ? counts.created : 0),4000)\n                        })\n                    }}>Import All Entities</Button></span>}\n                </Card.Header>\n                {<Accordion.Collapse eventKey=\"root-1\"><Card.Body>{Object.keys(collatedEntities).map(function(entityKey, key) {\n                    return <Card key={key}>\n                        <Accordion >\n                            <Card.Header>\n                               <ContextAwareToggle as={Button} variant=\"link\" eventKey={\"entity-\"+key}  >\n                                </ContextAwareToggle>&nbsp;&nbsp;\n                                    \n                              {/*<b>{entity}</b> with {Object.values(importData.entities[entity].values).length} examples*/}\n                              <Button \n                                style={{marginLeft:'2em'}} \n                                onClick={function(e) {\n                                    mergeEntities(collatedEntities[entityKey].map(function(i) {return importData.entities[i]}), skillTitle)\n                                    .then(function(counts) {\n                                        props.setPageMessage('Updated '+(counts.updated ? counts.updated : 0) +' and created '+(counts.created ? counts.created : 0),4000)\n                                    })\n                                }}>Import {entityKey}</Button>\n                            </Card.Header>\n                            {<Accordion.Collapse eventKey={\"entity-\"+key}>\n                                <Card.Body>\n                                    <ul>{collatedEntities[entityKey] && collatedEntities[entityKey].map(function(example,ikey) {\n                                        return <li key={ikey}>{importData && importData.entities[example] && importData.entities[example].value ? importData.entities[example].value : ''}</li> \n                                    })}</ul>\n                                </Card.Body>\n                            </Accordion.Collapse>}\n                        </Accordion >\n                    </Card>\n                          \n                    \n                })}\n                </Card.Body></Accordion.Collapse>}\n                \n              </Card>}\n              \n              \n              \n\n\n           {/* UTTERANCES */}\n              {importData.utterances && <Card>\n                <Card.Header>\n                  <ContextAwareToggle as={Button} variant=\"link\" eventKey=\"root-2\"  >\n                  </ContextAwareToggle>\n                  {importData.utterances && <span style={{marginLeft:'2em'}}  id='utterances' >{importData.utterances ? Object.keys(importData.utterances).length : 0} utterances <Button \n                    style={{marginLeft:'2em'}} \n                    onClick={function(e) {\n                        mergeUtterances(importData.utterances, skillTitle)\n                        .then(function(counts) {\n                            props.setPageMessage('Updated '+(counts.updated ? counts.updated : 0) +' and created '+(counts.created ? counts.created : 0),4000)\n                        })\n                    }}>Import All Utterances</Button></span>}\n                </Card.Header>\n                \n                {<Accordion.Collapse eventKey=\"root-2\"><Card.Body>{importData.utterances &&  Object.values(importData.utterances).map(function(utterance, key) {\n                    return <Card key={key}>\n                                 \n                            <Card.Header>\n                              <b>{utterance.value}</b> \n                              <Button \n                                style={{marginLeft:'2em'}} \n                                onClick={function(e) {\n                                    mergeUtterances([utterance], skillTitle)\n                                    .then(function(counts) {\n                                        props.setPageMessage('Updated '+(counts.updated ? counts.updated : 0) +' and created '+(counts.created ? counts.created : 0),4000)\n                                    })\n                                }}>Import</Button>\n                            </Card.Header>\n                           <div>\n                                {utterance.synonym && utterance.synonym.split(\"\\n\").map(function(alt) {\n                                   return <div>{alt}</div>\n                                })}\n                           </div>\n                    </Card>\n                          \n                    \n                })}\n                </Card.Body></Accordion.Collapse>}\n                \n              </Card>   }           \n        </Accordion>    \n        \n    </div>   \n}\n\nexport default ImportReviewPage\n\n\n\n\n\n                   \n         //<div id='skill' ><label>Title <input type='text' value={skillTitle} onChange={function(e) {setSkillTitle(e.target.value)}} />        &nbsp;&nbsp;<Button \n            //onClick={function(e) {\n                ////mergeIntents([importData.utterances[utterance]], skillTitle)\n                ////.then(function(intentCounts) {\n                    //////props.setPageMessage('Updated '+(counts.updated ? counts.updated : 0) +' and created '+(counts.created ? counts.created : 0),4000)\n                ////})\n            //}}>Import All</Button>\n            //</label></div>\n       \n        //<Accordion >\n         \n              \n            //{/* UTTERANCES */}\n              //<Card>\n                //<Card.Header>\n                  //<ContextAwareToggle as={Button} variant=\"link\" eventKey=\"root-2\"  >\n                  //</ContextAwareToggle>\n                  //{importData.utterances && <span style={{marginLeft:'2em'}}  id='intents' >{importData.utterances ? Object.keys(importData.utterances).length : 0} utterances <Button \n                    //style={{marginLeft:'2em'}} \n                    //onClick={function(e) {\n                        //mergeUtterances(importData.utterances, skillTitle)\n                        //.then(function(counts) {\n                            //props.setPageMessage('Updated '+(counts.updated ? counts.updated : 0) +' and created '+(counts.created ? counts.created : 0),4000)\n                        //})\n                    //}}>Import All Utterances</Button></span>}\n                //</Card.Header>\n                \n                //{<Accordion.Collapse eventKey=\"root-2\"><Card.Body>{importData.utterances &&  Object.keys(importData.utterances).map(function(utterance, key) {\n                    //return <Card>\n                        //<Accordion >\n                                 \n                            //<Card.Header>\n                               //<ContextAwareToggle as={Button} variant=\"link\" eventKey={\"utterance-\"+key}  >\n                                //</ContextAwareToggle>&nbsp;&nbsp;\n                                    \n                              //<b>{utterance}</b> with {importData.utterances[utterance].length} examples\n                              //<Button \n                                //style={{marginLeft:'2em'}} \n                                //onClick={function(e) {\n                                    //mergeIntents([importData.utterances[utterance]], skillTitle)\n                                    //.then(function(counts) {\n                                        //props.setPageMessage('Updated '+(counts.updated ? counts.updated : 0) +' and created '+(counts.created ? counts.created : 0),4000)\n                                    //})\n                                //}}>Import {utterance}</Button>\n                            //</Card.Header>\n                            //{<Accordion.Collapse eventKey={\"utterance-\"+key}>\n                                //<Card.Body>\n                                        //<ul>{Object.keys(importData.utterances[utterance]).map(function(example) {\n                                            //return <li>{example.example}</li> \n                                        //})}</ul>\n                                //</Card.Body>\n                            //</Accordion.Collapse>}\n                        //</Accordion >\n                    //</Card>\n                          \n                    \n                //})}\n                //</Card.Body></Accordion.Collapse>}\n                \n              //</Card>              \n        //</Accordion>\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n //<Card>\n                //<Card.Header>\n                  //<Accordion.Toggle as={Button} variant=\"link\" eventKey=\"1\">\n                      //<Button>+</Button>\n                  //</Accordion.Toggle>\n                  //{importData.entities && <span style={{marginLeft:'2em'}} id='entities' >{importData.entities ? Object.keys(importData.entities).length : 0} entities<Button \n                        //style={{marginLeft:'2em'}} \n                        //onClick={function(e) {\n                            //mergeEntities(importData.entities, skillTitle)\n                            //.then(function(counts) {\n                                //props.setPageMessage('Updated '+(counts.updated ? counts.updated : 0) +' and created '+(counts.created ? counts.created : 0),4000)\n                            //})\n                        //}}>Import</Button></span>}\n                //</Card.Header>\n                //<Accordion.Collapse eventKey=\"1\">\n                  //<Card.Body></Card.Body>\n                //</Accordion.Collapse>\n              //</Card>\n              \n              //<Card>\n                //<Card.Header>\n                  //<Accordion.Toggle as={Button} variant=\"link\" eventKey=\"1\">\n                      //<Button>+</Button>\n                  //</Accordion.Toggle>\n                  //{importData.utterances && <div style={blockStyle} id='utterances' >{importData.utterances ? importData.utterances.length : 0} utterances<Button \n                    //style={{marginLeft:'2em'}} \n                    //onClick={function(e) {\n                        //mergeUtterances(importData.utterances, skillTitle)\n                        //.then(function(counts) {\n                            //props.setPageMessage('Updated '+(counts.updated ? counts.updated : 0) +' and created '+(counts.created ? counts.created : 0),4000)\n                        //})\n                    //}}>Import</Button></div>}\n                //</Card.Header>\n                //<Accordion.Collapse eventKey=\"1\">\n                  //<Card.Body>Hello! I'm another body</Card.Body>\n                //</Accordion.Collapse>\n              //</Card>\n              \n\n\n    //var intentAccordionPanels = []\n            \n    //if (importData.intents) {\n        //Object.keys(importData.intents).map(function(intent, key) {\n            ////importData.intents[intent].map(function(example) {\n                 //intentAccordionPanels.push({\n                     //title:intent, \n                     //content:<div>{importData.intents[intent] && importData.intents[intent].map(function(example,ikey) {\n                            //return <div key={ikey}>{example.example}</div> \n                        //})}</div>,\n                      //key:\"intent-\"+key\n                 //}) \n                 //return null\n            ////})\n            //return null\n        //})\n    //}\n    \n    \n    //const AccordionPanels = [\n      //{ \n            //title: (importData.intents ? Object.keys(importData.intents).length : 0)+' intents ', \n            //content:  { content:<div>\n                    //{<>\n                        //<Button \n                            //style={{marginLeft:'2em'}} \n                            //onClick={function(e) {\n                                //mergeIntents(importData.intents, skillTitle)\n                                //.then(function(counts) {\n                                    //props.setPageMessage('Updated '+(counts.updated ? counts.updated : 0) +' and created '+(counts.created ? counts.created : 0),4000)\n                                //})\n                            //}}>Import All Intents\n                        //</Button>\n                        //<Accordion.Accordion\n                          //className=\"padding\"\n                          //panels={intentAccordionPanels}\n                        ///>\n                    //</>}\n                    //</div>}, \n            //key: 'sub-accordions'\n      //},\n                    \n      //{ title: (importData.entities ? Object.keys(importData.entities).length : 0)+' entities ', content: { content: <b>ddd<Button \n                        //style={{marginLeft:'2em'}} \n                        //onClick={function(e) {\n                            //mergeEntities(importData.entities, skillTitle)\n                            //.then(function(counts) {\n                                //props.setPageMessage('Updated '+(counts.updated ? counts.updated : 0) +' and created '+(counts.created ? counts.created : 0),4000)\n                            //})\n                        //}}>Import</Button></b>, key: 'sub-accordions' } },\n      //{ title: (importData.utterances ? Object.keys(importData.utterances).length : 0)+' utterances ', content: { content: <b>ddd<Button \n                    //style={{marginLeft:'2em'}} \n                    //onClick={function(e) {\n                        //mergeUtterances(importData.utterances, skillTitle)\n                        //.then(function(counts) {\n                            //props.setPageMessage('Updated '+(counts.updated ? counts.updated : 0) +' and created '+(counts.created ? counts.created : 0),4000)\n                        //})\n                    //}}>Import</Button></b>, key: 'sub-accordions' } },\n    //]\n\n//<Accordion\n         //className=\"padding\"\n            //defaultActiveIndex={null}\n            //panels={AccordionPanels}\n          ///>\n        \n\n\n//import { Accordion } from 'semantic-ui-react';\n//import 'semantic-ui-css/semantic.min.css\n\n//const AccordionContent = (content) => (\n  //<div className=\"indent\">\n    //{content}\n  //</div>\n//)\n\n//const SubAccordion1Panels = [\n  //{\n    //title: 'Sub Accordion 11',\n    //content: { content: AccordionContent('11 Content'), key: '11-content'} ,\n    //key: 'sub-accordion-11'\n  //}, {\n    //title: 'Sub Accordion 12',\n    //content: { content: AccordionContent('12 Contents'), key: '12-content' },\n    //key: 'sub-accordion-12'\n  //}, {\n    //title: 'Sub Accordion 13',\n    //content: { content: AccordionContent('13 Contents'), key: '13-content' },\n    //key: 'sub-accordion-13'\n  //},\n//]\n\n//const SubAccordion1Content = (\n  //<div className=\"indent\">\n    //<Accordion.Accordion\n      //style={{marginLeft: \"20px\"}}\n      //className=\"no-padding\"\n      //panels={SubAccordion1Panels}\n    ///>\n  //</div>\n//)\n\n//const SubAccordionPanels = [\n  //{\n    //title: 'Sub Accordion 1',\n    //content: { content: SubAccordion1Content, key: 'sa1-content' },\n    //key: 'sub-accordion-1'\n  //}, {\n    //title: 'Sub Accordion 2',\n    //content: { content: AccordionContent('SA2 Content'), key: 'sa2-content' },\n    //key: 'sub-accordion-2'\n  //}, {\n    //title: 'Sub Accordion 3',\n    //content: { content: AccordionContent('SA3 Content'), key: 'sa3-content' },\n    //key: 'sub-accordion-3'\n  //}\n//]\n\n//const SubAccordions = (\n  //<div className=\"indent\">\n    //<Accordion.Accordion\n      //className=\"no-padding\"\n      //panels={SubAccordionPanels}\n    ///>\n  //</div>\n//)\n\n//const AccordionPanels = [\n  //{ title: 'Accordion', content: { content: SubAccordions, key: 'sub-accordions' } },\n//]\n\n    \n","import React, {useState, useEffect} from 'react';\nimport {Button, ListGroup, Form, Row, Col, Container} from 'react-bootstrap'\nimport { Link , useHistory } from 'react-router-dom'\nimport useRestEndpoint from './useRestEndpoint'\nimport Autosuggest from 'react-autosuggest'\nimport useImportFunctions from './useImportFunctions'\nimport useDB from './useDB'\n    \nexport default function SkillSearchPage(props) {\n    const [searchFilter, setSearchFilter] = useState('')\n    const [suggestions, setSuggestions] = useState([])\n    const [searchResults, setSearchResults] = useState([])\n    const token = props.user && props.user.token && props.user.token.access_token ? props.user.token.access_token : ''\n    const axiosClient = props.getAxiosClient(token)\n    const {saveItem, deleteItem, getItem, searchItems} = useRestEndpoint(axiosClient,process.env.REACT_APP_restPublicBaseUrl)\n    var importFunctions = useImportFunctions()\n    var history = useHistory() \n    var [skills, setSkills] = useState({})\n    var [tags, setTags] = useState({})\n    const sourcesDB = useDB('nlutool','sources');\n\n    //useEffect((props) => {\n        //loadSkills()\n        ////doSearch()\n    //},[])\n    \n    useEffect((props) => {\n        doSearch()\n    },[props.lookups.skills])\n    \n    function loadSkill(skill) {\n        //console.log(['LOaD SKIL',skill])  \n        return new Promise(function(resolve,reject) {\n            if (skill && skill.file) {\n                //console.log(['LOaD SKIL have file',(process.env.REACT_APP_githubSkillsUrl ? process.env.REACT_APP_githubSkillsUrl : '/static/media/skills/')+skill.file])  \n                const axiosClient = props.getAxiosClient()\n                axiosClient.get((process.env.REACT_APP_githubSkillsUrl ? process.env.REACT_APP_githubSkillsUrl : '/static/media/skills/')+skill.file).then(function(res) {\n                  //console.log(['LOaDed SKIL',res.data])  \n                  if (res.data) {\n                      ////console.log(res.data)\n                      //try {\n                          //var data = JSON.parse(res.data)\n                          resolve({fileType:'opennlu.skill', created_date: new Date().getTime(), title: res.data.title, data: JSON.stringify(res.data)})\n                      //} catch (e) {\n                        ////console.log(e)      \n                    //}\n                  } else {\n                      reject('Failed to load skill')  \n                  }\n                }).catch(function(e) {\n                   reject('Failed to load skill')  \n                })\n            } else {\n                reject('Incomplete skill data')\n            }\n        })\n    }\n    \n    //function loadSkills() {\n        //const axiosClient = props.getAxiosClient()\n        //axiosClient.get((process.env.REACT_APP_githubSkillsUrl ? process.env.REACT_APP_githubSkillsUrl : '/static/media/skills/')+'index.js').then(function(res) {\n          ////console.log(['LOaD SKILSS',res.data])  \n          //var tags={}\n          //if (res.data) {\n              //Object.values(res.data).map(function(skill) {\n                  //if (skill.tags) skill.tags.map(function(tag) {\n                      //tags[tag] = true\n                     //return null  \n                  //})\n                  //return null\n              //})\n              //setTags(Object.keys(tags).sort())\n              //setSkills(res.data)\n          //}\n        //}).catch(function(err) {\n            ////console.log(err)  \n        //})\n    //}\n    \n    function importItem(skill) {\n        //console.log(['import item',skill])  \n        loadSkill(skill).then(function(item) {\n            //console.log(['imported item',item])  \n            //var item = {id:null, data:JSON.stringify(item), title:item.title+'.skill.json', fileType :\"opennlu.skill    \"}\n            sourcesDB.saveItem(item,0)\n            history.push(\"/sources\")\n        }).catch(function(e) {\n           //console.log(e)   \n        })\n    }\n\n    function doSearch(queryIn='') {\n        const text = queryIn && queryIn.trim && queryIn.trim() ? queryIn : (searchFilter && searchFilter.trim() ? searchFilter : '')\n        if (props.lookups.skills) {\n            if (text) {\n                var filtered = []\n                Object.values(props.lookups.skills).map(function(skill) {\n                    if (skill.userAvatar && skill.userAvatar.indexOf(text) !== -1) {\n                        filtered.push(skill)\n                    } else if (skill.title && skill.title.indexOf(text) !== -1) {\n                        filtered.push(skill)\n                    } else if (skill.tags && skill.tags.indexOf(text) !== -1) {\n                        filtered.push(skill)\n                    }\n                    return null\n                })\n                setSearchResults(filtered)\n            } else {\n                setSearchResults(Object.values(props.lookups.skills))\n            }\n        }\n        //var query = {}\n        //var sort = {title: 1}\n        //if (text && text.trim()) {\n            ////query.title=searchFilter\n            //query[\"$text\"]={\"$search\":text.trim()}\n        //} else {\n            //sort = {updated_date : -1}\n        //}\n        //searchItems('Skill',query, 40, 0, sort).then(function(res) {\n              ////console.log('doSerach')\n              ////console.log(res.data)\n              //setSearchResults(res.data)\n        //})\n    }\n      \n\n    // Use your imagination to render suggestions.\n    const renderSuggestion = suggestion => (\n        <div>\n        {suggestion.tag}\n        </div>\n    );\n    // Autosuggest will call this function every time you need to update suggestions.\n    // You already implemented this logic above, so just use it.\n    function onSuggestionsFetchRequested ({ value }) {\n         if (props.lookups.tags) setSuggestions(props.lookups.tags.sort().map(function(tag) {\n             return {tag: tag} \n          }))\n        \n        //searchItems('SkillTags',{tag:{\"$regex\":value}},20,0,'',{tag:1}).then(function(res) {\n            //setSuggestions(res.data && res.data.length > 0 ? res.data : [])\n        //})\n    };\n\n    // Autosuggest will call this function every time you need to clear suggestions.\n    function  onSuggestionsClearRequested()  {\n       setSuggestions([]);\n    };\n\n    function setSearchFilterWrap(text) {\n        setSearchFilter(text)\n        //loadSuggestions(text)\n    } \n    \n   \n    return <div style={{marginLeft:'1em'}}>\n         <Form onSubmit={function(e) {e.preventDefault(); doSearch()}} >\n            <Row><Col>\n                <Autosuggest\n                    suggestions={suggestions}\n                    onSuggestionsFetchRequested={onSuggestionsFetchRequested}\n                    onSuggestionsClearRequested={onSuggestionsClearRequested}\n                    getSuggestionValue={function (suggestion)  { return suggestion.tag}}\n                    renderSuggestion={renderSuggestion}\n                    onSuggestionSelected={function(event, { suggestion, suggestionValue, suggestionIndex, sectionIndex, method }) {\n                        setSearchFilter(suggestionValue)\n                        doSearch(suggestionValue)\n                    }}\n                    inputProps={{\n                        style:{width:'100%'},\n                      value: searchFilter,\n                      onChange: function(e) {setSearchFilter(e.target.value)}\n                    }}\n                />\n                </Col><Col>\n                <Button variant=\"success\" onClick={doSearch}>Search</Button>\n                <Button variant=\"danger\" onClick={function() {setSearchFilter(''); doSearch('')}}>Reset</Button>\n            </Col></Row>\n        </Form> \n        \n        {!searchFilter.trim() && <h3>Recent Skills</h3>}\n        {searchFilter.trim() && <h3>Search Results</h3>}\n        <Container fluid ><Row>\n        {searchResults.map(function(result, key) {\n            const bStyle = {marginLeft:'0.5em', marginBottom:'0.2em'}\n             return <Col sm={12} md={6} lg={4} xl={4} key={key} style={{border: '2px solid black', padding: '0.5em', margin: '0.5em'}}>\n                <Button variant=\"success\" style={{float:'right'}} onClick={function(e) {importItem(result)}}>Grab</Button>\n                <h4 style={{marginBottom:'0.3em'}} >{result.title} {result.userAvatar && <span>by {result.userAvatar}</span>} </h4>\n                \n                {result.tags && result.tags.length > 0 && <Button style={bStyle} variant=\"outline-warning\" >{result.tags.join(\", \")}</Button>}\n                <div>\n                    {(result.intents > 0) && <Button variant=\"outline-primary\"style={bStyle}>{result.intents} intents </Button>}\n                    {(result.entities > 0) && <Button variant=\"outline-primary\"style={bStyle}>{result.entities} entities</Button>}\n                    {(result.regexps > 0) && <Button variant=\"outline-primary\"style={bStyle}>{result.regexps} regular expressions</Button>}\n                    {(result.utterances > 0 )&& <Button variant=\"outline-primary\"style={bStyle}>{result.utterances} utterances</Button>}\n                    {<Button style={{marginLeft:'0.5em', marginTop:'1em'}} variant=\"outline-secondary\" >Updated: {new Date(result.updated_date).toUTCString()}</Button>}\n                </div>\n             </Col>\n        })}\n        </Row></Container>       \n    </div>\n    \n    \n}\n\n","import _objectSpread from \"/projectshome/opennludata/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _assertThisInitialized from \"/projectshome/opennludata/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _classCallCheck from \"/projectshome/opennludata/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/projectshome/opennludata/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/projectshome/opennludata/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/projectshome/opennludata/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nimport React__default, { Component, createElement } from 'react';\nimport { Redirect, Link, BrowserRouter, Route } from 'react-router-dom';\nimport 'bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport 'whatwg-fetch';\nimport { FaSignOutAlt, FaSave } from 'react-icons/fa';\nimport axios from 'axios';\nimport md5 from 'md5';\nimport https from 'https';\n\nvar Logout = /*#__PURE__*/function (_Component) {\n  _inherits(Logout, _Component);\n\n  var _super = _createSuper(Logout);\n\n  function Logout() {\n    _classCallCheck(this, Logout);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(Logout, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var that = this;\n      setTimeout(function () {\n        console.log(['LOGOUT']);\n\n        if (that.props.user && that.props.user.token && that.props.user.token.access_token) {\n          console.log(['LOGOUT USER']);\n          that.props.logout(that.props.user.token.access_token).then(function () {\n            console.log(['DONE LOGOUT']);\n            var standalone = that.props.allowedOrigins && that.props.allowedOrigins.length > 0 ? true : false;\n            console.log(['LOGOUT SA ', standalone]);\n            setTimeout(function () {\n              if (standalone) window.close();\n            }, 1000);\n          });\n        }\n      }, 1500);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React__default.createElement(\"div\", {\n        style: {\n          width: '100%',\n          textAlign: 'center',\n          paddingTop: '1em'\n        }\n      }, /*#__PURE__*/React__default.createElement(\"b\", null, \"Logging Out ....\"), /*#__PURE__*/React__default.createElement(\"br\", null));\n    }\n  }]);\n\n  return Logout;\n}(Component);\n\nfunction getCookie(name) {\n  var nameEQ = name + \"=\";\n  var ca = document.cookie.split(';');\n\n  for (var i = 0; i < ca.length; i++) {\n    var c = ca[i];\n\n    while (c.charAt(0) == ' ') {\n      c = c.substring(1, c.length);\n    }\n\n    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);\n  }\n\n  return null;\n}\n\nfunction getMediaQueryString(refreshToken) {\n  var csrfToken = getCookie('csrf-token');\n  var mediaToken = refreshToken ? md5(refreshToken) : '';\n  return '_csrf=' + csrfToken + '&_media=' + mediaToken;\n}\n\nfunction getCsrfQueryString() {\n  var csrfToken = getCookie('csrf-token');\n  return '_csrf=' + csrfToken;\n}\n\nfunction scrollToTop() {\n  document.body.scrollTop = 0;\n  document.documentElement.scrollTop = 0;\n}\n\nfunction getParentPath(history) {\n  var pathParts = history.location.pathname.split(\"/\");\n  var parentPath = '';\n\n  if (pathParts[0] && pathParts[0].trim()) {\n    parentPath = \"/\" + pathParts.slice(0, pathParts.length - 1).join(\"/\");\n  } else {\n    parentPath = \"/\" + pathParts.slice(1, pathParts.length - 1).join(\"/\");\n  }\n\n  console.log(['PP', parentPath]);\n  return parentPath;\n}\n\nfunction getAxiosClient(accessToken) {\n  var axiosOptions = {\n    httpsAgent: new https.Agent({\n      rejectUnauthorized: false\n    })\n  };\n  axiosOptions.headers = {};\n  var cookie = getCookie('csrf-token');\n\n  if (cookie && cookie.trim().length > 0) {\n    axiosOptions.headers['x-csrf-token'] = cookie;\n  }\n\n  if (accessToken && accessToken.length > 0) axiosOptions.headers['Authorization'] = 'Bearer ' + accessToken;\n  return axios.create(axiosOptions);\n}\n\nvar Profile = /*#__PURE__*/function (_Component2) {\n  _inherits(Profile, _Component2);\n\n  var _super2 = _createSuper(Profile);\n\n  function Profile(props) {\n    var _this;\n\n    _classCallCheck(this, Profile);\n\n    _this = _super2.call(this, props);\n    _this.change = _this.change.bind(_assertThisInitialized(_this));\n    _this.saveUser = _this.saveUser.bind(_assertThisInitialized(_this));\n    _this.saveUserReal = _this.saveUserReal.bind(_assertThisInitialized(_this));\n    _this.state = {\n      warning_message: '',\n      redirect: ''\n    };\n    _this.redirTimeout = null;\n    return _this;\n  }\n\n  _createClass(Profile, [{\n    key: \"change\",\n    value: function change(e) {\n      var state = _objectSpread({}, this.props.user);\n\n      var key = e.target.name;\n\n      if (e.target.name.startsWith('fake_')) {\n        key = e.target.name.slice(5);\n      }\n\n      state[key] = e.target.value;\n      this.props.setUser(state);\n      return true;\n    }\n  }, {\n    key: \"saveUser\",\n    value: function saveUser(e) {\n      e.preventDefault();\n      this.saveUserReal(this.props.user);\n      return false;\n    }\n  }, {\n    key: \"saveUserReal\",\n    value: function saveUserReal(user) {\n      var that = this;\n      return new Promise(function (resolve, reject) {\n        if (that.props.startWaiting) that.props.startWaiting();\n\n        if (user && user.token && user.token.access_token) {\n          var axiosClient = getAxiosClient(user.token.access_token);\n          axiosClient({\n            url: that.props.authServerHostname + that.props.authServer + '/saveuser',\n            method: 'post',\n            data: user\n          }).then(function (res) {\n            if (that.props.stopWaiting) that.props.stopWaiting();\n            return res.data;\n          }).then(function (data) {\n            if (data.error) {\n              that.props.submitWarning(data.error);\n            } else {\n              if (data.message) {\n                that.props.submitWarning(data.message);\n              }\n            }\n          }).catch(function (err) {\n            console.log(err);\n          });\n        }\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      scrollToTop();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.redirect) {\n        return /*#__PURE__*/React__default.createElement(Redirect, {\n          to: this.state.redirect\n        });\n      }\n\n      var that = this;\n\n      if (this.props.user) {\n        var pathParts = that.props.history.location.pathname.split(\"/\");\n        var parentPath = '';\n\n        if (pathParts[0] && pathParts[0].trim()) {\n          parentPath = \"/\" + pathParts.slice(0, pathParts.length - 1).join(\"/\");\n        } else {\n          parentPath = \"/\" + pathParts.slice(1, pathParts.length - 1).join(\"/\");\n        }\n\n        if (parentPath === \"/\") parentPath = \"\";\n        var standalone = this.props.allowedOrigins && this.props.allowedOrigins.length > 0 ? true : false;\n        return /*#__PURE__*/React__default.createElement(\"div\", null, standalone && /*#__PURE__*/React__default.createElement(\"button\", {\n          className: \"btn btn-danger\",\n          style: {\n            float: 'right',\n            marginLeft: '3em'\n          },\n          onClick: function onClick() {\n            window.close();\n          }\n        }, \"Close\"), this.props.isLoggedIn() && /*#__PURE__*/React__default.createElement(Link, {\n          to: parentPath + \"/logout\"\n        }, /*#__PURE__*/React__default.createElement(\"button\", {\n          className: \"btn btn-warning\",\n          style: {\n            float: 'right'\n          }\n        }, /*#__PURE__*/React__default.createElement(FaSignOutAlt, null), \" Logout\")), !standalone && /*#__PURE__*/React__default.createElement(Link, {\n          to: parentPath + '/login',\n          style: {\n            clear: 'both',\n            display: 'inline'\n          }\n        }, /*#__PURE__*/React__default.createElement(\"button\", {\n          style: {\n            float: 'right',\n            marginRight: '0.3em',\n            marginLeft: '0.5em'\n          },\n          className: \"btn btn-primary\"\n        }, \"Login\")), /*#__PURE__*/React__default.createElement(\"form\", {\n          method: \"POST\",\n          onSubmit: this.saveUser,\n          autoComplete: \"false\"\n        }, /*#__PURE__*/React__default.createElement(\"div\", {\n          className: \"form-group\",\n          style: {\n            width: '70%',\n            marginLeft: '4em'\n          }\n        }, /*#__PURE__*/React__default.createElement(\"h3\", {\n          style: {\n            textAlign: 'left'\n          }\n        }, \"Profile\"), this.props.warning_message && /*#__PURE__*/React__default.createElement(\"div\", {\n          className: \"warning-message\"\n        }, this.props.warning_message), /*#__PURE__*/React__default.createElement(\"label\", {\n          htmlFor: \"username\",\n          className: \"row\"\n        }, \"Email \"), /*#__PURE__*/React__default.createElement(\"input\", {\n          autoComplete: \"false\",\n          id: \"username\",\n          readOnly: true,\n          type: \"text\",\n          name: \"username\",\n          onChange: this.change,\n          value: this.props.user ? this.props.user.username : '',\n          className: \"form-control\"\n        }), /*#__PURE__*/React__default.createElement(\"label\", {\n          htmlFor: \"name\",\n          className: \"row\"\n        }, \"Name \"), /*#__PURE__*/React__default.createElement(\"input\", {\n          autoComplete: \"false\",\n          id: \"name\",\n          type: \"text\",\n          name: \"name\",\n          onChange: this.change,\n          value: this.props.user ? this.props.user.name : '',\n          className: \"form-control\"\n        }), /*#__PURE__*/React__default.createElement(\"label\", {\n          htmlFor: \"avatar\",\n          className: \"row\"\n        }, \"Avatar \"), /*#__PURE__*/React__default.createElement(\"input\", {\n          autoComplete: \"false\",\n          id: \"avatar\",\n          type: \"text\",\n          name: \"avatar\",\n          onChange: this.change,\n          value: this.props.user ? this.props.user.avatar : '',\n          className: \"form-control\"\n        }), /*#__PURE__*/React__default.createElement(\"label\", {\n          htmlFor: \"password\",\n          className: \"row\"\n        }, \"Password\"), \" \", /*#__PURE__*/React__default.createElement(\"input\", {\n          autoComplete: \"false\",\n          id: \"password\",\n          type: \"password\",\n          name: \"fake_password\",\n          onChange: this.change,\n          className: \"form-control\"\n        }), /*#__PURE__*/React__default.createElement(\"label\", {\n          htmlFor: \"password2\",\n          className: \"row\"\n        }, \"Repeat Password\"), /*#__PURE__*/React__default.createElement(\"input\", {\n          autoComplete: \"false\",\n          id: \"password2\",\n          type: \"password\",\n          name: \"fake_password2\",\n          onChange: this.change,\n          className: \"form-control\"\n        }), /*#__PURE__*/React__default.createElement(\"input\", {\n          id: \"id\",\n          type: \"hidden\",\n          name: \"_id\",\n          value: this.props.user ? this.props.user._id : ''\n        }), /*#__PURE__*/React__default.createElement(\"br\", null), /*#__PURE__*/React__default.createElement(\"br\", null), /*#__PURE__*/React__default.createElement(\"button\", {\n          className: \"btn btn-lg btn-success btn-block\"\n        }, /*#__PURE__*/React__default.createElement(FaSave, null), \" Save\"))));\n      } else return '<b>no user</b>';\n    }\n  }]);\n\n  return Profile;\n}(Component);\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nvar _ref = /*#__PURE__*/createElement(\"path\", {\n  fill: \"currentColor\",\n  d: \"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z\"\n});\n\nfunction SvgGoogleBrands(props) {\n  return /*#__PURE__*/createElement(\"svg\", _extends({\n    \"aria-hidden\": \"true\",\n    \"data-prefix\": \"fab\",\n    \"data-icon\": \"google\",\n    className: \"google-brands_svg__svg-inline--fa google-brands_svg__fa-google google-brands_svg__fa-w-16\",\n    viewBox: \"0 0 488 512\"\n  }, props), _ref);\n}\n\nfunction _extends$1() {\n  _extends$1 = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends$1.apply(this, arguments);\n}\n\nvar _ref$1 = /*#__PURE__*/createElement(\"path\", {\n  fill: \"currentColor\",\n  d: \"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z\"\n});\n\nfunction SvgTwitterBrands(props) {\n  return /*#__PURE__*/createElement(\"svg\", _extends$1({\n    \"aria-hidden\": \"true\",\n    \"data-prefix\": \"fab\",\n    \"data-icon\": \"twitter\",\n    className: \"twitter-brands_svg__svg-inline--fa twitter-brands_svg__fa-twitter twitter-brands_svg__fa-w-16\",\n    viewBox: \"0 0 512 512\"\n  }, props), _ref$1);\n}\n\nfunction _extends$2() {\n  _extends$2 = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends$2.apply(this, arguments);\n}\n\nvar _ref$2 = /*#__PURE__*/createElement(\"path\", {\n  fill: \"currentColor\",\n  d: \"M448 56.7v398.5c0 13.7-11.1 24.7-24.7 24.7H309.1V306.5h58.2l8.7-67.6h-67v-43.2c0-19.6 5.4-32.9 33.5-32.9h35.8v-60.5c-6.2-.8-27.4-2.7-52.2-2.7-51.6 0-87 31.5-87 89.4v49.9h-58.4v67.6h58.4V480H24.7C11.1 480 0 468.9 0 455.3V56.7C0 43.1 11.1 32 24.7 32h398.5c13.7 0 24.8 11.1 24.8 24.7z\"\n});\n\nfunction SvgFacebookBrands(props) {\n  return /*#__PURE__*/createElement(\"svg\", _extends$2({\n    \"aria-hidden\": \"true\",\n    \"data-prefix\": \"fab\",\n    \"data-icon\": \"facebook\",\n    className: \"facebook-brands_svg__svg-inline--fa facebook-brands_svg__fa-facebook facebook-brands_svg__fa-w-14\",\n    viewBox: \"0 0 448 512\"\n  }, props), _ref$2);\n}\n\nfunction _extends$3() {\n  _extends$3 = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends$3.apply(this, arguments);\n}\n\nvar _ref$3 = /*#__PURE__*/createElement(\"path\", {\n  fill: \"currentColor\",\n  d: \"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z\"\n});\n\nfunction SvgGithubBrands(props) {\n  return /*#__PURE__*/createElement(\"svg\", _extends$3({\n    \"aria-hidden\": \"true\",\n    \"data-prefix\": \"fab\",\n    \"data-icon\": \"github\",\n    className: \"github-brands_svg__svg-inline--fa github-brands_svg__fa-github github-brands_svg__fa-w-16\",\n    viewBox: \"0 0 496 512\"\n  }, props), _ref$3);\n}\n\nfunction _extends$4() {\n  _extends$4 = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends$4.apply(this, arguments);\n}\n\nvar _ref$4 = /*#__PURE__*/createElement(\"path\", {\n  fill: \"currentColor\",\n  d: \"M257.2 162.7c-48.7 1.8-169.5 15.5-169.5 117.5 0 109.5 138.3 114 183.5 43.2 6.5 10.2 35.4 37.5 45.3 46.8l56.8-56S341 288.9 341 261.4V114.3C341 89 316.5 32 228.7 32 140.7 32 94 87 94 136.3l73.5 6.8c16.3-49.5 54.2-49.5 54.2-49.5 40.7-.1 35.5 29.8 35.5 69.1zm0 86.8c0 80-84.2 68-84.2 17.2 0-47.2 50.5-56.7 84.2-57.8v40.6zm136 163.5c-7.7 10-70 67-174.5 67S34.2 408.5 9.7 379c-6.8-7.7 1-11.3 5.5-8.3C88.5 415.2 203 488.5 387.7 401c7.5-3.7 13.3 2 5.5 12zm39.8 2.2c-6.5 15.8-16 26.8-21.2 31-5.5 4.5-9.5 2.7-6.5-3.8s19.3-46.5 12.7-55c-6.5-8.3-37-4.3-48-3.2-10.8 1-13 2-14-.3-2.3-5.7 21.7-15.5 37.5-17.5 15.7-1.8 41-.8 46 5.7 3.7 5.1 0 27.1-6.5 43.1z\"\n});\n\nfunction SvgAmazonBrands(props) {\n  return /*#__PURE__*/createElement(\"svg\", _extends$4({\n    \"aria-hidden\": \"true\",\n    \"data-prefix\": \"fab\",\n    \"data-icon\": \"amazon\",\n    className: \"amazon-brands_svg__svg-inline--fa amazon-brands_svg__fa-amazon amazon-brands_svg__fa-w-14\",\n    viewBox: \"0 0 448 512\"\n  }, props), _ref$4);\n}\n\nvar Login = /*#__PURE__*/function (_Component3) {\n  _inherits(Login, _Component3);\n\n  var _super3 = _createSuper(Login);\n\n  function Login(props) {\n    var _this2;\n\n    _classCallCheck(this, Login);\n\n    _this2 = _super3.call(this, props);\n    _this2.state = {\n      signin_username: '',\n      signin_password: '',\n      rememberme: false,\n      buttons: []\n    };\n    _this2.change = _this2.change.bind(_assertThisInitialized(_this2));\n    return _this2;\n  }\n\n  _createClass(Login, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var that = this;\n\n      if (window.location.search.indexOf('fail=true') !== -1) {\n        this.props.submitWarning('Login Failed');\n      }\n\n      var client = getAxiosClient();\n      client.get(this.props.authServerHostname + this.props.authServer + '/buttons').then(function (res) {\n        that.setState({\n          buttons: res && res.data && res.data.buttons ? res.data.buttons.split(\",\") : []\n        });\n      });\n    }\n  }, {\n    key: \"change\",\n    value: function change(e) {\n      var state = {};\n      state[e.target.name] = e.target.value;\n      this.setState(state);\n      return true;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var that = this;\n      var standalone = this.props.allowedOrigins && this.props.allowedOrigins.length > 0 ? true : false;\n      var loginButtons = that.state.buttons.map(function (key) {\n        var link = that.props.authServer + '/' + key;\n        var title = key.slice(0, 1).toUpperCase() + key.slice(1);\n        return /*#__PURE__*/React__default.createElement(\"span\", {\n          key: key\n        }, \"\\xA0\", /*#__PURE__*/React__default.createElement(\"a\", {\n          className: \"btn btn-primary\",\n          href: link\n        }, key === \"amazon\" && /*#__PURE__*/React__default.createElement(SvgAmazonBrands, {\n          style: {\n            marginRight: '0.6em',\n            height: '2em',\n            color: 'black'\n          }\n        }), key === \"google\" && /*#__PURE__*/React__default.createElement(SvgGoogleBrands, {\n          style: {\n            marginRight: '0.6em',\n            height: '2em',\n            color: 'black'\n          }\n        }), key === \"github\" && /*#__PURE__*/React__default.createElement(SvgGithubBrands, {\n          style: {\n            marginRight: '0.6em',\n            height: '2em',\n            color: 'black'\n          }\n        }), key === \"twitter\" && /*#__PURE__*/React__default.createElement(SvgTwitterBrands, {\n          style: {\n            marginRight: '0.6em',\n            height: '2em',\n            color: 'black'\n          }\n        }), key === \"facebook\" && /*#__PURE__*/React__default.createElement(SvgFacebookBrands, {\n          style: {\n            marginRight: '0.6em',\n            height: '2em',\n            color: 'black'\n          }\n        }), title));\n      });\n\n      if (that.props.isRoot) {\n        parentPath = that.props.history.location.pathname && that.props.history.location.pathname !== \"/\" ? that.props.history.location.pathname : '';\n      } else {\n        var pathParts = that.props.history.location.pathname.split(\"/\");\n        var parentPath = pathParts.slice(0, pathParts.length - 1).join(\"/\");\n      }\n\n      return /*#__PURE__*/React__default.createElement(\"div\", null, standalone && /*#__PURE__*/React__default.createElement(\"button\", {\n        className: \"btn btn-danger\",\n        style: {\n          float: 'right',\n          marginLeft: '3em'\n        },\n        onClick: function onClick() {\n          window.close();\n        }\n      }, \"Close\"), !standalone && this.props.isLoggedIn() && /*#__PURE__*/React__default.createElement(Link, {\n        to: parentPath + '/profile',\n        style: {\n          clear: 'both',\n          display: 'inline'\n        }\n      }, /*#__PURE__*/React__default.createElement(\"div\", {\n        style: {\n          float: 'right',\n          marginRight: '0.3em',\n          marginLeft: '0.5em'\n        },\n        className: \"btn btn-primary\"\n      }, \"Profile\")), /*#__PURE__*/React__default.createElement(Link, {\n        to: parentPath + '/forgot',\n        style: {\n          clear: 'both',\n          display: 'inline'\n        }\n      }, /*#__PURE__*/React__default.createElement(\"div\", {\n        style: {\n          float: 'right',\n          marginRight: '0.3em',\n          marginLeft: '0.5em'\n        },\n        className: \"btn btn-primary\"\n      }, \"Forgot Password\")), /*#__PURE__*/React__default.createElement(Link, {\n        to: parentPath + '/register',\n        style: {\n          clear: 'both',\n          display: 'inline'\n        }\n      }, /*#__PURE__*/React__default.createElement(\"div\", {\n        style: {\n          float: 'right',\n          marginRight: '0.3em',\n          marginLeft: '0.5em'\n        },\n        className: \"btn btn-primary\"\n      }, \"Register\")), /*#__PURE__*/React__default.createElement(\"h1\", {\n        className: \"h3 mb-3 font-weight-normal\",\n        style: {\n          textAlign: 'left'\n        }\n      }, \"Sign in\"), loginButtons && loginButtons.length > 0 && /*#__PURE__*/React__default.createElement(\"div\", {\n        style: {\n          float: 'right'\n        }\n      }, \" using \", loginButtons, \"  \", /*#__PURE__*/React__default.createElement(\"br\", null), \" \"), /*#__PURE__*/React__default.createElement(\"form\", {\n        className: \"form-signin\",\n        method: \"POST\",\n        action: that.props.authServerHostname + that.props.authServer + '/signin'\n      }, /*#__PURE__*/React__default.createElement(\"label\", {\n        htmlFor: \"inputEmail\",\n        className: \"sr-only\"\n      }, \"Email address\"), /*#__PURE__*/React__default.createElement(\"input\", {\n        type: \"text\",\n        name: \"username\",\n        id: \"inputEmail\",\n        className: \"form-control\",\n        placeholder: \"Email address\",\n        required: true,\n        autoComplete: \"signin_username\"\n      }), /*#__PURE__*/React__default.createElement(\"label\", {\n        htmlFor: \"inputPassword\",\n        className: \"sr-only\"\n      }, \"Password\"), /*#__PURE__*/React__default.createElement(\"input\", {\n        type: \"password\",\n        name: \"password\",\n        id: \"inputPassword\",\n        className: \"form-control\",\n        placeholder: \"Password\",\n        required: true,\n        autoComplete: \"signin_password\"\n      }), /*#__PURE__*/React__default.createElement(\"button\", {\n        className: \"btn btn-lg btn-success btn-block\",\n        type: \"submit\"\n      }, \"Sign in\")));\n    }\n  }]);\n\n  return Login;\n}(Component);\n\nvar faker = require('faker');\n\nvar Register = /*#__PURE__*/function (_Component4) {\n  _inherits(Register, _Component4);\n\n  var _super4 = _createSuper(Register);\n\n  function Register(props) {\n    var _this3;\n\n    _classCallCheck(this, Register);\n\n    _this3 = _super4.call(this, props);\n    _this3.state = {\n      warning_message: '',\n      signin_warning_message: '',\n      signup_warning_message: '',\n      email_login: '',\n      password_login: '',\n      name: '',\n      email: '',\n      password: '',\n      password2: '',\n      justSignedUp: false,\n      forgotPassword: false,\n      avatar: faker.commerce.productAdjective() + faker.name.firstName() + faker.name.lastName()\n    };\n    _this3.change = _this3.change.bind(_assertThisInitialized(_this3));\n    _this3.submitSignUp = _this3.submitSignUp.bind(_assertThisInitialized(_this3));\n    _this3.submitSignUpReal = _this3.submitSignUpReal.bind(_assertThisInitialized(_this3));\n    return _this3;\n  }\n\n  _createClass(Register, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      scrollToTop();\n    }\n  }, {\n    key: \"submitSignUp\",\n    value: function submitSignUp(e) {\n      e.preventDefault();\n      this.submitSignUpReal(this.state.name, this.state.avatar, this.state.email, this.state.password, this.state.password2);\n      return false;\n    }\n  }, {\n    key: \"change\",\n    value: function change(e) {\n      var state = {};\n      state[e.target.name] = e.target.value;\n      this.setState(state);\n      return true;\n    }\n  }, {\n    key: \"submitSignUpReal\",\n    value: function submitSignUpReal(name, avatar, email, password, password2) {\n      var that = this;\n      this.props.submitWarning('');\n      if (this.props.startWaiting) this.props.startWaiting();\n      var axiosClient = getAxiosClient();\n      axiosClient({\n        url: that.props.authServerHostname + that.props.authServer + '/signup',\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        data: {\n          name: name,\n          avatar: avatar,\n          username: email,\n          password: password,\n          password2: password2\n        }\n      }).then(function (res) {\n        return res.data;\n      }).then(function (data) {\n        if (that.props.stopWaiting) that.props.stopWaiting();\n\n        if (data.error) {\n          that.props.submitWarning(data.error);\n        } else {\n          if (data.message) {\n            that.props.submitWarning(data.message);\n          }\n\n          var parentPath = getParentPath(that.props.history);\n          if (parentPath === \"/\") parentPath = \"\";\n          that.props.history.push(parentPath + '/registerconfirm');\n        }\n      }).catch(function (error) {\n        console.log(['request failed', error]);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var that = this;\n      var pathParts = that.props.history.location.pathname.split(\"/\");\n      var parentPath = pathParts.slice(0, pathParts.length - 1).join(\"/\");\n      var standalone = this.props.allowedOrigins && this.props.allowedOrigins.length > 0 ? true : false;\n      return /*#__PURE__*/React__default.createElement(\"div\", {\n        id: \"registrationform\"\n      }, /*#__PURE__*/React__default.createElement(\"div\", {\n        style: {\n          paddingLeft: '1em',\n          clear: 'both'\n        }\n      }, /*#__PURE__*/React__default.createElement(\"form\", {\n        className: \"col-lg-12\",\n        style: {\n          minWidth: '400px'\n        },\n        method: \"POST\",\n        onSubmit: function onSubmit(e) {\n          return _this4.submitSignUp(e);\n        }\n      }, /*#__PURE__*/React__default.createElement(\"div\", {\n        className: \"form-group\"\n      }, standalone && /*#__PURE__*/React__default.createElement(\"button\", {\n        className: \"btn btn-danger\",\n        style: {\n          float: 'right',\n          marginLeft: '3em'\n        },\n        onClick: function onClick() {\n          window.close();\n        }\n      }, \"Close\"), /*#__PURE__*/React__default.createElement(Link, {\n        to: parentPath + \"/forgot\"\n      }, /*#__PURE__*/React__default.createElement(\"div\", {\n        style: {\n          float: 'right',\n          marginRight: '0.3em',\n          marginLeft: '0.5em'\n        },\n        className: \"btn btn-primary\"\n      }, \"Forgot Password\")), /*#__PURE__*/React__default.createElement(Link, {\n        to: parentPath + \"/login\",\n        style: {\n          clear: 'both',\n          display: 'inline'\n        }\n      }, /*#__PURE__*/React__default.createElement(\"div\", {\n        style: {\n          float: 'right',\n          marginRight: '0.3em',\n          marginLeft: '0.5em'\n        },\n        className: \"btn btn-primary\"\n      }, \"Login\")), /*#__PURE__*/React__default.createElement(\"h3\", {\n        style: {\n          textAlign: 'left'\n        },\n        className: \"card-title\"\n      }, \"Registration\"), /*#__PURE__*/React__default.createElement(\"label\", {\n        htmlFor: \"name\",\n        style: {\n          float: 'left'\n        }\n      }, \"Name\"), /*#__PURE__*/React__default.createElement(\"input\", {\n        className: \"form-control\",\n        autoComplete: \"false\",\n        id: \"name\",\n        type: \"text\",\n        value: this.state.name,\n        name: \"name\",\n        onChange: this.change\n      }), /*#__PURE__*/React__default.createElement(\"label\", {\n        htmlFor: \"avatar\",\n        className: \"row\"\n      }, \"Avatar \"), /*#__PURE__*/React__default.createElement(\"input\", {\n        className: \"form-control\",\n        autoComplete: \"false\",\n        id: \"avatar\",\n        type: \"text\",\n        name: \"avatar\",\n        value: this.state.avatar,\n        onChange: this.change\n      }), /*#__PURE__*/React__default.createElement(\"label\", {\n        htmlFor: \"email\",\n        className: \"row\"\n      }, \"Email \"), /*#__PURE__*/React__default.createElement(\"input\", {\n        className: \"form-control\",\n        autoComplete: \"false\",\n        id: \"email\",\n        type: \"text\",\n        name: \"email\",\n        value: this.state.email,\n        onChange: this.change\n      }), /*#__PURE__*/React__default.createElement(\"label\", {\n        htmlFor: \"password\",\n        className: \"row\"\n      }, \"Password\"), \" \", /*#__PURE__*/React__default.createElement(\"input\", {\n        value: this.state.password,\n        className: \"form-control\",\n        autoComplete: \"false\",\n        id: \"password\",\n        type: \"password\",\n        name: \"password\",\n        onChange: this.change\n      }), /*#__PURE__*/React__default.createElement(\"label\", {\n        htmlFor: \"password2\",\n        className: \"row\"\n      }, \"Repeat Password\"), /*#__PURE__*/React__default.createElement(\"input\", {\n        className: \"form-control\",\n        autoComplete: \"false\",\n        id: \"password2\",\n        type: \"password\",\n        name: \"password2\",\n        value: this.state.password2,\n        onChange: this.change\n      })), /*#__PURE__*/React__default.createElement(\"div\", {\n        style: {\n          textAlign: 'left'\n        }\n      }, /*#__PURE__*/React__default.createElement(\"b\", null, \"By registering, you are agreeing to our \", /*#__PURE__*/React__default.createElement(\"a\", {\n        target: \"_new\",\n        href: \"../privacy\",\n        style: {\n          clear: 'both',\n          display: 'inline'\n        }\n      }, /*#__PURE__*/React__default.createElement(\"div\", {\n        style: {\n          marginRight: '0.3em',\n          marginLeft: '0.5em'\n        },\n        className: \"btn btn-primary\"\n      }, \"Terms and Conditions\"))), /*#__PURE__*/React__default.createElement(\"br\", null), /*#__PURE__*/React__default.createElement(\"br\", null)), /*#__PURE__*/React__default.createElement(\"button\", {\n        className: \"btn btn-lg btn-success btn-block\"\n      }, \"Register\"))));\n    }\n  }]);\n\n  return Register;\n}(Component);\n\nvar TermsOfUse = /*#__PURE__*/function (_Component5) {\n  _inherits(TermsOfUse, _Component5);\n\n  var _super5 = _createSuper(TermsOfUse);\n\n  function TermsOfUse() {\n    _classCallCheck(this, TermsOfUse);\n\n    return _super5.apply(this, arguments);\n  }\n\n  _createClass(TermsOfUse, [{\n    key: \"render\",\n    value: function render() {\n      var standalone = this.props.allowedOrigins && this.props.allowedOrigins.length > 0 ? true : false;\n      return /*#__PURE__*/React__default.createElement(\"div\", null, standalone && /*#__PURE__*/React__default.createElement(\"button\", {\n        className: \"btn btn-danger\",\n        style: {\n          float: 'right',\n          marginLeft: '3em'\n        },\n        onClick: function onClick() {\n          window.close();\n        }\n      }, \"Close\"), /*#__PURE__*/React__default.createElement(\"div\", {\n        style: {\n          textAlign: 'center'\n        }\n      }, /*#__PURE__*/React__default.createElement(\"h2\", null, \"Terms of Use/Privacy Policy\")), /*#__PURE__*/React__default.createElement(\"div\", {\n        className: \"termsofuse\",\n        style: {\n          textAlign: 'left'\n        }\n      }, /*#__PURE__*/React__default.createElement(\"br\", null), /*#__PURE__*/React__default.createElement(\"ol\", null, /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, /*#__PURE__*/React__default.createElement(\"strong\", null, \"Agreement to be bound\")), /*#__PURE__*/React__default.createElement(\"ol\", null, /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"By using our service you agree to be bound by the terms of agreement, which may change from time to time\")))), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, /*#__PURE__*/React__default.createElement(\"strong\", null, \"Privacy\")), /*#__PURE__*/React__default.createElement(\"ol\", null, /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"Your personal information such as name and email address will not be shared with anybody unless required by law. \")), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"We will use your personal information only for the purpose of providing this service, for example by recording activity and performance on this site to provide analytics to users. \")), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"We use cookies on this site, which you can reject through your browser settings.\")))), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, /*#__PURE__*/React__default.createElement(\"strong\", null, \" Age limit\")), /*#__PURE__*/React__default.createElement(\"ol\", null, /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"Children under the age of 13 may not create an account independent of their parent or guardian\"), /*#__PURE__*/React__default.createElement(\"span\", null)))), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, /*#__PURE__*/React__default.createElement(\"strong\", null, \"Intellectual property\")), /*#__PURE__*/React__default.createElement(\"ol\", null, /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"The content on this site, including that contributed by users, is subject to a Creative Commons Licence (Attribution CC BY Version 4.0 (international licence)) (\", /*#__PURE__*/React__default.createElement(\"a\", {\n        href: \"http://creativecommons.org.au/learn/licences/\"\n      }, \"see here\"), \"). This means that 'whenever a work is copied or redistributed ... the original creator (and any other nominated parties) must be credited and the source linked to.' \")), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"The software used on this site is open source and subject to GNU General Public License version 3 (\", /*#__PURE__*/React__default.createElement(\"a\", {\n        href: \"https://opensource.org\"\n      }, \"see here\"), \")\")))), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \" \", /*#__PURE__*/React__default.createElement(\"strong\", null, \"Third-party content\")), /*#__PURE__*/React__default.createElement(\"ol\", null, /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"This site imports content from third parties. This is not an endorsement of this material and we have no responsibility for any loss caused by reliance or access to third-party sites.\")))), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \" \", /*#__PURE__*/React__default.createElement(\"strong\", null, \"Third-party login\")), /*#__PURE__*/React__default.createElement(\"ol\", null, /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"This site allows users to login using their social accounts with Google, Github, Facebook, Amazon and Twitter. This site collects and stores your name and email address from your social provider to allow our website to identify and login repeat users and  to send newsletters regarding website updates. We do not share this information with anyone unless required by law.\")))), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \" \", /*#__PURE__*/React__default.createElement(\"strong\", null, \"User conduct\")), /*#__PURE__*/React__default.createElement(\"ol\", null, /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"You will not engage in conduct or contribute content that belongs to another party or is offensive, obscene, threatening, unlawful, defamatory, vilifying, inducing to violence, harassing, invasive of privacy, or discriminatory, solicitation or spam or private or confidential information or that jeopardises the operations of the site in any way or seek to gain unauthorised access to our servers or misuse the site to cause harm.\")), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"We will endeavour to and reserve the right to remove content that breaches these terms as quickly as possible but we accept no liability for any harm suffered by exposure to or reliance on such content.\")), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"We may preserve and disclose user content if required to do so by law.\")))), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \" \", /*#__PURE__*/React__default.createElement(\"strong\", null, \"Termination of Your Account\")), /*#__PURE__*/React__default.createElement(\"ol\", null, /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"We may modify, suspend or delete your account and associated user content and block your access to the site if you breach these terms. \")), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"You may request that your account be deleted at any time and we will comply in reasonable time.\")), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"Termination of your account will not necessarily remove content you have contributed according to the terms in the preceding clause. \")))), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \" \", /*#__PURE__*/React__default.createElement(\"strong\", null, \"No Representations or Warranties\")), /*#__PURE__*/React__default.createElement(\"ol\", null, /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"We do not guarantee that our services will always be available or free from bugs or viruses and the onus is on you to maintain current anti-virus software.\")), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"We will endeavor to provide quality content, but make no guarantees to the ongoing quality or quantity of content, including premium content.\")), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"We do not guarantee any warranties such as implied warranties of fitness for purpose or that this site will result in any improvement in your learning.\")), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"We do not guarantee that the information on this site is accurate or up to date.\")))), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \" \", /*#__PURE__*/React__default.createElement(\"strong\", null, \"Limitation of Liability\")), /*#__PURE__*/React__default.createElement(\"ol\", null, /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"Other than as required by law, we are not liable to you for any damages caused by use of or reliance on this site\", /*#__PURE__*/React__default.createElement(\"br\", null))))), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \" \", /*#__PURE__*/React__default.createElement(\"strong\", null, \"Indemnity\")), /*#__PURE__*/React__default.createElement(\"ol\", null, /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"You agree to indemnify us from any loss or liability due to a claim brought by any third party arising from your user content or conduct.\")))), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \" \", /*#__PURE__*/React__default.createElement(\"strong\", null, \"Dispute resolution etc\")), /*#__PURE__*/React__default.createElement(\"ol\", null, /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"These terms and the relationship between us and you are governed by the laws of Australia and subject to the exclusive jurisdiction of Australian courts, with the exception of injunctive relief in any jurisdiction in order to enforce our rights under these terms.\")), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"If we fail to exercise or enforce any rights or provision of these terms, this does not constitute a waiver of such rights or provisions.\")), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"If any provision of the terms are found by a court of competent jurisdiction to be invalid, the parties nevertheless agree that the court should endeavour to give effect to the parties' intentions as reflected in the provision, and the other provisions of the terms remain in full force and effect.\")), /*#__PURE__*/React__default.createElement(\"li\", null, /*#__PURE__*/React__default.createElement(\"span\", null, \"You agree that these terms represent the entire understanding between us and you and these terms supersede any previous agreements, promises, assurances, warranties, representations and understandings, whether written or oral, between us and you.\")))))));\n    }\n  }]);\n\n  return TermsOfUse;\n}(Component);\n\nvar ForgotPassword = /*#__PURE__*/function (_Component6) {\n  _inherits(ForgotPassword, _Component6);\n\n  var _super6 = _createSuper(ForgotPassword);\n\n  function ForgotPassword(props) {\n    var _this5;\n\n    _classCallCheck(this, ForgotPassword);\n\n    _this5 = _super6.call(this, props);\n    _this5.state = {\n      signin_username: '',\n      signin_password: '',\n      rememberme: false\n    };\n    _this5.change = _this5.change.bind(_assertThisInitialized(_this5));\n    return _this5;\n  }\n\n  _createClass(ForgotPassword, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      scrollToTop();\n    }\n  }, {\n    key: \"change\",\n    value: function change(e) {\n      var state = {};\n      state[e.target.name] = e.target.value;\n      this.setState(state);\n      return true;\n    }\n  }, {\n    key: \"recoverPassword\",\n    value: function recoverPassword(email, password, password2) {\n      var that = this;\n      that.props.submitWarning('');\n      if (this.props.startWaiting) this.props.startWaiting();\n      var axiosClient = getAxiosClient();\n      axiosClient({\n        url: that.props.authServerHostname + that.props.authServer + '/recover',\n        method: 'post',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        data: {\n          email: email,\n          password: password,\n          password2: password2,\n          code: Math.random().toString(36).replace(/[^a-z]+/g, '')\n        }\n      }).then(function (res) {\n        return res.data;\n      }).then(function (data) {\n        if (that.props.stopWaiting) that.props.stopWaiting();else if (data.message) {\n          that.props.submitWarning(data.message);\n        }\n\n        if (data.error) {\n          that.props.submitWarning(data.error);\n        }\n      }).catch(function (error) {\n        console.log(['recover request failed', error]);\n      });\n      return false;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this;\n\n      var that = this;\n      var standalone = this.props.allowedOrigins && this.props.allowedOrigins.length > 0 ? true : false;\n      var pathParts = that.props.history.location.pathname.split(\"/\");\n      var parentPath = pathParts.slice(0, pathParts.length - 1).join(\"/\");\n      return /*#__PURE__*/React__default.createElement(\"div\", null, standalone && /*#__PURE__*/React__default.createElement(\"button\", {\n        className: \"btn btn-danger\",\n        style: {\n          float: 'right',\n          marginLeft: '3em'\n        },\n        onClick: function onClick() {\n          window.close();\n        }\n      }, \"Close\"), /*#__PURE__*/React__default.createElement(Link, {\n        to: parentPath + \"/register\",\n        style: {\n          clear: 'both',\n          display: 'inline'\n        }\n      }, /*#__PURE__*/React__default.createElement(\"div\", {\n        style: {\n          float: 'right',\n          marginRight: '0.3em',\n          marginLeft: '0.5em'\n        },\n        className: \"btn btn-primary\"\n      }, \"Register\")), /*#__PURE__*/React__default.createElement(Link, {\n        to: parentPath + \"/login\",\n        style: {\n          clear: 'both',\n          display: 'inline'\n        }\n      }, /*#__PURE__*/React__default.createElement(\"div\", {\n        style: {\n          float: 'right',\n          marginRight: '0.3em',\n          marginLeft: '0.5em'\n        },\n        className: \"btn btn-primary\"\n      }, \"Login\")), /*#__PURE__*/React__default.createElement(\"form\", {\n        className: \"form-signin\",\n        onSubmit: function onSubmit(e) {\n          e.preventDefault();\n\n          _this6.recoverPassword(_this6.state.email, _this6.state.password, _this6.state.password2);\n\n          return false;\n        }\n      }, /*#__PURE__*/React__default.createElement(\"h1\", {\n        className: \"h3 mb-3 font-weight-normal\",\n        style: {\n          textAlign: 'left'\n        }\n      }, \"Password Recovery\"), this.props.message && /*#__PURE__*/React__default.createElement(\"div\", {\n        className: \"warning-message\"\n      }, this.props.message), /*#__PURE__*/React__default.createElement(\"fieldset\", {\n        className: \"col-12\"\n      }, /*#__PURE__*/React__default.createElement(\"label\", {\n        htmlFor: \"email\",\n        className: \"row\"\n      }, \"Email \"), /*#__PURE__*/React__default.createElement(\"input\", {\n        autoComplete: \"signin_email\",\n        id: \"email\",\n        type: \"email\",\n        name: \"email\",\n        onChange: this.change\n      }), /*#__PURE__*/React__default.createElement(\"label\", {\n        htmlFor: \"password\",\n        className: \"row\"\n      }, \"New Password\"), \" \", /*#__PURE__*/React__default.createElement(\"input\", {\n        autoComplete: \"off\",\n        id: \"password\",\n        type: \"password\",\n        name: \"password\",\n        onChange: this.change\n      }), /*#__PURE__*/React__default.createElement(\"label\", {\n        htmlFor: \"password2\",\n        className: \"row\"\n      }, \"Repeat New Password\"), /*#__PURE__*/React__default.createElement(\"input\", {\n        autoComplete: \"off\",\n        id: \"password2\",\n        type: \"password\",\n        name: \"password2\",\n        onChange: this.change\n      }), /*#__PURE__*/React__default.createElement(\"br\", null), /*#__PURE__*/React__default.createElement(\"br\", null), /*#__PURE__*/React__default.createElement(\"button\", {\n        className: \"btn btn-lg btn-success btn-block\",\n        type: \"submit\"\n      }, \"Send Recovery Email\"))));\n    }\n  }]);\n\n  return ForgotPassword;\n}(Component);\n\nvar RegistrationConfirmation = /*#__PURE__*/function (_Component7) {\n  _inherits(RegistrationConfirmation, _Component7);\n\n  var _super7 = _createSuper(RegistrationConfirmation);\n\n  function RegistrationConfirmation() {\n    _classCallCheck(this, RegistrationConfirmation);\n\n    return _super7.apply(this, arguments);\n  }\n\n  _createClass(RegistrationConfirmation, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var that = this;\n      var standalone = that.props.allowedOrigins && that.props.allowedOrigins.length > 0 ? true : false;\n      setTimeout(function () {\n        if (standalone) window.close();\n      }, 5000);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React__default.createElement(\"div\", {\n        className: \"registrationconfirmation\",\n        style: {\n          textAlign: 'left'\n        }\n      }, /*#__PURE__*/React__default.createElement(\"h3\", null, \"Thanks for Registering\"), /*#__PURE__*/React__default.createElement(\"div\", null, \"To finish creating your account, check your email and open the confirmation link.\"));\n    }\n  }]);\n\n  return RegistrationConfirmation;\n}(Component);\n\nvar tickImage = \"check-solid~bdswbrUp.svg\";\nvar crossImage = \"times-circle-solid~bjunytod.svg\";\n\nvar OAuth = /*#__PURE__*/function (_Component8) {\n  _inherits(OAuth, _Component8);\n\n  var _super8 = _createSuper(OAuth);\n\n  function OAuth(props) {\n    var _this7;\n\n    _classCallCheck(this, OAuth);\n\n    _this7 = _super8.call(this, props);\n    _this7.state = {};\n    _this7.change = _this7.change.bind(_assertThisInitialized(_this7));\n    _this7.cancelAuthRequest = _this7.cancelAuthRequest.bind(_assertThisInitialized(_this7));\n    return _this7;\n  }\n\n  _createClass(OAuth, [{\n    key: \"change\",\n    value: function change(e) {\n      var state = {};\n      state[e.target.name] = e.target.value;\n      this.setState(state);\n      return true;\n    }\n  }, {\n    key: \"cancelAuthRequest\",\n    value: function cancelAuthRequest(e) {\n      e.preventDefault();\n      this.setState({\n        authRequest: null\n      });\n      localStorage.setItem('auth_request', '');\n      window.location = '/';\n      return false;\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (!this.props.isLoggedIn()) {\n        this.props.history.push(\"../login\");\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var that = this;\n\n      if (!this.props.isLoggedIn()) {\n        this.props.history.push(\"../login\");\n      } else {\n        var params = this.props.location.search ? this.props.location.search.slice(1).split(\"&\") : [];\n        var paramsObject = {};\n        params.map(function (keyAndData) {\n          var parts = keyAndData.split(\"=\");\n\n          if (parts.length === 2) {\n            paramsObject[parts[0]] = parts[1];\n          }\n\n          return null;\n        });\n\n        if (paramsObject.response_type && paramsObject.response_type.length > 0 && paramsObject.client_id && paramsObject.client_id.length > 0) {\n          var authRequest = {\n            client_id: paramsObject.client_id,\n            redirect_uri: paramsObject.redirect_uri,\n            response_type: paramsObject.response_type,\n            scope: paramsObject.scope,\n            state: paramsObject.state\n          };\n          if (that.props.startWaiting) that.props.startWaiting();\n          fetch(that.props.authServerHostname + that.props.authServer + '/oauthclient?clientId=' + paramsObject.client_id, {\n            method: 'GET',\n            headers: {\n              'Content-Type': 'application/json',\n              'Authorization': 'Bearer ' + that.props.user.token.access_code\n            }\n          }).then(this.checkStatus).then(function (data) {\n            return that.parseJSON(data);\n          }).then(function (data) {\n            if (that.props.stopWaiting) that.props.stopWaiting();\n\n            if (data.error) {\n              console.log(data.error, data);\n              that.props.submitWarning(data.error);\n            } else {\n              authRequest.name = data.name;\n              authRequest.website_url = data.website_url;\n              authRequest.privacy_url = data.privacy_url;\n              authRequest.user = that.props.user ? that.props.user.username : '';\n              localStorage.setItem('auth_request', JSON.stringify(authRequest));\n              that.setState({\n                authRequest: authRequest\n              });\n            }\n          }).catch(function (error) {\n            console.log(['SIGN IN request failed', error]);\n          });\n        } else {\n          var _authRequest = localStorage.getItem('auth_request');\n\n          that.setState({\n            authRequest: JSON.parse(_authRequest)\n          });\n        }\n      }\n    }\n  }, {\n    key: \"checkStatus\",\n    value: function checkStatus(response) {\n      if (response.status >= 200 && response.status < 300) {\n        return response;\n      } else {\n        var error = new Error(response.statusText);\n        error.response = response;\n        throw error;\n      }\n    }\n  }, {\n    key: \"parseJSON\",\n    value: function parseJSON(response) {\n      return response.json();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React__default.createElement(\"div\", null, this.state.authRequest && /*#__PURE__*/React__default.createElement(\"div\", {\n        className: \"row\"\n      }, /*#__PURE__*/React__default.createElement(\"h1\", null, \"Authorize \", this.state.authRequest.name), /*#__PURE__*/React__default.createElement(\"div\", null, \"Do you want to allow \", this.state.authRequest.name, \" to login \", this.props.user ? ' as ' + this.props.user.name : '', \"?\", /*#__PURE__*/React__default.createElement(\"br\", null)), /*#__PURE__*/React__default.createElement(\"br\", null), /*#__PURE__*/React__default.createElement(\"br\", null), /*#__PURE__*/React__default.createElement(\"div\", {\n        style: {\n          fontSize: '1.2em',\n          width: '100%',\n          clear: 'both'\n        }\n      }, /*#__PURE__*/React__default.createElement(\"a\", {\n        target: \"_new\",\n        style: {\n          float: 'left'\n        },\n        href: this.state.authRequest.website_url\n      }, \"Website\"), /*#__PURE__*/React__default.createElement(\"a\", {\n        target: \"_new\",\n        style: {\n          float: 'right'\n        },\n        href: this.state.authRequest.privacy_url\n      }, \"Privacy Policy\")), /*#__PURE__*/React__default.createElement(\"br\", null), /*#__PURE__*/React__default.createElement(\"div\", {\n        style: {\n          width: '100%',\n          fontSize: '0.8em',\n          padding: '0.2em',\n          border: '1px solid grey',\n          textAlign: 'left'\n        }\n      }, \"Authorization will allow \", this.state.authRequest.name, \" to\", /*#__PURE__*/React__default.createElement(\"br\", null), /*#__PURE__*/React__default.createElement(\"ul\", {\n        style: {\n          marginLeft: '-1em'\n        }\n      }, /*#__PURE__*/React__default.createElement(\"li\", null, \"See your name and email address\"), /*#__PURE__*/React__default.createElement(\"li\", null, \"Interact with this website on your behalf\")), /*#__PURE__*/React__default.createElement(\"form\", {\n        style: {\n          width: '100%'\n        },\n        action: that.props.authServerHostname + this.props.authServer + '/authorize',\n        method: \"POST\"\n      }, /*#__PURE__*/React__default.createElement(\"input\", {\n        type: \"hidden\",\n        name: \"response_type\",\n        value: this.state.authRequest.response_type\n      }), /*#__PURE__*/React__default.createElement(\"input\", {\n        type: \"hidden\",\n        name: \"client_id\",\n        value: this.state.authRequest.client_id\n      }), /*#__PURE__*/React__default.createElement(\"input\", {\n        type: \"hidden\",\n        name: \"client_secret\",\n        value: this.state.authRequest.client_secret\n      }), /*#__PURE__*/React__default.createElement(\"input\", {\n        type: \"hidden\",\n        name: \"redirect_uri\",\n        value: this.state.authRequest.redirect_uri\n      }), /*#__PURE__*/React__default.createElement(\"input\", {\n        type: \"hidden\",\n        name: \"scope\",\n        value: this.state.authRequest.scope\n      }), /*#__PURE__*/React__default.createElement(\"input\", {\n        type: \"hidden\",\n        name: \"state\",\n        value: this.state.authRequest.state\n      }), /*#__PURE__*/React__default.createElement(\"input\", {\n        type: \"hidden\",\n        name: \"access_token\",\n        value: this.props.user && this.props.user.token ? this.props.user.token.access_token : ''\n      }), /*#__PURE__*/React__default.createElement(\"div\", {\n        style: {\n          fontSize: '1.1em',\n          clear: 'both',\n          width: '100%'\n        },\n        className: \"row\"\n      }, /*#__PURE__*/React__default.createElement(\"div\", {\n        className: \"col-6\"\n      }, /*#__PURE__*/React__default.createElement(\"button\", {\n        type: \"submit\",\n        style: {\n          color: 'black',\n          width: '100%',\n          fontWeight: 'bold'\n        },\n        className: \"btn btn-block btn-lg  btn-success\"\n      }, /*#__PURE__*/React__default.createElement(\"img\", {\n        src: tickImage,\n        style: {\n          marginRight: '0.2em',\n          height: '1.2em'\n        },\n        alt: \"Yes\"\n      }), \"\\xA0Yes\")), /*#__PURE__*/React__default.createElement(\"div\", {\n        className: \"col-6\"\n      }, /*#__PURE__*/React__default.createElement(\"button\", {\n        style: {\n          color: 'black',\n          width: '100%',\n          fontWeight: 'bold'\n        },\n        className: \"btn  btn-block btn-lg  btn-danger\",\n        onClick: this.cancelAuthRequest\n      }, /*#__PURE__*/React__default.createElement(\"img\", {\n        src: crossImage,\n        style: {\n          marginRight: '0.2em',\n          height: '1.2em'\n        },\n        alt: \"No\"\n      }), \"\\xA0No\"))))), /*#__PURE__*/React__default.createElement(\"br\", null), /*#__PURE__*/React__default.createElement(\"br\", null), /*#__PURE__*/React__default.createElement(\"br\", null)));\n    }\n  }]);\n\n  return OAuth;\n}(Component);\n\nvar LoginSystem = /*#__PURE__*/function (_Component9) {\n  _inherits(LoginSystem, _Component9);\n\n  var _super9 = _createSuper(LoginSystem);\n\n  function LoginSystem(props) {\n    var _this8;\n\n    _classCallCheck(this, LoginSystem);\n\n    _this8 = _super9.call(this, props);\n    _this8.timeout = null;\n    _this8.refreshInterval = null;\n    _this8.state = {\n      message: null\n    };\n    _this8.submitWarning = _this8.submitWarning.bind(_assertThisInitialized(_this8));\n    _this8.refreshTimeout = null;\n    return _this8;\n  }\n\n  _createClass(LoginSystem, [{\n    key: \"submitWarning\",\n    value: function submitWarning(warning) {\n      var that = this;\n      clearTimeout(this.timeout);\n      this.setState({\n        'message': warning\n      });\n      this.timeout = setTimeout(function () {\n        that.setState({\n          'message': ''\n        });\n      }, 6000);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var that = this;\n      var callBackFunctions = {\n        logout: this.props.logout,\n        isLoggedIn: this.props.isLoggedIn,\n        saveUser: this.props.saveUser,\n        setUser: this.props.setUser,\n        submitWarning: this.submitWarning,\n        user: this.props.user,\n        message: this.state.message,\n        authServer: this.props.authServer,\n        authServerHostname: this.props.authServerHostname,\n        loginButtons: this.props.loginButtons,\n        useRefreshToken: this.props.useRefreshToken,\n        loadUser: this.props.loadUser,\n        logoutRedirect: this.props.logoutRedirect,\n        allowedOrigins: this.props.allowedOrigins\n      };\n\n      if (this.state.authRequest) {\n        return /*#__PURE__*/React__default.createElement(\"div\", {\n          className: \"pending-auth-request\"\n        }, /*#__PURE__*/React__default.createElement(Link, {\n          to: \"\".concat(that.props.match.url, \"/auth\"),\n          className: \"btn btn-success\"\n        }, \"Pending Authentication Request\"));\n      } else {\n        var match = that.props.match.path && that.props.match.path === \"/\" ? '' : that.props.match.path;\n        return /*#__PURE__*/React__default.createElement(\"div\", null, this.state.message && /*#__PURE__*/React__default.createElement(\"div\", {\n          className: \"warning-message\",\n          style: {\n            zIndex: 99,\n            clear: 'both',\n            position: 'fixed',\n            top: 50,\n            left: 200,\n            minWidth: '200 px',\n            backgroundColor: 'pink',\n            border: '2px solid red',\n            padding: '1em',\n            borderRadius: '10px',\n            fontWeight: 'bold',\n            fontSize: '1.1em'\n          }\n        }, this.state.message), /*#__PURE__*/React__default.createElement(BrowserRouter, null, /*#__PURE__*/React__default.createElement(Route, {\n          path: \"\".concat(match, \"/profile\"),\n          render: function render(props) {\n            return /*#__PURE__*/React__default.createElement(Profile, Object.assign({}, callBackFunctions, {\n              history: props.history,\n              match: props.match,\n              location: props.location\n            }));\n          }\n        }), /*#__PURE__*/React__default.createElement(Route, {\n          path: \"\".concat(match, \"/login\"),\n          render: function render(props) {\n            return /*#__PURE__*/React__default.createElement(Login, Object.assign({}, callBackFunctions, {\n              history: props.history,\n              match: props.match,\n              location: props.location\n            }));\n          }\n        }), /*#__PURE__*/React__default.createElement(Route, {\n          path: \"\".concat(match, \"/register\"),\n          render: function render(props) {\n            return /*#__PURE__*/React__default.createElement(Register, Object.assign({}, callBackFunctions, {\n              history: props.history,\n              match: props.match,\n              location: props.location\n            }));\n          }\n        }), /*#__PURE__*/React__default.createElement(Route, {\n          path: \"\".concat(match, \"/registerconfirm\"),\n          render: function render(props) {\n            return /*#__PURE__*/React__default.createElement(RegistrationConfirmation, Object.assign({}, callBackFunctions, {\n              history: props.history,\n              match: props.match,\n              location: props.location\n            }));\n          }\n        }), /*#__PURE__*/React__default.createElement(Route, {\n          path: \"\".concat(match, \"/logout\"),\n          render: function render(props) {\n            return /*#__PURE__*/React__default.createElement(Logout, Object.assign({}, callBackFunctions, {\n              history: props.history,\n              match: props.match,\n              location: props.location\n            }));\n          }\n        }), /*#__PURE__*/React__default.createElement(Route, {\n          path: \"\".concat(match, \"/oauth\"),\n          render: function render(props) {\n            return /*#__PURE__*/React__default.createElement(OAuth, Object.assign({}, callBackFunctions, {\n              history: props.history,\n              match: props.match,\n              location: props.location\n            }));\n          }\n        }), /*#__PURE__*/React__default.createElement(Route, {\n          path: \"\".concat(match, \"/forgot\"),\n          render: function render(props) {\n            return /*#__PURE__*/React__default.createElement(ForgotPassword, Object.assign({}, callBackFunctions, {\n              history: props.history,\n              match: props.match,\n              location: props.location\n            }));\n          }\n        }), /*#__PURE__*/React__default.createElement(Route, {\n          path: \"\".concat(match, \"/privacy\"),\n          render: function render(props) {\n            return /*#__PURE__*/React__default.createElement(TermsOfUse, Object.assign({}, callBackFunctions, {\n              history: props.history,\n              match: props.match,\n              location: props.location\n            }));\n          }\n        }), /*#__PURE__*/React__default.createElement(Route, {\n          path: \"\".concat(match, \"/\"),\n          exact: true,\n          render: function render(props) {\n            return /*#__PURE__*/React__default.createElement(Login, Object.assign({}, callBackFunctions, {\n              isRoot: true,\n              history: props.history,\n              match: props.match,\n              location: props.location\n            }));\n          }\n        }), /*#__PURE__*/React__default.createElement(Route, {\n          path: \"\".concat(match, \"/blank\"),\n          exact: true,\n          render: function render(props) {\n            return /*#__PURE__*/React__default.createElement(\"b\", null, \"Checking Login ....\");\n          }\n        })));\n      }\n    }\n  }]);\n\n  return LoginSystem;\n}(Component);\n\nvar LoginSystemContext = /*#__PURE__*/function (_Component10) {\n  _inherits(LoginSystemContext, _Component10);\n\n  var _super10 = _createSuper(LoginSystemContext);\n\n  function LoginSystemContext(props) {\n    var _this9;\n\n    _classCallCheck(this, LoginSystemContext);\n\n    _this9 = _super10.call(this, props);\n    _this9.state = {\n      user: {},\n      authServer: props.authServer && props.authServer.trim() ? props.authServer : process.env.REACT_APP_authServer && process.env.REACT_APP_authServer.trim() ? process.env.REACT_APP_authServer : '/api/login',\n      authServerHostname: props.authServerHostname && props.authServerHostname.trim() ? props.authServerHostname : process.env.REACT_APP_authServerHostname && process.env.REACT_APP_authServerHostname.trim() ? process.env.REACT_APP_authServerHostname : window.location.origin,\n      allowedOrigins: props.allowedOrigins ? props.allowedOrigins : process.env.REACT_APP_allowedOrigins ? process.env.REACT_APP_allowedOrigins.split(\",\") : []\n    };\n    _this9.setUser = _this9.setUser.bind(_assertThisInitialized(_this9));\n    _this9.useRefreshToken = _this9.useRefreshToken.bind(_assertThisInitialized(_this9));\n    _this9.loadUser = _this9.loadUser.bind(_assertThisInitialized(_this9));\n    _this9.logout = _this9.logout.bind(_assertThisInitialized(_this9));\n    _this9.isLoggedIn = _this9.isLoggedIn.bind(_assertThisInitialized(_this9));\n    return _this9;\n  }\n\n  _createClass(LoginSystemContext, [{\n    key: \"isLoggedIn\",\n    value: function isLoggedIn() {\n      return this.state.user && this.state.user.token && this.state.user.token.access_token;\n    }\n  }, {\n    key: \"setUser\",\n    value: function setUser(user) {\n      this.setState({\n        user: user\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount(props) {\n      var that = this;\n      this.useRefreshToken().then(function (userAndToken) {\n        that.setUser(userAndToken);\n        window.addEventListener(\"message\", receiveMessage, false);\n      });\n\n      function receiveMessage(event) {\n        console.log([\"frame MESSAGE\", JSON.stringify(event.data), event, event.origin, that.state.allowedOrigins, event.source]);\n\n        if (that.state.allowedOrigins && that.state.allowedOrigins.indexOf(event.origin) !== -1) {\n          if (event.data && event.data.check_login) {\n            console.log([\"return frame MESSAGE\", {\n              user: that.state.user && that.state.user.token ? that.state.user : null\n            }, event.origin]);\n            event.source.postMessage({\n              user: that.state.user && that.state.user.token && that.state.user.username && that.state.user.username.trim() ? that.state.user : null\n            }, event.origin);\n          }\n\n          if (event.data && event.data.allowedPages && Array.isArray(event.data.allowedPages)) {\n            var parts = window.location.href ? window.location.href.split(\"/\") : [];\n            console.log([\"close win ?\"]);\n\n            if (event.data.allowedPages.indexOf(parts[parts.length - 1]) === -1) {\n              window.close();\n            }\n          }\n        }\n      }\n    }\n  }, {\n    key: \"useRefreshToken\",\n    value: function useRefreshToken() {\n      var that = this;\n      return new Promise(function (resolve, reject) {\n        var axiosClient = getAxiosClient();\n        axiosClient({\n          url: that.state.authServerHostname + that.state.authServer + '/refresh_token',\n          method: 'get'\n        }).then(function (res) {\n          return res.data;\n        }).then(function (res) {\n          if (res.access_token) {\n            that.loadUser(res.access_token).then(function (user) {\n              var combined = Object.assign({}, user, {\n                token: res\n              });\n              if (that.refreshTimeout) clearTimeout(that.refreshTimeout);\n              that.refreshTimeout = setTimeout(function () {\n                that.useRefreshToken().then(function (userAndToken) {\n                  that.setUser(userAndToken);\n                });\n              }, 840000);\n              resolve(combined);\n            });\n          } else {\n            resolve({});\n          }\n        }).catch(function (err) {\n          console.log(err);\n        });\n      });\n    }\n  }, {\n    key: \"loadUser\",\n    value: function loadUser(accessToken) {\n      var that = this;\n      return new Promise(function (resolve, reject) {\n        if (accessToken) {\n          var axiosClient = getAxiosClient(accessToken);\n          axiosClient.post(that.state.authServerHostname + that.state.authServer + '/me', {}).then(function (res) {\n            return res.data;\n          }).then(function (user) {\n            resolve(user);\n          }).catch(function (err) {\n            console.log(err);\n            reject();\n          });\n        } else {\n          reject();\n        }\n      });\n    }\n  }, {\n    key: \"logout\",\n    value: function logout(bearerToken) {\n      var that = this;\n      this.setState({\n        user: null\n      });\n      var axiosClient = getAxiosClient(bearerToken);\n      return axiosClient({\n        url: that.state.authServerHostname + that.state.authServer + '/logout',\n        method: 'post'\n      }).catch(function (err) {\n        console.log(err);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React__default.createElement(\"div\", null, this.props.children(this.state.user, this.setUser, getAxiosClient, getMediaQueryString, getCsrfQueryString, this.isLoggedIn, this.loadUser, this.useRefreshToken, this.logout, this.state.authServer, this.state.authServerHostname, this.state.allowedOrigins));\n    }\n  }]);\n\n  return LoginSystemContext;\n}(Component);\n\nvar ExternalLogin = /*#__PURE__*/function (_Component11) {\n  _inherits(ExternalLogin, _Component11);\n\n  var _super11 = _createSuper(ExternalLogin);\n\n  function ExternalLogin(props) {\n    var _this10;\n\n    _classCallCheck(this, ExternalLogin);\n\n    _this10 = _super11.call(this, props);\n    _this10.state = {\n      user: null,\n      checkLoginIframe: null\n    };\n    _this10.loginPopup = null;\n    _this10.pollLoginTimeout = null;\n    _this10.pollCloseTimeout = null;\n    _this10.receiveMessage = _this10.receiveMessage.bind(_assertThisInitialized(_this10));\n    _this10.pollShouldClose = _this10.pollShouldClose.bind(_assertThisInitialized(_this10));\n    _this10.checkIsLoggedIn = _this10.checkIsLoggedIn.bind(_assertThisInitialized(_this10));\n    _this10.checkLogin = _this10.checkLogin.bind(_assertThisInitialized(_this10));\n    _this10.doLogin = _this10.doLogin.bind(_assertThisInitialized(_this10));\n    _this10.doProfile = _this10.doProfile.bind(_assertThisInitialized(_this10));\n    _this10.doLogout = _this10.doLogout.bind(_assertThisInitialized(_this10));\n    _this10.isLoggedIn = _this10.isLoggedIn.bind(_assertThisInitialized(_this10));\n    _this10.loadUser = _this10.loadUser.bind(_assertThisInitialized(_this10));\n    _this10.setUser = _this10.setUser.bind(_assertThisInitialized(_this10));\n    _this10.setCheckLoginIframe = _this10.setCheckLoginIframe.bind(_assertThisInitialized(_this10));\n    return _this10;\n  }\n\n  _createClass(ExternalLogin, [{\n    key: \"setUser\",\n    value: function setUser(user) {\n      this.setState({\n        user: user\n      });\n    }\n  }, {\n    key: \"setCheckLoginIframe\",\n    value: function setCheckLoginIframe(url) {\n      this.setState({\n        checkLoginIframe: url\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount(props) {\n      var that = this;\n      window.addEventListener(\"message\", this.receiveMessage, false);\n      setTimeout(function () {\n        that.checkLogin();\n      }, 1000);\n    }\n  }, {\n    key: \"receiveMessage\",\n    value: function receiveMessage(event) {\n      console.log(['msg', event.origin, event.data, event.source]);\n\n      if (event.origin === this.props.authServerHostname) {\n        console.log(['msgOK', event.origin, event.data, event.source]);\n        this.setUser(event.data.user);\n        if (this.loginPopup) this.loginPopup.close();\n      }\n    }\n  }, {\n    key: \"pollShouldClose\",\n    value: function pollShouldClose(popup, allowedPages) {\n      var that = this;\n      if (this.pollTimeout) clearTimeout(this.pollTimeout);\n      this.pollTimeout = setTimeout(function () {\n        if (popup && !popup.closed) {\n          console.log(['send msg', {\n            check_login: true,\n            allowedPages: allowedPages\n          }, that.props.authServerHostname]);\n          popup.postMessage({\n            check_login: true,\n            allowedPages: allowedPages\n          }, that.props.authServerHostname);\n          that.pollShouldClose(popup, allowedPages);\n        }\n      }, 500);\n    }\n  }, {\n    key: \"checkIsLoggedIn\",\n    value: function checkIsLoggedIn(popup) {\n      var count = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n      var that = this;\n      if (this.pollLoginTimeout) clearTimeout(this.pollLoginTimeout);\n      this.pollLoginTimeout = setTimeout(function () {\n        if (popup && count < 10) {\n          console.log([count, 'send iframe login msg', {\n            check_login: true\n          }, that.props.authServerHostname]);\n          popup.postMessage({\n            check_login: true\n          }, that.props.authServerHostname);\n          that.checkIsLoggedIn(popup, count + 1);\n        }\n      }, 1000);\n    }\n  }, {\n    key: \"checkLogin\",\n    value: function checkLogin() {\n      var that = this;\n      var url = this.props.authServerHostname + this.props.authWeb + \"/blank\";\n      this.loginPopup = window.open(url, 'mywin', 'resizable=no, scrollbars=no, status=no, width=10,height=10, top: 0, left:' + window.screen.availHeight + 10);\n      that.checkIsLoggedIn(this.loginPopup);\n    }\n  }, {\n    key: \"doLogin\",\n    value: function doLogin() {\n      var url = this.props.authServerHostname + this.props.authWeb + '/login';\n      var popup = window.open(url, 'mywin');\n      this.pollShouldClose(popup, ['login', 'register', 'forgot', 'registerconfirm', 'privacy']);\n    }\n  }, {\n    key: \"doProfile\",\n    value: function doProfile() {\n      var url = this.props.authServerHostname + this.props.authWeb + '/profile';\n      var popup = window.open(url, 'mywin');\n      this.pollShouldClose(popup, ['profile', 'logout']);\n    }\n  }, {\n    key: \"doLogout\",\n    value: function doLogout() {\n      var url = this.props.authServerHostname + this.props.authWeb + '/logout';\n      var popup = window.open(url, 'mywin');\n      this.pollShouldClose(popup, ['logout']);\n    }\n  }, {\n    key: \"isLoggedIn\",\n    value: function isLoggedIn() {\n      return this.state.user && this.state.user.token && this.state.user.token.access_token;\n    }\n  }, {\n    key: \"loadUser\",\n    value: function loadUser(accessToken) {\n      var that = this;\n      return new Promise(function (resolve, reject) {\n        if (accessToken) {\n          var axiosClient = getAxiosClient(accessToken);\n          axiosClient.post(that.props.authServerHostname + that.props.authServer + '/me', {}).then(function (res) {\n            return res.data;\n          }).then(function (user) {\n            that.setUser(user);\n            resolve(user);\n          }).catch(function (err) {\n            console.log(err);\n            reject();\n          });\n        } else {\n          reject();\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render(props) {\n      return /*#__PURE__*/React__default.createElement(\"div\", null, \"EXTUWSERL:::\", JSON.stringify(this.state.user), this.props.children(this.state.user, this.setUser, getAxiosClient, getMediaQueryString, getCsrfQueryString, this.isLoggedIn, this.loadUser, this.doLogout, this.doLogin, this.doProfile, this.props.authServer, this.props.authServerHostname));\n    }\n  }]);\n\n  return ExternalLogin;\n}(Component);\n\nexport { ExternalLogin, ForgotPassword, Login, LoginSystem, LoginSystemContext, Logout, OAuth, Profile, Register, RegistrationConfirmation, TermsOfUse, getAxiosClient, getCookie, getCsrfQueryString, getMediaQueryString };","import React from 'react';\nimport {useState, useEffect} from 'react';\nimport {BrowserRouter as  Router, Route, Link  } from 'react-router-dom'\nimport LocalStorageUploadManager from './LocalStorageUploadManager'\nimport ListsManager from './ListsManager'\nimport UtterancesManager from './UtterancesManager'\nimport RegexpsManager from './RegexpsManager'\nimport NluExampleEditor from './NluExampleEditor'\nimport NavbarComponent from './components/NavbarComponent'\n//import TestComponent from './components/TestComponent'\nimport {HelpText, HelpTextImport, HelpTextExport, HelpTextAbout} from './components/Components'\nimport NluImportEditor from './NluImportEditor'\nimport NluSkillsEditor from './NluSkillsEditor'\n//import SearchPage from './SearchPage'\nimport ImportReviewPage from './ImportReviewPage'\nimport SkillSearchPage from './SkillSearchPage'\nimport {Button} from 'react-bootstrap'\nimport localforage from 'localforage'\nimport {ExternalLogin}  from 'react-express-oauth-login-system-components'\nimport 'bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nconst axios = require('axios');\n\nfunction SiteMenu(props) {\n    var astyle={paddingLeft:'0.3em'}\n    return <div style={{marginLeft:'0.5em'}}>\n        <h1>Menu</h1>\n        <Link style={astyle} to=\"/sources\" ><Button>Sources</Button></Link>\n        <Link style={astyle} to=\"/import\" ><Button>Import</Button></Link>\n        <Link style={astyle} to=\"/examples\" ><Button>Organise</Button></Link>\n        <Link style={astyle} to=\"/skills\" ><Button>Skills </Button></Link>\n        <Link style={astyle} to=\"/search\" ><Button>Search Community </Button></Link>\n    </div>\n}\n\nfunction App() {\n   \n    const [waiting, setWaiting] = useState(false)\n    const [pageMessage, setPageMessageInner] = useState('')  \n    var messageTimeout = null\n    \n    \n    function setPageMessage(message,timeout=0) {\n        setPageMessageInner(message)\n        if (timeout > 0) {\n            if (messageTimeout) clearTimeout(messageTimeout) \n            messageTimeout = setTimeout(function() {setPageMessage('')},timeout)\n        }\n    }\n    \n    //const [importFrom, setImportFrom] = useState(null)\n    // example summaries\n    const [intentLookups, setIntentLookups] = useState([])\n    const [entityLookups, setEntityLookups] = useState([])\n    const [tagLookups, setTagLookups] = useState([])\n    const [skillLookups, setSkillLookups] = useState([])\n    const [listsLookups, setListsLookups]= useState([])\n    const [selectedTally, setSelectedTally] = useState(0)\n    const [utterancesLookups, setUtterancesLookups] = useState([])\n    const [utteranceListsLookups, setUtteranceListsLookups] = useState([])\n    const [utteranceTagsLookups, setUtteranceTagsLookups] = useState([])\n    const [regexpsLookups, setRegexpsLookups] = useState([])\n    const [regexpsCompleteLookups, setRegexpsCompleteLookups] = useState([])\n    const [regexpListsLookups, setRegexpListsLookups] = useState([])\n    const [regexpTagsLookups, setRegexpTagsLookups] = useState([])\n    \n    // list summaries\n    const [listTally, setListTally] = useState(0)\n    const [selectedListTally, setSelectedListTally] = useState(0)\n    const [listTallyByList, setListTallyByList] = useState({})\n    const [selectedListTallyByList, setSelectedListTallyByList] = useState({})\n    \n    const [regexTally, setRegexTally] = useState(0)\n    const [selectedRegexTally, setSelectedRegexTally] = useState(0)\n    const [utteranceTally, setUtteranceTally] = useState(0)\n    const [selectedUtteranceTally, setSelectedUtteranceTally] = useState(0)\n    var [skills, setSkills] = useState({})\n    var [skillTags, setSkillTags] = useState({})\n    \n    \n    // search bar\n   // const [skillFilterValue, setSkillFilterValue] = useState('')\n  \n    \n    \n    function loadSkills() {\n        return axios.get((process.env.REACT_APP_githubSkillsUrl ? process.env.REACT_APP_githubSkillsUrl : '/static/media/skills/')+'index.js').then(function(res) {\n          //console.log(['LOaD SKILSS',res.data])  \n          var tags={}\n          if (res.data) {\n              Object.values(res.data).map(function(skill) {\n                  if (skill.tags) skill.tags.map(function(tag) {\n                      tags[tag] = true\n                     return null  \n                  })\n                  return null\n              })\n              setSkillTags(Object.keys(tags).sort())\n              setSkills(res.data)\n          }\n        }).catch(function(err) {\n            //console.log(err)  \n        })\n    }\n       \n    useEffect(() => {loadSkills()},[])   \n       \n    function startWaiting() {\n        setWaiting(true)\n    }\n    \n    function stopWaiting() {\n        setTimeout(function() {\n            setWaiting(false)\n        },300)\n    }\n\n    \n    function updateRegexps() {\n        ////console.log('UPDATE regexps')\n        var storage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"regexps\",\n         });\n         storage.getItem('alldata', function (err,utterances) {\n                 var tally = 0;\n                 var selectedTally = 0;\n                var utteranceLists={}\n                var utteranceIndex={}\n                var utteranceCompleteIndex={}\n                var utteranceTags={}\n                ////console.log(['UPDATE UTTERANCES',err,utterances])\n                if (Array.isArray(utterances)) {\n                    utterances.map(function(utterance,i) {\n                        ////console.log(['UPDATE regexp',utterance])\n                         if (utterance.isSelected) {\n                             selectedTally += 1\n                        }\n                        tally += 1;\n                         if (utterance.value) {\n                             utteranceIndex[utterance.value]=true\n                             utteranceCompleteIndex[utterance.value]={value: utterance.value, synonym: utterance.synonym}\n                         }\n                         if (utterance.synonym) {\n                             utterance.synonym.split(\"\\n\").map(function(synonym) {\n                                 utteranceLists[synonym] = true\n                                 return null\n                             })\n                         } \n                         if (utterance.tags && utterance.tags.length > 0) {\n                               utterance.tags.map(function(tag) {\n                                  utteranceTags[tag] = true  \n                                  return null\n                               })\n                         }\n                         return null\n                    })\n                    setRegexTally(tally)\n                    setSelectedRegexTally(selectedTally)\n                    setRegexpsLookups(Object.keys(utteranceIndex))\n                    setRegexpsCompleteLookups(Object.values(utteranceCompleteIndex))\n                    setRegexpTagsLookups(Object.keys(utteranceTags))\n                    setRegexpListsLookups(Object.keys(utteranceLists))\n                }\n                ////console.log(['UPDATE UTTERANCES',utteranceIndex,utteranceLists])\n                    \n              });\n            //});\n  \n    }\n    \n    function updateUtterances() {\n        ////console.log('UPDATE UTTERANCES')\n        var utteranceStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"utterances\",\n         });\n         var tally = 0;\n         var selectedTally = 0;\n         utteranceStorage.getItem('alldata', function (err,utterances) {\n                var utteranceLists={}\n                var utteranceIndex={}\n                var utteranceTags={}\n                ////console.log(['UPDATE UTTERANCES',err,utterances])\n                if (Array.isArray(utterances)) {\n                    utterances.map(function(utterance,i) {\n                        if (utterance.isSelected) {\n                             selectedTally += 1\n                        }\n                        tally += 1;\n                        ////console.log(['UPDATE UTTERANCE',utterance])\n                         if (utterance.value) {\n                             utteranceIndex[utterance.value]=true\n                         }\n                         if (utterance.synonym) {\n                             utterance.synonym.split(\"\\n\").map(function(synonym) {\n                                 utteranceLists[synonym] = true\n                                 return null\n                             })\n                         } \n                         if (utterance.tags && utterance.tags.length > 0) {\n                               utterance.tags.map(function(tag) {\n                                  utteranceTags[tag] = true  \n                                  return null\n                               })\n                         }\n                         return null\n                    })\n                    setUtteranceTally(tally)\n                    setSelectedUtteranceTally(selectedTally)\n                    setUtterancesLookups(Object.keys(utteranceIndex))\n                    setUtteranceTagsLookups(Object.keys(utteranceTags))\n                    setUtteranceListsLookups(Object.keys(utteranceLists))\n                }\n                ////console.log(['UPDATE UTTERANCES',utteranceIndex,utteranceLists])\n                    \n              });\n            //});\n  \n    }\n\n    function updateLists() {\n        var listsStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"lists\",\n         });\n         listsStorage.getItem('alldata', function (err,lists) {\n            ////console.log(['UPDATELISTS',lists])\n            if (lists) {\n                var newSelectedLists = {}\n                var newLists = {}\n                var tally = 0;\n                var selectedTally = 0;\n                lists.map(function(listItem) {\n                    if (listItem.isSelected) {\n                             selectedTally += 1\n                    }\n                    tally += 1;\n                    if (listItem && listItem.tags && listItem.tags.length > 0) {\n                        \n                        listItem.tags.map(function(tag) {\n                            if (tag && tag.trim().length > 0) {\n                                if (listItem.isSelected) {\n                                     newLists[tag] = (newLists[tag] > 0) ? newLists[tag] + 1 : 1\n                                     newSelectedLists[tag] = (newSelectedLists[tag] > 0) ? newSelectedLists[tag] + 1 : 1\n                                } else {\n                                    newLists[tag] = (newLists[tag] >0) ? newLists[tag] + 1 : 1\n                                }\n                            }\n                            return null\n                        })\n                    }\n                    return null\n                })\n                ////console.log(['UPDATELISTS',tally, selectedTally])\n                setListTally(tally)\n                setSelectedListTally(selectedTally)\n                setSelectedListTallyByList(newSelectedLists)\n                setListTallyByList(newLists)\n                setListsLookups(Object.keys(newLists))\n                ////console.log('updated lists', newLists)\n            }\n        })\n    }\n\n    function updateLookups() {\n        var examplesStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"examples\",\n         });\n        examplesStorage.getItem('alldata', function (err,items) {\n            ////console.log(['UPDATELOOKUPS',items])\n            if (items && items.length > 0) {\n                var tags = {}\n                var intents = {}\n                var entities = {}\n                var skills = {}\n                var selected = 0;\n                items.map(function(item) {\n                    if (item) {\n                        ////console.log(['UPDATELOOKUPS single',item])\n                        if (item.isSelected) selected = selected + 1;\n                       intents[item.intent] = true\n                       if (item.tags && item.tags.length > 0) {\n                           item.tags.map(function(tag) {\n                              tags[tag] = true  \n                              return null\n                           })\n                       }\n                       if (item.skills && item.skills.length > 0) {\n                           item.skills.map(function(skill) {\n                              skills[skill] = true  \n                              return null\n                           })\n                       }\n                       if (item.entities && item.entities.length > 0) {\n                           item.entities.map(function(entity) {\n                              if (entity.type) {\n                                  entities[entity.type] = true  \n                              }\n                              return null\n                           })\n                       }\n                    }\n                    return null\n                })\n                const distinct = function(value,index,self) {\n                    return self.indexOf(value) === index;\n                }\n                ////console.log(['UPDATELOOKUPS single res',intents,entities])\n                    \n                setIntentLookups([].concat(Object.keys(intents),intentLookups).filter(distinct))\n                setEntityLookups([].concat(Object.keys(entities),entityLookups).filter(distinct))\n                setTagLookups([].concat(Object.keys(tags),tagLookups).filter(distinct))\n                setSkillLookups([].concat(Object.keys(skills),skillLookups).filter(distinct))\n                setSelectedTally(selected)\n                ////console.log(entityLookups, intentLookups)\n            }\n        })\n    }\n    const lookups = {regexpTagsLookups:regexpTagsLookups,regexpsLookups:regexpsLookups,regexpListsLookups:regexpListsLookups,  regexpsCompleteLookups,  utteranceTagsLookups:utteranceTagsLookups,utterancesLookups:utterancesLookups,utteranceListsLookups:utteranceListsLookups,intentLookups,entityLookups,tagLookups,skillLookups, selectedTally, listsLookups, listTally, selectedListTally, listTallyByList, selectedListTallyByList, utteranceTally, selectedUtteranceTally,regexTally, selectedRegexTally, skills, skillTags}\n    const updateFunctions = {updateLookups, updateLists, updateUtterances, updateRegexps, loadSkills}\n                \n  return (\n    <div className=\"OpenNluDataApp\">\n         <ExternalLogin  \n                authServer={process.env.REACT_APP_authServer} \n                authServerHostname={process.env.REACT_APP_authServerHostname} \n                 authWeb=\"\" \n            >{(user,setUser,getAxiosClient,getMediaQueryString,getCsrfQueryString, isLoggedIn, loadUser, doLogout, doLogin, doProfile,  authServer, authServerHostname) => {  \n                \n                return <div  >\n                USER:::{JSON.stringify(user)}\n                <Router>\n                      \n                \n                        <Route exact path='*' render={\n                            (props) => {\n                                return <NavbarComponent waiting={waiting} user={user} doLogin={doLogin} doLogout={doLogout} doProfile={doProfile} isLoggedIn={isLoggedIn} history={props.history} message={pageMessage} setPageMessage={setPageMessage}  getAxiosClient={getAxiosClient}  />\n                            }}\n                        />\n                        <div style={{marginLeft:'0.5em'}} >\n                            \n                            \n                            <Route exact path='/menu' component={SiteMenu} />\n                            <Route path='/sources' render={\n                                (props) => <LocalStorageUploadManager {...props} startWaiting={startWaiting} stopWaiting={stopWaiting}   setPageMessage={setPageMessage}  updateFunctions={updateFunctions} lookups={lookups}  />\n                            }/>\n                            \n                            \n                            <Route path='/importreview' render={\n                                (props) => <ImportReviewPage {...props} startWaiting={startWaiting} stopWaiting={stopWaiting}   setPageMessage={setPageMessage}  updateFunctions={updateFunctions} lookups={lookups}  />\n                            }/>\n                            \n                            \n                            \n                            <Route exact path='/import' render={\n                                (props) => <NluImportEditor {...props}        lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}  updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />}\n                                      \n                            />\n                            \n                            <Route exact path='/import/skill/:skillId' render={\n                                (props) => <NluImportEditor {...props}        lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}  updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />}\n                                      \n                            />\n                            \n                            <Route exact path='/import/intent/:intentId' render={\n                                (props) => <NluImportEditor {...props}        lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}  updateFunctions={updateFunctions} setPageMessage={setPageMessage}    />}\n                                      \n                            />\n                            \n                            <Route path='/import/skill/:skillId/intent/:intentId' render={\n                                (props) => <NluImportEditor {...props}        lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}  updateFunctions={updateFunctions} setPageMessage={setPageMessage}    />}\n                                      \n                            />\n                            \n                            \n                            <Route exact  path='/examples' render={(props) => <NluExampleEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                            />\n                            \n                            <Route exact path='/examples/skill/:skillId' render={(props) => <NluExampleEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                            />\n                            \n                            <Route path='/examples/intent/:intentId' render={(props) => <NluExampleEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                            />\n                            \n                            <Route path='/examples/tag/:tag' render={(props) => <NluExampleEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                            />\n                            \n                            <Route exact path='/examples/skill/:skillId/intent/:intentId' render={(props) => <NluExampleEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                            />\n                            \n                            <Route exact path='/examples/skill/:skillId/tag/:tag' render={(props) => <NluExampleEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                            />\n                            \n                            <Route exact path='/examples/intent/:intentId/tag/:tag' render={(props) => <NluExampleEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                            />\n                            \n                            <Route exact path='/examples/skill/:skillId/intent/:intentId/tag/:tag' render={(props) => <NluExampleEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                            />\n                            \n                            <Route exact path='/skills/:skillId' render={(props) => <NluSkillsEditor {...props}  doLogin={doLogin}  user={user}   lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}   getAxiosClient={getAxiosClient}  />} \n                            />\n                            \n                            <Route exact path='/skills/skill/:skillId' render={(props) => <NluSkillsEditor {...props}  doLogin={doLogin}  user={user}   lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}   getAxiosClient={getAxiosClient}  />} \n                            />\n                            \n                            <Route exact path='/skills/:skillId/publish' render={(props) => <NluSkillsEditor {...props} doLogin={doLogin}  user={user}    lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}  publish={true}   getAxiosClient={getAxiosClient} />} \n                            />\n                            \n                            <Route exact path='/skills/skill/:skillId/publish' render={(props) => <NluSkillsEditor {...props} doLogin={doLogin}   user={user}   lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}   publish={true}  getAxiosClient={getAxiosClient} />} \n                            />\n\n                             <Route exact path='/skills' render={(props) => <NluSkillsEditor {...props} doLogin={doLogin} user={user}      lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage} getAxiosClient={getAxiosClient}   />} \n                            />\n                            \n                           \n                            <Route exact path='/lists' render={\n                                (props) => <ListsManager {...props}   lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}  updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />}\n                                      \n                            />\n                            <Route exact path='/lists/:listId' render={\n                                (props) => <ListsManager {...props}   lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}  updateFunctions={updateFunctions}  setPageMessage={setPageMessage}   />}\n                                      \n                            />\n                            \n                            \n                            <Route exact path='/utterances' render={\n                                (props) => <UtterancesManager {...props}   lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}   setPageMessage={setPageMessage}  updateFunctions={updateFunctions}   />}\n                                      \n                            />\n                            <Route exact path='/utterances/:listId' render={\n                                (props) => <UtterancesManager {...props}   lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}   setPageMessage={setPageMessage}  updateFunctions={updateFunctions}  />}\n                                      \n                            />\n                            \n                            \n                            <Route exact path='/regexps' render={\n                                (props) => <RegexpsManager {...props}   lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}   setPageMessage={setPageMessage}  updateFunctions={updateFunctions}   />}\n                                      \n                            />\n                            <Route exact path='/regexps/:listId' render={\n                                (props) => <RegexpsManager {...props}   lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}   setPageMessage={setPageMessage}  updateFunctions={updateFunctions}  />}\n                            />\n                            <Route exact path='/help' component={HelpText}     />\n                            <Route exact path='/helpimport' component={HelpTextImport}     />\n                            <Route exact path='/helpexport' component={HelpTextExport}     />\n                            <Route exact path='/helpabout' component={HelpTextAbout}     />\n                            \n                            <Route exact path='/search' render={(props) => <SkillSearchPage user={user} getAxiosClient={getAxiosClient} lookups={lookups} updateFunctions={updateFunctions}  />} />\n                           \n                            <Route exact path='/' component={HelpText} />\n\n                            \n                        </div>\n                </Router>\n              </div>\n                  }}\n\n        </ExternalLogin>\n   \n                 <br/>\n                <br/>\n                <br/>\n    </div>\n  );\n}\n                \nexport default App;\n//<Route path='/login'  render={\n                            //(props) => <div style={{width:'90%', marginLeft:'1em', align:'center', marginTop:'1em'}}  ><LoginSystem  \n                               //match={props.match}\n                               //location={props.location}\n                               //history={props.history}\n                               //authServer={process.env.REACT_APP_authServer} \n                                //// also need external link to auth server (combind authServerHostname + authServer) for google, github, .. login buttons\n                                //authServerHostname={process.env.REACT_APP_authServerHostname} \n                                //// update for login api location, use package.json proxy config to map other host/port to local link\n                               //loginButtons={process.env.REACT_APP_loginButtons?process.env.REACT_APP_loginButtons.split(\",\"):[]}\n                                //// optional callbacks\n                                //logoutRedirect={'/'}\n                               //user={user} setUser={setUser} isLoggedIn={isLoggedIn} logout={logout} saveUser={saveUser} startWaiting={startWaiting} stopWaiting={stopWaiting} \n                             ///></div>}\n                             ///>\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n","module.exports = __webpack_public_path__ + \"static/media/check.8ab01baf.svg\";","module.exports = __webpack_public_path__ + \"static/media/helpoverview.646ef0b8.svg\";","module.exports = __webpack_public_path__ + \"static/media/singingman.5d08cb4f.svg\";","module.exports = __webpack_public_path__ + \"static/media/waiting.d362cb3f.gif\";","module.exports = __webpack_public_path__ + \"static/media/thumb-down.73b0ce24.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow-thick-left.f29ee705.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow-thick-right.9ba7683e.svg\";","// \"Create React App\" tooling expects to find the WWW root here,\n// so we simply use this file to import the ./www directory.\n//\n// For the backend, we set the container's entrypoint to src/api/index.js\n\nmodule.exports = require('./www')\n","module.exports = __webpack_public_path__ + \"static/media/thumb-up.f18de183.svg\";"],"sourceRoot":""}