(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,n){e.exports=n(107)},107:function(e,t,n){e.exports=n(1210)},112:function(e,t,n){},12:function(e,t,n){e.exports=n.p+"static/media/check.8ab01baf.svg"},1210:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),i=n(28),s=n.n(i),r=(n(112),n(3)),o=n(7),c=n(14),u=(n(22),n(19),n(9)),m={slotTypes:{unfeaturized:{},text:{},bool:{},list:{},float:{min_value:"int",max_value:"int"},categorical:{values:"list"}},autofillOptions:["Yes","No"]},p={entityTypes:["@sys.date-time","@sys.date","@sys.date-period","@sys.time","@sys.time-period","@sys.number","@sys.cardinal","@sys.ordinal","@sys.number-integer","@sys.number-sequence","@sys.flight-number","@sys.unit-area","@sys.unit-currency","@sys.unit-length","@sys.unit-speed","@sys.unit-volume","@sys.unit-weight","@sys.unit-information","@sys.percentage","@sys.temperature","@sys.duration","@sys.age","@sys.currency-name","@sys.unit-area-name","@sys.unit-length-name","@sys.unit-speed-name","@sys.unit-volume-name","@sys.unit-weight-name","@sys.unit-information-name","@sys.address","@sys.zip-code","@sys.geo-capital","@sys.geo-country","@sys.geo-country-code","@sys.geo-city","@sys.geo-state","@sys.place-attraction","@sys.airport","@sys.location","@sys.email","@sys.phone-number","@sys.person","@sys.music-artist","@sys.music-genre","@sys.color","@sys.language","@sys.any","@sys.url"]},g={entityTypes:["AMAZON.DATE","AMAZON.DURATION","AMAZON.FOUR_DIGIT_NUMBER","AMAZON.NUMBER","AMAZON.Ordinal","AMAZON.PhoneNumber","AMAZON.TIME","AMAZON.SearchQuery","AMAZON.Actor","AMAZON.Airline","AMAZON.Airport","AMAZON.Anaphor","AMAZON.Animal","AMAZON.Artist","AMAZON.Author","AMAZON.Book","AMAZON.City","AMAZON.Color","AMAZON.Corporation","AMAZON.Country","AMAZON.CreativeWorkType","AMAZON.DayOfWeek","AMAZON.FictionalCharacter","AMAZON.FirstName","AMAZON.Food","AMAZON.Genre","AMAZON.Language","AMAZON.Month","AMAZON.Movie","AMAZON.MusicAlbum","AMAZON.MusicGroup","AMAZON.Musician","AMAZON.MusicRecording","AMAZON.Person","AMAZON.RadioChannel","AMAZON.Region","AMAZON.RelativePosition","AMAZON.Room","AMAZON.Sport","AMAZON.StreetName","AMAZON.TVSeries","AMAZON.VideoGame","AMAZON.VisualModeTrigger"]};function f(e){return e.toLowerCase().replace(/[^a-z]/g,"_").replace("__","_")}var d=function(e){return e.replace(/([-_][a-z])/g,function(e){return e.toUpperCase().replace("-","").replace("_","")})},y=function(e){return e.replace(/[A-Z]/g,function(e){return"_".concat(e.toLowerCase())})};function h(){return((new Date).getTime()/1e3|0).toString(16)+"xxxxxxxxxxxxxxxx".replace(/[x]/g,function(){return(16*Math.random()|0).toString(16)}).toLowerCase()}function v(e){return e.split("/").slice(0,-1).join("/")}function E(e){if(Array.isArray(e)){var t={};return e.map(function(e){return t[e]=!0,null}),Object.keys(t)}return[]}function k(e,t){if(Array.isArray(e)){var n={},a=null;return e.map(function(e){return e&&(e[t]?n[e[t]]=e:a=e),null}),a?[a].concat(Object.values(n)):Object.values(n)}return[]}function b(e,t){t=t.sort(function(e,t){return e.start<t.start?-1:1});var n=0,a=e;return t.map(function(e){a=a.slice(0,e.start+n)+"{"+e.type+"}"+a.slice(e.end+n);var t=e.end-e.start-(e.type.length+2);return n-=t,null}),a}function S(e,t){if(e&&Array.isArray(t)){t=t.sort(function(e,t){return e.start<t.start?-1:1});var n=0,a=e;return t.map(function(e){var t="["+e.value+"]("+e.type+")";a=a.slice(0,e.start+n)+t+a.slice(e.end+n);var l=e.end-e.start-t.length;return n-=l,null}),a}return e}var A=n(8),O=n.n(A);function x(e,t){var n=parseInt(t.index);switch(t.type){case"append":return t.item?[].concat(Object(u.a)(e),[t.item]):e;case"prepend":return t.item?[t.item].concat(Object(u.a)(e)):e;case"insert":return t.item&&"number"===typeof n&&e.length>0?[].concat(Object(u.a)(e.slice(0,n)),[t.item],Object(u.a)(e.slice(n))):e;case"remove":return"number"===typeof n?[].concat(Object(u.a)(e.slice(0,n)),Object(u.a)(e.slice(n+1))):e;case"update":return t.item&&"number"===typeof n?[].concat(Object(u.a)(e.slice(0,n)),[t.item],Object(u.a)(e.slice(n+1))):e;case"replaceall":return"object"===typeof t.items?t.items:e;default:throw new Error("Invalid reduction in useDB")}}function I(e,t){var n=Object(a.useReducer)(x,[]),l=Object(r.a)(n,2),i=l[0],s=l[1],o=O.a.createInstance({name:e||"localstoragemanager",storeName:t||"data"});function c(e){if(e&&e.id)return e.id;throw new Error("Missing ID value in getId")}function u(e,t){for(var n in i)if(i[n]&&i[n][e]===t)return n;return null}return{getId:c,loadAll:function(){o.keys().then(function(e){var t=[];e.map(function(e){return t.push(new Promise(function(t,n){o.getItem(e).then(function(e){t(e)})})),null}),Promise.all(t).then(function(e){e=e.sort(function(e,t){return e.updated_date<t.updated_date?1:-1}),s({type:"replaceall",items:e})})})},saveItem:function(e,t){if(e){console.log(["SAVEDB",e,t]);var n=!1;if(e.id||(n=!0,e.id=h()),o.setItem(e.id,e),n)s({type:"prepend",item:e});else if(i){var a=null;i.map(function(t,n){return t.id===e.id&&(a=n),null}),s(null!=a?{type:"update",item:e,index:a}:{type:"prepend",item:e})}}},deleteItem:function(e){var t=function(e){if(i&&i[e]&&i[e].id)return i[e].id;throw new Error("Missing ID value in getIdForIndex")}(e);t&&o.removeItem(t).then(function(){s({type:"remove",index:e})})},items:i,setItems:function(e){o.clear().then(function(){s({type:"replaceall",items:e}),e&&e.map(function(e){return o.setItem(c(e),e),null})})},findKeyBy:u,findBy:function(e,t){var n=u(e,t);return n?i[n]:null},filter:function(e){var t=[];return e&&i.map(function(n,a){return e(n)&&t.push(n),null}),t}}}function j(){var e=O.a.createInstance({name:"nlutool",storeName:"examples"}),t=O.a.createInstance({name:"nlutool",storeName:"lists"}),n=O.a.createInstance({name:"nlutool",storeName:"utterances"}),a=O.a.createInstance({name:"nlutool",storeName:"regexps"}),l=O.a.createInstance({name:"nlutool",storeName:"skills"});return{mergeIntents:function(t,n){return new Promise(function(a,l){console.log(["import examples",t,typeof t,n]),t?e.getItem("alldata").then(function(l){var i={};l||(l=[]),l.map(function(e){var t=JSON.stringify({entities:e.entities?e.entities:[],intent:e.intent?e.intent:"",example:e.example?e.example:""});return e&&e.example&&e.example.trim()&&(i[t]=e),null});var s=[],r=[];t.map(function(e){if(e&&e.example&&e.example.trim()){var t=JSON.stringify({entities:e.entities?e.entities:[],intent:e.intent?e.intent:"",example:e.example?e.example:""});e.id=e.id?e.id:h(),i[t]?r.push(e):(s.push(e),n&&(e.skills=e.skills?E(e.skills.push(n)):[n]))}return null});var o=[];r.length>0?(r.map(function(e){var t=JSON.stringify({entities:e.entities?e.entities:[],intent:e.intent?e.intent:"",example:e.example?e.example:""});return n&&(e.skills=e.skills?E(e.skills.push(n)):[n]),i[t]=e,null}),o=[].concat(s,Object.values(i))):o=[].concat(s,l),console.log("IMPORT MERGE",o),e.setItem("alldata",o).then(function(){a({updated:r.length,created:s.length})})}):l({error:"Missing import data"})})},mergeEntities:function(e,n){return console.log(["merge entities",e,n]),new Promise(function(a,l){e?t.getItem("alldata").then(function(l){var i={};l||(l=[]),l.map(function(e){return e&&e.value&&e.value.trim().length>0&&(i[e.value]=e),null});var s=0,r=0;e.map(function(e,t){var a=e;if(a.id=a.id?a.id:h(),i[e.value]){r+=1,a.tags=a.tags?a.tags:[],n&&n.trim().length>0&&a.tags.push(n.trim());var l=i[e.value].synonym?i[e.value].synonym.split("\n"):[],o=a.synonym?a.synonym.split("\n"):[];a.synonym=E([].concat(l,o)).sort().join("\n"),a.tags=E(a.tags).sort(),i[a.value]=a}else s+=1,a={id:h(),value:a.value,synonym:a.synonym?a.synonym:"",tags:a.tags?a.tags:[]},n&&n.trim().length>0&&a.tags.push(n.trim()),a.tags=E(a.tags).sort(),i[a.value]=a;return null}),t.setItem("alldata",Object.values(i)).then(function(){a({updated:r,created:s})})}):l({error:"Failed import"})})},mergeUtterances:function(e,t){return console.log(["merge utterances",e,t]),new Promise(function(a,l){e?n.getItem("alldata").then(function(l){var i={};l||(l=[]),l.map(function(e){return e&&e.value&&e.value.trim().length>0&&(i[e.value]=e),null});var s=0,r=0;e.map(function(e,n){var a=e;if(a.id=a.id?a.id:h(),i[e.value]){r+=1,a.tags=a.tags?a.tags:[];var l=i[e.value].synonym?i[e.value].synonym.split("\n"):[],o=a.synonym?a.synonym.split("\n"):[];a.synonym=E([].concat(l,o)).sort().join("\n"),t&&t.trim().length>0&&a.tags.push(t.trim()),a.tags=E(a.tags).sort(),i[a.value]=a}else s+=1,a={id:h(),value:a.value,synonym:a.synonym?a.synonym:"",tags:[]},t&&t.trim().length>0&&a.tags.push(t.trim()),a.tags=E(a.tags).sort(),i[a.value]=a;return null}),n.setItem("alldata",Object.values(i)).then(function(){a({updated:r,created:s})})}):l({error:"Failed import"})})},mergeRegexps:function(e,t){return console.log(["merge regexps",e,t]),new Promise(function(n,l){e?a.getItem("alldata").then(function(l){var i={};l||(l=[]),l.map(function(e){return e&&e.value&&e.value.trim().length>0&&(i[e.value]=e),null});var s=0,r=0;e.map(function(e,n){var a=e;return a.id=a.id?a.id:h(),i[e.value]?(r+=1,a.tags=a.tags?a.tags:[],t&&t.trim().length>0&&a.tags.push(t.trim()),a.tags=E(a.tags).sort(),i[a.value]=a):(s+=1,a={id:h(),value:a.value,synonym:a.synonym?a.synonym:"",tags:[]},t&&t.trim().length>0&&a.tags.push(t.trim()),a.tags=E(a.tags).sort(),i[a.value]=a),null}),console.log("IMPORT MERGE reg",i),a.setItem("alldata",Object.values(i)).then(function(){n({updated:r,created:s})})}):l({error:"Failed import"})})},mergeSkill:function(e){return console.log(["merge skill",e]),new Promise(function(t,n){e&&e.title?l.getItem(e.title).then(function(n){n?(console.log(["found skill",e]),l.setItem(e.title,e).then(function(){t({})})):(console.log(["create skill",e]),l.setItem(e.title,e).then(function(){t({})}))}):n({error:"Failed import"})})}}}var T=n(33),L=n.n(T),w=(n(119),n(120));function C(e){return new Promise(function(t,n){console.log(["DETECT FILE TYPE",e]);try{var a=JSON.parse(e.data);a&&a.rasa_nlu_data&&a.rasa_nlu_data.common_examples?t({type:"rasa.json"}):a&&a.title&&a.intents&&a.entities&&a.id?t({type:"opennlu.skill"}):a&&a.invocation&&a.intents?t({type:"jovo.json"}):a&&a.utterances?t({type:"opennlu.utterances"}):a&&a.lists?t({type:"opennlu.lists"}):a&&a.regexps?t({type:"opennlu.regexps"}):t({type:"json"})}catch(l){(new L.a).loadAsync(e.data).then(function(e){var n={};e.forEach(function(e,t){console.log(t.name),-1!==t.name.indexOf("/domain.yml")&&(n.rasa_domain=!0),-1!==t.name.indexOf("/data/nlu.md")&&(n.rasa_data=!0),-1!==t.name.indexOf("/project.js")&&(n.jovo_project=!0),-1!==t.name.indexOf("/models/en-US.js")&&(n.jovo_lang=!0),-1!==t.name.indexOf("/__init__.py")&&(n.mycroft_index=!0),-1!==t.name.indexOf("/vocab")&&(n.mycroft_vocab=!0),console.log(["FOUND",n])}),console.log(["FOUND",n]),n.rasa_domain&&n.rasa_data?t({type:"rasa.zip"}):n.rasa_domain&&n.rasa_data?t({type:"jovo.zip"}):n.mycroft_index&&n.mycroft_vocab?t({type:"mycroft.zip"}):n.jovo_project&&n.jovo_lang?t({type:"jovo.zip"}):t()},function(n){e.data&&-1!==e.data.indexOf("## intent:")?t({type:"rasa.markdown"}):t({type:"text"})})}})}function N(e,t){return new Promise(function(n,a){(new L.a).loadAsync(e).then(function(e){var a=[];e.forEach(function(n,l){var i=!1;for(var s in t){var r=t[s];-1!==l.name.indexOf(r)&&(i=!0)}i&&a.push(new Promise(function(t,a){e.file(n).async("string").then(function(e){t({path:l.name,data:e})})}).catch(function(e){}))}),Promise.all(a).then(function(e){n(e)})})})}function F(e){var t=[];if(e){var n=e.split("\n").join("::::").split(".").join("::::").split("::::");for(var a in n)a.trim().length>0&&t.push(n[a])}return t}function _(e,t){var n=F(e),a=[];return n.map(function(e,n){return e&&e.trim().length>0&&a.push({id:h(),example:e,intent:t||"",entities:[],tags:[]}),null}),a.sort(z)}function M(e,t){var n=F(e),a=[];return n.map(function(e,n){if(e&&e.trim().length>0){var l=P(e.trim());l[1].map(function(e){return a.push({id:h(),value:e,synonym:l[0],tags:t?[t]:[]}),null})}return null}),a.sort(z)}function R(e,t){var n=F(e),a=[];return n.map(function(e,n){return e&&e.trim().length>0&&a.push({id:h(),value:e,synonym:"",tags:t?[t]:[]}),null}),a.sort(z)}function V(e){return e?e.replace(/[^0-9a-z ,]/gi,""):""}function P(e){if(e){var t=e.split("___");return t.length>1?[t[0],t.slice(1)]:["",[e]]}return["",[]]}function D(e,t){return e.value<t.value?-1:1}function z(e,t){return e.example<t.example?-1:1}function W(e,t){console.log(["GEN MYC",e]);var n=[];return e&&(console.log(["GEN MYC d",e]),e.split("\n").map(function(e,i){(function e(t){var n=[];var i=w("(",")",t);if(i&&i.body){var s=null,r=w("(",")",i.body);s=l(s=r?e(i.body):i.body.split("|"));var o=l(a(a([i.pre],s),[i.post]));o.map(function(t){n=[].concat(n,e(t))})}else n=t.split("|");return l(n)})(e).map(function(e){var a=function(e){var t=[],n=e,a=w("{","}",n),l=20;for(;a&&l;){var i={value:a.body,start:a.start,end:a.end,type:a.body};t.push(i),n=a.pre+a.body+a.post,a=w("{","}",n),l--}return{example:n,entities:t}}(e);a.intent=t,n.push(a)})})),console.log(["MY IMP COMPL",n]),n;function a(e,t){var n=[];return e.map(function(e){t.map(function(t){n.push(e+t)})}),n}function l(e){if(Array.isArray(e)){var t={};return e.map(function(e){return t[e]=!0,null}),Object.keys(t)}return[]}}function U(e,t){var n=[],a={},l={},i={};return e.data&&e.data.split("##").map(function(e,s){var r=e.split("\n"),o=r[0].trim(),c=r.length>1?r.slice(1):[];if(o.startsWith("regex")){var u=o.slice(6).trim();for(var m in c){var p=c[m].slice(1).trim();u&&p&&(a[u]=Array.isArray(a[u])?a[u]:[],a[u].push(p))}}else if(o.startsWith("synonym")){var g=o.slice(8).trim();for(var m in c){p=c[m].slice(1).trim();g&&p&&(l[g]=Array.isArray(l[g])?l[g]:[],l[g].push(p))}}else if(o.startsWith("lookup")){if(t){var f=o.slice(7).trim();for(var m in c){var d=c[m].trim();if(d&&t[d])t[d].split("\n").map(function(e){e&&e.trim()&&(i[e]?i[e].tags=i[e].tags?i[e].tags:[]:i[e]={tags:[f]})})}}}else if(o.startsWith("intent")){var y=o.slice(7);for(var m in c){var h=c[m].slice(1).trim();e={intent:y,example:h};if(h.length>0){console.log(h);for(var v=h,E=h,k=w("[","]",v),b=10;b>0&&k&&void 0!==k&&"object"===typeof k;){var S={};b--,v=k.post,S.value=k.body,S.start=k.start,S.end=k.end;var A=w("(",")",k.post),O=w("{","}",k.post);if(A&&A.body&&O&&O.body)if(O.start<A.start)try{var x=JSON.parse("{"+O.body+"}");S.type=x.entityTypes,x.synonym&&x.synonym.length>0&&(l[x.synonym]=l[x.synonym]?l[x.synonym]:[],l[x.synonym].push(S.value),S.synonym=x.synonym)}catch(I){}else{x=A.body.split(":");S.type=x[0],x.length>1&&x[1].length>0&&(l[x[1]]=l[x[1]]?l[x[1]]:[],l[x[1]].push(S.value),S.synonym=x[1])}else if(O&&O.body)try{x=JSON.parse("{"+O.body+"}");S.type=x.entityTypes,x.synonym&&x.synonym.length>0&&(l[x.synonym]=l[x.synonym]?l[x.synonym]:[],l[x.synonym].push(S.value),S.synonym=x.synonym)}catch(I){}else{if(!A||!A.body)throw new Error("Invalid bracket structure at line "+s);x=A.body.split(":");S.type=x[0],x.length>1&&x[1].length>0&&(l[x[1]]=l[x[1]]?l[x[1]]:[],l[x[1]].push(S.value),S.synonym=x[1]),E=k.pre+S.value+k.post.slice(0,A.start)+k.post.slice(A.end+1)}console.log(["ENTITY",S,E]),e.entities=Array.isArray(e.entities)?e.entities:[],e.entities.push(S),k=w("[","]",v)}e.example=E,n.push(e),console.log(["INTENT",e])}}}}),console.log(["rasa json IMPORT",n,a,l,i]),{intents:n}}function J(e){var t=[];try{var n=JSON.parse(e.data);if(n&&n.rasa_nlu_data&&n.rasa_nlu_data.common_examples)for(var a in n.rasa_nlu_data.common_examples){var l=n.rasa_nlu_data.common_examples[a],i=l.entities&&l.entities.map(function(e,t){return{type:e.entity,value:e.value,start:e.start,end:e.end}});l.text&&l.text.trim().length>0&&t.push({id:h(),example:l.text,intent:l.intent,entities:i,tags:[]})}console.log(["rasa json IMPORT",t])}catch(s){}return{intents:t}}function K(e){var t=[];try{var n=JSON.parse(e.data);console.log(["JOVO IMPORT",n]),n&&n.invocation&&n.intents&&(n.intents.map(function(e){return e&&e.phrases&&e.phrases.map(function(n){if(console.log(["JOVO IMPORT",n]),n&&n.trim().length>0){var a=[];if(e.inputs)for(var l in e.inputs){var i=e.inputs[l],s=n.indexOf("{"+i.name+"}");-1!==s&&(n=n.replace("{"+i.name+"}",i.name));var r={type:i.name,value:i.name,start:s,end:s+i.name.length};return a.push(r),null}console.log(["JOVO IMPORT pushg item",e.name]),t.push({id:h(),example:n.trim(),intent:e.name,entities:a,tags:[]}),console.log(["JOVO IMPORT pushed item",JSON.parse(JSON.stringify(t))])}return null}),null}),console.log(["JOVO done IMPORT",t]))}catch(a){}return{intents:t}}function B(e){var t=j(),n=t.mergeEntities,a=t.mergeIntents,l=t.mergeUtterances,i=t.mergeRegexps,s=t.mergeSkill,r={unzip:N,splitSentences:F,generateIntentSplits:_,generateEntitySplits:M,generateUtteranceSplits:R,cleanListItem:V,extractSynonym:P,sortListSplits:D,sortExampleSplits:z,detectFileType:C,generateSplitsFromJovoJson:K,generateSplitsFromRasaJson:J,generateSplitsFromRasaMd:U,generateIntentSplitsForMycroft:W},o=r.unzip,u=r.generateIntentSplits,m=r.generateEntitySplits,p=r.generateUtteranceSplits,g=r.generateIntentSplitsForMycroft,f=r.detectFileType,d=r.generateSplitsFromJovoJson,y=r.generateSplitsFromRasaJson,h=r.generateSplitsFromRasaMd,v=Object(c.f)();function E(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return console.log(["text",e.data]),u(e.data,t)}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return console.log(["text",e.data]),m(e.data,t)}return{importIntents:function(e){return new Promise(function(t,n){if(console.log(["import intents",e]),e)switch(e.fileType){case"text":t({intents:E(e,e.title)});break;case"json":(function(e){return new Promise(function(t,n){console.log(["json",e.data]),t([])})})(e).then(function(e){t({intents:e})});break;default:throw new Error("Invalid file type for import")}n("Failed to import")})},importUtterances:function(e){return new Promise(function(t,n){if(console.log(["import utterances",e]),e)switch(e.fileType){case"text":t(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return console.log(["text",e.data]),{utterances:p(e.data,t)}}(e,e.title));break;case"json":(function(e){return new Promise(function(t,n){console.log(["json",e.data]),t([])})})(e).then(function(e){t({utterances:e})});break;default:throw new Error("Invalid file type for import")}n("Failed to import")})},importEntities:function(e){return new Promise(function(t,n){if(console.log(["import entities",e]),e)switch(e.fileType){case"text":t({entities:k(e,e.title)});break;case"json":(function(e){return new Promise(function(t,n){console.log(["json",e.data]),t([])})})(e).then(function(e){t({entities:e})});break;default:throw new Error("Invalid file type for import")}n("Failed to import")})},importAll:function(t){return new Promise(function(r,c){if(console.log(["import examples",t]),t)switch(t.fileType){case"opennlu.skill":(function(e){return new Promise(function(t,r){var o={};try{if(o=JSON.parse(e.data),console.log(["IMPSKILL",o]),o.title){if(o.intents){var c=[];Object.keys(o.intents).map(function(e){o.intents[e]&&o.intents[e].map(function(t){t.intent=e,c.push(t)})}),a(c,o.title)}if(o.entitiesData){var u=[];Object.keys(o.entitiesData).map(function(e){o.entitiesData[e]&&o.entitiesData[e].map(function(t){t.tags=Array.isArray(t.tags)?t.tags:[],t.tags.push(e),u.push(t)})}),n(u)}if(o.utterancesData){var m=[];Object.values(o.utterancesData).map(function(e){m.push(e)}),l(m)}if(o.regexps){var p=o.regexps.map(function(e){return e?{value:e.name,synonym:e.synonym}:{}});i(p)}s(o)}}catch(g){}t(o)})})(t).then(function(t){t.title&&t.intents&&Object.keys(t.intents).length>0?setTimeout(function(){v.push("/skills/skill/"+t.title)},500):e&&e("Failed to load skill. Missing title or intents.",3e3),e&&e("Imported",2e3)});break;case"mycroft.zip":(function(e){return new Promise(function(t,n){o(e.data,[".intent",".dialog",".entity"]).then(function(e){var n={},a=[],l=[],i=[];e&&e.map(function(e){if(e&&e.path&&-1!==e.path.toLowerCase().indexOf("/en-us/")){var t=e.path.split("/"),n=function(e){if(e&&e.split){var t=e.split("/"),n=t[t.length-1],a=n.slice(0,n.length-7);return a}return"_"}(e.path);if(e.path.endsWith(".intent")&&e.data){console.log(e.path,e.data,u(e.data,n));var s=t.length>1?t[t.length-1].replace(".intent",""):"";l=[].concat(g(e.data,s),l)}else if(e.path.endsWith(".dialog")){console.log(e.path,e.data,p(e.data,n));var r=t.length>1?t[t.length-1].replace(".dialog",""):"";a=[].concat(p(e.data,r),a)}else if(e.path.endsWith(".entity")){console.log(e.path,e.data,m(e.data,n));var o=t.length>1?t[t.length-1].replace(".entity",""):"";i=[].concat(m(e.data,o),i)}}}),n.utterances=a,n.intents=l,n.entities=i,console.log(["MYIMNPO",n]),t(n)})})})(t).then(function(e){r(e)});break;case"rasa.json":var f=y(t);r(f);break;case"rasa.markdown":var E=h(t);r(E);break;case"jovo.json":var k=d(t);r(k);break;case"jovo.zip":(function(e){return new Promise(function(t,n){o(e.data,["/project.js","/models/*.js"]).then(function(e){console.log(["jovo",e]),t(e)})})})(t).then(function(e){r(e)});break;case"rasa.zip":(function(e){return new Promise(function(t,n){o(e.data,["/domain.yml","nlu.md","nlu.json"]).then(function(e){t(e)})})})(t).then(function(e){r(e)});break;default:c({error:"Invalid file type for import"})}else c({error:"Failed to import"})})},detectFileType:f}}var Z=n(39),G=n(88),H=n(1227),Y=n(1223),X=n(1216),Q=n(1217),q=n(89),$=n.n(q),ee=function(e){return l.a.createElement(Y.a,{as:X.a},l.a.createElement(Y.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(G.a,{size:"sm"},"Tag"," "),l.a.createElement(Y.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(t){t.preventDefault(),e.tagAll(t.target.value)}},l.a.createElement(Q.a,null,l.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){e.setTagAllValue(t.target.value)},value:e.tagAllValue}),l.a.createElement(G.a,{variant:"success",onClick:function(t){e.tagAll(e.tagAllValue)}},"Add"))),e.lookups.tagLookups&&e.lookups.tagLookups.sort().map(function(t,n){return l.a.createElement(Y.a.Item,{key:n,value:t},l.a.createElement(G.a,{variant:"success",onClick:function(n){e.setTagAllValue(t),e.tagAll(t)}},"Add ",t),l.a.createElement(G.a,{variant:"danger",onClick:function(n){e.untagAll(t)},style:{marginLeft:"0.5em"}},"Remove"))})))},te=function(e){return l.a.createElement(Y.a,{as:X.a},l.a.createElement(Y.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(G.a,{size:"sm"},"Intent"," "),l.a.createElement(Y.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(t){t.preventDefault(),e.intentAll(t.target.value)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){e.setIntentAllValue(t.target.value)},value:e.intentAllValue}))),e.lookups.intentLookups&&e.lookups.intentLookups.sort().map(function(t,n){return l.a.createElement(Y.a.Item,{key:n,value:t,onClick:function(n){e.setIntentAllValue(t),e.intentAll(t)}},t)})))},ne=function(e){return l.a.createElement(Y.a,{as:X.a},l.a.createElement(Y.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(G.a,{size:"sm"},"Skill"," "),l.a.createElement(Y.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(t){t.preventDefault(),e.skillSetAll(t.target.value)}},l.a.createElement(Q.a,null,l.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){e.setSkillAllValue(t.target.value)},value:e.skillAllValue}),l.a.createElement(G.a,{variant:"success",onClick:function(t){e.skillSetAll(e.tagAllValue)}},"Add"))),e.lookups.skillLookups&&e.lookups.skillLookups.sort().map(function(t,n){return l.a.createElement(Y.a.Item,{key:n,value:t},l.a.createElement(G.a,{variant:"success",onClick:function(n){e.setSkillAllValue(t),e.skillSetAll(t)}},"Add to ",t),l.a.createElement(G.a,{variant:"danger",onClick:function(n){e.unskillAll(t)},style:{marginLeft:"0.5em"}},"Remove"))})))},ae=n(90),le=n.n(ae);function ie(e){return l.a.createElement("span",{style:{float:"left",fontWeight:"bold"}},"\xa0",e.filteredItems.length,"/",e.items.length," matches ")}function se(e){return l.a.createElement("div",null,l.a.createElement(o.b,{style:{marginRight:"1em"},to:"/help"},l.a.createElement(G.a,null,"Home")),l.a.createElement(o.b,{style:{marginRight:"1em"},to:"/helpimport"},l.a.createElement(G.a,null,"Import")),l.a.createElement(o.b,{style:{marginRight:"1em"},to:"/helpexport"},l.a.createElement(G.a,null,"Export")),l.a.createElement(o.b,{style:{marginRight:"1em"},to:"/helpabout"},l.a.createElement(G.a,null,"About")))}function re(e){return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement(se,null),l.a.createElement("h1",null,"NLU tool"),l.a.createElement("img",{src:le.a,style:{width:"80%",height:"15em"},alt:"Help Overview"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,"This tool helps voice developers build vocabularies for their applications by providing ",l.a.createElement("b",null,"import and export of various NLU training data formats"),", and a ",l.a.createElement("b",null,"searchable database of community submitted, open licensed skills.")),l.a.createElement("hr",null),l.a.createElement("p",null,l.a.createElement(o.b,{to:"/search"},l.a.createElement(G.a,null,"Search "))," the community database of NLU example records."),l.a.createElement("p",null,l.a.createElement(o.b,{to:"/sources"},l.a.createElement(G.a,null,"Sources"))," to edit and import skills, pasted text or uploaded files."),l.a.createElement("p",null,l.a.createElement(o.b,{to:"/examples"},l.a.createElement(G.a,null,"Organise"))," your examples using tags and cleanup untagged examples."),l.a.createElement("p",null,l.a.createElement(o.b,{to:"/skills"},l.a.createElement(G.a,null,"Skills"))," to add platform metadata for export in various training formats or publishing to the community database."),l.a.createElement("hr",null),l.a.createElement("h3",null,"Features"),l.a.createElement("ul",null,l.a.createElement("li",null,"Search for open licenced training data submitted by the community"),l.a.createElement("li",null,"Import training data from text files, RASA , JOVO (Alexa, Google), Mycroft and native JSON."),l.a.createElement("li",null,"Edit training data and tag entities in intent examples"),l.a.createElement("li",null,"Filtering, tagging, multiple selection and bulk operations to quickly collect training data into an exportable skill"),l.a.createElement("li",null,"Virtual rendering with react-window is used to allow fast rendering of lists of intents and entities with many thousands of values"),l.a.createElement("li",null,"Export training data suitable for RASA, JOVO and Mycroft"),l.a.createElement("li",null,"Publish your skill to the community repository under an open source license")),l.a.createElement("ul",null,l.a.createElement("li",null,"This tool is a Progressive Web Application. Most features work without the Internet."),l.a.createElement("li",null,"MIT Open Source licensed code at ",l.a.createElement("a",{target:"_new",href:"https://github.com/syntithenai/opennludata"},"Github")),l.a.createElement("li",null,"Cross platform nodejs server"),l.a.createElement("li",null,"Published skills are committed to Github to ensure long term availability of collected data."),l.a.createElement("li",null,"To ensure ongoing availability, the web pages are hosted with github pages and the search interface relies on static data generated during publishing so a database/backend server is only required when publishing)")),l.a.createElement("div",null,"When the Internet is available, ",l.a.createElement("b",null,"this site uses Google Analytics to measure engagement and improve future versions.")))}function oe(e){return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement(se,null),l.a.createElement("h1",null,"Importing Data"),l.a.createElement("div",null,"This tool can import files a variety of file formats and allows you to cherry pick intents, entities and utterances.",l.a.createElement("br",null),"You can use zip files to to upload and import many files that make up a skill for Mycroft, RASA or JOVO",l.a.createElement("br",null),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("h3",null,"Text")),l.a.createElement("li",null,l.a.createElement("h3",null,"JSON")),l.a.createElement("li",null,l.a.createElement("h3",null,"OpenNlu JSON")),l.a.createElement("li",null,l.a.createElement("h3",null,"RASA")),l.a.createElement("li",null,l.a.createElement("h3",null,"JOVO")),l.a.createElement("li",null,l.a.createElement("h3",null,"Mycroft")))),l.a.createElement("hr",null))}function ce(e){return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement(se,null),l.a.createElement("h1",null,"About"),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("h3",null,"Bugs/Feedback"),"Please share any feedback on the ",l.a.createElement("a",{target:"_new",href:"https://github.com/syntithenai/opennludata/issues"},"Github Issues Page")),l.a.createElement("br",null),l.a.createElement("div",null,"The ",l.a.createElement("a",{target:"_new",href:"https://github.com/syntithenai/opennludata"},"source code")," for this tool is available under an MIT Open Source Licence. "),l.a.createElement("hr",null),l.a.createElement("div",null,"Icons from  The Noun Project and others."),l.a.createElement("ul",null,l.a.createElement("li",null,"Man Singing by Gan Khoon Lay from  ",l.a.createElement("a",{href:"https://thenounproject.com/term/man-singing/642288/",target:"_new"},"The Noun Project")),l.a.createElement("li",null,"Head by hunotika from ",l.a.createElement("a",{href:"https://thenounproject.com/term/head/184237/",target:"_new"},"The Noun Project"))),l.a.createElement("hr",null),l.a.createElement("div",null,"Using many open source libraries including"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("a",{target:"_new",href:"https://www.npmjs.com/package/create-node-app"},"create-node-app")," "),l.a.createElement("li",null,l.a.createElement("a",{target:"_new",href:"https://github.com/syntithenai/react-express-oauth-login-system"},"react-express-oauth-login-system")," for oauth based login with support for social providers"),l.a.createElement("li",null,l.a.createElement("a",{target:"_new",href:"https://github.com/localForage/localForage"},"localForage")," for cross platform local persistence."),l.a.createElement("li",null,l.a.createElement("a",{target:"_new",href:"https://github.com/florianholzapfel/express-restify-mongoose"},"express-restify-mongoose")," to simplify API development."),l.a.createElement("li",null,l.a.createElement("a",{target:"_new",href:"https://github.com/bvaughn/react-window"},"react-window")," for virtual rendering, allowing for lists with many thousands of elements."),l.a.createElement("li",null,l.a.createElement("a",{target:"_new",href:"https://github.com/josdejong/jsoneditor"},"JSON editor")," for editing uploaded sources."),l.a.createElement("li",null,"react, bootstrap, express, mongodb and mongoose")),l.a.createElement("hr",null))}function ue(e){return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement(se,null),l.a.createElement("h1",null,"Exporting"),l.a.createElement("div",null,"This tool can currently export to a number of formats including",l.a.createElement("ul",null,l.a.createElement("li",null,"Native JSON format"),l.a.createElement("li",null,"Mycroft intents and entities for Padatious NLU"),l.a.createElement("li",null,"RASA training data"),l.a.createElement("li",null,"JOVO model files"))))}function me(e){return l.a.createElement("span",null,l.a.createElement(o.b,{to:e.match.url+"/text",style:{float:"right"}},l.a.createElement(G.a,null,"Paste Text")),l.a.createElement(pe,e))}function pe(e){return l.a.createElement("form",{onSubmit:function(e){e.preventDefault()},style:{float:"right"}},l.a.createElement($.a,{multiple:!0,as:"binary",id:"my-file-input",onChange:e.handleFileSelection},l.a.createElement(G.a,{style:{marginRight:"0.5em"}},"Select files")))}function ge(e){return l.a.createElement(a.Fragment,null,l.a.createElement("span",null,"With ",e.lookups.selectedTally," selected\xa0"),l.a.createElement(ne,{skillSetAll:e.skillSetAll,skillAllValue:e.skillAllValue,setSkillAllValue:e.setSkillAllValue,lookups:e.lookups,untagAll:e.untagAll,unskillAll:e.unskillAll}),l.a.createElement(te,{intentAll:e.intentAll,intentAllValue:e.intentAllValue,setIntentAllValue:e.setIntentAllValue,lookups:e.lookups,untagAll:e.untagAll,unskillAll:e.unskillAll}),l.a.createElement(ee,{tagAll:e.tagAll,tagAllValue:e.tagAllValue,setTagAllValue:e.setTagAllValue,lookups:e.lookups,untagAll:e.untagAll,unskillAll:e.unskillAll}))}var fe=n(91),de=(n(126),n(93)),ye=n.n(de);n(127),n(129);function he(e){var t=Object(a.useState)(e.item&&e.item.title?e.item.title:""),n=Object(r.a)(t,2),i=n[0],s=n[1],c=Object(a.useState)(e.item&&e.item.data?e.item.data:""),u=Object(r.a)(c,2),m=u[0],p=u[1],g=Object(a.useState)(!1),f=Object(r.a)(g,2),d=f[0],y=f[1],E=Object(a.useState)([]),k=Object(r.a)(E,2),b=k[0],S=k[1],A=Object(a.useState)("json"),O=Object(r.a)(A,2),x=O[0],I=O[1],j=Object(a.useState)(["json","text"]),T=Object(r.a)(j,2),L=T[0],w=T[1],C=e.match.params.itemId?e.match.params.itemId:h(),N=(0,e.findKeyBy)("id",C);Object(a.useEffect)(function(){try{if("["===m[0]&&"]"===m[m.length-1]||"{"===m[0]&&"}"===m[m.length-1]){var e=JSON.parse(m);S(e),y(!0),w(["json","text"]),I("json")}else y(!1),w(["text"]),I("text")}catch(t){y(!1),w(["text"]),I("text")}},[m]);var F=v(e.match.url),_=e.match.url.split("/");"text"!==_[_.length-1]&&(F=v(v(e.match.url)));var M=L.map(function(e,t){return l.a.createElement(Y.a.Item,{key:t,value:e,onClick:function(t){I(e)}},e)});return l.a.createElement("div",{style:{minHeight:"60em"}},l.a.createElement(Y.a,{variant:"info",as:X.a},l.a.createElement(Y.a.Toggle,{variant:"info",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(G.a,{variant:"info",size:"sm"},l.a.createElement("b",null,x)),l.a.createElement(Y.a.Menu,null,M)),l.a.createElement("span",{style:{float:"right"}},m&&i&&l.a.createElement(o.b,{to:F},l.a.createElement(G.a,{onClick:function(t){e.saveItem({id:C,title:i,data:m},N)},variant:"success"},"Save")),!(m&&i)&&l.a.createElement(G.a,{variant:"secondary"},"Save"),l.a.createElement(o.b,{to:F},l.a.createElement(G.a,{variant:"danger"},"Cancel"))),l.a.createElement("label",null,"\xa0Title ",l.a.createElement("input",{size:60,type:"text",onChange:function(e){s(e.target.value)},value:i})),(!d||"text"===x)&&l.a.createElement("textarea",{style:{marginLeft:"0.2em",height:"100%",minHeight:"60em",width:"98%"},onChange:function(e){p(e.target.value)},value:m}),d&&"json"===x&&l.a.createElement("div",{style:{marginLeft:"0.2em",height:"100%",minHeight:"60em",width:"98%"}},l.a.createElement(fe.a,{value:b,theme:"ace/theme/github",ace:ye.a,history:!0,mode:"code",allowedModes:["tree","code"],onChange:function(e){p(JSON.stringify(e))}})))}function ve(e){return l.a.createElement("div",null,l.a.createElement(me,e),l.a.createElement("h1",null,"Sources"),l.a.createElement(Ee,e))}function Ee(e){var t=O.a.createInstance({name:"nlutool",storeName:"importing"}),n=e.items,a=function(n){t.setItem("alldata",n).then(function(){e.history.push("/importreview")})},i=function(t){t.error?e.setPageMessage(t.error,2e3):e.setPageMessage(t.toString(),2e3)};if(n){var s=Object.values(n).map(function(t,n){return l.a.createElement(H.a.Item,{key:n},l.a.createElement(G.a,{style:{float:"right",marginLeft:"0.5em"},variant:"danger",onClick:function(a){window.confirm("Really delete source "+t.title+"-"+n)&&e.deleteItem(n)}},"Delete"),t.fileType.endsWith(".zip")&&l.a.createElement(G.a,{style:{float:"right",marginLeft:"0.5em"},onClick:function(){!function(e){(new L.a).loadAsync(e.data).then(function(t){t.generateAsync({type:"blob"}).then(function(t){Object(Z.saveAs)(t,e.title)})})}(t)}},"Download"),!t.fileType.endsWith(".zip")&&l.a.createElement(G.a,{style:{float:"right",marginLeft:"0.5em"},onClick:function(){Object(Z.saveAs)(new Blob([t.data],{type:"application/"+t.fileType}),t.title+"."+t.fileType)}},"Download"),!t.fileType.endsWith(".zip")&&l.a.createElement(o.b,{to:e.match.url+"/text/"+t.id},l.a.createElement(G.a,{style:{float:"right",marginLeft:"0.5em"}},"Edit")),"text"===t.fileType&&l.a.createElement("div",{className:"textimportbuttons"},l.a.createElement(G.a,{style:{float:"right",marginLeft:"0.5em"},variant:"success",onClick:function(n){e.importFunctions.importIntents(t).then(a).catch(i)}},"Import Intents"),l.a.createElement(G.a,{style:{float:"right",marginLeft:"0.5em"},variant:"success",onClick:function(n){e.importFunctions.importEntities(t).then(a).catch(i)}},"Import Entities"),l.a.createElement(G.a,{style:{float:"right",marginLeft:"0.5em"},variant:"success",onClick:function(n){e.importFunctions.importUtterances(t).then(a).catch(i)}},"Import Utterances")),"text"!==t.fileType&&l.a.createElement(l.a.Fragment,null,l.a.createElement(G.a,{style:{float:"right",marginLeft:"0.5em"},variant:"success",onClick:function(n){e.importFunctions.importAll(t).then(a).catch(i)}},"Import")),l.a.createElement("span",{style:{width:"90%"}}," ",t.fileType&&l.a.createElement(G.a,null,t.fileType),"\xa0\xa0\xa0",t.title))});return l.a.createElement(H.a,null,s)}return null}function ke(e){var t=B(e.setPageMessage),n=I("nlutool","sources"),i=n.loadAll,s=n.saveItem,o=n.deleteItem,u=n.items,m=n.findKeyBy,p=n.findBy;function g(n,a){n.preventDefault(),a&&a.forEach(function(n){var a=Object(r.a)(n,2),l=a[0],i=a[1];console.log(["upl result",l,i,l.target.result]);var o={id:null,data:l.target.result,title:i.name};t.detectFileType(o).then(function(t){t&&t.type?(o.fileType=t.type,o.created_date=(new Date).getTime(),console.log(["SET ITEM TYPE",o.fileType]),s(o,0)):(e.setPageMessage("Invalid file type"),setTimeout(function(){e.setPageMessage("")},2e3))})})}function f(e,n){t.detectFileType(e).then(function(t){e.fileType=t.type,e.created_date=(new Date).getTime(),console.log(["SET ITEM TYPE",e.fileType]),s(e,n)})}return Object(a.useEffect)(function(){i()},[]),l.a.createElement("div",{className:"LocalStorageUploadManager"},l.a.createElement(c.b,{path:["".concat(e.match.path,"/text/:itemId?"),"".concat(e.match.path,"/text")],render:function(e){return l.a.createElement(he,Object.assign({},e,{item:p("id",e.match.params.itemId),saveItem:f,deleteItem:o,findKeyBy:m}))}}),l.a.createElement(c.b,Object.assign({},e,{exact:!0,path:e.match.path,render:function(n){return l.a.createElement(ve,Object.assign({},e,{items:u,deleteItem:o,saveItem:f,importFunctions:t,handleFileSelection:g}))}})))}var be=n(25),Se=function(e){return l.a.createElement(Y.a,{as:X.a},l.a.createElement(Y.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(G.a,{size:"sm"},"Set List"," "),l.a.createElement(Y.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(t){t.preventDefault(),e.tagAll(t.target.value)}},l.a.createElement(Q.a,null,l.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){e.setTagAllValue(t.target.value)},value:e.tagAllValue}),l.a.createElement(G.a,{variant:"success",onClick:function(t){e.tagAll(e.tagAllValue)}},"Add"))),e.lookups.listsLookups&&e.lookups.listsLookups.sort().map(function(t,n){return l.a.createElement(Y.a.Item,{key:n,value:t},l.a.createElement(G.a,{variant:"success",onClick:function(n){e.setTagAllValue(t),e.tagAll(t)}},"Add to ",t),l.a.createElement(G.a,{variant:"danger",onClick:function(n){e.untagAll(t)},style:{marginLeft:"0.5em"}},"Remove"))})))},Ae=function(e){var t=e.searchFilter,n=e.setSearchFilter;return l.a.createElement("input",{style:{marginLeft:"0.5em"},type:"text",value:t,onChange:function(e){var t=e.target.value;n(t)},placeholder:"Search"})},Oe=n(12),xe=n.n(Oe),Ie=function(e){var t=Object(a.useState)([]),n=Object(r.a)(t,2),i=n[0],s=n[1];return Object(a.useEffect)(function(){var t=e.lookups.listsLookups&&e.lookups.listsLookups.sort().map(function(t,n){return l.a.createElement(Y.a.Item,{key:n,value:t,onClick:function(n){e.setListFilterValue(t)}},t)});t.unshift(l.a.createElement(Y.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(t){e.setListFilterValue("")}},"\xa0")),t.push(l.a.createElement(Y.a.Item,{key:"Not In A List",value:"Not In A List",onClick:function(t){e.setListFilterValue("Not In A List")}},l.a.createElement("b",null,"Not In A List"))),s(t)},[e.lookups]),l.a.createElement("div",null,l.a.createElement("span",null,e.lookups.selectedListTally>0&&l.a.createElement(G.a,{size:"lg",onClick:function(t){e.resetSelection(t)},variant:"success"},l.a.createElement("img",{style:{height:"1em"},src:xe.a,alt:"Deselect"})),e.lookups.selectedListTally<=0&&l.a.createElement(G.a,{size:"lg",onClick:function(t){e.selectAll(t)},variant:"secondary"},l.a.createElement("img",{style:{height:"1em"},src:xe.a,alt:"Select"}))),l.a.createElement("span",{style:{marginLeft:"0.4em"}},l.a.createElement(Ae,{searchFilter:e.searchFilter,setSearchFilter:e.setSearchFilter})),l.a.createElement(Y.a,{style:{marginLeft:"0.5em"},as:X.a},l.a.createElement(Y.a.Toggle,{split:!0,id:"dropdown-split-basic"}),l.a.createElement(G.a,null,"List"+(e.listFilterValue?" - "+e.listFilterValue:"")," "),l.a.createElement(Y.a.Menu,null,i)),l.a.createElement(G.a,{style:{marginLeft:"1em"},variant:"success",onClick:function(t){e.createEmptyItem(e.listFilterValue)}},"New Entity"),l.a.createElement(G.a,{style:{marginLeft:"1em"},variant:"primary",onClick:function(t){e.sort(function(e,t){return e.value<t.value?-1:1})}},"Sort"))},je=n(16),Te=n.n(je);var Le=function(e,t,n,i){var s=Object(a.useState)({}),o=Object(r.a)(s,2),c=o[0],u=o[1],m=Object(a.useState)([]),p=Object(r.a)(m,2),g=p[0],f=p[1],d=l.a.createRef();return Object(a.useEffect)(function(){e.tags&&f(e.tags.map(function(e,t){return{id:t,name:e}}))},[e]),{selectionState:c,setSelectionState:u,tags:g,setTags:f,reactTags:d,onTagDelete:function(a){var l=g.slice(0);l.splice(a,1),f(l);var i=e;i.tags=l.map(function(e){return e.name}),t(i,n)},onTagAddition:function(a){if(a&&a.name.trim().length>0){var l=[].concat(g,a);f(k(l,"name").sort(function(e,t){return e.name>t.name?1:-1}));var i=e;i.tags=E(l.map(function(e){return e.name})).sort(),t(i,n)}},updateExampleContent:function(a){if(e&&"string"===typeof a){var l=e;l.value=a,t(l,n)}},updateExampleSynonym:function(a){if(e&&"string"===typeof a){var l=e;l.synonym=a,t(l,n)}},selectItem:function(n){var a=e;e.isSelected=!0,console.log(["SELECT LIST ITEM",a,n]),t(a,n)},deselectItem:function(n){var a=e;e.isSelected=!1,console.log(["DESELECT LIST ITEM",a,n]),t(a,n)}}};function we(e){var t=e.item,n=e.query;return l.a.createElement("span",{id:t.id,className:t.name===n?"match":"no-match"},t.name)}function Ce(e){var t=e.item,n=e.splitNumber,a=e.style,i=Le(e.item,e.saveItem,e.splitNumber,e.style),s=i.tags,r=i.reactTags,o=i.onTagDelete,c=i.onTagAddition,u=i.updateExampleContent,m=i.updateExampleSynonym,p=i.selectItem,g=i.deselectItem;return t&&l.a.createElement("div",{style:a,className:n%2?"ListItemOdd":"ListItemEven"},l.a.createElement("div",{style:{position:"relative",width:"100%",textAlign:"left",borderTop:"2px solid black"}},l.a.createElement("div",{style:{float:"right"}},l.a.createElement(G.a,{variant:"danger",size:"sm",style:{float:"right",fontWeight:"bold",borderRadius:"15px",marginTop:"0.2em"},onClick:function(a){window.confirm("Really delete")&&e.deleteItem(n,t.id?t.id:"")}},"X")),l.a.createElement("div",{style:{float:"left"}},!t.isSelected&&l.a.createElement(G.a,{style:{float:"left"},size:"lg",variant:"secondary",onClick:function(){p(n)}},l.a.createElement("img",{style:{height:"1em"},src:xe.a,alt:"Select"})),t.isSelected&&l.a.createElement(G.a,{style:{float:"left"},size:"lg",variant:"success",onClick:function(){g(n)}},l.a.createElement("img",{style:{height:"1em"},src:xe.a,alt:"Deselect"}))),l.a.createElement("input",{style:{float:"left"},size:"25",type:"text",value:t.value,onChange:function(e){u(e.target.value)}}),l.a.createElement("label",{style:{float:"left",marginLeft:"0.5em"}},"Synonym ",l.a.createElement("input",{size:"15",type:"text",value:t.synonym,onChange:function(e){m(e.target.value)}})),l.a.createElement("label",{style:{float:"left",marginLeft:"0.5em"}},l.a.createElement("span",{style:{float:"left",marginRight:"0.5em"}},"Lists "),l.a.createElement("span",{style:{float:"left"}},l.a.createElement(Te.a,{placeholderText:"Add to list",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:r,tags:s,suggestionComponent:we,suggestions:e.lookups.listsLookups.map(function(e,t){return{id:t,name:e}}),onDelete:o,onAddition:c})))))}function Ne(e,t){var n=parseInt(t.index);switch(t.type){case"append":return t.item?[].concat(Object(u.a)(e),[t.item]):e;case"prepend":return t.item?[t.item].concat(Object(u.a)(e)):e;case"insert":return t.item&&"number"===typeof n&&e.length>0?[].concat(Object(u.a)(e.slice(0,n)),[t.item],Object(u.a)(e.slice(n))):e;case"remove":return"number"===typeof n?[].concat(Object(u.a)(e.slice(0,n)),Object(u.a)(e.slice(n+1))):e;case"update":return t.item&&"number"===typeof n?[].concat(Object(u.a)(e.slice(0,n)),[t.item],Object(u.a)(e.slice(n+1))):e;case"replaceall":return"object"===typeof t.items?t.items:e;case"sort":if("function"===typeof t.sort){var a=e.sort(t.sort);return Object(u.a)(a)}return e;default:throw new Error("Invalid reduction in useDBSingleKey")}}function Fe(e,t,n){n||(n="data");var l=Object(a.useReducer)(Ne,[]),i=Object(r.a)(l,2),s=i[0],o=i[1],c=O.a.createInstance({name:e||"localstoragemanager",storeName:t||"single_key_data"});function u(e,t){for(var n in s)if(s[n]&&s[n][e]===t)return n}return Object(a.useEffect)(function(){},[]),Object(a.useEffect)(function(){c.setItem(n,s)},[s]),{getId:function(e){if(e&&e.id)return e.id;throw new Error("Missing ID value in getId")},loadAll:function(){return new Promise(function(e,t){c.getItem(n).then(function(t){o({type:"replaceall",items:t||[]}),e(t)})})},saveItem:function(e,t){if(e){var n=!1;if(e.id||(n=!0,e.id=h()),n)o({type:"prepend",item:e});else if(s){var a=null;s.map(function(t,n){return t.id===e.id&&(a=n),null}),o(null!=a?{type:"update",item:e,index:a}:{type:"prepend",item:e})}}},deleteItem:function(e){o({type:"remove",index:e})},items:s,setItems:function(e){c.clear().then(function(){o({type:"replaceall",items:e})})},findKeyBy:u,findBy:function(e,t){var n=u(e,t);return s[n]},filter:function(e){var t=[];return e&&s.map(function(n,a){return n&&e(n)&&t.push(n),null}),t},sort:function(e){o({type:"sort",sort:e})}}}var _e=function(e,t,n,i){var s=Fe(e,t,n),o=s.loadAll,u=s.saveItem,m=s.deleteItem,p=s.items,g=s.setItems,f=s.findKeyBy,d=s.filter,y=s.sort,h=Object(a.useState)([]),v=Object(r.a)(h,2),E=v[0],k=v[1],b=Object(a.useState)([]),S=Object(r.a)(b,2),A=S[0],O=S[1],x=Object(a.useState)(""),I=Object(r.a)(x,2),j=I[0],T=I[1],L=Object(a.useState)(""),w=Object(r.a)(L,2),C=w[0],N=w[1],F=l.a.createRef(),_=Object(c.g)(),M=_.listId?_.listId:"",R=Object(c.f)();return Object(a.useEffect)(function(){var e=d(function(e){var t=!0;j&&j.trim().length>0&&(t=!(!e.value||-1===e.value.toLowerCase().indexOf(j.toLowerCase())));var n=!0;return"Not In A List"===M?n=!(e.tags&&(!e.tags||0!==e.tags.length)):M&&M.trim().length>0&&(n=!(!e.tags||-1===e.tags.indexOf(M))),t&&n}),t={};e.map(function(e){return e.id&&(t[e.id]=!0),null}),e.sort(function(e,t){return(e.value?e.value.toLowerCase():"")<(t.value?t.value.toLowerCase():"")}),k(e),O(t),i(e)},[p,j,M]),{loadAll:o,saveItem:u,deleteItem:m,items:p,setItems:g,findKeyBy:f,filter:d,filteredItems:E,setFilteredItems:k,sort:y,searchFilter:j,setSearchFilter:T,tagAllValue:C,setTagAllValue:N,listRef:F,listFilterValue:M,setListFilterValue:function(e){var t=["/"+R.location.pathname.split("/")[1]];t.push("/"+e),R.push(t.join(""))},tagAll:function(e){console.log(["tagall",C,e]);var t=e||C;if(p){var n=[];p.map(function(e,a){if(e&&e.id)if(e.isSelected&&A[e.id]){var l=JSON.parse(JSON.stringify(e));l.tags||(l.tags=[]),-1===l.tags.indexOf(t)&&l.tags.push(t),n.push(l)}else n.push(e);return null}),g(n)}},untagAll:function(e){if(console.log(["untagall",C,e]),p){var t=[];p.map(function(n,a){if(n&&n.id)if(n.isSelected&&A[n.id]){var l=JSON.parse(JSON.stringify(n));l.tags||(l.tags=[]);var i=[];l.tags.map(function(t){return t!==e&&i.push(t),null}),l.tags=i,t.push(l)}else t.push(n);return null}),g(t)}},resetSelection:function(){if(p){var e=[];p.map(function(t,n){if(t){var a=t;a.isSelected=!1,e.push(a)}return null}),g(e)}},selectAll:function(){if(console.log(["SELECTALL",p]),p){var e=[];p.map(function(t,n){if(t&&t.id){var a=t;t.id&&A[t.id]?(a.isSelected=!0,e.push(a)):(a.isSelected=!1,e.push(a))}return null}),g(e)}},saveItemWrap:function(e,t){console.log(["SAVE ITEM WRAP",e,t]),e&&(u(e,t),F.current.resetAfterIndex(t),i(p))},getItemSize:function(e){var t=40;return window.innerWidth<430?t=120:window.innerWidth<=768&&(t=70),t},deleteAll:function(e){if(window.confirm("Really delete all selected")&&p){var t=[];p.map(function(e,n){return e&&e.id&&(A[e.id]&&e.isSelected||t.push(e)),null}),g(t),F.current.resetAfterIndex(0)}},createEmptyItem:function(e){var t=[];e&&"Not In A List"!==e&&e.trim().length>0&&t.push(e),T(""),u({id:null,value:"",synonym:"",tags:t})}}},Me=function(e){var t=e.index,n=e.style,a=e.data.items[t];return l.a.createElement(Ce,{item:a,splitNumber:t,style:n,saveItem:e.data.saveItem,deleteItem:e.data.deleteItem,saveNlu:e.data.saveNlu,lookups:e.data.lookups})};function Re(e){var t=_e("nlutool","lists","alldata",e.updateFunctions.updateLists),n=t.listFilterValue,i=t.setListFilterValue,s=t.loadAll,r=t.deleteItem,o=t.items,c=t.findKeyBy,u=t.searchFilter,m=t.setSearchFilter,p=t.tagAllValue,g=t.setTagAllValue,f=t.listRef,d=t.tagAll,y=t.untagAll,h=t.resetSelection,v=t.selectAll,E=t.saveItemWrap,k=t.getItemSize,b=t.filteredItems,S=t.deleteAll,A=t.createEmptyItem,O=t.sort;return Object(a.useEffect)(function(){s(),e.updateFunctions.updateLists(o)},[]),Object(a.useEffect)(function(){},[b]),l.a.createElement("div",null,l.a.createElement(Ie,Object.assign({},e,{searchFilter:u,setSearchFilter:m,listFilterValue:n,setListFilterValue:i,resetSelection:h,selectAll:v,createEmptyItem:A,sort:O})),function(e){if(b&&b.length>0)return l.a.createElement("div",null,l.a.createElement("span",{style:{float:"left",fontWeight:"bold"}},"\xa0",b.length," matches "),e.lookups.selectedListTally>0&&l.a.createElement("span",{style:{float:"right"}},l.a.createElement("span",null,"With ",e.lookups.selectedListTally," selected\xa0"),l.a.createElement(Se,{tagAll:d,tagAllValue:p,setTagAllValue:g,untagAll:y,lookups:e.lookups}),l.a.createElement(G.a,{style:{marginLeft:"1em"},onClick:S,variant:"danger"},"Delete Selected")),l.a.createElement("div",{style:{clear:"both"}},l.a.createElement("div",{style:{clear:"both"}},l.a.createElement(be.a,{key:"list",ref:f,itemData:{items:b,saveItem:E,deleteItem:r,findKeyBy:c,lookups:e.lookups},itemKey:function(e){return e},className:"List",height:700,itemCount:b.length,itemSize:k,width:"100%"},Me))))}(e))}var Ve=function(e){var t=Object(a.useState)([]),n=Object(r.a)(t,2),i=n[0],s=n[1];return Object(a.useEffect)(function(){var t=e.lookups.utteranceTagsLookups&&e.lookups.utteranceTagsLookups.sort().map(function(t,n){return l.a.createElement(Y.a.Item,{key:n,value:t,onClick:function(n){e.setListFilterValue(t)}},t)});t.unshift(l.a.createElement(Y.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(t){e.setListFilterValue("")}},"\xa0")),t.push(l.a.createElement(Y.a.Item,{key:"Not In A List",value:"Not In A List",onClick:function(t){e.setListFilterValue("Not In A List")}},l.a.createElement("b",null,"Not In A List"))),s(t)},[e.lookups]),l.a.createElement("div",null,l.a.createElement("span",null,e.lookups.selectedUtteranceTally>0&&l.a.createElement(G.a,{size:"lg",onClick:function(t){console.log(["reset sel"]),e.resetSelection(t)},variant:"success"},l.a.createElement("img",{style:{height:"1em"},src:xe.a,alt:"Deselect"})),e.lookups.selectedUtteranceTally<=0&&l.a.createElement(G.a,{size:"lg",onClick:function(t){console.log(["sel all"]),e.selectAll(t)},variant:"secondary"},l.a.createElement("img",{style:{height:"1em"},src:xe.a,alt:"Select"}))),l.a.createElement("span",{style:{marginLeft:"0.4em"}},l.a.createElement(Ae,{searchFilter:e.searchFilter,setSearchFilter:e.setSearchFilter})),l.a.createElement(Y.a,{style:{marginLeft:"0.5em"},as:X.a},l.a.createElement(Y.a.Toggle,{split:!0,id:"dropdown-split-basic"}),l.a.createElement(G.a,null,"List"+(e.listFilterValue?" - "+e.listFilterValue:"")," "),l.a.createElement(Y.a.Menu,null,i)),l.a.createElement(G.a,{style:{marginLeft:"1em"},variant:"success",onClick:function(t){e.createEmptyItem(e.listFilterValue)}},"New Utterance"),l.a.createElement(G.a,{style:{marginLeft:"1em"},variant:"primary",onClick:function(t){e.sort(function(e,t){return e.value<t.value?-1:1})}},"Sort"))};function Pe(e){var t=e.item,n=e.splitNumber,a=e.style,i=Le(e.item,e.saveItem,e.splitNumber,e.style),s=i.tags,r=i.reactTags,o=i.onTagDelete,c=i.onTagAddition,u=i.updateExampleContent,m=i.updateExampleSynonym,p=i.selectItem,g=i.deselectItem;return t&&l.a.createElement("div",{style:a,className:n%2?"ListItemOdd":"ListItemEven"},l.a.createElement("div",{style:{position:"relative",width:"100%",textAlign:"left",borderTop:"2px solid black"}},l.a.createElement("div",{style:{float:"right"}},l.a.createElement(G.a,{variant:"danger",size:"sm",style:{float:"right",fontWeight:"bold",borderRadius:"15px",marginTop:"0.2em"},onClick:function(a){window.confirm("Really delete")&&e.deleteItem(n,t.id?t.id:"")}},"X")),l.a.createElement("div",{style:{float:"left"}},!t.isSelected&&l.a.createElement(G.a,{style:{float:"left"},size:"lg",variant:"secondary",onClick:function(){p(n)}},l.a.createElement("img",{style:{height:"1em"},src:xe.a,alt:"Select"})),t.isSelected&&l.a.createElement(G.a,{style:{float:"left"},size:"lg",variant:"success",onClick:function(){g(n)}},l.a.createElement("img",{style:{height:"1em"},src:xe.a,alt:"Deselect"}))),l.a.createElement("input",{style:{float:"left"},size:"25",type:"text",value:t.value,onChange:function(e){u(e.target.value)}}),l.a.createElement("label",{style:{float:"left",marginLeft:"0.5em"}},l.a.createElement("span",{style:{float:"left",marginRight:"0.5em"}},"Lists "),l.a.createElement("span",{style:{float:"left"}},l.a.createElement(Te.a,{placeholderText:"Add to list",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:r,tags:s,suggestionComponent:we,suggestions:e.lookups.utteranceTagsLookups.map(function(e,t){return{id:t,name:e}}),onDelete:o,onAddition:c}))),l.a.createElement("label",{style:{float:"left",marginLeft:"0.5em"}},l.a.createElement("span",{style:{float:"left",marginRight:"0.5em"}},"Alternatives"),l.a.createElement("textarea",{style:{width:"34em",height:"5em"},type:"text",value:t.synonym,onChange:function(e){m(e.target.value)}}))))}var De=function(e){var t=e.index,n=e.style,a=e.data.items[t];return l.a.createElement(Pe,{item:a,splitNumber:t,style:n,saveItem:e.data.saveItem,deleteItem:e.data.deleteItem,saveNlu:e.data.saveNlu,lookups:e.data.lookups})};function ze(e){var t=_e("nlutool","utterances","alldata",e.updateFunctions.updateUtterances),n=t.listFilterValue,i=t.setListFilterValue,s=t.loadAll,r=t.deleteItem,o=t.findKeyBy,c=t.searchFilter,u=t.setSearchFilter,m=t.tagAllValue,p=t.setTagAllValue,g=t.listRef,f=t.tagAll,d=t.untagAll,y=t.resetSelection,h=t.selectAll,v=t.saveItemWrap,E=t.filteredItems,k=t.deleteAll,b=t.createEmptyItem,S=t.sort;function A(){return window.innerWidth<430?220:window.innerWidth<=768?160:130}return Object(a.useEffect)(function(){s()},[]),l.a.createElement("div",null,l.a.createElement(Ve,Object.assign({},e,{searchFilter:c,setSearchFilter:u,listFilterValue:n,setListFilterValue:i,resetSelection:y,selectAll:h,createEmptyItem:b,sort:S})),function(e){if(E&&E.length>0)return l.a.createElement("div",null,l.a.createElement("span",{style:{float:"left",fontWeight:"bold"}},"\xa0",E.length," matches "),e.lookups.selectedUtteranceTally>0&&l.a.createElement("span",{style:{float:"right"}},l.a.createElement("span",null,"With ",e.lookups.selectedUtteranceTally," selected\xa0"),l.a.createElement(Se,{tagAll:f,tagAllValue:m,setTagAllValue:p,untagAll:d,lookups:e.lookups}),l.a.createElement(G.a,{style:{marginLeft:"1em"},onClick:k,variant:"danger"},"Delete Selected")),l.a.createElement("div",{style:{clear:"both"}},l.a.createElement("div",{style:{clear:"both"}},l.a.createElement(be.a,{key:"list",ref:g,itemData:{items:E,saveItem:v,deleteItem:r,findKeyBy:o,lookups:e.lookups},itemKey:function(e){return e},className:"List",height:700,itemCount:E.length,itemSize:A,width:"100%"},De))))}(e))}var We=function(e){var t=Object(a.useState)([]),n=Object(r.a)(t,2),i=n[0],s=n[1];return Object(a.useEffect)(function(){var t=e.lookups.utteranceTagsLookups&&e.lookups.utteranceTagsLookups.sort().map(function(t,n){return l.a.createElement(Y.a.Item,{key:n,value:t,onClick:function(n){e.setListFilterValue(t)}},t)});t.unshift(l.a.createElement(Y.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(t){e.setListFilterValue("")}},"\xa0")),t.push(l.a.createElement(Y.a.Item,{key:"Not In A List",value:"Not In A List",onClick:function(t){e.setListFilterValue("Not In A List")}},l.a.createElement("b",null,"Not Tagged"))),s(t)},[e.lookups]),l.a.createElement("div",null,l.a.createElement("span",null,e.lookups.selectedRegexTally>0&&l.a.createElement(G.a,{size:"lg",onClick:function(t){e.resetSelection(t)},variant:"success"},l.a.createElement("img",{style:{height:"1em"},src:xe.a,alt:"Deselect"})),e.lookups.selectedRegexTally<=0&&l.a.createElement(G.a,{size:"lg",onClick:function(t){e.selectAll(t)},variant:"secondary"},l.a.createElement("img",{style:{height:"1em"},src:xe.a,alt:"Select"}))),l.a.createElement("span",{style:{marginLeft:"0.4em"}},l.a.createElement(Ae,{searchFilter:e.searchFilter,setSearchFilter:e.setSearchFilter})),l.a.createElement(Y.a,{style:{marginLeft:"0.5em"},as:X.a},l.a.createElement(Y.a.Toggle,{split:!0,id:"dropdown-split-basic"}),l.a.createElement(G.a,null,"Tag"+(e.listFilterValue?" - "+e.listFilterValue:"")," "),l.a.createElement(Y.a.Menu,null,i)),l.a.createElement(G.a,{style:{marginLeft:"1em"},variant:"success",onClick:function(t){e.createEmptyItem(e.listFilterValue)}},"New Expression"),l.a.createElement(G.a,{style:{marginLeft:"1em"},variant:"primary",onClick:function(t){e.sort(function(e,t){return e.value<t.value?-1:1})}},"Sort"))};function Ue(e){var t=e.item,n=e.splitNumber,a=e.style,i=Le(e.item,e.saveItem,e.splitNumber,e.style),s=i.tags,r=i.reactTags,o=i.onTagDelete,c=i.onTagAddition,u=i.updateExampleContent,m=i.updateExampleSynonym,p=i.selectItem,g=i.deselectItem;return t&&l.a.createElement("div",{style:a,className:n%2?"ListItemOdd":"ListItemEven"},l.a.createElement("div",{style:{position:"relative",width:"100%",textAlign:"left",borderTop:"2px solid black"}},l.a.createElement("div",{style:{float:"right"}},l.a.createElement(G.a,{variant:"danger",size:"sm",style:{float:"right",fontWeight:"bold",borderRadius:"15px",marginTop:"0.2em"},onClick:function(a){window.confirm("Really delete")&&e.deleteItem(n,t.id?t.id:"")}},"X")),l.a.createElement("div",{style:{float:"left"}},!t.isSelected&&l.a.createElement(G.a,{style:{float:"left"},size:"lg",variant:"secondary",onClick:function(){p(n)}},l.a.createElement("img",{style:{height:"1em"},src:xe.a,alt:"Select"})),t.isSelected&&l.a.createElement(G.a,{style:{float:"left"},size:"lg",variant:"success",onClick:function(){g(n)}},l.a.createElement("img",{style:{height:"1em"},src:xe.a,alt:"Deselect"}))),l.a.createElement("label",null,l.a.createElement("span",{style:{float:"left",marginLeft:"0.5em",marginRight:"0.5em"}},"Description ")," ",l.a.createElement("input",{style:{float:"left"},size:"50",type:"text",value:t.value,onChange:function(e){u(e.target.value)}})),l.a.createElement("label",{style:{float:"right",marginRight:"2em"}},l.a.createElement("span",{style:{float:"left",marginRight:"0.5em"}},"Tags "),l.a.createElement("span",{style:{float:"left"}},l.a.createElement(Te.a,{placeholderText:"Add tag",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:r,tags:s,suggestionComponent:we,suggestions:e.lookups.regexpTagsLookups.map(function(e,t){return{id:t,name:e}}),onDelete:o,onAddition:c}))),l.a.createElement("label",{style:{float:"left",marginLeft:"0.5em"}},l.a.createElement("span",{style:{float:"left",marginRight:"0.5em"}},"Regular Expression"),l.a.createElement("textarea",{style:{width:"60em",height:"2em"},type:"text",value:t.synonym,onChange:function(e){m(e.target.value)}}))))}var Je=function(e){var t=e.index,n=e.style,a=e.data.items[t];return l.a.createElement(Ue,{item:a,splitNumber:t,style:n,saveItem:e.data.saveItem,deleteItem:e.data.deleteItem,saveNlu:e.data.saveNlu,lookups:e.data.lookups})};function Ke(e){var t=_e("nlutool","regexps","alldata",e.updateFunctions.updateRegexps),n=t.listFilterValue,i=t.setListFilterValue,s=t.loadAll,r=t.deleteItem,o=t.findKeyBy,c=t.searchFilter,u=t.setSearchFilter,m=t.tagAllValue,p=t.setTagAllValue,g=t.listRef,f=t.tagAll,d=t.untagAll,y=t.resetSelection,h=t.selectAll,v=t.saveItemWrap,E=t.filteredItems,k=t.deleteAll,b=t.createEmptyItem,S=t.sort;function A(){return window.innerWidth<430?260:window.innerWidth<=768?185:150}return Object(a.useEffect)(function(){s()},[]),l.a.createElement("div",null,l.a.createElement(We,Object.assign({},e,{searchFilter:c,setSearchFilter:u,listFilterValue:n,setListFilterValue:i,resetSelection:y,selectAll:h,createEmptyItem:b,sort:S})),function(e){if(E&&E.length>0)return l.a.createElement("div",null,l.a.createElement("span",{style:{float:"left",fontWeight:"bold"}},"\xa0",E.length," matches "),e.lookups.selectedRegexTally>0&&l.a.createElement("span",{style:{float:"right"}},l.a.createElement("span",null,"With ",e.lookups.selectedRegexTally," selected\xa0"),l.a.createElement(Se,{tagAll:f,tagAllValue:m,setTagAllValue:p,untagAll:d,lookups:e.lookups}),l.a.createElement(G.a,{style:{marginLeft:"1em"},onClick:k,variant:"danger"},"Delete Selected")),l.a.createElement("div",{style:{clear:"both"}},l.a.createElement("div",{style:{clear:"both"}},l.a.createElement(be.a,{key:"list",ref:g,itemData:{items:E,saveItem:v,deleteItem:r,findKeyBy:o,lookups:e.lookups},itemKey:function(e){return e},className:"List",height:700,itemCount:E.length,itemSize:A,width:"100%"},Je))))}(e))}var Be=function(e,t,n,i,s){var o=Object(a.useState)({}),c=Object(r.a)(o,2),u=c[0],m=c[1],p=Object(a.useState)(""),g=Object(r.a)(p,2),f=g[0],d=g[1],y=Object(a.useState)(e&&e.intent?e.intent:""),h=Object(r.a)(y,2),v=h[0],b=h[1],S=Object(a.useState)([]),A=Object(r.a)(S,2),O=A[0],x=A[1],I=Object(a.useState)([]),j=Object(r.a)(I,2),T=j[0],L=j[1],w=l.a.createRef(),C=l.a.createRef();function N(e,t,n){if(e){if(e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveStart("character",t),a.moveEnd("character",n-t),a.select()}else e.setSelectionRange?e.setSelectionRange(t,n):e.selectionStart&&(e.selectionStart=t,e.selectionEnd=n);e.focus()}}function F(a,l){var i=e;Array.isArray(e.entities)||(e.entities=[]);var r=e.entities,o=r[a]?r[a]:{},c=!(l&&l.length>0&&l===o.type);if(o.type=l,u&&u.textSelection){var p=u.startTextSelection,g=u.endTextSelection,f=!1;"number"===typeof parseInt(p)&&"number"===typeof parseInt(g)&&e.entities.map(function(e){var t=!c&&e.type===l,n=e.start>p&&e.start<g||e.end>p&&e.end<g;return!t&&n&&(f=!0),null}),f?(s("Overlap with existing entity !"),setTimeout(function(){s("")},2e3)):(o.value=u.textSelection,o.start=u.startTextSelection,o.end=u.endTextSelection,r[a]?r[a]=o:r.push(o),i.entities=r,m(null),t(i,n))}else r[a]?r[a]=o:r.push(o),i.entities=r,m(null),t(i,n)}return Object(a.useEffect)(function(){e.tags&&x(e.tags.map(function(e,t){return{id:t,name:e}})),e.skills&&L(e.skills.map(function(e,t){return{id:t,name:e}}))},[e]),{intentTitle:v,setIntentTitle:b,selectionState:u,setSelectionState:m,newEntity:f,setNewEntity:d,tags:O,setTags:x,skills:T,setSkills:L,reactTags:w,reactSkills:C,onTagDelete:function(a){var l=O.slice(0);l.splice(a,1),x(l);var i=e;i.tags=l.map(function(e){return e.name}),t(i,n)},onTagAddition:function(a){if(a&&a.name.trim().length>0){var l=[].concat(O,a);x(k(l,"name").sort(function(e,t){return e.name>t.name?1:-1}));var i=e;i.tags=E(l.map(function(e){return e.name})).sort(),t(i,n)}},onSkillDelete:function(a){var l=T.slice(0);l.splice(a,1),L(l);var i=e;i.skills=l.map(function(e){return e.name}),t(i,n)},onSkillAddition:function(a){if(a&&a.name.trim().length>0){var l=[].concat(T,a);L(k(l,"name").sort(function(e,t){return e.name>t.name?1:-1}));var i=e;i.skills=E(l.map(function(e){return e.name})).sort(),t(i,n)}},createSelection:N,updateExampleContent:function(a){if(e&&"string"===typeof e.example&&"string"===typeof a){var l=JSON.parse(JSON.stringify(e));if(e.entities&&e.entities.length>0){var i=e.entities,s=function(e,t){if(e===t)return-1;for(var n=0;e[n]===t[n];n++);return n}(a,e.example);if(a.length-e.example.length>0){var r=a.length-e.example.length;l.entities=i.map(function(e,t){return s<e.start?(e.start+=r,e.end+=r):s<e.end&&(e.end+=r,e.value=a.slice(e.start,e.end)),e})}else if(a.length===e.example.length)l.entities=i.map(function(e,t){return s>=e.start&&s<e.end&&(e.value=a.slice(e.start,e.end)),e});else{var o=a.length-e.example.length;l.entities=i.map(function(e,t){return s<e.start?(e.start+=o,e.end+=o):s<e.end&&(e.end+=o,e.value=a.slice(e.start,e.end)),e})}}l.example=a,t(l,n)}},entityClicked:function(t,a){if(e.entities){var l=e.entities;u&&u.textSelection&&0!==u.textSelection.length?F(t,a):l[t]&&N(document.getElementById("example_input_"+n),l[t].start,l[t].end)}},entityTypeChanged:F,intentChanged:function(a){var l=e;l.intent=a,t(l,n)},entityDelete:function(a){if(e.entities){var l=e,i=e.entities.slice(0,a).concat(e.entities.slice(a+1));l.entities=i,t(l,n)}},selectItem:function(n){var a=e;e.isSelected=!0,t(a,n)},setSkill:function(e,t){},deselectItem:function(n){var a=e;e.isSelected=!1,t(a,n)}}};function Ze(e){var t=e.item,n=e.splitNumber,i=e.style,s=Be(e.item,e.saveItem,e.splitNumber,e.style,e.setPageMessage),o=s.intentTitle,c=s.setIntentTitle,u=s.selectionState,m=s.setSelectionState,p=s.newEntity,g=s.setNewEntity,f=s.tags,d=s.skills,y=s.reactTags,h=s.reactSkills,v=s.onTagDelete,E=s.onTagAddition,k=s.onSkillDelete,b=s.onSkillAddition,S=s.updateExampleContent,A=s.entityClicked,O=s.entityTypeChanged,x=s.intentChanged,I=s.entityDelete,j=s.selectItem,T=s.deselectItem,L=Object(a.useState)(e.item&&e.item.example?e.item.example:""),w=Object(r.a)(L,2),C=w[0],N=w[1],F=e.lookups.intentLookups&&e.lookups.intentLookups.sort().map(function(e,t){return l.a.createElement(Y.a.Item,{key:t,value:e,onClick:function(t){x(e)}},e)}),_=t&&t.entities?t.entities.map(function(t,n){var a=e.lookups.entityLookups.sort().map(function(e,t){return l.a.createElement(Y.a.Item,{key:t,value:e,onClick:function(t){O(n,e)}},e)});return l.a.createElement(Y.a,{style:{marginLeft:"0.2em"},variant:"info",key:n,as:X.a},l.a.createElement(Y.a.Toggle,{variant:"info",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(G.a,{variant:"info",size:"sm",onClick:function(e){A(n,t.type)}},l.a.createElement("b",null,t.type),"-",t.value?t.value:"Select Entity Type"),l.a.createElement(G.a,{variant:"info",size:"sm",onClick:function(e){I(n,"")}},"X"),l.a.createElement(Y.a.Menu,null,l.a.createElement("form",{style:{display:"inline"}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){O(n,e.target.value)},value:t.type}))),a))}):[];if(u&&u.textSelection&&u.textSelection.length>0&&u.textSelectionFrom===n){var M=e.lookups.entityLookups&&e.lookups.entityLookups.sort().map(function(e,t){return l.a.createElement(Y.a.Item,{key:t,value:e,onClick:function(t){O(-1,e)}},e)});_.push(l.a.createElement(Y.a,{key:"new",variant:"success",as:X.a},l.a.createElement(Y.a.Toggle,{variant:"success",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(G.a,{variant:"success",size:"sm"},"New Entity"),l.a.createElement(Y.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(e){e.preventDefault(),O(-1,p)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){g(e.target.value)},value:p}))),M)))}return t&&l.a.createElement("div",{style:i,className:n%2?"ListItemOdd":"ListItemEven"},l.a.createElement("div",{style:{position:"relative",width:"100%",textAlign:"left",borderTop:"2px solid black"}},!t.isSelected&&l.a.createElement(G.a,{style:{float:"left"},size:"lg",variant:"secondary",onClick:function(){j(n)}},l.a.createElement("img",{style:{height:"1em"},src:xe.a,alt:"Select"})),t.isSelected&&l.a.createElement(G.a,{style:{float:"left"},size:"lg",variant:"success",onClick:function(){T(n)}},l.a.createElement("img",{style:{height:"1em"},src:xe.a,alt:"Deselect"})),l.a.createElement(G.a,{variant:"danger",size:"sm",style:{float:"right",fontWeight:"bold",borderRadius:"15px",marginTop:"0.2em"},onClick:function(a){window.confirm("Really delete")&&e.deleteItem(n,t.id?t.id:"")}},"X"),l.a.createElement(Y.a,{style:{float:"left"},as:X.a},l.a.createElement(Y.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(G.a,{size:"sm"},t.intent?t.intent.toString():"Select Intent"," "),l.a.createElement(Y.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(e){e.preventDefault(),x(o)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",value:o,onChange:function(e){c(e.target.value)}}))),F)),l.a.createElement("span",{style:{float:"left"}},_),l.a.createElement("div",{style:{float:"left"}},l.a.createElement(Te.a,{placeholderText:"Add to skill",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:h,tags:d,suggestionComponent:we,suggestions:e.lookups.skillLookups.map(function(e,t){return{id:t,name:e}}),onDelete:k,onAddition:b})),l.a.createElement("div",{style:{float:"left"}},l.a.createElement(Te.a,{placeholderText:"Add new tag",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:y,tags:f,suggestionComponent:we,suggestions:e.lookups.tagLookups.map(function(e,t){return{id:t,name:e}}),onDelete:v,onAddition:E})),l.a.createElement("input",{onFocus:function(e){m(null)},onSelect:function(e){var t=window.getSelection().toString();m({textSelection:t,textSelectionFrom:n,startTextSelection:e.target.selectionStart,endTextSelection:e.target.selectionEnd})},type:"text",style:{width:"80%"},value:C,id:"example_input_"+n,onChange:function(e){N(e.target.value),S(e.target.value)}})))}var Ge=function(e){var t=e.lookups.skillLookups&&e.lookups.skillLookups.sort().map(function(t,n){return l.a.createElement(Y.a.Item,{key:n,value:t,onClick:function(n){e.setSkillFilterValue(t)}},t)});t.unshift(l.a.createElement(Y.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(t){e.setSkillFilterValue("")}},"\xa0"));var n=e.lookups.intentLookups&&e.lookups.intentLookups.sort().map(function(t,n){return l.a.createElement(Y.a.Item,{key:n,value:t,onClick:function(n){e.setIntentFilterValue(t)}},t)});return n.unshift(l.a.createElement(Y.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(t){e.setIntentFilterValue("")}},"\xa0")),l.a.createElement("div",null,l.a.createElement("span",null,e.lookups.selectedTally>0&&l.a.createElement(G.a,{size:"lg",onClick:function(t){e.resetSelection(t)},variant:"success"},l.a.createElement("img",{style:{height:"1em"},src:xe.a,alt:"Deselect"})),e.lookups.selectedTally<=0&&l.a.createElement(G.a,{size:"lg",onClick:function(t){e.selectAll(t)},variant:"secondary"},l.a.createElement("img",{style:{height:"1em"},src:xe.a,alt:"Select"}))),l.a.createElement("span",{style:{marginLeft:"0.4em"}},l.a.createElement(Ae,{searchFilter:e.searchFilter,setSearchFilter:e.setSearchFilter})),l.a.createElement(Y.a,{style:{marginLeft:"0.5em"},as:X.a},l.a.createElement(Y.a.Toggle,{split:!0,id:"dropdown-split-basic"}),l.a.createElement(G.a,null,"Skill "+(e.skillFilterValue?" - "+e.skillFilterValue:"")," "),l.a.createElement(Y.a.Menu,null,t)),l.a.createElement(Y.a,{style:{marginLeft:"0.5em"},as:X.a},l.a.createElement(Y.a.Toggle,{split:!0,id:"dropdown-split-basic"}),l.a.createElement(G.a,null,"Intent "+(e.intentFilterValue?" - "+e.intentFilterValue:"")," "),l.a.createElement(Y.a.Menu,null,n)),l.a.createElement(G.a,{style:{marginLeft:"1em"},variant:"success",onClick:function(t){e.createEmptyItem(e.skillFilterValue,e.intentFilterValue)}},"New Intent"),l.a.createElement(G.a,{style:{marginLeft:"1em"},variant:"primary",onClick:function(t){e.sort(function(e,t){return e.value<t.value?-1:1})}},"Sort"))};var He=function(e,t,n,i){var s=Fe(e,t,n),o=s.loadAll,u=s.saveItem,m=s.deleteItem,p=s.items,g=s.setItems,f=s.findKeyBy,d=s.filter,y=s.sort,v=Object(a.useState)([]),k=Object(r.a)(v,2),b=k[0],S=k[1],A=Object(a.useState)([]),x=Object(r.a)(A,2),I=x[0],j=x[1],T=Object(a.useState)(""),L=Object(r.a)(T,2),w=L[0],C=L[1],N=Object(a.useState)(""),F=Object(r.a)(N,2),_=F[0],M=F[1],R=Object(a.useState)(""),V=Object(r.a)(R,2),P=V[0],D=V[1],z=Object(a.useState)(""),W=Object(r.a)(z,2),U=W[0],J=W[1],K=l.a.createRef(),B=Object(c.g)(),Z=Object(c.f)(),G=B.skillId?B.skillId:"",H=B.intentId?B.intentId:"";function Y(e,t){u(e,t),K&&K.current&&K.current.resetAfterIndex(t),i(p)}return Object(a.useEffect)(function(){var e=d(function(e){if((!w||w.trim().length<=0)&&(!G||G.trim().length<=0)&&(!H||H.trim().length<=0))return!0;var t=!0;H&&H.length>0&&(t=e.intent===H);var n=!0;G&&G.length>0&&(n=!(!e.skills||-1===e.skills.indexOf(G)));var a=!0;return w&&w.length>0&&(a=!(!e.example||-1===e.example.toLowerCase().indexOf(w.toLowerCase()))),a&&n&&t}),t={};e.map(function(e){return e.id&&(t[e.id]=!0),null}),e.sort(function(e,t){return(e.value?e.value.toLowerCase():"")<(t.value?t.value.toLowerCase():"")}),S(e),j(t),i(e)},[p,w,G,H]),{loadAll:o,saveItem:u,deleteItem:m,items:p,setItems:g,findKeyBy:f,filter:d,filteredItems:b,setFilteredItems:S,createEmptyItem:function(e,t){console.log(["CREATE EMPTY EXAMPLE"]),C("");var n=[];e&&e.trim().length>0&&n.push(e);var a="";t&&t.trim().length>0&&(a=t),Y({id:h(),example:"",intent:a,skills:n,tags:[]},0),console.log(["SAVED NEW EXAMPLE",{id:null,example:"",intent:a,skills:n,tags:[]}])},sort:y,searchFilter:w,setSearchFilter:C,tagAllValue:_,setTagAllValue:M,skillAllValue:P,setSkillAllValue:D,skillFilterValue:G,setSkillFilterValue:function(e){var t=["/"+Z.location.pathname.split("/")[1]];(G=e).length>0&&t.push("/skill/"+G),H.length>0&&t.push("/intent/"+H),Z.push(t.join(""))},intentFilterValue:H,setIntentFilterValue:function(e){var t=["/"+Z.location.pathname.split("/")[1]];H=e,G.length>0&&t.push("/skill/"+G),H.length>0&&t.push("/intent/"+H),Z.push(t.join(""))},intentAllValue:U,setIntentAllValue:J,listRef:K,tagAll:function(e){console.log(["tagall",_,e]);var t=e||_;if(p){var n=[];p.map(function(e,a){if(e&&e.id)if(e.isSelected&&I[e.id]){var l=JSON.parse(JSON.stringify(e));l.tags||(l.tags=[]),-1===l.tags.indexOf(t)&&l.tags.push(t),n.push(l)}else n.push(e);return null}),g(n)}},untagAll:function(e){if(console.log(["untagall",_,e]),p){var t=[];p.map(function(n,a){if(n&&n.id)if(n.isSelected&&I[n.id]){var l=JSON.parse(JSON.stringify(n));l.tags||(l.tags=[]);var i=[];l.tags.map(function(t){return t!==e&&i.push(t),null}),l.tags=i,t.push(l)}else t.push(n);return null}),g(t)}},unskillAll:function(e){if(p){var t=[];p.map(function(n,a){if(n&&n.id)if(n.isSelected&&I[n.id]){var l=JSON.parse(JSON.stringify(n));l.skills||(l.skills=[]);var i=[];l.skills.map(function(t){return t!==e&&i.push(t),null}),l.skills=i,t.push(l)}else t.push(n);return null}),g(t)}},intentAll:function(e){var t=e||U;if(p){var n=[];p.map(function(e,a){if(e&&e.id)if(e.isSelected&&I[e.id]){var l=e;l.intent=t,n.push(l)}else n.push(e);return null}),g(n)}},resetSelection:function(){if(p){var e=[];p.map(function(t,n){if(t){var a=t;a.isSelected=!1,e.push(a)}return null}),g(e)}},selectAll:function(){if(console.log(["SELECTALL",p]),p){var e=[];p.map(function(t,n){if(t&&t.id){var a=t;t.id&&I[t.id]?(a.isSelected=!0,e.push(a)):(a.isSelected=!1,e.push(a))}return null}),g(e)}},skillSetAll:function(e){var t=e||P;if(p){var n=[];p.map(function(e,a){if(e&&e.id)if(e.isSelected&&I[e.id]){var l=JSON.parse(JSON.stringify(e));l.skills||(l.skills=[]),-1===l.skills.indexOf(t)&&l.skills.push(t),l.skills=E(l.skills),n.push(l)}else n.push(e);return null}),g(n)}},saveItemWrap:Y,getItemSize:function(e){var t=100,n=70,a=10,l=8,i=6;window.innerWidth<430?(t=140,n=50,a=4,l=1,i=1):window.innerWidth<=768&&(t=120,n=30,a=2,l=1,i=2);var s=0,r=p[e];return r&&r.entities&&(s+=r.entities.length/l),r&&r.tags&&(s+=r.tags.length/a),r&&r.skills&&(s+=r.skills.length/i),t+Math.round(s)*n},deleteAll:function(e){if(window.confirm("Really delete all selected")&&p){var t=[];p.map(function(e,n){return e&&e.id&&(I[e.id]&&e.isSelected||t.push(e)),null}),g(t),K.current.resetAfterIndex(0)}},saveAll:function(e){if(console.log(["save akk",b]),p){var t=[],n=[];b.map(function(e,a){return e.intent&&e.intent.length>0&&e.id&&I[e.id]&&e.isSelected?n.push(e):t.push(e),null}),g(t),K.current.resetAfterIndex(0)}},saveNlu:function(e){p&&p[e]&&(function(e){var t=O.a.createInstance({name:"nlutool",storeName:"examples"});t.getItem("alldata").then(function(n){n.push(e),t.setItem("alldata",n)})}(p[e]),m(e))}}},Ye=function(e){var t=e.index,n=e.style,a=e.data.items[t];return l.a.createElement(Ze,{item:a,splitNumber:t,style:n,saveItem:e.data.saveItem,deleteItem:e.data.deleteItem,lookups:e.data.lookups,setPageMessage:e.data.setPageMessage})};function Xe(e){var t=He("nlutool","examples","alldata",e.updateFunctions.updateLookups),n=t.loadAll,i=t.deleteItem,s=t.items,r=t.findKeyBy,c=t.searchFilter,u=t.setSearchFilter,m=t.skillFilterValue,p=t.setSkillFilterValue,g=t.intentFilterValue,f=t.setIntentFilterValue,d=t.tagAllValue,y=t.setTagAllValue,h=t.skillAllValue,v=t.setSkillAllValue,E=t.intentAllValue,k=t.setIntentAllValue,b=t.listRef,S=t.tagAll,A=t.untagAll,O=t.unskillAll,x=t.intentAll,I=t.resetSelection,j=t.selectAll,T=t.skillSetAll,L=t.saveItemWrap,w=t.getItemSize,C=t.deleteAll,N=t.filteredItems,F=t.createEmptyItem,_=t.sort;return Object(a.useEffect)(function(){n()},[]),l.a.createElement("div",null,l.a.createElement(Ge,Object.assign({},e,{searchFilter:c,setSearchFilter:u,skillFilterValue:m,setSkillFilterValue:p,resetSelection:I,selectAll:j,createEmptyItem:F,intentFilterValue:g,setIntentFilterValue:f,untagAll:A,unskillAll:O,sort:_})),function(e){return N&&N.length>0?l.a.createElement("div",null,l.a.createElement(ie,{items:s,filteredItems:N}),e.lookups.selectedTally>0&&l.a.createElement("span",{style:{float:"right"}},l.a.createElement(ge,{skillSetAll:T,skillAllValue:h,setSkillAllValue:v,untagAll:A,unskillAll:O,intentAll:x,intentAllValue:E,setIntentAllValue:k,tagAll:S,tagAllValue:d,setTagAllValue:y,lookups:e.lookups}),l.a.createElement(G.a,{style:{marginLeft:"1em"},onClick:C,variant:"danger"},"Delete Selected")),l.a.createElement(be.a,{ref:b,itemData:{items:N,saveItem:L,deleteItem:i,findKeyBy:r,lookups:e.lookups,setPageMessage:e.setPageMessage},itemKey:function(e){return e},className:"List",height:700,itemCount:N.length,itemSize:w,width:"100%"},Ye)):l.a.createElement("div",null,l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("br",null),l.a.createElement("b",null,"No items"),l.a.createElement("br",null),l.a.createElement("br",null),"Upload ",l.a.createElement(o.b,{to:"/sources"},l.a.createElement(G.a,null,"Sources"))," then ",l.a.createElement(o.b,{to:"/import"},l.a.createElement(G.a,null,"Import")),"."))}(e))}var Qe=n(1225),qe=n(94),$e=n.n(qe),et=n(95),tt=n.n(et);n(1211);function nt(e){var t={paddingLeft:"0.3em"},n=e.history&&e.history.location&&e.history.location.pathname?e.history.location.pathname:"/",i={"/":{name:"NLU Tool",show:!1},"/search":{name:"Search",show:!0},"/sources":{name:"Import",show:!0},"/regexps":{name:"RegExps",show:!0},"/lists":{name:"Entities",show:!0},"/utterances":{name:"Utterances",show:!0},"/examples":{name:"Intents",show:!0},"/skills":{name:"Skills",show:!0},"/help":{name:"Help",show:!0}},s=Object(a.useState)(""),c=Object(r.a)(s,2),u=(c[0],c[1]);Object(a.useEffect)(function(){e.user&&e.user.token&&e.user.token.access_token&&(console.log("GETresS"),e.getAxiosClient(e.user.token.access_token).get("http://localhost:5000/api/v1/skill/count").then(function(e){u(e),console.log(e)}))},[e.user&&e.user.token&&e.user.token.access_token?e.user.token.access_token:""]);var m=Object.keys(i).map(function(e,a){var s=i[e];return s.show?s.link?l.a.createElement("a",{key:a,style:t,href:s.link},l.a.createElement(G.a,{variant:"primary"},s.name)):l.a.createElement(o.b,{key:a,style:t,to:e},l.a.createElement(G.a,{variant:-1!==n.indexOf(e)?"success":"primary"},s.name)):null});return l.a.createElement(Qe.a,{bg:"dark",variant:"dark",style:{width:"100%",border:""}},e.message&&l.a.createElement("div",{style:{position:"fixed",top:100,left:window.innerWidth?window.innerWidth/2-40:100,border:"2px solid red",background:"pink",padding:"0.5em",minWidth:"400px",borderRadius:"5px",zIndex:999}},l.a.createElement(G.a,{variant:"danger",size:"sm",style:{float:"right",fontWeight:"bold",borderRadius:"20px",marginLeft:"1em"},onClick:function(t){e.setPageMessage("")}},"X"),e.message),l.a.createElement("img",{src:$e.a,style:{height:"5em",marginRight:"0.4em"},alt:"logo"}),l.a.createElement("div",{style:{width:"100%"}},m),l.a.createElement("div",{style:{float:"right",vAlign:"top",minWidth:"10em",marginRight:"0em"}},e.isLoggedIn()&&l.a.createElement("div",null,l.a.createElement("a",{style:{display:"inline"},href:"/login/profile"},l.a.createElement(G.a,{variant:"primary"},"Profile")),l.a.createElement("a",{style:{display:"inline"},href:"/login/logout"},l.a.createElement(G.a,{variant:"danger"},"Logout"))),!e.isLoggedIn()&&l.a.createElement("a",{href:"/login/login"},l.a.createElement(G.a,{variant:"success"},"Login"))),l.a.createElement("img",{src:tt.a,alt:"waiting",style:{position:"fixed",top:5,right:5,zIndex:99,display:e.waiting?"block":"none"}}))}var at=n(96),lt=n.n(at),it=n(65),st=n.n(it);function rt(e){var t=e.item,n=e.splitNumber,a=e.style,i=Be(e.item,e.saveItem,e.splitNumber,e.style,e.setPageMessage),s=i.intentTitle,r=i.setIntentTitle,o=i.selectionState,c=i.setSelectionState,u=i.newEntity,m=i.setNewEntity,p=i.tags,g=i.skills,f=i.reactTags,d=i.reactSkills,y=i.onTagDelete,h=i.onTagAddition,v=i.onSkillDelete,E=i.onSkillAddition,k=i.updateExampleContent,b=i.entityClicked,S=i.entityTypeChanged,A=i.intentChanged,O=i.entityDelete,x=i.selectItem,I=i.deselectItem,j=e.lookups.intentLookups&&e.lookups.intentLookups.sort().map(function(e,t){return l.a.createElement(Y.a.Item,{key:t,value:e,onClick:function(t){A(e)}},e)}),T=t&&t.entities?t.entities.map(function(t,n){var a=e.lookups.entityLookups.sort().map(function(e,t){return l.a.createElement(Y.a.Item,{key:t,value:e,onClick:function(t){S(n,e)}},e)});return l.a.createElement(Y.a,{style:{marginLeft:"0.2em"},variant:"info",key:n,as:X.a},l.a.createElement(Y.a.Toggle,{variant:"info",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(G.a,{variant:"info",size:"sm",onClick:function(e){b(n,t.type)}},l.a.createElement("b",null,t.type),"-",t.value?t.value:"Select Entity Type"),l.a.createElement(G.a,{variant:"info",size:"sm",onClick:function(e){O(n,"")}},"X"),l.a.createElement(Y.a.Menu,null,l.a.createElement("form",{style:{display:"inline"}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){S(n,e.target.value)},value:t.type}))),a))}):[];if(o&&o.textSelection&&o.textSelection.length>0&&o.textSelectionFrom===n){var L=e.lookups.entityLookups&&e.lookups.entityLookups.sort().map(function(e,t){return l.a.createElement(Y.a.Item,{key:t,value:e,onClick:function(t){S(-1,e)}},e)});T.push(l.a.createElement(Y.a,{key:"new",variant:"success",as:X.a},l.a.createElement(Y.a.Toggle,{variant:"success",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(G.a,{variant:"success",size:"sm"},"New Entity"),l.a.createElement(Y.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(e){e.preventDefault(),S(-1,u)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){m(e.target.value)},value:u}))),L)))}return t&&l.a.createElement("div",{style:a,className:n%2?"ListItemOdd":"ListItemEven"},l.a.createElement("div",{style:{position:"relative",width:"100%",textAlign:"left",borderTop:"2px solid black"}},!t.isSelected&&l.a.createElement(G.a,{style:{float:"left"},size:"lg",variant:"secondary",onClick:function(){x(n)}},l.a.createElement("img",{style:{height:"1em"},src:xe.a,alt:"Select"})),t.isSelected&&l.a.createElement(G.a,{style:{float:"left"},size:"lg",variant:"success",onClick:function(){I(n)}},l.a.createElement("img",{style:{height:"1em"},src:xe.a,alt:"Deselect"})),t.intent&&l.a.createElement(G.a,{style:{float:"right",marginLeft:"0.2em"},variant:"success",onClick:function(){e.saveNlu(n)}},l.a.createElement("img",{src:st.a,alt:"Save"})," Save"),!t&&l.a.createElement(G.a,{style:{float:"right",marginLeft:"0.2em"},variant:"secondary"},l.a.createElement("img",{src:st.a,alt:"Save"})," Import"),l.a.createElement(G.a,{variant:"danger",style:{float:"right"},onClick:function(a){e.deleteItem(n,t.id?t.id:"")}},l.a.createElement("img",{src:lt.a,alt:"Delete"})," Delete"),l.a.createElement(Y.a,{style:{float:"left"},as:X.a},l.a.createElement(Y.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(G.a,{size:"sm"},t.intent?t.intent.toString():"Select Intent"," "),l.a.createElement(Y.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(e){e.preventDefault(),A(s)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",value:s,onChange:function(e){r(e.target.value)}}))),j)),l.a.createElement("span",{style:{float:"left"}},T),l.a.createElement("div",{style:{float:"left"}},l.a.createElement(Te.a,{placeholderText:"Add to skill",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:d,tags:g,suggestionComponent:we,suggestions:e.lookups.skillLookups.map(function(e,t){return{id:t,name:e}}),onDelete:v,onAddition:E})),l.a.createElement("div",{style:{float:"left"}},l.a.createElement(Te.a,{placeholderText:"Add new tag",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:f,tags:p,suggestionComponent:we,suggestions:e.lookups.tagLookups.map(function(e,t){return{id:t,name:e}}),onDelete:y,onAddition:h})),l.a.createElement("input",{onFocus:function(e){c(null)},onSelect:function(e){var t=window.getSelection().toString();c({textSelection:t,textSelectionFrom:n,startTextSelection:e.target.selectionStart,endTextSelection:e.target.selectionEnd})},type:"text",style:{clear:"both",width:"80%"},value:t.example,id:"example_input_"+n,onChange:function(e){k(e.target.value)}})))}var ot=n(97),ct=n.n(ot),ut=n(98),mt=n.n(ut),pt=function(e){var t=e.index,n=e.style,a=e.data.items[t];return l.a.createElement(rt,{item:a,splitNumber:t,style:n,saveItem:e.data.saveItem,deleteItem:e.data.deleteItem,saveNlu:e.data.saveNlu,lookups:e.data.lookups,setPageMessage:e.data.setPageMessage})};function gt(e){var t=He("nlutool","import","alldata",e.updateFunctions.updateLookups),n=t.loadAll,i=t.deleteItem,s=t.items,r=t.findKeyBy,c=t.searchFilter,u=t.setSearchFilter,m=t.tagAllValue,p=t.setTagAllValue,g=t.skillAllValue,f=t.setSkillAllValue,d=t.skillFilterValue,y=t.setSkillFilterValue,h=t.intentFilterValue,v=t.setIntentFilterValue,E=t.intentAllValue,k=t.setIntentAllValue,b=t.listRef,S=t.tagAll,A=t.untagAll,O=t.unskillAll,x=t.intentAll,I=t.resetSelection,j=t.selectAll,T=t.skillSetAll,L=t.saveItemWrap,w=t.getItemSize,C=t.deleteAll,N=t.saveAll,F=t.saveNlu,_=t.filteredItems,M=t.createEmptyItem,R=t.sort;return Object(a.useEffect)(function(){n()},[]),l.a.createElement("div",null,l.a.createElement(Ge,Object.assign({},e,{searchFilter:c,setSearchFilter:u,skillFilterValue:d,setSkillFilterValue:y,resetSelection:I,selectAll:j,createEmptyItem:M,untagAll:A,unskillAll:O,intentFilterValue:h,setIntentFilterValue:v,sort:R})),function(e){return _&&_.length>0?l.a.createElement("div",null,l.a.createElement("span",{style:{float:"left",fontWeight:"bold"}},"\xa0",_.length,"/",s.length," matches "),e.lookups.selectedTally>0&&l.a.createElement("span",{style:{float:"right"}},l.a.createElement("span",null,"With ",e.lookups.selectedTally," selected\xa0",l.a.createElement(ne,{skillSetAll:T,skillAllValue:g,setSkillAllValue:f,lookups:e.lookups,untagAll:A,unskillAll:O}),l.a.createElement(te,{intentAll:x,intentAllValue:E,setIntentAllValue:k,lookups:e.lookups,untagAll:A,unskillAll:O}),l.a.createElement(ee,{tagAll:S,tagAllValue:m,setTagAllValue:p,lookups:e.lookups,untagAll:A,unskillAll:O})),l.a.createElement(G.a,{style:{marginLeft:"1em"},onClick:N,variant:"success"},"Save Selected"),l.a.createElement(G.a,{style:{marginLeft:"1em"},onClick:C,variant:"danger"},"Delete Selected")),l.a.createElement(be.a,{ref:b,itemData:{items:_,saveItem:L,saveNlu:F,deleteItem:i,findKeyBy:r,lookups:e.lookups,setPageMessage:e.setPageMessage},itemKey:function(e){return e},className:"List",height:700,itemCount:_.length,itemSize:w,width:"100%"},pt)):l.a.createElement("div",null,l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("br",null),l.a.createElement("b",null,"No more items to import"),l.a.createElement("br",null),l.a.createElement("br",null),"Open ",l.a.createElement(o.b,{to:"/sources"},l.a.createElement(G.a,null,l.a.createElement("img",{style:{height:"1em",paddingRight:"1em"},src:ct.a,alt:"Sources"}),"Sources"))," to create more or ",l.a.createElement(o.b,{to:"/examples"},l.a.createElement(G.a,null,"Organise",l.a.createElement("img",{src:mt.a,alt:"Intents",style:{height:"1em",paddingLeft:"1em"}})))," what you have imported into skills."))}(e))}var ft=n(26),dt=n.n(ft),yt=n(40);function ht(e){var t=new L.a;return console.log(["ZIP",e]),function e(n,a){Array.isArray(n.files)&&n.files.map(function(e){console.log(["ZIP file",e]);var n=e.base64&&e.base64.length>0?{base64:!0}:{};return e.name&&e.name.length>0&&e.content&&t.file(a+"/"+e.name,e.content,n),null}),Array.isArray(n.folders)&&n.folders.map(function(n){return console.log(["ZIP folder",n]),n.name&&n.name.length>0&&t.folder(n.name),(n.files&&n.files.length>0||n.folders&&n.folders.length>0)&&e(n,a+"/"+n.name),null})}(e,""),new Promise(function(e,n){t.generateAsync({type:"blob"}).then(function(t){e(t)})})}function vt(e){return Et.apply(this,arguments)}function Et(){return(Et=Object(yt.a)(dt.a.mark(function e(t){return dt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){O.a.createInstance({name:"nlutool",storeName:"lists"}).getItem("alldata").then(function(n){var a={invocation:t.invocation},l={},i={};t.intents&&Object.keys(t.intents).map(function(e){var n=t.intents[e];l[e]||(l[e]={name:e,phrases:[],inputs:[]});var a={};return Array.isArray(n)&&n.map(function(t){return l[e].phrases.push(b(t.example,t.entities)),Array.isArray(t.entities)&&t.entities.map(function(e){return a[e.type]=!0,Array.isArray(i[e.type])||(i[e.type]=[]),i[e.type].push(e.value),null}),null}),l[e].phrases=E(l[e].phrases).sort(),l[e].inputs=Object.keys(a).map(function(e){var n=e+"Type";return t.entities&&t.entities[e]&&(t.entities[e].googleType||t.entities[e].alexaType)&&(n={},t.entities[e].googleType&&(n.dialogflow=t.entities[e].googleType),t.entities[e].alexaType&&(n.alexa=t.entities[e].alexaType)),{name:e,type:n}}),null}),a.intents=Object.values(l);var s={},r={};n.map(function(e){return e.value&&e.value.trim().length>0&&(e.synonym&&(Array.isArray(r[e.synonym])||(r[e.synonym]=[]),s[e.value]=e.synonym,r[e.synonym].push(e.value)),Object.keys(i).map(function(n){return t.entities&&t.entities[n]&&t.entities[n].lists&&t.entities[n].lists.map(function(t){return e&&e.tags&&-1!==e.tags.indexOf(t)&&i[n].push(e.value),null}),null})),null}),console.log(["synonyms",s,r]),a.inputTypes=Object.keys(i).map(function(e){var t=[];return E(i[e]).sort().map(function(e){return s[e]||e&&e.trim().length>0&&t.push({value:e}),null}),Object.keys(r).map(function(e){return e&&e.trim().length>0&&t.push({value:e,synonyms:r[e]}),null}),{name:e+"Type",values:t}}),console.log(["inputtypes",a.inputTypes]);var o=JSON.stringify(a);e({folders:[{name:"models",files:[{name:"en-US.json",content:o}]}]})})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function kt(){return(kt=Object(yt.a)(dt.a.mark(function e(t){return dt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=ht,e.next=3,vt(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function bt(e){console.log(["EXPPORT JSON",e]);var t=O.a.createInstance({name:"nlutool",storeName:"lists"}),n=O.a.createInstance({name:"nlutool",storeName:"utterances"}),a=[];return a.push(new Promise(function(n,a){e&&e.entities?t.getItem("alldata").then(function(t){var a={},l={};console.log(e.entities),e&&e.entities&&(Object.values(e.entities).map(function(e){return e.lists&&e.lists.map(function(e){a[e]=!0}),null}),console.log(["USEDLISTS",a]),Object.keys(a).map(function(e){l[e]=t.filter(function(t){return!(!t.tags||-1===t.tags.indexOf(e))}).map(function(e){return{value:e.value,synonym:e.synonym}})}),console.log(["FILLEDLISTS",l]),console.log(["SETSKILL",JSON.parse(JSON.stringify(e))])),n(l)}):n({})})),a.push(new Promise(function(t,a){var l={};console.log(["SHOULD ADD UTTS",e.utterancesLists,e.utterances]),e.utterancesLists||e.utterances?n.getItem("alldata").then(function(n){Array.isArray(n)&&(n.map(function(t){return e.utterances&&e.utterances.map(function(e){return t.value===e&&(l[t.value]={value:t.value,synonym:t.synonym,tags:t.tags}),null}),e.utterancesLists&&e.utterancesLists.map(function(e){return t.tags&&-1!==t.tags.indexOf(e)&&(l[t.value]={value:t.value,synonym:t.synonym,tags:t.tags}),null}),null}),console.log(["SET UITTER GLOLBA",l])),t(l)}):t({})})),new Promise(function(t,n){Promise.all(a).then(function(n){console.log(["LOIADED LOOKUPS",n]);var a=e;a.entitiesData=n[0],a.utterancesData=n[1],console.log(["resolve JSON",a]),t(a)})})}function St(e){return At.apply(this,arguments)}function At(){return(At=Object(yt.a)(dt.a.mark(function e(t){return dt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var a=O.a.createInstance({name:"nlutool",storeName:"lists"}),l=[];a.getItem("alldata").then(function(n){var a={};t.intents&&Object.keys(t.intents).map(function(e){var n=t.intents[e];return Array.isArray(a[e])||(a[e]=[]),Array.isArray(n)&&n.map(function(t){return a[e].push(b(t.example,t.entities)),null}),a[e]=E(a[e]).sort(),null});var i={};t.entities&&Object.keys(t.entities).map(function(e){var a=[],l=t.entities[e];return l.values&&(a=a.concat(l.values)),l.lists&&(console.log(["add from lists",l.lists]),n.map(function(e){return l.lists.map(function(t){return console.log([t,-1!==e.tags.indexOf(t),e.tags]),e&&e.tags&&-1!==e.tags.indexOf(t)&&(console.log("list item used "),a.push(e.value)),null}),null})),i[e]=E(a).sort(),null}),Object.keys(a).map(function(e){return l.push({name:e+".intent",content:a[e].join("\n")}),null}),Object.keys(i).map(function(e){return l.push({name:e+".entity",content:i[e].join("\n")}),null}),e(l)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ot(){return(Ot=Object(yt.a)(dt.a.mark(function e(t){var n;return dt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,St(t);case 2:return n=e.sent,e.abrupt("return",ht({files:n}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var xt={config:'\nlanguage: en\npipeline:\n  - name: WhitespaceTokenizer\n  - name: RegexFeaturizer\n  - name: LexicalSyntacticFeaturizer\n  - name: CountVectorsFeaturizer\n  - name: CountVectorsFeaturizer\n    analyzer: "char_wb"\n    min_ngram: 1\n    max_ngram: 4\n  - name: ResponseSelector\n    epochs: 100\n  - name: DIETClassifier\n    epochs: 100\n  - name: EntitySynonymMapper\n\npolicies:\n  - name: FormPolicy\n  - name: MemoizationPolicy\n  - name: TEDPolicy\n    max_history: 5\n    epochs: 100\n  - name: MappingPolicy\n  - name: "FallbackPolicy"\n    nlu_threshold: 0.5\n    core_threshold: 0.3\n    fallback_action_name: "action_default_fallback"\n    ',credentials:'\n# This file contains the credentials for the voice & chat platforms\n# which your bot is using.\n# https://rasa.com/docs/rasa/user-guide/messaging-and-voice-channels/\n\nrest:\n#  # you don\'t need to provide anything here - this channel doesn\'t\n#  # require any credentials\n\n\n#facebook:\n#  verify: "<verify>"\n#  secret: "<your secret>"\n#  page-access-token: "<your page access token>"\n\n#slack:\n#  slack_token: "<your slack token>"\n#  slack_channel: "<the slack channel>"\n\n#socketio:\n#  user_message_evt: <event name for user message>\n#  bot_message_evt: <event name for but messages>\n#  session_persistence: <true/false>\n\n#mattermost:\n#  url: "https://<mattermost instance>/api/v4"\n#  token: "<bot token>"\n#  webhook_url: "<callback URL>"\n\n#rasa:\n  #url: "http://localhost:5002/api"\n \n    ',endpoint:"\n#action_endpoint:\n#  url: http://localhost:5055/webhook\n\n    ",actions:'\n""" RASA actions """\n \n    ',single_action:function(e,t){return'\n""" RASA action """\nimport sys\nimport logging\nfrom typing import Any, Text, Dict, List\nfrom datetime import datetime\nfrom rasa_sdk import Action, Tracker\nfrom rasa_sdk.executor import CollectingDispatcher\nfrom rasa_sdk.events import SlotSet, FollowupAction\n\nclass '+e+'(Action):\n    def name(self) -> Text:\n        return "'+t+"\"\n    def run(self, dispatcher: CollectingDispatcher,\n            tracker: Tracker,\n            domain: Dict[Text, Any]) -> List[Dict[Text, Any]]:\n        var slotsets = []\n        logger = logging.getLogger(__name__)    \n        logger.debug('Action "+t+'\')\n        return [SlotSet("hermod_force_end", "true"),SlotSet("hermod_force_continue", None)] \n        \n        dispatcher.utter_message(text="Action '+t+'")\n        return slotsets\n    \n    '},domain:"\nsession_config:\n  carry_over_slots_to_new_session: true\n  session_expiration_time: 5    \n\n",stories:'\n## greet + location/price + cuisine + num people    \x3c!-- name of the story - just for debugging --\x3e\n* greet\n   - action_ask_howcanhelp\n* inform{"location": "rome", "price": "cheap"}  \x3c!-- user utterance, in format intent{entities} --\x3e\n   - action_on_it\n   - action_ask_cuisine\n* inform{"cuisine": "spanish"}\n   - action_ask_numpeople        \x3c!-- action that the bot should execute --\x3e\n* inform{"people": "six"}\n   - action_ack_dosearch    \n',session:"\nsession_config:\n  carry_over_slots_to_new_session: true\n  session_expiration_time: 5\n"};function It(e,t,n,a,l,i,s,r,o){var c={files:[{name:"actions.py",content:n},{name:"config.yml",content:a},{name:"domain.yml",content:l},{name:"credentials.yml",content:i},{name:"endpoints.yml",content:s}],folders:[{name:"actions",files:r},{name:"data",files:[{name:"nlu.md",content:e},{name:"stories.md",content:o||""}],folders:[{name:"lookups",files:t}]}]};return console.log(["TREE GEN",c]),c}function jt(e,t,n,a,l,i,s,r,o){var c={files:[{name:"actions.py",content:n},{name:"config.yml",content:a},{name:"domain.yml",content:l},{name:"credentials.yml",content:i},{name:"endpoints.yml",content:s}],folders:[{name:"actions",files:r},{name:"data",files:[{name:"nlu.json",content:e},{name:"stories.md",content:o||""}],folders:[{name:"lookups",files:t}]}]};return console.log(["TREE GEN",c]),c}var Tt=[{name:"JSON",exportFunction:function(e){return new Promise(function(t,n){bt(e).then(function(n){console.log(["content",e]);var a=new Blob([JSON.stringify(n,null,2)],{type:"application/json"});t(a)})})}},{name:"JOVO",exportFunction:function(e){return kt.apply(this,arguments)}},{name:"Mycroft",exportFunction:function(e){return Ot.apply(this,arguments)}},{name:"RASA Markdown",exportFunction:function(e){return new Promise(function(t,n){(function(e){return console.log(["EXPPORT RASA",e]),new Promise(function(t,n){var a=O.a.createInstance({name:"nlutool",storeName:"lists"}),l=O.a.createInstance({name:"nlutool",storeName:"utterances"});a.getItem("alldata").then(function(n){console.log(["LISTS",n]);var a={};e.entities&&Object.keys(e.entities).map(function(t,l){var i=e.entities[t];return i&&i.values&&(a[t]=i.values),e.entities[t]&&Array.isArray(e.entities[t].lists)&&n.map(function(n,l){return e.entities[t].lists.map(function(e){return n.tags&&-1!==n.tags.indexOf(e)&&a[t].push(n.value),null}),null}),null}),console.log(["LISTS2",a]);var i=[],s=[];Object.keys(a).map(function(e){var t=a[e];return i.push({name:e+".txt",content:t.join("\n")}),s.push("## lookup:"+e),s.push("data/lookups/"+e+".txt"),null});var r={};n.map(function(e){return e.value&&e.value.trim().length>0&&e.synonym&&(Array.isArray(r[e.synonym])||(r[e.synonym]=[]),r[e.synonym].push(e.value)),null}),console.log(["synonyms",r]);var o=[];Object.keys(r).map(function(e){return o.push("## synonym:"+e),E(r[e]).sort().map(function(e){return o.push("- "+e),null}),o.push("\n"),null}),console.log(["synonyms OUT",o]);var c=[];e.intents&&(console.log(["have intents",e.intents]),Object.keys(e.intents).map(function(t){var n=e.intents[t];console.log("have intent ",t,n),c.push("## intent:"+t);var a=[];return n.map(function(e){if(console.log(["INTY",e]),e&&e.example&&e.example.trim().length>0){var t=S(e.example,e.entities);a[t]="- "+t}return null}),(c=[].concat(Object(u.a)(c),Object(u.a)(Object.values(a)))).push("\n"),null}));var m=c.join("\n")+"\n"+o.join("\n")+s.join("\n");console.log(m);var p=e.rasaConfig?e.rasaConfig:xt.config,g=e.rasaCredentials?e.rasaCredentials:xt.credentials,h=e.rasaEndpoint?e.rasaEndpoint:xt.endpoint,v=xt.actions,k=[],b=[];Array.isArray(e.rasaActions)&&e.rasaActions.map(function(e){if(e&&e.trim().length>0){var t=d(f(y(e))),n=y(t)+"_action";k.push(n);var a=t&&t.trim().length>0?t[0].toUpperCase()+t.substring(1):"";b.push({name:a+"Action.py",content:xt.single_action(a+"Action",n)}),v+="\n import "+a+"Action.py"}return null});var A=e.entities?Object.keys(e.entities):[],O=e.intents?Object.keys(e.intents):[],x=e.slots?Object.keys(e.slots):e.entities?Object.keys(e.entities):[],I={};x.map(function(t){return I[t]={type:e.slots&&e.slots[t]&&e.slots[t].slotType?e.slots[t].slotType:"unfeaturized"},null}),console.log(["DOMAIN",A,O,x,I]);var j=[];O.length>0&&(j.push("intents:"),O.map(function(e){return j.push("- "+e),null}),j.push("\n")),A.length>0&&(j.push("entities:"),A.map(function(e){return j.push("- "+e),null}),j.push("\n")),x.length>0&&(j.push("slots:"),x.map(function(e,t){return j.push("  "+e+":"),j.push("    type: "+I[e].type),null}),j.push("\n")),e.rasaSession&&e.rasaSession.trim().split("\n").map(function(e){return j.push(e),null});var T={};e.utterancesLists||e.utterances?l.getItem("alldata").then(function(n){Array.isArray(n)?(n.map(function(t){return e.utterances&&e.utterances.map(function(e){return t.value===e&&(T[t.value]=t),null}),e.utterancesLists&&e.utterancesLists.map(function(e){return t.tags&&-1!==t.tags.indexOf(e)&&(T[t.value]=t),null}),null}),Object.keys(T).length>0&&(j.push("responses:"),Object.keys(T).map(function(e){var t=T[e];return j.push("utter_"+f(t.value)),j.push("- text: "+t.value),t.synonyms&&t.synonyms.length>0&&t.synonyms.map(function(e){return j.push("- text: "+e),null}),null})),t(It(m,i,v,p,j.join("\n"),g,h,b,e.rasaStories))):t(It(m,i,v,p,j.join("\n"),g,h,b,e.rasaStories))}):t(It(m,i,v,p,j.join("\n"),g,h,b,e.rasaStories))})})})(e).then(function(e){ht(e).then(function(e){t(e)})})})}},{name:"RASA JSON",exportFunction:function(e){return new Promise(function(t,n){(function(e){return console.log(["EXPPORT RASA",e]),new Promise(function(t,n){var a=O.a.createInstance({name:"nlutool",storeName:"lists"}),l=O.a.createInstance({name:"nlutool",storeName:"utterances"});a.getItem("alldata").then(function(n){console.log(["LISTS",n]);var a={};e.entities&&Object.keys(e.entities).map(function(t,l){var i=e.entities[t];return i&&i.values&&(a[t]=i.values),e.entities[t]&&Array.isArray(e.entities[t].lists)&&n.map(function(n,l){return e.entities[t].lists.map(function(e){return n.tags&&-1!==n.tags.indexOf(e)&&a[t].push(n.value),null}),null}),null}),console.log(["LISTS2",a]);var i=[],s=[];Object.keys(a).map(function(e){var t=a[e];return i.push({name:e+".txt",content:t.join("\n")}),s.push("## lookup:"+e),s.push("data/lookups/"+e+".txt"),null});var r={};n&&n.map(function(e){return e.value&&e.value.trim().length>0&&e.synonym&&(Array.isArray(r[e.synonym])||(r[e.synonym]=[]),r[e.synonym].push(e.value)),null}),console.log(["synonyms",r]);var o={};e.intents&&(console.log(["have intents",e.intents]),Object.keys(e.intents).map(function(t){var n=e.intents[t];return console.log("have intent ",t,n),n.map(function(e){if(e&&e.example&&e.example.trim().length>0){console.log(["INTY",e]);var n=S(e.example,e.entities);o[n]={text:n,intent:t,entities:e.entities?e.entities.map(function(e){return{end:e.end,entity:e.type,start:e.start,value:e.value}}):[]}}return null}),null}));var c=JSON.stringify({rasa_nlu_data:{regex_features:[],entity_synonyms:Object.keys(r).map(function(e){return{synonyms:r[e],value:e}}),common_examples:Object.values(o)}});console.log(c);var u=e.rasaConfig?e.rasaConfig:xt.config,m=e.rasaCredentials?e.rasaCredentials:xt.credentials,p=e.rasaEndpoint?e.rasaEndpoint:xt.endpoint,g=xt.actions,h=[],v=[];Array.isArray(e.rasaActions)&&e.rasaActions.map(function(e){if(e&&e.trim().length>0){var t=d(f(y(e))),n=y(t)+"_action";h.push(n);var a=t&&t.trim().length>0?t[0].toUpperCase()+t.substring(1):"";v.push({name:a+"Action.py",content:xt.single_action(a+"Action",n)}),g+="\n import "+a+"Action.py"}return null});var E=e.entities?Object.keys(e.entities):[],k=e.intents?Object.keys(e.intents):[],b=e.slots?Object.keys(e.slots):e.entities?Object.keys(e.entities):[],A={};b.map(function(t){return A[t]={type:e.slots&&e.slots[t]&&e.slots[t].slotType?e.slots[t].slotType:"unfeaturized"},null}),console.log(["DOMAIN",E,k,b,A]);var O=[];k.length>0&&(O.push("intents:"),k.map(function(e){return O.push("- "+e),null}),O.push("\n")),E.length>0&&(O.push("entities:"),E.map(function(e){return O.push("- "+e),null}),O.push("\n")),b.length>0&&(O.push("slots:"),b.map(function(e,t){return O.push("  "+e+":"),O.push("    type: "+A[e].type),null}),O.push("\n")),e.rasaSession&&e.rasaSession.trim().split("\n").map(function(e){return O.push(e),null});var x={};e.utterancesLists||e.utterances?l.getItem("alldata").then(function(n){Array.isArray(n)?(n.map(function(t){return e.utterances&&e.utterances.map(function(e){return t.value===e&&(x[t.value]=t),null}),e.utterancesLists&&e.utterancesLists.map(function(e){return t.tags&&-1!==t.tags.indexOf(e)&&(x[t.value]=t),null}),null}),Object.keys(x).length>0&&(O.push("responses:"),Object.keys(x).map(function(e){var t=x[e];return O.push("utter_"+f(t.value)),O.push("- text: "+t.value),t.synonyms&&t.synonyms.length>0&&t.synonyms.map(function(e){return O.push("- text: "+e),null}),null})),t(jt(c,i,g,u,O.join("\n"),m,p,v,e.rasaStories))):t(jt(c,i,g,u,O.join("\n"),m,p,v,e.rasaStories))}):t(jt(c,i,g,u,O.join("\n"),m,p,v,e.rasaStories))})})})(e).then(function(e){ht(e).then(function(e){t(e)})})})}}];function Lt(e){return l.a.createElement("div",null,l.a.createElement(o.b,{to:"/skills/skill/"+e.currentSkill.title},l.a.createElement(G.a,{variant:"success",style:{float:"right"}},"Back to Skill")),l.a.createElement("h1",null,"Publish"),l.a.createElement("div",null,"Ready to share your skill - ",l.a.createElement("b",null,e.currentSkill.title),",  so other people can download and remix your intents, entities and utterances into new skills."),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("b",null,"By publishing your extension, you are agreeing to the following"),l.a.createElement("ul",null,l.a.createElement("li",null,"Your skill will be available for download under an MIT Open Source License, allowing people to download the data and do whatever they want with it."))),l.a.createElement("div",null,"Submitted skills can be found using the search tools on this website. Community data is also regularly commited to the ",l.a.createElement("a",{href:"https://github.com/syntithenai/opennludata_data",target:"_new"},"Github repository")," "),l.a.createElement("br",null),l.a.createElement("div",{style:{width:"100%",textAlign:"center"}},!e.currentSkill._id&&l.a.createElement(G.a,{variant:"success",style:{display:"inline"},onClick:function(t){bt(e.currentSkill).then(function(t){e.saveItem("Skill",t).then(function(t){console.log(["SSKIL created",t]),t&&t.data&&t.data._id&&(e.setCurrentSkill(t.data),e.setMongoId(t.data._id),e.setPageMessage("Published",3e3),e.history.push("/skills/skill/"+e.currentSkill.title))})})}},"Publish ",e.currentSkill.title),e.currentSkill._id&&l.a.createElement(G.a,{variant:"success",style:{display:"inline"},onClick:function(t){bt(e.currentSkill).then(function(t){e.saveItem("Skill",t).then(function(t){console.log(["SSKIL updated",t]),t&&t.data&&t.data._id&&(e.setCurrentSkill(t.data),e.setMongoId(t.data._id),e.setPageMessage("Published",3e3),e.history.push("/skills/skill/"+e.currentSkill.title))})})}},"Publish Again"),e.currentSkill._id&&l.a.createElement(G.a,{variant:"danger",style:{display:"inline"},onClick:function(t){e.setMongoId(""),e.deleteItem("Skill",e.currentSkill._id).then(function(t){e.setMongoId(null),console.log(["SSKIL deleted",t]),e.setPageMessage("Unpublished",3e3),e.history.push("/skills/skill/"+e.currentSkill.title)})}},"Unpublish")))}var wt=n(1218),Ct=n(1224),Nt=n(1219),Ft=function(e){var t=Object(a.useState)(e.value?e.value:""),n=Object(r.a)(t,2),i=n[0],s=n[1];return l.a.createElement(Y.a,{as:X.a},l.a.createElement(Y.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(G.a,{size:"sm"},e.value?e.title+" - "+e.value:e.title," "),l.a.createElement(Y.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(e){e.preventDefault()}},l.a.createElement(Q.a,null,l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){s(e.target.value)},value:i}))),Array.isArray(e.options)&&e.options.map(function(t,n){return l.a.createElement(Y.a.Item,{style:{minHeight:"1.4em"},key:n,value:t,onClick:function(n){s(t),e.selectItem(t)}},t||l.a.createElement("b",null,"None"))})))};function _t(e){console.log(e.tag);var t=e.lookups,n=e.setRegexpEntity,a=e.setRegexpIntent;return l.a.createElement(H.a.Item,{type:"button",style:{width:"100%"}},l.a.createElement(G.a,{variant:"danger",size:"sm",style:{float:"right",fontWeight:"bold",borderRadius:"15px",marginTop:"0.2em"},onClick:function(t){window.confirm("Really delete")&&e.onDelete(t)}},"X"),e.tag.name,"  \xa0\xa0\xa0 ",l.a.createElement("b",null,e.tag.synonym)," \xa0\xa0\xa0",l.a.createElement("div",{style:{float:"right"}},"\xa0\xa0",l.a.createElement(Ft,{title:"Intent",value:e.tag&&e.tag.intent?e.tag.intent:"",options:t&&t.intentLookups?t.intentLookups:[],selectItem:function(t){a(e.tag.id,t)}}),"\xa0\xa0",l.a.createElement(Ft,{title:"Entity",value:e.tag&&e.tag.entity?e.tag.entity:"",options:t&&t.entityLookups?t.entityLookups:[],selectItem:function(t){n(e.tag.id,t)}}),"\xa0\xa0"))}function Mt(e){if(e.skillFilterValue&&e.skillFilterValue.length>0){if(e.filteredItems&&e.filteredItems.length>0){var t=e.currentSkill&&e.currentSkill.utterances?e.currentSkill.utterances.map(function(e,t){return{id:t,name:e}}):[],n=e.currentSkill&&e.currentSkill.utterancesLists?e.currentSkill.utterancesLists.map(function(e,t){return{id:t,name:e}}):[],a=e.currentSkill&&e.currentSkill.rasa&&e.currentSkill.rasa.slots?e.currentSkill.rasa.slots:e.entitiesForSkill,i=e.currentSkill&&e.currentSkill.tags?e.currentSkill.tags.map(function(e,t){return{id:t,name:e}}):[];return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("h3",null,e.skillFilterValue," ")),l.a.createElement("div",{style:{marginTop:"0.7em",marginBottom:"0.7em"}},l.a.createElement("b",{style:{marginRight:"1em",marginLeft:"0.5em"}},"Tags"),l.a.createElement(Te.a,{placeholderText:"Select Tags  ",minQueryLength:0,maxSuggestionsLength:50,autoresize:!0,allowNew:!0,tags:i,suggestions:[],onDelete:function(t){e.removeSkillTag(t)},onAddition:function(t){e.addSkillTag(t)}})),l.a.createElement("div",{style:{marginTop:"0.7em",marginBottom:"0.7em",borderTop:"2px solid black"}},l.a.createElement("b",{style:{marginRight:"1em",marginLeft:"0.5em"}},"Intents"),l.a.createElement("span",null,Object.keys(e.collatedItems).sort().map(function(t,n){var a=e.currentIntent?e.currentIntent:Object.keys(e.collatedItems)[0],i="danger";return e.collatedItems[t].length>300?i="success":e.collatedItems[t].length>100?i="primary":e.collatedItems[t].length>10&&(i="warning"),e.collatedItems[t].length===e.collatedCounts[t]?l.a.createElement(o.b,{key:t,to:"/examples/skill/"+e.skillFilterValue+"/intent/"+t},l.a.createElement(G.a,{key:t,variant:t===a?"primary":"outline-primary",onClick:function(){e.setCurrentIntent(t)}},l.a.createElement(wt.a,{variant:i}," ",e.collatedItems[t].length," "),"\xa0",t)):l.a.createElement(o.b,{key:t,to:"/examples/skill/"+e.skillFilterValue+"/intent/"+t},l.a.createElement(G.a,{variant:t===a?"primary":"outline-primary",onClick:function(){e.setCurrentIntent(t)}},l.a.createElement(wt.a,{variant:"danger"}," ",e.collatedItems[t].length,"/",e.collatedCounts[t]," "),"\xa0",t))}))),l.a.createElement("div",{style:{marginTop:"0.7em",borderTop:"2px solid black"}},l.a.createElement("b",{style:{marginRight:"1em",marginLeft:"0.5em"}},"Entities"),l.a.createElement(H.a,null,Object.keys(e.entitiesForSkill).map(function(t,n){var a=e.currentSkill&&e.currentSkill.entities&&e.currentSkill.entities[t]&&e.currentSkill.entities[t].lists?e.currentSkill.entities[t].lists.map(function(e,t){return{id:t,name:e}}):[];return l.a.createElement(H.a.Item,{key:t},l.a.createElement("span",{style:{marginLeft:"1em",float:"left",fontWeight:"bold"}},"\xa0",t),l.a.createElement("span",{style:{marginLeft:"1em",float:"left"}},"\xa0",e.entitiesForSkill[t]&&e.entitiesForSkill[t].values&&e.entitiesForSkill[t].values.slice(0,5).join(", "),e.entitiesForSkill[t]&&e.entitiesForSkill[t].values&&e.entitiesForSkill[t].values.length>5?l.a.createElement(wt.a,null,"... ",e.entitiesForSkill[t]&&e.entitiesForSkill[t].values&&e.entitiesForSkill[t].values.length-5," more "):""),l.a.createElement("span",{style:{marginLeft:"1em",float:"left"}},l.a.createElement("label",null,l.a.createElement("i",null)," ",l.a.createElement(Te.a,{placeholderText:"Also use values from ",minQueryLength:0,maxSuggestionsLength:50,autoresize:!0,allowNew:!1,tags:a,suggestionComponent:we,suggestions:e.lookups.listsLookups.map(function(e,t){return{id:t,name:e}}),onDelete:function(n){e.removeListFromSkillEntity(t,n)},onAddition:function(n){e.addListToSkillEntity(t,n)}})," ")),l.a.createElement("div",{style:{float:"right"}},l.a.createElement(Ft,{options:[""].concat(Object(u.a)(g.entityTypes)),title:"Alexa",value:e.currentSkill.entities&&e.currentSkill.entities[t]&&e.currentSkill.entities[t].alexaType?e.currentSkill.entities[t].alexaType:"",selectItem:function(n){e.setAlexaEntityType(t,n)}}),"\xa0\xa0",l.a.createElement(Ft,{options:[""].concat(Object(u.a)(p.entityTypes)),title:"Google",value:e.currentSkill.entities&&e.currentSkill.entities[t]&&e.currentSkill.entities[t].googleType?e.currentSkill.entities[t].googleType:"",selectItem:function(n){e.setGoogleAssistantEntityType(t,n)}})))}))),l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"0.4em",borderTop:"2px solid black"}},l.a.createElement("div",null,l.a.createElement("b",null,"Regular Expressions")),l.a.createElement("div",{style:{clear:"both"}},l.a.createElement("div",{style:{marginLeft:"1em"}},l.a.createElement(H.a,{style:{minWidth:"500px"}},l.a.createElement(Te.a,{placeholderText:"Select Regular Expression  ",minQueryLength:0,maxSuggestionsLength:50,autoresize:!0,allowNew:!1,tags:e.currentSkill&&e.currentSkill.regexps?e.currentSkill.regexps.map(function(e,t){return{id:t,name:e.name,intent:e.intent?e.intent:"",entity:e.entity?e.entity:"",synonym:e.synonym}}):[],tagComponent:function(t){return l.a.createElement(_t,Object.assign({},t,{setRegexpEntity:e.setRegexpEntity,setRegexpIntent:e.setRegexpIntent,lookups:e.lookups}))},suggestionComponent:we,suggestions:e.lookups.regexpsLookups?e.lookups.regexpsCompleteLookups.map(function(e,t){return{id:t,name:e.value,intent:e.intent?e.intent:"",entity:e.entity?e.entity:"",synonym:e.synonym}}):[],onDelete:function(t){e.removeRegexp(t)},onAddition:function(t){e.addRegexp(t)}}))))),l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"0.4em",borderTop:"2px solid black"}},l.a.createElement("div",null,l.a.createElement("b",null,"Utterances")),l.a.createElement("div",{style:{clear:"both"}},l.a.createElement("div",{style:{marginLeft:"1em"}},l.a.createElement("label",null,"Utterances",l.a.createElement(Te.a,{placeholderText:"Use utterance ",minQueryLength:0,maxSuggestionsLength:50,autoresize:!0,allowNew:!0,tags:t,suggestionComponent:we,suggestions:e.lookups.utterancesLookups?e.lookups.utterancesLookups.map(function(e,t){return{id:t,name:e}}):[],onDelete:function(t){e.removeUtterance(t)},onAddition:function(t){e.addUtterance(t)}})," ")),l.a.createElement("div",{style:{marginLeft:"1em"}},l.a.createElement("label",null,"Utterance Lists",l.a.createElement(Te.a,{placeholderText:"Use utterances from ",minQueryLength:0,maxSuggestionsLength:50,autoresize:!0,allowNew:!1,tags:n,suggestionComponent:we,suggestions:e.lookups.utteranceTagsLookups?e.lookups.utteranceTagsLookups.map(function(e,t){return{id:t,name:e}}):[],onDelete:function(t){e.removeUtteranceList(t)},onAddition:function(t){e.addUtteranceList(t)}})," ")))),l.a.createElement("div",{style:{marginTop:"0.7em",borderTop:"2px solid black"}},l.a.createElement("div",null,l.a.createElement("b",null,"Platform")),l.a.createElement(Ct.a,{defaultActiveKey:"rasa",id:"platform-tabs"},l.a.createElement(Nt.a,{eventKey:"rasa",title:"RASA"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em"}},l.a.createElement(Ct.a,{defaultActiveKey:"slots",id:"platform-rasa"},l.a.createElement(Nt.a,{eventKey:"slots",title:"Slots"},l.a.createElement("div",{style:{marginLeft:"1.4em",marginTop:"0.7em",borderTop:"2px solid black"}},l.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.newSlot(e.newSlotValue,a)}},l.a.createElement("input",{value:e.newSlotValue,onChange:function(t){e.setNewSlotValue(t.target.value)}}),l.a.createElement(G.a,{size:"sm",onClick:function(){e.newSlot(e.newSlotValue,a)}},"New Slot")),l.a.createElement(H.a,null,Object.keys(a).map(function(t,n){return l.a.createElement(H.a.Item,{key:t},l.a.createElement("span",{style:{marginLeft:"1em",float:"left",fontWeight:"bold"}},"\xa0",t),l.a.createElement("div",{style:{float:"right"}},e.entitiesForSkill[t]&&l.a.createElement(Ft,{options:m.autofillOptions,title:"Autofill",value:e.currentSkill.rasa&&e.currentSkill.rasa.slots&&e.currentSkill.entities[t]&&e.currentSkill.rasa.slots[t]&&e.currentSkill.rasa.slots[t].slotAutofill&&e.currentSkill.rasa.slots[t].slotAutofill.trim().length>0?e.currentSkill.rasa.slots[t].slotAutofill:"Yes",selectItem:function(n){e.setRASASlotAutofill(t,n,a)}}),"\xa0\xa0",l.a.createElement(Ft,{options:Object.keys(m.slotTypes),title:"Slot",value:e.currentSkill.rasa&&e.currentSkill.rasa.slots&&e.currentSkill.rasa.slots[t]&&e.currentSkill.rasa.slots[t].slotType?e.currentSkill.rasa.slots[t].slotType:"unfeaturized",selectItem:function(n){e.setRASASlotType(t,n,a)}}),l.a.createElement(G.a,{variant:"danger",size:"sm",style:{marginLeft:"0.5em",float:"right",fontWeight:"bold",borderRadius:"15px",marginTop:"0.2em"},onClick:function(n){e.deleteSlot(t,a)}},"X")))})))),l.a.createElement(Nt.a,{eventKey:"actions",title:"Actions"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em",borderTop:"2px solid black"}},l.a.createElement("label",null,l.a.createElement("div",{style:{fontStyle:"italic"}},"One per line, _action will be appended to each line"),l.a.createElement("textarea",{style:{width:"40em",height:"10em"},value:e.currentSkill.rasa&&Array.isArray(e.currentSkill.rasa.actions)?e.currentSkill.rasa.actions.join("\n"):"",onChange:function(t){e.setRASAActions(t.target.value?t.target.value.split("\n"):[])},placeholder:"fred\nfindSname\nis_whatsi\nblah name"})))),l.a.createElement(Nt.a,{eventKey:"config",title:"Config"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em",borderTop:"2px solid black"}},l.a.createElement("label",null,l.a.createElement("textarea",{style:{width:"60em",height:"30em"},value:e.currentSkill.rasa&&e.currentSkill.rasa.config?e.currentSkill.rasa.config:"",onChange:function(t){e.setRASAConfig(t.target.value)},placeholder:xt.config})))),l.a.createElement(Nt.a,{eventKey:"stories",title:"Stories"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em",borderTop:"2px solid black"}},l.a.createElement("label",null,l.a.createElement("textarea",{style:{width:"60em",height:"30em"},value:e.currentSkill.rasa&&e.currentSkill.rasa.stories?e.currentSkill.rasa.stories:"",onChange:function(t){e.setRASAStories(t.target.value)},placeholder:xt.stories})))),l.a.createElement(Nt.a,{eventKey:"credentials",title:"Credentials"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em",borderTop:"2px solid black"}},l.a.createElement("label",null,l.a.createElement("textarea",{style:{width:"60em",height:"30em"},value:e.currentSkill.rasa&&e.currentSkill.rasa.credentials?e.currentSkill.rasa.credentials:xt.credentials,onChange:function(t){e.setRASACredentials(t.target.value)}})))),l.a.createElement(Nt.a,{eventKey:"endpoints",title:"Endpoints"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em",borderTop:"2px solid black"}},l.a.createElement("label",null,l.a.createElement("textarea",{style:{width:"60em",height:"30em"},value:e.currentSkill.rasa&&e.currentSkill.rasa.endpoint?e.currentSkill.rasa.endpoint:xt.endpoint,onChange:function(t){e.setRASAEndpoint(t.target.value)}})))),l.a.createElement(Nt.a,{eventKey:"session",title:"Session Config"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em",borderTop:"2px solid black"}},l.a.createElement("label",null,l.a.createElement("textarea",{style:{width:"60em",height:"30em"},value:e.currentSkill.rasa&&e.currentSkill.rasa.session?e.currentSkill.rasa.session:xt.session,onChange:function(t){e.setRASASession(t.target.value)}}))))))),l.a.createElement(Nt.a,{eventKey:"mycroft",title:"Mycroft"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em"}},l.a.createElement("b",null,"not yet"))),l.a.createElement(Nt.a,{eventKey:"jovo",title:"JOVO"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em"}},l.a.createElement("label",{style:{fontWeight:"bold",marginLeft:"0.5em"}}," Invocation ",l.a.createElement("input",{type:"text",value:e.invocation,onChange:function(t){e.setInvocation(t.target.value)}})))),l.a.createElement(Nt.a,{eventKey:"alex",title:"Alexa"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em"}},l.a.createElement("label",{style:{fontWeight:"bold",marginLeft:"0.5em"}}," Invocation ",l.a.createElement("input",{type:"text",value:e.invocation,onChange:function(t){e.setInvocation(t.target.value)}})))),l.a.createElement(Nt.a,{eventKey:"google_assistant",title:"Google Assistant"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em"}},l.a.createElement("label",{style:{fontWeight:"bold",marginLeft:"0.5em"}}," Invocation ",l.a.createElement("input",{type:"text",value:e.invocation,onChange:function(t){e.setInvocation(t.target.value)}})))))))}return l.a.createElement("b",null)}}function Rt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"http://localhost:5000/api/v1/";return{saveItem:function(n,a){var l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise(function(i,s){n&&(a._id&&a._id.trim&&a._id.trim()?l?function(n,a){return console.log("patch"),new Promise(function(l,i){n&&a&&a._id?e.patch(t+n+"/"+a._id,a,{headers:{"Content-Type":"application/json"}}).then(function(e){console.log(["update",e]),l(e)}).catch(function(e){console.log(e),i(e)}):(console.log("Missing post params"),i("Missing post params"))})}(n,a).then(function(e){i(e)}):function(n,a){return console.log("PUT"),new Promise(function(l,i){n&&a&&a._id?e.put(t+n+"/"+a._id,a,{headers:{"Content-Type":"application/json"}}).then(function(e){console.log(e),l(e)}).catch(function(e){console.log(e),i(e)}):(console.log("Missing post params"),i("Missing post params"))})}(n,a).then(function(e){i(e)}):(delete a._id,function(n,a){return console.log("POST",n,a),new Promise(function(l,i){n&&a?e.post(t+n,a,{headers:{"Content-Type":"application/json"}}).then(function(e){console.log(e),l(e)}).catch(function(e){console.log(e),i(e)}):(console.log("Missing post params"),i("Missing post params"))})}(n,a).then(function(e){i(e)})))})},deleteItem:function(n,a){return new Promise(function(l,i){n&&a&&function(n,a){return new Promise(function(l,i){if(a)return e.delete(t+n+"/"+a,{},{headers:{"Content-Type":"application/json"}}).then(function(e){console.log(["DEL",e]),l(e)}).catch(function(e){console.log(e),i(e)});console.log(["DEL request missing id"]),i("DELETE request missing id")})}(n,a).then(function(e){l(e)})})},getItem:function(n,a){return new Promise(function(l,i){n&&a&&function(n,a){return new Promise(function(l,i){a?e.get(t+n+"/"+a,{},{headers:{"Content-Type":"application/json"}}).then(function(e){console.log(["GET",e]),l(e)}).catch(function(e){console.log(e),i(e)}):i("GET request missing id")})}(n,a).then(function(e){l(e)})})},searchItems:function(n,a,l,i){return new Promise(function(s,r){n&&function(n,a){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return new Promise(function(o,c){var u=["query="+encodeURIComponent(JSON.stringify(a)),"limit="+l,"skip="+i];r&&u.push("populate="+encodeURIComponent(JSON.stringify(r))),s&&u.push("sort="+encodeURIComponent(JSON.stringify(s))),e.get(t+n+"?"+u.join("&"),{},{headers:{"Content-Type":"application/json"}}).then(function(e){console.log(["GET many",e]),o(e)}).catch(function(e){console.log(e),c(e)})})}(n,a,l,i).then(function(e){s(e)})})}}}function Vt(e){var t=Object(a.useState)([]),n=Object(r.a)(t,2),l=n[0],i=n[1],s=Object(a.useState)([]),o=Object(r.a)(s,2),m=o[0],p=o[1],g=Object(a.useState)(""),f=Object(r.a)(g,2),d=f[0],y=f[1],v=Object(a.useState)({}),k=Object(r.a)(v,2),b=k[0],S=k[1],A=Object(a.useState)({}),x=Object(r.a)(A,2),j=x[0],T=x[1],L=Object(a.useState)(null),w=Object(r.a)(L,2),C=w[0],N=w[1],F=I("nlutool","lists"),_=Object(a.useState)({}),M=Object(r.a)(_,2),R=M[0],V=M[1],P=Object(a.useState)({}),D=Object(r.a)(P,2),z=D[0],W=D[1],U=Object(a.useState)({}),J=Object(r.a)(U,2),K=J[0],B=J[1],Z=Object(a.useState)(""),G=Object(r.a)(Z,2),H=G[0],Y=G[1],X=Object(a.useState)([]),Q=Object(r.a)(X,2),q=Q[0],$=Q[1],ee=Object(a.useState)([]),te=Object(r.a)(ee,2),ne=te[0],ae=te[1],le=O.a.createInstance({name:"nlutool",storeName:"skills"}),ie=O.a.createInstance({name:"nlutool",storeName:"examples"}),se=e.user&&e.user.token&&e.user.token.access_token?e.user.token.access_token:"",re=Rt(e.getAxiosClient(se),"http://localhost:5000/api/v1/"),oe=re.saveItem,ce=re.deleteItem,ue=re.searchItems,me=Object(a.useState)(""),pe=Object(r.a)(me,2),ge=pe[0],fe=pe[1],de=Object(a.useState)(""),ye=Object(r.a)(de,2),he=ye[0],ve=ye[1],Ee=Object(c.g)(),ke=Object(c.f)(),be=Ee.skillId?Ee.skillId:"";function Se(e,t){if(e&&e._id&&t.title){var n={user:e._id,title:t.title};console.log(["SEARCH ONLINE ",n]),ue("Skill",n).then(function(e){if(console.log(["SKILL RESULTS"]),console.log(e.data),e.data&&e.data.length>0){var n=!1;e.data.map(function(a){return console.log(["SKILL RESULTS",t?t._id:"",a?a._id:""]),t._id&&t._id===a._id&&(n=!0,console.log(["SKILL RESULTS DATES",t.updated_date,a.updated_date,t.updated_date-a.updated_date]),t.updated_date<a.updated_date&&ae([e.data[0]])),null}),n||$(e.data)}else $([])}).catch(function(e){console.log(e)})}else $([])}function Ae(e){var t=e&&e.id?e:C&&C.id?C:{};T(JSON.stringify([t._id,t.entitiesListsData,t.utterancesListsData,t.rasa,t.jovo,t.mycroft,t.entities,t.utterances,t.utterancesLists,t.regexps,t.tags]))}return Object(a.useEffect)(function(){ie.getItem("alldata").then(function(t){if(t&&Array.isArray(t)){var n=[],a={};t.map(function(e){return e.skills&&e.skills.map(function(e){return a[e]=!0,null}),be&&e.skills&&-1!==e.skills.indexOf(be)&&n.push(e),null}),i(Object.keys(a)),p(n),be&&le.getItem(be,function(t,a){if(t)throw new Error(t);var l=a&&a.id?a:{};l.id=l.id?l.id:h(),l.title=be,l.invocation=l.invocation?l.invocation:"",l.entities=function(e,t){var n={};return Array.isArray(t)&&t.map(function(t,a){return Array.isArray(t.entities)&&t.entities.map(function(t,a){return t&&t.type&&t.type.length>0&&("object"!==typeof n[t.type]&&(n[t.type]={}),Array.isArray(n[t.type].values)||(n[t.type].values=[]),e&&e.entities&&e.entities[t.type]&&e.entities[t.type].alexaType&&(n[t.type].alexaType=e.entities[t.type].alexaType),e&&e.entities&&e.entities[t.type]&&e.entities[t.type].googleType&&(n[t.type].googleType=e.entities[t.type].googleType),e&&e.entities&&e.entities[t.type]&&e.entities[t.type].lists&&(n[t.type].lists=e.entities[t.type].lists),n[t.type].values.push(t.value)),null}),null}),Object.keys(n).map(function(e,t){var a=n[e];return a.values=E(a.values).sort(),null}),S(n),n}(l,n),l.title&&Se(e.user,l);var i=function(e,t){if(e){var n=R,a=K,l={};if(t)return t.map(function(e){return e.intent&&(n[e.intent]||(n[e.intent]=[]),a[e.intent]=a[e.intent]>0?a[e.intent]+1:1,n[e.intent].push({example:e.example,entities:e.entities})),Array.isArray(e.tags)&&e.tags.map(function(e){return l[e]=!0,null}),null}),V(n),B(a),W(l),[R,Object.keys(l)]}return[[],[]]}(a,n),s=Object(r.a)(i,2),o=s[0];s[1],l.intents=o,N(l),fe(l.invocation),ve(l._id),F.loadAll(),e.updateFunctions.updateUtterances(),e.updateFunctions.updateRegexps(),e.updateFunctions.updateLookups(),Ae(l)})}})},[]),Object(a.useEffect)(function(){F.items.length>0&&(e.updateFunctions.updateLists(F.items[0]),e.updateFunctions.updateLookups(F.items[0]))},[F.items]),Object(a.useEffect)(function(){if(C){var e=C;e._id=he,N(e)}},[he]),Object(a.useEffect)(function(){if(C){var e=C;e.invocation=ge,N(e)}},[ge]),Object(a.useEffect)(function(){C&&e.user&&e.user._id&&Se(e.user,C)},[e.user,j]),Object(a.useEffect)(function(){var e=C;e&&e.title&&e.title.length>0&&(b&&Object.keys(b).map(function(t){return e.entities&&e.entities[t]&&(e.entities[t].values=b[t].values),null}),e.intents=R,console.log("SAVE NOW - change cs or inv",JSON.parse(JSON.stringify(e))),le.setItem(be,C,function(e){if(e)throw console.log(e),new Error(e)}))},[he,C,j,ge]),{setAlexaEntityType:function(e,t){if(C&&e){var n=C;n.entities||(n.entities={}),n.entities[e]||(n.entities[e]={}),n.entities[e].alexaType=t,N(n),console.log("ALEXA"),console.log(n),Ae()}},setGoogleAssistantEntityType:function(e,t){if(C&&e){var n=C;n.entities||(n.entities={}),n.entities[e]||(n.entities[e]={}),n.entities[e].googleType=t,N(n),Ae()}},removeListFromSkillEntity:function(e,t){var n=C;if(n&&n.entities&&e&&n.entities[e]&&n.entities[e].lists){var a=n.entities[e].lists;a=a.slice(0,t).concat(a.slice(t+1)),n.entities[e].lists=a,N(n),Ae()}},addListToSkillEntity:function(e,t){if(e&&t&&t.name){var n=C;n.entities||(n.entities={}),n.entities[e]||(n.entities[e]={lists:[]}),Array.isArray(n.entities[e].lists)||(n.entities[e].lists=[]),n.entities[e].lists.push(t.name),n.entities[e].lists=E(n.entities[e].lists).sort(),N(n),Ae()}else console.log([" missing data"])},currentSkill:C,setCurrentSkill:N,skillFilterValue:be,invocation:ge,setInvocation:fe,entitiesForSkill:b,collatedItems:R,collatedCounts:K,setCurrentIntent:y,setSkillFilterValue:function(e){var t=["/"+ke.location.pathname.split("/")[1]];(be=e).length>0&&t.push("/skill/"+be),ke.push(t.join(""))},addRegexp:function(e){if(console.log(["ADDREGEX",e]),C&&e){var t=C;Array.isArray(t.regexps)||(t.regexps=[]),t.regexps.push({name:e.name,synonym:e.synonym}),N(t),Ae()}},removeRegexp:function(e){if(console.log(["RE UTTERANCE",e]),"number"===typeof e&&C&&C.regexps&&C.regexps.length>e){var t=C;t.regexps=[].concat(Object(u.a)(t.regexps.slice(0,e)),Object(u.a)(t.regexps.slice(e+1))),N(t),console.log("RASA"),console.log(t),Ae()}},setRegexpIntent:function(e,t){if(console.log(["set reg intent",e,t]),"number"===typeof e&&C&&C.regexps&&C.regexps.length>e){var n=C;n.regexps=n.regexps?n.regexps:[];var a=isNaN(parseInt(e))?0:parseInt(e),l=n.regexps[a]?n.regexps[a]:{};l.intent=t,n.regexps[a]=l,N(n),console.log("RASA"),console.log(n),Ae()}},setRegexpEntity:function(e,t){if(console.log(["set reg entity",e,t]),"number"===typeof e&&C&&C.regexps&&C.regexps.length>e){var n=C;n.regexps=n.regexps?n.regexps:[];var a=NaN!=parseInt(e)?parseInt(e):0,l=n.regexps[a]?n.regexps[a]:{};l.entity=t,n.regexps[a]=l,N(n),console.log("RASA"),console.log(n),Ae()}},setMongoId:ve,saveItem:oe,deleteItem:ce,searchItems:ue,removeUtterance:function(e){if(console.log(["RE UTTERANCE",e]),"number"===typeof e&&C&&C.utterances&&C.utterances.length>e){var t=C;t.utterances=[].concat(Object(u.a)(t.utterances.slice(0,e)),Object(u.a)(t.utterances.slice(e+1))),N(t),console.log("RASA"),console.log(t),Ae()}},addUtterance:function(t){if(C&&t){var n=C;if(Array.isArray(n.utterances)||(n.utterances=[]),n.utterances.push(t.name),n.utterances=E(n.utterances),N(n),console.log("RASA"),console.log(n),!e.lookups.utteranceListsLookups[t.name]&&!e.lookups.utterancesLookups[t.name]){var a=O.a.createInstance({name:"nlutool",storeName:"utterances"});a.getItem("alldata",function(e,n){if(e)throw new Error(e);Array.isArray(n)&&(n.unshift({id:h(),value:t.name,synonyms:"",tags:[]}),a.setItem("alldata",n))})}Ae()}},addUtteranceList:function(e){if(console.log(["ADD UTTERANCE LIST",e,C]),C&&e){var t=C;Array.isArray(t.utterancesLists)||(t.utterancesLists=[]),t.utterancesLists.push(e.name),t.utterancesLists=E(t.utterancesLists),N(t),console.log("add ut list"),console.log(t.utterancesLists),Ae()}},removeUtteranceList:function(e){if("number"===typeof e&&C&&C.utterancesLists){var t=C;t.utterancesLists=[].concat(Object(u.a)(t.utterancesLists.slice(0,e)),Object(u.a)(t.utterancesLists.slice(e+1))),N(t),console.log("RASA"),console.log(t),Ae()}},skillKeys:l,addSkillTag:function(e){if(console.log(["ADD skill tag",e,C]),C&&e){var t=C;Array.isArray(t.tags)||(t.tags=[]),t.tags.push(e.name),t.utterancesLists=E(t.utterancesLists).sort(),N(t),Ae()}},removeSkillTag:function(e){if(console.log(["rm skill tag",e,C]),"number"===typeof e&&C&&C.tags){var t=C;t.tags=[].concat(Object(u.a)(t.tags.slice(0,e)),Object(u.a)(t.tags.slice(e+1))),N(t),Ae()}},newSlot:function(e,t){if(e&&e.trim().length>0){var n=C,a=t||{},l=n.rasa?n.rasa:{};a[e]={},l.slots=t,n.rasa=l,N(n),Y(""),Ae()}},newSlotValue:H,setNewSlotValue:Y,slots:e.slots,setRASASlotAutofill:function(e,t,n){if(C&&e&&t){var a=C,l=n||{};l[e].slotAutofill=t;var i=a.rasa?a.rasa:{};i.slots=l,a.rasa=i,N(a),Ae()}},setRASASlotType:function(e,t,n){if(C&&e&&t){var a=C,l=n||{};l[e].slotType=t;var i=a.rasa?a.rasa:{};i.slots=l,a.rasa=i,N(a),console.log("RASA"),console.log(a),Ae()}},deleteSlot:function(e,t){if(C&&e&&t){var n=C;delete t[e],n.rasa=n.rasa?n.rasa:{},n.rasa.slots=t,N(n),Ae()}},setRASAActions:function(e){if(C&&e){var t=C;t.rasa=t.rasa?t.rasa:{},t.rasa.actions=e,N(t),Ae()}},setRASASession:function(e){if(C){var t=C;t.rasa=t.rasa?t.rasa:{},t.rasa.session=e,N(t),Ae()}},setRASAEndpoint:function(e){if(C){var t=C;t.rasa=t.rasa?t.rasa:{},t.rasa.endpoint=e,N(t),Ae()}},setRASACredentials:function(e){if(C){var t=C;t.rasa=t.rasa?t.rasa:{},t.rasa.credentials=e,N(t),Ae()}},setRASAStories:function(e){if(C){var t=C;t.rasa=t.rasa?t.rasa:{},t.rasa.stories=e,N(t),Ae()}},setRASAConfig:function(e){if(console.log(["setrasaconfig",e,C]),C){var t=C;t.rasa=t.rasa?t.rasa:{},t.rasa.config=e,N(t),Ae()}},filteredItems:m,currentIntent:d,listsForEntity:j,listsManager:F,collatedTags:z,skillMatches:q,skillUpdatedMatches:ne,setSkillMatches:$,setSkillUpdatedMatches:ae,setSkill:function(e){console.log(["SETSKILL",C,e]),e&&e.id?(N(e),ve(e._id)):console.log(["NOSETSKILL",C,e])},forceReload:Ae}}function Pt(e){var t=Vt(Object.assign({},e,{user:e.user,lookups:e.lookups})),n=t.currentSkill,a=t.setCurrentSkill,i=t.skillFilterValue,s=t.setSkillFilterValue,r=t.skillKeys,c=t.setMongoId,u=t.saveItem,m=t.deleteItem,p=t.listsForEntity,g=t.skillMatches,f=t.skillUpdatedMatches,d=t.setSkillMatches,y=t.setSkillUpdatedMatches,h=t.setSkill,v=t.forceReload;(r&&r.sort().map(function(e,t){return l.a.createElement(Y.a.Item,{key:t,value:e,onClick:function(t){s(e)}},e)})).unshift(l.a.createElement(Y.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(e){s("")}},"\xa0"));var E=r?r.map(function(e,t){return l.a.createElement(G.a,{key:t,onClick:function(t){s(e)},style:{marginLeft:"1em"}},e)}):[];return l.a.createElement("div",null,n&&g&&g.length>0&&l.a.createElement("span",{style:{color:"red"}},"You have published version of this skill\xa0",g.map(function(e,t){return l.a.createElement("span",{key:t},"saved ",new Date(e.updated_date).toUTCString()," ",l.a.createElement(G.a,{variant:"warning",onClick:function(t){h(e),d([]),v()}},"Merge"))})),n&&f&&f.length>0&&l.a.createElement("span",null,"You have a more recent published version of this skill\xa0",f.map(function(e){return l.a.createElement("span",null,"saved ",new Date(e.updated_date).toUTCString()," ",l.a.createElement(G.a,{variant:"warning",onClick:function(t){h(e),y([]),v()}},"Merge"))})),n&&!e.publish&&i&&i.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Y.a,{style:{float:"right",marginLeft:"0.5em"},as:X.a},l.a.createElement(Y.a.Toggle,{split:!0,variant:"primary",id:"dropdown-split-basic"}),l.a.createElement(G.a,{variant:"primary"},"Export"),l.a.createElement(Y.a.Menu,{variant:"primary"},Tt.map(function(e,t){var a=i+"_opennludata_"+e.name+"_"+Date.now(),s="JSON"===e.name?"success":"primary";return l.a.createElement(Y.a.Item,{variant:s,key:t,value:e.name,onClick:function(t){e.exportFunction(n).then(function(t){console.log(["TRIGGER DL",a,t]),"JSON"===e.name?Object(Z.saveAs)(t,a+".json"):Object(Z.saveAs)(t,a+".zip")})}},e.name)})))),n&&!e.publish&&e.user&&e.user.token&&e.user.token.access_token&&l.a.createElement(o.b,{to:"/skills/skill/"+n.title+"/publish"},l.a.createElement(G.a,{variant:"success",style:{float:"right"}},"Publish")),n&&!e.publish&&!(e.user&&e.user.token&&e.user.token.access_token)&&l.a.createElement(o.b,{to:"/login/login"},l.a.createElement(G.a,{variant:"success",style:{float:"right"}},"Login to Publish")),n&&!e.publish&&l.a.createElement(Mt,Object.assign({user:e.user,lookups:e.lookups},t)),!n&&l.a.createElement("div",null,l.a.createElement("h1",null,"Skills"),E.length>0&&E,E.length<=0&&l.a.createElement("div",null,"You dont have any skills yet. Import some ",l.a.createElement(o.b,{to:"/sources"},l.a.createElement(G.a,null,"Sources")))),n&&e.publish&&l.a.createElement(Lt,Object.assign({},e,{setCurrentSkill:a,listsForEntity:p,forceReload:v,user:e.user,setMongoId:c,currentSkill:n,saveItem:u,deleteItem:m})))}var Dt=n(38),zt=n(1228),Wt=n(1226),Ut=n(58);function Jt(e){e.children;var t=e.eventKey,n=e.callback,i=Object(a.useContext)(Dt.a),s=Object(Ut.b)(t,function(){return n&&n(t)}),r=i===t;return l.a.createElement(l.a.Fragment,null,!r&&l.a.createElement(G.a,{onClick:s},"+"),r&&l.a.createElement(G.a,{onClick:s},"-"))}var Kt=function(e){var t=j(),n=t.mergeEntities,i=t.mergeIntents,s=t.mergeUtterances,o=Object(a.useState)(""),c=Object(r.a)(o,2),u=c[0],m=c[1],p=Object(a.useState)({}),g=Object(r.a)(p,2),f=g[0],d=g[1],y=Object(a.useState)({}),h=Object(r.a)(y,2),v=h[0],E=h[1],k=Object(a.useState)({}),b=Object(r.a)(k,2),S=b[0],A=b[1],x=O.a.createInstance({name:"nlutool",storeName:"importing"});Object(a.useEffect)(function(){x.getItem("alldata").then(function(e){if(console.log("importData"),console.log(e),A(e),e.title&&m(e.title),e.intents){var t={};e.intents.map(function(e){var n=e.intent?e.intent:"_";return t[n]=t[n]?t[n]:[],t[n].push(e),null}),d(t)}if(e.entities){var n={};e.entities.map(function(e,t){return e.tags&&e.tags.length>0?e.tags.map(function(e){n[e]=n[e]?n[e]:[],n[e].push(t)}):(n.untagged=n.untagged?n.untagged:[],n.untagged.push(t)),null}),E(n)}})},[]);var I=Object(a.useState)({}),T=Object(r.a)(I,2);return T[0],T[1],l.a.createElement("div",{style:{marginLeft:"1em"}},l.a.createElement("h3",null,"Import Review"),l.a.createElement(zt.a,null,S.intents&&l.a.createElement(Wt.a,null,l.a.createElement(Wt.a.Header,null,l.a.createElement(Jt,{as:G.a,variant:"link",eventKey:"root-0"}),S.intents&&l.a.createElement("span",{style:{marginLeft:"2em"},id:"intents"},Object.keys(f).length," intents with ",S.intents?Object.keys(S.intents).length:0," examples ",l.a.createElement(G.a,{style:{marginLeft:"2em"},onClick:function(t){i(S.intents,u).then(function(t){e.setPageMessage("Updated "+(t.updated?t.updated:0)+" and created "+(t.created?t.created:0),4e3)})}},"Import All Intents"))),l.a.createElement(zt.a.Collapse,{eventKey:"root-0"},l.a.createElement(Wt.a.Body,null,Object.keys(f).map(function(t,n){return l.a.createElement(Wt.a,{key:n},l.a.createElement(zt.a,null,l.a.createElement(Wt.a.Header,null,l.a.createElement(Jt,{as:G.a,variant:"link",eventKey:"intent-"+n}),"\xa0\xa0",l.a.createElement("b",null,t)," with ",f[t].length," examples",l.a.createElement(G.a,{style:{marginLeft:"2em"},onClick:function(n){i(f[t],u).then(function(t){e.setPageMessage("Updated "+(t.updated?t.updated:0)+" and created "+(t.created?t.created:0),4e3)})}},"Import ",t)),l.a.createElement(zt.a.Collapse,{eventKey:"intent-"+n},l.a.createElement(Wt.a.Body,null,l.a.createElement("ul",null,f[t].map(function(e,t){return l.a.createElement("li",{key:t},e.example)}))))))})))),S.entities&&l.a.createElement(Wt.a,null,l.a.createElement(Wt.a.Header,null,l.a.createElement(Jt,{as:G.a,variant:"link",eventKey:"root-1"}),S.entities&&l.a.createElement("span",{style:{marginLeft:"2em"},id:"entities"},S.entities?Object.keys(S.entities).length:0," entities ",l.a.createElement(G.a,{style:{marginLeft:"2em"},onClick:function(t){n(S.entities,u).then(function(t){e.setPageMessage("Updated "+(t.updated?t.updated:0)+" and created "+(t.created?t.created:0),4e3)})}},"Import All Entities"))),l.a.createElement(zt.a.Collapse,{eventKey:"root-1"},l.a.createElement(Wt.a.Body,null,Object.keys(v).map(function(t,a){return l.a.createElement(Wt.a,{key:a},l.a.createElement(zt.a,null,l.a.createElement(Wt.a.Header,null,l.a.createElement(Jt,{as:G.a,variant:"link",eventKey:"entity-"+a}),"\xa0\xa0",l.a.createElement(G.a,{style:{marginLeft:"2em"},onClick:function(a){n(v[t].map(function(e){return S.entities[e]}),u).then(function(t){e.setPageMessage("Updated "+(t.updated?t.updated:0)+" and created "+(t.created?t.created:0),4e3)})}},"Import ",t)),l.a.createElement(zt.a.Collapse,{eventKey:"entity-"+a},l.a.createElement(Wt.a.Body,null,l.a.createElement("ul",null,v[t]&&v[t].map(function(e,t){return l.a.createElement("li",{key:t},S.entities[e].value)}))))))})))),S.utterances&&l.a.createElement(Wt.a,null,l.a.createElement(Wt.a.Header,null,l.a.createElement(Jt,{as:G.a,variant:"link",eventKey:"root-2"}),S.utterances&&l.a.createElement("span",{style:{marginLeft:"2em"},id:"utterances"},S.utterances?Object.keys(S.utterances).length:0," utterances ",l.a.createElement(G.a,{style:{marginLeft:"2em"},onClick:function(t){s(S.utterances,u).then(function(t){e.setPageMessage("Updated "+(t.updated?t.updated:0)+" and created "+(t.created?t.created:0),4e3)})}},"Import All Utterances"))),l.a.createElement(zt.a.Collapse,{eventKey:"root-2"},l.a.createElement(Wt.a.Body,null,S.utterances&&Object.values(S.utterances).map(function(t,n){return l.a.createElement(Wt.a,{key:n},l.a.createElement(Wt.a.Header,null,l.a.createElement("b",null,t.value),l.a.createElement(G.a,{style:{marginLeft:"2em"},onClick:function(n){s([t],u).then(function(t){e.setPageMessage("Updated "+(t.updated?t.updated:0)+" and created "+(t.created?t.created:0),4e3)})}},"Import")))}))))))},Bt=n(1222),Zt=n(1220),Gt=n(100),Ht=n(1221),Yt=n(99),Xt=n.n(Yt);function Qt(e){var t=Object(a.useState)(""),n=Object(r.a)(t,2),i=n[0],s=n[1],o=Object(a.useState)([]),u=Object(r.a)(o,2),m=u[0],p=u[1],g=Object(a.useState)([]),f=Object(r.a)(g,2),d=f[0],y=f[1],h=e.user&&e.user.token&&e.user.token.access_token?e.user.token.access_token:"",v=Rt(e.getAxiosClient(h),"http://localhost:5000/public/api/v1/"),E=(v.saveItem,v.deleteItem,v.getItem,v.searchItems),k=(B(),Object(c.f)()),b=I("nlutool","sources");function S(){e.getAxiosClient().get("https://raw.githubusercontent.com/syntithenai/opennludata_data/master/public/skills/index.js").then(function(e){console.log(e)}).catch(function(e){console.log(e)})}function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e&&e.trim&&e.trim()?e:i&&i.trim()?i:"",n={},a={title:1};t&&t.trim()?n.$text={$search:t.trim()}:a={updated_date:-1},E("Skill",n,40,0,a).then(function(e){console.log("doSerach"),console.log(e.data),y(e.data)})}Object(a.useEffect)(function(e){S()},[]);return l.a.createElement("div",{style:{marginLeft:"1em"}},l.a.createElement(Bt.a,{onSubmit:function(e){e.preventDefault(),A()}},l.a.createElement(Zt.a,null,l.a.createElement(Gt.a,null,l.a.createElement(Xt.a,{suggestions:m,onSuggestionsFetchRequested:function(e){var t=e.value;E("SkillTags",{tag:{$regex:t}},20,0,"",{tag:1}).then(function(e){p(e.data&&e.data.length>0?e.data:[])})},onSuggestionsClearRequested:function(){p([])},getSuggestionValue:function(e){return e.tag},renderSuggestion:function(e){return l.a.createElement("div",null,e.tag)},onSuggestionSelected:function(e,t){t.suggestion;var n=t.suggestionValue;t.suggestionIndex,t.sectionIndex,t.method;s(n),A(n)},inputProps:{style:{width:"100%"},value:i,onChange:function(e){s(e.target.value)}}})),l.a.createElement(Gt.a,null,l.a.createElement(G.a,{variant:"success",onClick:A},"Search")))),!i.trim()&&l.a.createElement("h3",null,"Recent Skills"),i.trim()&&l.a.createElement("h3",null,"Search Results"),l.a.createElement(Ht.a,{fluid:!0},l.a.createElement(Zt.a,null,d.map(function(e,t){var n={marginLeft:"0.5em"};return l.a.createElement(Gt.a,{sm:12,md:6,lg:4,xl:4,key:t,style:{border:"2px solid black",padding:"0.5em",margin:"0.5em"}},l.a.createElement(G.a,{variant:"success",style:{float:"right"},onClick:function(t){var n;n=e,n={id:null,data:JSON.stringify(n),title:n.title+".skill.json",fileType:"opennlu.skill    "},b.saveItem(n,0),k.push("/sources")}},"Grab"),l.a.createElement("h4",{style:{marginBottom:"0.3em"}},e.title," ",e.userAvatar&&l.a.createElement("span",null,"by ",e.userAvatar)," "),e.tags&&e.tags.length>0&&l.a.createElement(G.a,{style:n,variant:"outline-warning"},e.tags.join(", ")),l.a.createElement("div",null,e.intents&&Object.keys(e.intents).length>0&&l.a.createElement(G.a,{variant:"outline-primary",style:n},Object.keys(e.intents).length," intents "),e.entities&&Object.keys(e.entities).length>0&&l.a.createElement(G.a,{variant:"outline-primary",style:n},Object.keys(e.entities).length," entities"),e.regexps&&e.regexps.length>0&&l.a.createElement(G.a,{variant:"outline-primary",style:n},e.regexps.length," regular expressions"),e.utterances&&e.utterances.length>0&&l.a.createElement(G.a,{variant:"outline-primary",style:n},e.utterances.length," utterances"),l.a.createElement(G.a,{style:{marginLeft:"0.5em",marginTop:"1em"},variant:"outline-secondary"},"Updated: ",new Date(e.updated_date).toUTCString())))}))))}var qt=n(66);n(1207);function $t(e){var t={paddingLeft:"0.3em"};return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement("h1",null,"Menu"),l.a.createElement(o.b,{style:t,to:"/sources"},l.a.createElement(G.a,null,"Sources")),l.a.createElement(o.b,{style:t,to:"/import"},l.a.createElement(G.a,null,"Import")),l.a.createElement(o.b,{style:t,to:"/examples"},l.a.createElement(G.a,null,"Organise")),l.a.createElement(o.b,{style:t,to:"/skills"},l.a.createElement(G.a,null,"Skills ")),l.a.createElement(o.b,{style:t,to:"/search"},l.a.createElement(G.a,null,"Search Community ")))}var en=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],i=t[1],s=Object(a.useState)(""),u=Object(r.a)(s,2),m=u[0],p=u[1],g=null;function f(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;p(e),t>0&&(g&&clearTimeout(g),g=setTimeout(function(){f("")},t))}var d=Object(a.useState)([]),y=Object(r.a)(d,2),h=y[0],v=y[1],E=Object(a.useState)([]),k=Object(r.a)(E,2),b=k[0],S=k[1],A=Object(a.useState)([]),x=Object(r.a)(A,2),I=x[0],j=x[1],T=Object(a.useState)([]),L=Object(r.a)(T,2),w=L[0],C=L[1],N=Object(a.useState)([]),F=Object(r.a)(N,2),_=F[0],M=F[1],R=Object(a.useState)(0),V=Object(r.a)(R,2),P=V[0],D=V[1],z=Object(a.useState)([]),W=Object(r.a)(z,2),U=W[0],J=W[1],K=Object(a.useState)([]),B=Object(r.a)(K,2),Z=B[0],G=B[1],H=Object(a.useState)([]),Y=Object(r.a)(H,2),X=Y[0],Q=Y[1],q=Object(a.useState)([]),$=Object(r.a)(q,2),ee=$[0],te=$[1],ne=Object(a.useState)([]),ae=Object(r.a)(ne,2),le=ae[0],ie=ae[1],se=Object(a.useState)([]),me=Object(r.a)(se,2),pe=me[0],ge=me[1],fe=Object(a.useState)([]),de=Object(r.a)(fe,2),ye=de[0],he=de[1],ve=Object(a.useState)(0),Ee=Object(r.a)(ve,2),be=Ee[0],Se=Ee[1],Ae=Object(a.useState)(0),Oe=Object(r.a)(Ae,2),xe=Oe[0],Ie=Oe[1],je=Object(a.useState)({}),Te=Object(r.a)(je,2),Le=Te[0],we=Te[1],Ce=Object(a.useState)({}),Ne=Object(r.a)(Ce,2),Fe=Ne[0],_e=Ne[1],Me=Object(a.useState)(0),Ve=Object(r.a)(Me,2),Pe=Ve[0],De=Ve[1],We=Object(a.useState)(0),Ue=Object(r.a)(We,2),Je=Ue[0],Be=Ue[1],Ze=Object(a.useState)(0),Ge=Object(r.a)(Ze,2),He=Ge[0],Ye=Ge[1],Qe=Object(a.useState)(0),qe=Object(r.a)(Qe,2),$e=qe[0],et=qe[1];function tt(){i(!0)}function at(){setTimeout(function(){i(!1)},300)}var lt={regexpTagsLookups:ye,regexpsLookups:ee,regexpListsLookups:pe,regexpsCompleteLookups:le,utteranceTagsLookups:X,utterancesLookups:U,utteranceListsLookups:Z,intentLookups:h,entityLookups:b,tagLookups:I,skillLookups:w,selectedTally:P,listsLookups:_,listTally:be,selectedListTally:xe,listTallyByList:Le,selectedListTallyByList:Fe,utteranceTally:He,selectedUtteranceTally:$e,regexTally:Pe,selectedRegexTally:Je},it={updateLookups:function(){O.a.createInstance({name:"nlutool",storeName:"examples"}).getItem("alldata",function(e,t){if(console.log(["UPDATELOOKUPS",t]),t&&t.length>0){var n={},a={},l={},i={},s=0;t.map(function(e){return e&&(e.isSelected&&(s+=1),a[e.intent]=!0,e.tags&&e.tags.length>0&&e.tags.map(function(e){return n[e]=!0,null}),e.skills&&e.skills.length>0&&e.skills.map(function(e){return i[e]=!0,null}),e.entities&&e.entities.length>0&&e.entities.map(function(e){return e.type&&(l[e.type]=!0),null})),null});var r=function(e,t,n){return n.indexOf(e)===t};console.log(["UPDATELOOKUPS single res",a,l]),v([].concat(Object.keys(a),h).filter(r)),S([].concat(Object.keys(l),b).filter(r)),j([].concat(Object.keys(n),I).filter(r)),C([].concat(Object.keys(i),w).filter(r)),D(s),console.log(b,h)}})},updateLists:function(){O.a.createInstance({name:"nlutool",storeName:"lists"}).getItem("alldata",function(e,t){if(console.log(["UPDATELISTS",t]),t){var n={},a={},l=0,i=0;t.map(function(e){return e.isSelected&&(i+=1),l+=1,e&&e.tags&&e.tags.length>0&&e.tags.map(function(t){return t&&t.trim().length>0&&(e.isSelected?(a[t]=a[t]>0?a[t]+1:1,n[t]=n[t]>0?n[t]+1:1):a[t]=a[t]>0?a[t]+1:1),null}),null}),console.log(["UPDATELISTS",l,i]),Se(l),Ie(i),_e(n),we(a),M(Object.keys(a))}})},updateUtterances:function(){console.log("UPDATE UTTERANCES");var e=O.a.createInstance({name:"nlutool",storeName:"utterances"}),t=0,n=0;e.getItem("alldata",function(e,a){var l={},i={},s={};Array.isArray(a)&&(a.map(function(e,a){return e.isSelected&&(n+=1),t+=1,e.value&&(i[e.value]=!0),e.synonym&&e.synonym.split("\n").map(function(e){return l[e]=!0,null}),e.tags&&e.tags.length>0&&e.tags.map(function(e){return s[e]=!0,null}),null}),Ye(t),et(n),J(Object.keys(i)),Q(Object.keys(s)),G(Object.keys(l)))})},updateRegexps:function(){O.a.createInstance({name:"nlutool",storeName:"regexps"}).getItem("alldata",function(e,t){var n=0,a=0,l={},i={},s={},r={};Array.isArray(t)&&(t.map(function(e,t){return e.isSelected&&(a+=1),n+=1,e.value&&(i[e.value]=!0,s[e.value]={value:e.value,synonym:e.synonym}),e.synonym&&e.synonym.split("\n").map(function(e){return l[e]=!0,null}),e.tags&&e.tags.length>0&&e.tags.map(function(e){return r[e]=!0,null}),null}),De(n),Be(a),te(Object.keys(i)),ie(Object.values(s)),he(Object.keys(r)),ge(Object.keys(l)))})}};return l.a.createElement("div",{className:"OpenNluDataApp"},l.a.createElement(qt.b,{authServer:"/api/login",authServerHostname:"http://localhost:5000"},function(e,t,a,i,s,r,u,p,g,d){return l.a.createElement("div",null,l.a.createElement(o.a,null,l.a.createElement(c.b,{exact:!0,path:"*",render:function(t){return l.a.createElement(nt,{waiting:n,user:e,isLoggedIn:r,history:t.history,message:m,setPageMessage:f,getAxiosClient:a})}}),l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement(c.b,{exact:!0,path:"/menu",component:$t}),l.a.createElement(c.b,{path:"/sources",render:function(e){return l.a.createElement(ke,Object.assign({},e,{startWaiting:tt,stopWaiting:at,setPageMessage:f,updateFunctions:it,lookups:lt}))}}),l.a.createElement(c.b,{path:"/importreview",render:function(e){return l.a.createElement(Kt,Object.assign({},e,{startWaiting:tt,stopWaiting:at,setPageMessage:f,updateFunctions:it,lookups:lt}))}}),l.a.createElement(c.b,{exact:!0,path:"/import",render:function(e){return l.a.createElement(gt,Object.assign({},e,{lookups:lt,startWaiting:tt,stopWaiting:at,updateFunctions:it,setPageMessage:f}))}}),l.a.createElement(c.b,{exact:!0,path:"/import/skill/:skillId",render:function(e){return l.a.createElement(gt,Object.assign({},e,{lookups:lt,startWaiting:tt,stopWaiting:at,updateFunctions:it,setPageMessage:f}))}}),l.a.createElement(c.b,{exact:!0,path:"/import/intent/:intentId",render:function(e){return l.a.createElement(gt,Object.assign({},e,{lookups:lt,startWaiting:tt,stopWaiting:at,updateFunctions:it,setPageMessage:f}))}}),l.a.createElement(c.b,{path:"/import/skill/:skillId/intent/:intentId",render:function(e){return l.a.createElement(gt,Object.assign({},e,{lookups:lt,startWaiting:tt,stopWaiting:at,updateFunctions:it,setPageMessage:f}))}}),l.a.createElement(c.b,{exact:!0,path:"/examples",render:function(e){return l.a.createElement(Xe,Object.assign({},e,{lookups:lt,startWaiting:tt,stopWaiting:at,updateFunctions:it,setPageMessage:f}))}}),l.a.createElement(c.b,{exact:!0,path:"/examples/skill/:skillId",render:function(e){return l.a.createElement(Xe,Object.assign({},e,{lookups:lt,startWaiting:tt,stopWaiting:at,updateFunctions:it,setPageMessage:f}))}}),l.a.createElement(c.b,{path:"/examples/intent/:intentId",render:function(e){return l.a.createElement(Xe,Object.assign({},e,{lookups:lt,startWaiting:tt,stopWaiting:at,updateFunctions:it,setPageMessage:f}))}}),l.a.createElement(c.b,{exact:!0,path:"/examples/skill/:skillId/intent/:intentId",render:function(e){return l.a.createElement(Xe,Object.assign({},e,{lookups:lt,startWaiting:tt,stopWaiting:at,updateFunctions:it,setPageMessage:f}))}}),l.a.createElement(c.b,{exact:!0,path:"/skills/:skillId",render:function(t){return l.a.createElement(Pt,Object.assign({},t,{user:e,lookups:lt,startWaiting:tt,stopWaiting:at,updateFunctions:it,setPageMessage:f,getAxiosClient:a}))}}),l.a.createElement(c.b,{exact:!0,path:"/skills/skill/:skillId",render:function(t){return l.a.createElement(Pt,Object.assign({},t,{user:e,lookups:lt,startWaiting:tt,stopWaiting:at,updateFunctions:it,setPageMessage:f,getAxiosClient:a}))}}),l.a.createElement(c.b,{exact:!0,path:"/skills/:skillId/publish",render:function(t){return l.a.createElement(Pt,Object.assign({},t,{user:e,lookups:lt,startWaiting:tt,stopWaiting:at,updateFunctions:it,setPageMessage:f,publish:!0,getAxiosClient:a}))}}),l.a.createElement(c.b,{exact:!0,path:"/skills/skill/:skillId/publish",render:function(t){return l.a.createElement(Pt,Object.assign({},t,{user:e,lookups:lt,startWaiting:tt,stopWaiting:at,updateFunctions:it,setPageMessage:f,publish:!0,getAxiosClient:a}))}}),l.a.createElement(c.b,{exact:!0,path:"/skills",render:function(t){return l.a.createElement(Pt,Object.assign({},t,{user:e,lookups:lt,startWaiting:tt,stopWaiting:at,updateFunctions:it,setPageMessage:f,getAxiosClient:a}))}}),l.a.createElement(c.b,{exact:!0,path:"/lists",render:function(e){return l.a.createElement(Re,Object.assign({},e,{lookups:lt,startWaiting:tt,stopWaiting:at,updateFunctions:it,setPageMessage:f}))}}),l.a.createElement(c.b,{exact:!0,path:"/lists/:listId",render:function(e){return l.a.createElement(Re,Object.assign({},e,{lookups:lt,startWaiting:tt,stopWaiting:at,updateFunctions:it,setPageMessage:f}))}}),l.a.createElement(c.b,{exact:!0,path:"/utterances",render:function(e){return l.a.createElement(ze,Object.assign({},e,{lookups:lt,startWaiting:tt,stopWaiting:at,setPageMessage:f,updateFunctions:it}))}}),l.a.createElement(c.b,{exact:!0,path:"/utterances/:listId",render:function(e){return l.a.createElement(ze,Object.assign({},e,{lookups:lt,startWaiting:tt,stopWaiting:at,setPageMessage:f,updateFunctions:it}))}}),l.a.createElement(c.b,{exact:!0,path:"/regexps",render:function(e){return l.a.createElement(Ke,Object.assign({},e,{lookups:lt,startWaiting:tt,stopWaiting:at,setPageMessage:f,updateFunctions:it}))}}),l.a.createElement(c.b,{exact:!0,path:"/regexps/:listId",render:function(e){return l.a.createElement(Ke,Object.assign({},e,{lookups:lt,startWaiting:tt,stopWaiting:at,setPageMessage:f,updateFunctions:it}))}}),l.a.createElement(c.b,{exact:!0,path:"/help",component:re}),l.a.createElement(c.b,{exact:!0,path:"/helpimport",component:oe}),l.a.createElement(c.b,{exact:!0,path:"/helpexport",component:ue}),l.a.createElement(c.b,{exact:!0,path:"/helpabout",component:ce}),l.a.createElement(c.b,{exact:!0,path:"/search",render:function(t){return l.a.createElement(Qt,{user:e,getAxiosClient:a})}}),l.a.createElement(c.b,{exact:!0,path:"/",component:re}),l.a.createElement(c.b,{path:"/login",render:function(n){return l.a.createElement("div",{style:{width:"90%",marginLeft:"1em",align:"center",marginTop:"1em"}},l.a.createElement(qt.a,{match:n.match,location:n.location,history:n.history,authServer:"/api/login",authServerHostname:"http://localhost:5000",loginButtons:"google,twitter,facebook,github,amazon".split(","),logoutRedirect:"/",user:e,setUser:t,isLoggedIn:r,logout:g,saveUser:d,startWaiting:tt,stopWaiting:at}))}}))))}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))},tn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function nn(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(en,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");tn?(function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):nn(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):nn(t,e)})}}()},22:function(e,t,n){},65:function(e,t,n){e.exports=n.p+"static/media/thumb-up.f18de183.svg"},90:function(e,t,n){e.exports=n.p+"static/media/helpoverview.646ef0b8.svg"},94:function(e,t,n){e.exports=n.p+"static/media/singingman.5d08cb4f.svg"},95:function(e,t,n){e.exports=n.p+"static/media/waiting.d362cb3f.gif"},96:function(e,t,n){e.exports=n.p+"static/media/thumb-down.73b0ce24.svg"},97:function(e,t,n){e.exports=n.p+"static/media/arrow-thick-left.f29ee705.svg"},98:function(e,t,n){e.exports=n.p+"static/media/arrow-thick-right.9ba7683e.svg"}},[[106,1,2]]]);
//# sourceMappingURL=main.5a22f884.chunk.js.map