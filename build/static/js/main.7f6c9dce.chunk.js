(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1333:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),i=n(43),r=n.n(i),s=(n(172),n(4)),o=n(8),c=n(16),u=(n(31),n(25),n(10)),m=n(101),p={slotTypes:{unfeaturized:{},text:{},bool:{},list:{},float:{min_value:"int",max_value:"int"},categorical:{values:"list"}},autofillOptions:["Yes","No"]},d={entityTypes:["@sys.date-time","@sys.date","@sys.date-period","@sys.time","@sys.time-period","@sys.number","@sys.cardinal","@sys.ordinal","@sys.number-integer","@sys.number-sequence","@sys.flight-number","@sys.unit-area","@sys.unit-currency","@sys.unit-length","@sys.unit-speed","@sys.unit-volume","@sys.unit-weight","@sys.unit-information","@sys.percentage","@sys.temperature","@sys.duration","@sys.age","@sys.currency-name","@sys.unit-area-name","@sys.unit-length-name","@sys.unit-speed-name","@sys.unit-volume-name","@sys.unit-weight-name","@sys.unit-information-name","@sys.address","@sys.zip-code","@sys.geo-capital","@sys.geo-country","@sys.geo-country-code","@sys.geo-city","@sys.geo-state","@sys.place-attraction","@sys.airport","@sys.location","@sys.email","@sys.phone-number","@sys.person","@sys.music-artist","@sys.music-genre","@sys.color","@sys.language","@sys.any","@sys.url"]},g={entityTypes:["AMAZON.DATE","AMAZON.DURATION","AMAZON.FOUR_DIGIT_NUMBER","AMAZON.NUMBER","AMAZON.Ordinal","AMAZON.PhoneNumber","AMAZON.TIME","AMAZON.SearchQuery","AMAZON.Actor","AMAZON.Airline","AMAZON.Airport","AMAZON.Anaphor","AMAZON.Animal","AMAZON.Artist","AMAZON.Author","AMAZON.Book","AMAZON.City","AMAZON.Color","AMAZON.Corporation","AMAZON.Country","AMAZON.CreativeWorkType","AMAZON.DayOfWeek","AMAZON.FictionalCharacter","AMAZON.FirstName","AMAZON.Food","AMAZON.Genre","AMAZON.Language","AMAZON.Month","AMAZON.Movie","AMAZON.MusicAlbum","AMAZON.MusicGroup","AMAZON.Musician","AMAZON.MusicRecording","AMAZON.Person","AMAZON.RadioChannel","AMAZON.Region","AMAZON.RelativePosition","AMAZON.Room","AMAZON.Sport","AMAZON.StreetName","AMAZON.TVSeries","AMAZON.VideoGame","AMAZON.VisualModeTrigger"]};function f(e){return e.toLowerCase().replace(/[^a-z]/g,"_").replace("__","_")}var h=function(e){return e.replace(/([-_][a-z])/g,function(e){return e.toUpperCase().replace("-","").replace("_","")})},y=function(e){return e.replace(/[A-Z]/g,function(e){return"_".concat(e.toLowerCase())})};function v(){return((new Date).getTime()/1e3|0).toString(16)+"xxxxxxxxxxxxxxxx".replace(/[x]/g,function(){return(16*Math.random()|0).toString(16)}).toLowerCase()}function E(e){return e.split("/").slice(0,-1).join("/")}function b(e,t){var n=[];return e.map(function(e){t.map(function(t){n.push(e+t)})}),n}function k(e){if(Array.isArray(e)){var t={};return e.map(function(e){return t[e]=!0,null}),Object.keys(t)}return[]}function S(e,t){if(Array.isArray(e)){var n={},a=null;return e.map(function(e){return e&&(e[t]?n[e[t]]=e:a=e),null}),a?[a].concat(Object.values(n)):Object.values(n)}return[]}function O(e){var t=[],n=m("(",")",e);if(n&&n.body){var a=null;a=k(a=m("(",")",n.body)?O(n.body):n.body.split("|")),k(b(b([n.pre],a),[n.post])).map(function(e){t=[].concat(t,O(e))})}else t=e.split("|");return k(t)}function A(e,t){t=t.sort(function(e,t){return e.start<t.start?-1:1});var n=0,a=e;return t.map(function(e){a=a.slice(0,e.start+n)+"{"+e.type+"}"+a.slice(e.end+n);var t=e.end-e.start-(e.type.length+2);return n-=t,null}),a}function w(e,t){if(e&&Array.isArray(t)){t=t.sort(function(e,t){return e.start<t.start?-1:1});var n=0,a=e;return t.map(function(e){var t="["+e.value+"]("+e.type+")";a=a.slice(0,e.start+n)+t+a.slice(e.end+n);var l=e.end-e.start-t.length;return n-=l,null}),a}return e}function x(e){var t=[];if(e){var n=e.split("\n").join("::::").split(".").join("::::").split("::::");for(var a in n)a.trim().length>0&&t.push(n[a])}return t}var j=n(9),I=n.n(j);function L(e,t){var n=parseInt(t.index);switch(t.type){case"append":return t.item?[].concat(Object(u.a)(e),[t.item]):e;case"prepend":return t.item?[t.item].concat(Object(u.a)(e)):e;case"insert":return t.item&&"number"===typeof n&&e.length>0?[].concat(Object(u.a)(e.slice(0,n)),[t.item],Object(u.a)(e.slice(n))):e;case"remove":return"number"===typeof n?[].concat(Object(u.a)(e.slice(0,n)),Object(u.a)(e.slice(n+1))):e;case"update":return t.item&&"number"===typeof n?[].concat(Object(u.a)(e.slice(0,n)),[t.item],Object(u.a)(e.slice(n+1))):e;case"replaceall":return"object"===typeof t.items?t.items:e;default:throw new Error("Invalid reduction in useDB")}}function T(e,t){var n=Object(a.useReducer)(L,[]),l=Object(s.a)(n,2),i=l[0],r=l[1],o=I.a.createInstance({name:e||"localstoragemanager",storeName:t||"data"});function c(e){if(e&&e.id)return e.id;throw new Error("Missing ID value in getId")}function u(e,t){for(var n in i)if(i[n]&&i[n][e]===t)return n;return null}return{getId:c,loadAll:function(){o.keys().then(function(e){var t=[];e.map(function(e){return t.push(new Promise(function(t,n){o.getItem(e).then(function(e){t(e)})})),null}),Promise.all(t).then(function(e){e=e.sort(function(e,t){return e.updated_date<t.updated_date?1:-1}),r({type:"replaceall",items:e})})})},saveItem:function(e,t){if(e){var n=!1;if(e.id||(n=!0,e.id=v()),o.setItem(e.id,e),n)r({type:"prepend",item:e});else if(i){var a=null;i.map(function(t,n){return t.id===e.id&&(a=n),null}),r(null!=a?{type:"update",item:e,index:a}:{type:"prepend",item:e})}}},deleteItem:function(e){var t=function(e){if(i&&i[e]&&i[e].id)return i[e].id;throw new Error("Missing ID value in getIdForIndex")}(e);t&&o.removeItem(t).then(function(){r({type:"remove",index:e})})},items:i,setItems:function(e){o.clear().then(function(){r({type:"replaceall",items:e}),e&&e.map(function(e){return o.setItem(c(e),e),null})})},findKeyBy:u,findBy:function(e,t){var n=u(e,t);return n?i[n]:null},filter:function(e){var t=[];return e&&i.map(function(n,a){return e(n)&&t.push(n),null}),t}}}function _(){var e=I.a.createInstance({name:"nlutool",storeName:"examples"}),t=I.a.createInstance({name:"nlutool",storeName:"lists"}),n=I.a.createInstance({name:"nlutool",storeName:"utterances"}),a=I.a.createInstance({name:"nlutool",storeName:"regexps"}),l=I.a.createInstance({name:"nlutool",storeName:"skills"});return{mergeIntents:function(t,n){return new Promise(function(a,l){t?e.getItem("alldata").then(function(l){var i={};l||(l=[]),l.map(function(e){var t=JSON.stringify({entities:e.entities?e.entities:[],intent:e.intent?e.intent:"",example:e.example?e.example:""});return e&&e.example&&e.example.trim()&&(i[t]=e),null});var r=[],s=[];t.map(function(e){if(e&&e.example&&e.example.trim()){var t=JSON.stringify({entities:e.entities?e.entities:[],intent:e.intent?e.intent:"",example:e.example?e.example:""});e.id=e.id?e.id:v(),i[t]?s.push(e):(r.push(e),n&&(e.skills=e.skills?k(e.skills.push(n)):[n]))}return null});var o=[];s.length>0?(s.map(function(e){var t=JSON.stringify({entities:e.entities?e.entities:[],intent:e.intent?e.intent:"",example:e.example?e.example:""});return n&&(e.skills=e.skills?k(e.skills.push(n)):[n]),i[t]=e,null}),o=[].concat(r,Object.values(i))):o=[].concat(r,l),e.setItem("alldata",o).then(function(){a({updated:s.length,created:r.length})})}):l({error:"Missing import data"})})},mergeEntities:function(e,n){return new Promise(function(a,l){e?t.getItem("alldata").then(function(l){var i={};l||(l=[]),l.map(function(e){return e&&e.value&&e.value.trim().length>0&&(i[e.value]=e),null});var r=0,s=0;e.map(function(e,t){var a=e;if(a.id=a.id?a.id:v(),i[e.value]){s+=1,a.tags=a.tags?a.tags:[],n&&n.trim().length>0&&a.tags.push(n.trim());var l=i[e.value].synonym?i[e.value].synonym.split("\n"):[],o=a.synonym?a.synonym.split("\n"):[];a.synonym=k([].concat(l,o)).sort().join("\n"),a.tags=k(a.tags).sort(),i[a.value]=a}else r+=1,a={id:v(),value:a.value,synonym:a.synonym?a.synonym:"",tags:a.tags?a.tags:[]},n&&n.trim().length>0&&a.tags.push(n.trim()),a.tags=k(a.tags).sort(),i[a.value]=a;return null}),t.setItem("alldata",Object.values(i)).then(function(){a({updated:s,created:r})})}):l({error:"Failed import"})})},mergeUtterances:function(e,t){return new Promise(function(a,l){e?n.getItem("alldata").then(function(l){var i={};l||(l=[]),l.map(function(e){return e&&e.value&&e.value.trim().length>0&&(i[e.value]=e),null});var r=0,s=0;e.map(function(e,n){var a=e;if(a.id=a.id?a.id:v(),i[e.value]){s+=1,a.tags=a.tags?a.tags:[];var l=i[e.value].synonym?i[e.value].synonym.split("\n"):[],o=a.synonym?a.synonym.split("\n"):[];a.synonym=k([].concat(l,o)).sort().join("\n"),t&&t.trim().length>0&&a.tags.push(t.trim()),a.tags=k(a.tags).sort(),i[a.value]=a}else r+=1,a={id:v(),value:a.value,synonym:a.synonym?a.synonym:"",tags:[]},t&&t.trim().length>0&&a.tags.push(t.trim()),a.tags=k(a.tags).sort(),i[a.value]=a;return null}),n.setItem("alldata",Object.values(i)).then(function(){a({updated:s,created:r})})}):l({error:"Failed import"})})},mergeRegexps:function(e,t){return new Promise(function(n,l){e?a.getItem("alldata").then(function(l){var i={};l||(l=[]),l.map(function(e){return e&&e.value&&e.value.trim().length>0&&(i[e.value]=e),null});var r=0,s=0;e.map(function(e,n){var a=e;return a.id=a.id?a.id:v(),i[e.value]?(s+=1,a.tags=a.tags?a.tags:[],t&&t.trim().length>0&&a.tags.push(t.trim()),a.tags=k(a.tags).sort(),i[a.value]=a):(r+=1,a={id:v(),value:a.value,synonym:a.synonym?a.synonym:"",tags:[]},t&&t.trim().length>0&&a.tags.push(t.trim()),a.tags=k(a.tags).sort(),i[a.value]=a),null}),a.setItem("alldata",Object.values(i)).then(function(){n({updated:s,created:r})})}):l({error:"Failed import"})})},mergeSkill:function(e){return new Promise(function(t,n){e&&e.title?l.getItem(e.title).then(function(n){l.setItem(e.title,e).then(function(){t({})})}):n({error:"Failed import"})})}}}var C=n(50),N=n.n(C),F=(n(176),n(101));function R(e){return new Promise(function(t,n){try{var a=JSON.parse(e.data);a&&a.rasa_nlu_data&&a.rasa_nlu_data.common_examples?t({type:"rasa.json"}):a&&a.title&&a.intents&&a.entities&&a.id?t({type:"opennlu.skill"}):a&&a.invocation&&a.intents?t({type:"jovo.json"}):a&&a.utterances?t({type:"opennlu.utterances"}):a&&a.lists?t({type:"opennlu.lists"}):a&&a.regexps?t({type:"opennlu.regexps"}):t({type:"json"})}catch(l){(new N.a).loadAsync(e.data).then(function(e){var n={};e.forEach(function(e,t){-1!==t.name.indexOf("/domain.yml")&&(n.rasa_domain=!0),-1!==t.name.indexOf("/data/nlu.md")&&(n.rasa_data=!0),-1!==t.name.indexOf("/project.js")&&(n.jovo_project=!0),-1!==t.name.indexOf("/models/en-US.js")&&(n.jovo_lang=!0),-1!==t.name.indexOf("/__init__.py")&&(n.mycroft_index=!0),-1!==t.name.indexOf("/vocab")&&(n.mycroft_vocab=!0)}),n.rasa_domain&&n.rasa_data?t({type:"rasa.zip"}):n.rasa_domain&&n.rasa_data?t({type:"jovo.zip"}):n.mycroft_index&&n.mycroft_vocab?t({type:"mycroft.zip"}):n.jovo_project&&n.jovo_lang?t({type:"jovo.zip"}):t()},function(n){e.data&&-1!==e.data.indexOf("## intent:")?t({type:"rasa.markdown"}):t({type:"text"})})}})}function M(e,t){return new Promise(function(n,a){(new N.a).loadAsync(e).then(function(e){var a=[];e.forEach(function(n,l){var i,r=!1;for(var s in t){var o=t[s];i=n,new RegExp("^"+o.split("*").map(function(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}).join(".*")+"$").test(i)&&(r=!0)}r&&a.push(new Promise(function(t,a){e.file(n).async("string").then(function(e){t({path:l.name,data:e})})}).catch(function(e){}))}),Promise.all(a).then(function(e){n(e)})})})}function P(e,t){var n=x(e);var a=[];return n.map(function(e,n){return e&&e.trim().length>0&&O(e).map(function(e){var n=function(e){for(var t=[],n=e,a=F("{","}",n),l=20;a&&l;){var i={value:a.body,start:a.start,end:a.end,type:a.body};t.push(i),n=a.pre+a.body+a.post,a=F("{","}",n),l--}return{id:v(),example:n,entities:t,tags:[]}}(e);n.intent=t,a.push(n)}),null}),a.sort(J)}function V(e,t){var n=x(e),a=[];return n.map(function(e,n){if(e&&e.trim().length>0){var l=U(e.trim());l[1].map(function(e){return a.push({id:v(),value:e,synonym:l[0],tags:t?[t]:[]}),null})}return null}),a.sort(J)}function W(e,t){var n=x(e),a=[];return n.map(function(e,n){return e&&e.trim().length>0&&a.push({id:v(),value:e.trim().replaceAll(" ","_"),synonym:e,tags:t?[t]:[]}),null}),a.sort(J)}function z(e,t){var n=[];if(t){var a=x(e);e&&e.trim().length>0&&n.push({id:v(),value:t.trim().replaceAll(" ","_"),synonym:a.join("\n"),tags:[]})}return n.sort(J)}function D(e){return e?e.replace(/[^0-9a-z ,]/gi,""):""}function U(e){if(e){var t=e.split("___");return t.length>1?[t[0],t.slice(1)]:["",[e]]}return["",[]]}function B(e,t){return e.value<t.value?-1:1}function J(e,t){return e.example<t.example?-1:1}function Z(e,t){var n=[];return e&&e.split("\n").map(function(e,a){O(e).map(function(e){var a=function(e){var t=[],n=e,a=F("{","}",n),l=20;for(;a&&l;){var i={value:a.body,start:a.start,end:a.end,type:a.body};t.push(i),n=a.pre+a.body+a.post,a=F("{","}",n),l--}return{id:v(),example:n,entities:t,tags:[]}}(e);a.intent=t,n.push(a)})}),n}function K(e,t){var n=[],a={},l={},i={},r={};return e.data&&e.data.split("##").map(function(e,s){var o=e.split("\n"),c=o[0].trim(),u=c.split(":")[0],m=o.length>1?o.slice(1):[];if("regex"===u){var p=c.slice(6).trim();for(var d in m){var g=m[d].slice(1).trim();p&&g&&(l[p]=Array.isArray(l[p])?l[p]:[],l[p].push({id:v(),value:p,synonym:g}))}}else if("synonym"===u){var f=c.slice(8).trim();for(var d in m){g=m[d].slice(1).trim();f&&g&&(i[f]=Array.isArray(i[f])?i[f]:[],i[f].push(g))}}else if("lookup"===u){if(t){var h=c.slice(7).trim();for(var d in m){var y=m[d].trim();if(y&&t[y])t[y].split("\n").map(function(e){e&&e.trim()&&(r[e]?r[e].tags=r[e].tags?k(r[e].tags.push(h)):[]:r[e]={tags:[h]})})}}}else if("intent"===u){var E=c.slice(7);for(var d in m){var b=m[d].slice(1).trim();e={intent:E,example:b};if(b.length>0){for(var S=b,O=b,A=F("[","]",S),w=10;w>0&&A&&void 0!==A&&"object"===typeof A;){var x={};w--,S=A.post,x.value=A.body,x.start=A.start,x.end=A.end;var j=F("(",")",A.post),I=F("{","}",A.post);if(j&&j.body&&I&&I.body)if(I.start<j.start)try{var L=JSON.parse("{"+I.body+"}");x.type=L.entityTypes,L.synonym&&L.synonym.length>0&&(i[L.synonym]=i[L.synonym]?i[L.synonym]:[],i[L.synonym].push(x.value),x.synonym=L.synonym)}catch(T){}else{L=j.body.split(":");x.type=L[0],L.length>1&&L[1].length>0&&(i[L[1]]=i[L[1]]?i[L[1]]:[],i[L[1]].push(x.value),x.synonym=L[1])}else if(I&&I.body)try{L=JSON.parse("{"+I.body+"}");x.type=L.entityTypes,L.synonym&&L.synonym.length>0&&(i[L.synonym]=i[L.synonym]?i[L.synonym]:[],i[L.synonym].push(x.value),x.synonym=L.synonym)}catch(T){}else{if(!j||!j.body)throw new Error("Invalid bracket structure at line "+s);L=j.body.split(":");x.type=L[0],L.length>1&&L[1].length>0&&(i[L[1]]=i[L[1]]?i[L[1]]:[],i[L[1]].push(x.value),x.synonym=L[1]),O=A.pre+x.value+A.post.slice(0,j.start)+A.post.slice(j.end+1)}x.value&&x.type?console.log(["ENTITY",x,O]):console.log(["NOENTITY",x,O]),e.entities=Array.isArray(e.entities)?e.entities:[],e.entities.push(x),x.value&&(a[x.value]={id:v(),value:x.value,synonym:x.synonym,start:x.start,end:x.end,tags:[x.type]}),A=F("[","]",S)}e.example=O,n.push(e)}}}}),{intents:n,regexps:Object.values(l),entities:Object.values(a)}}function q(e,t){var n={},a={},l={},i={},r={};try{var s=JSON.parse(e.data);if(console.log(["rasa JSON impORT",s]),s&&s.rasa_nlu_data&&s.rasa_nlu_data.regex_features)for(var o in s.rasa_nlu_data.regex_features){var c=s.rasa_nlu_data.regex_features[o];c.name&&c.name.trim().length>0&&c.pattern&&c.pattern.trim().length>0&&(l[c.name]={id:v(),value:c.name,synonym:u.pattern})}if(s&&s.rasa_nlu_data&&s.rasa_nlu_data.entity_synonyms)for(var o in s.rasa_nlu_data.entity_synonyms){var u=s.rasa_nlu_data.entity_synonyms[o];u.value&&u.value.trim().length>0&&u.synonyms&&u.synonyms.length>0&&(i[u.value]=i[u.value]?[].concat(i[u.value],u.synonyms):[])}if(t&&s&&s.rasa_nlu_data&&s.rasa_nlu_data.lookup_tables)for(var o in s.rasa_nlu_data.lookup_tables){var m=s.rasa_nlu_data.lookup_tables[o],p=m.name,d=m.elements.trim();if(d&&t[d])t[d].split("\n").map(function(e){e&&e.trim()&&(r[e]?r[e].tags=r[e].tags?k(r[e].tags.push(p)):[]:r[e]={tags:[p]})})}if(s&&s.rasa_nlu_data&&s.rasa_nlu_data.common_examples)for(var o in s.rasa_nlu_data.common_examples){var g=s.rasa_nlu_data.common_examples[o],f=g.entities?g.entities.map(function(e,t){return{type:e.entity,value:e.value,start:e.start,end:e.end}}):[];f.map(function(e){a[e.value]?a[e.value].tags=a[e.value].tags?k([].concat(a[e.value].tags,[e.type])):[e.type]:a[e.value]={id:v(),value:e.value,start:e.start,stop:e.stop,tags:[e.type]}}),n[g.text]={id:v(),example:g.text,intent:g.intent,entities:f,tags:[]}}}catch(y){console.log(y)}Object.keys(r).map(function(e){var t=r[e];return t.value&&a[t.value]&&(a[t.value].tags=a[t.value].tags?k([].concat(a[t.value].tags,t.tags)):t.tags),null}),Object.keys(i).map(function(e){return Array.isArray(i[e])&&i[e].map(function(t){a[t]?a[t].synonym=e:a[t]={id:v(),value:t,synonym:e}}),null});var h={intents:Object.values(n),regexps:Object.values(l),entities:Object.values(a)};return console.log(["rasa MD IMPORT",h]),h}function H(e){var t=[];try{var n=JSON.parse(e.data);console.log(["JOVO IMPORT",n]),n&&n.invocation&&n.intents&&(n.intents.map(function(e){return e&&e.phrases&&e.phrases.map(function(n){if(n&&n.trim().length>0){var a=[];if(e.inputs)for(var l in e.inputs){var i=e.inputs[l],r=n.indexOf("{"+i.name+"}");-1!==r&&(n=n.replace("{"+i.name+"}",i.name));var s={type:i.name,value:i.name,start:r,end:r+i.name.length};return a.push(s),null}t.push({id:v(),example:n.trim(),intent:e.name,entities:a,tags:[]})}return null}),null}),console.log(["JOVO done IMPORT",t]))}catch(a){}return{intents:t}}var G=n(177);function Y(e){var t=_(),n=t.mergeEntities,a=t.mergeIntents,l=t.mergeUtterances,i=t.mergeRegexps,r=t.mergeSkill,s={unzip:M,splitSentences:x,generateIntentSplits:P,generateEntitySplits:V,generateUtteranceSplits:W,generateMycroftUtteranceSplits:z,cleanListItem:D,extractSynonym:U,sortListSplits:B,sortExampleSplits:J,detectFileType:R,generateSplitsFromJovoJson:H,generateSplitsFromRasaJson:q,generateSplitsFromRasaMd:K,generateIntentSplitsForMycroft:Z},o=s.unzip,u=s.generateIntentSplits,m=s.generateEntitySplits,p=s.generateUtteranceSplits,d=s.generateMycroftUtteranceSplits,g=s.generateIntentSplitsForMycroft,f=s.detectFileType,h=s.generateSplitsFromJovoJson,y=s.generateSplitsFromRasaJson,E=s.generateSplitsFromRasaMd,b=Object(c.e)();function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return u(e.data,t)}function S(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return m(e.data,t)}return{importIntents:function(e){return new Promise(function(t,n){if(e)if("text"===e.fileType)t({intents:k(e,e.title)});else{if(!e.fileType.endsWith(".json"))throw new Error("Invalid file type for import");new Promise(function(e,t){e([])}).then(function(e){t({intents:e})})}n("Failed to import")})},importUtterances:function(e){return new Promise(function(t,n){if(e)if("text"===e.fileType)t(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return{utterances:p(e.data,t)}}(e,e.title));else{if(!e.fileType.endsWith(".json"))throw new Error("Invalid file type for import");new Promise(function(e,t){e([])}).then(function(e){t({utterances:e})})}n("Failed to import")})},importEntities:function(e){return new Promise(function(t,n){if(e)if("text"===e.fileType)t({entities:S(e,e.title)});else{if(!e.fileType.endsWith(".json"))throw new Error("Invalid file type for import");new Promise(function(e,t){e([])}).then(function(e){t({entities:e})})}n("Failed to import")})},importAll:function(t){return new Promise(function(s,c){if(t)switch(t.fileType){case"opennlu.skill":(function(e){return new Promise(function(t,s){var o={};try{if((o=JSON.parse(e.data)).title){if(o.intents){var c=[];Object.keys(o.intents).map(function(e){o.intents[e]&&o.intents[e].map(function(t){t.intent=e,c.push(t)})}),a(c,o.title)}if(o.entitiesData){var u=[];Object.keys(o.entitiesData).map(function(e){o.entitiesData[e]&&o.entitiesData[e].map(function(t){t.tags=Array.isArray(t.tags)?t.tags:[],t.tags.push(e),u.push(t)})}),n(u)}if(o.utterancesData){var m=[];Object.values(o.utterancesData).map(function(e){m.push(e)}),l(m)}if(o.regexps){var p=o.regexps.map(function(e){return e?{value:e.name,synonym:e.synonym}:{}});i(p)}r(o)}}catch(d){}t(o)})})(t).then(function(t){t.title&&t.intents&&Object.keys(t.intents).length>0?setTimeout(function(){b.push("/skills/skill/"+t.title)},500):e&&e("Failed to load skill. Missing title or intents.",3e3),e&&e("Imported",2e3)});break;case"mycroft.zip":(function(e){return new Promise(function(t,n){o(e.data,["*.intent","*.dialog","*.entity"]).then(function(e){var n={},a=[],l=[],i=[];e&&e.map(function(e){if(e&&e.path&&-1!==e.path.toLowerCase().indexOf("/en-us/")){var t=e.path.split("/");if(function(e){if(e&&e.split){var t=e.split("/"),n=t[t.length-1],a=n.slice(0,n.length-7)}}(e.path),e.path.endsWith(".intent")&&e.data){var n=t.length>1?t[t.length-1].replace(".intent",""):"";l=[].concat(g(e.data,n),l)}else if(e.path.endsWith(".dialog")){var r=e.path.split("/"),s=r[r.length-1];t.length>1&&t[t.length-1].replace(".dialog",""),a=[].concat(d(e.data,s.replace(".dialog","")),a)}else if(e.path.endsWith(".entity")){var o=t.length>1?t[t.length-1].replace(".entity",""):"";i=[].concat(m(e.data,o),i)}}}),n.utterances=a,n.intents=l,n.entities=i,t(n)})})})(t).then(function(e){s(e)});break;case"rasa.json":var u=y(t);s(u);break;case"rasa.markdown":var p=E(t);s(p);break;case"jovo.json":var f=h(t);s(f);break;case"jovo.zip":(function(e){return console.log(["imp jovo",e]),new Promise(function(t,n){o(e.data,["*/en-US.json"]).then(function(e){console.log(["jovo fil",e]),e&&e.map(function(e){var n=h(e);console.log(["jovo spl",n]),t(n)})})})})(t).then(function(e){s(e)});break;case"rasa.zip":(function(e){return new Promise(function(t,n){o(e.data,["*/config.yaml","*/credentials.yaml","*/endpoints.yaml","*/domain.yaml","*/config.yml","*/credentials.yml","*/endpoints.yml","*/domain.yml","*.md","*.json"]).then(function(e){var n={rasa:{},entities:[],regexps:[],intents:[]};e&&e.map(function(t){if(t.path&&(t.path.endsWith("config.yml")||t.path.endsWith("config.yaml")))n.rasa.config=t.data;else if(t.path&&(t.path.endsWith("credentials.yml")||t.path.endsWith("credentials.yml")))n.rasa.credentials=t.data;else if(t.path&&(t.path.endsWith("endpoints.yml")||t.path.endsWith("endpoints.yaml")))n.rasa.endpoints=t.data;else if(t.path&&(t.path.endsWith("domain.yml")||t.path.endsWith("domain.yaml")))n=function(e,t){try{var n=G.safeLoad(e);if(n){if(t.rasa.actions=n.actions.join("\n"),n.slots){var a=[];t.slots=Object.keys(n.slots).map(function(e){var t={slotAutofill:!!e.auto_fill,slotType:e.type?e.type:"unfeaturized",values:Array.isArray(e.values)?e.values:[]};a.push(t)}),t.rasa.slots=a}if(n.responses){var l=[];Object.keys(n.responses).map(function(e){var t=[];n.responses[e].map(function(e){t.push(e.text)}),l.push({id:v(),value:e,synonym:t.join("\n")})})}if(n.session_config){var i=[];Object.keys(n.session_config).map(function(e){i.push(" - "+e+" : "+n.session_config[e])}),t.rasa.session="session_config:\n"+i.join("\n")}}}catch(r){}return t}(t.data,n);else if(t.path&&t.path.endsWith(".json")){var a=y(t,e);console.log(["IMPORTED RASA JSON",a,t]),n.intents=[].concat(n.intents,a.intents),n.regexps=[].concat(n.regexps,a.regexps),n.entities=[].concat(n.entities,a.entities)}else if(t.path&&t.path.endsWith(".md")){var a=E(t,e);console.log(["IMPORTED RASA MD",a,t]),n.intents=[].concat(n.intents,a.intents),n.regexps=[].concat(n.regexps,a.regexps),n.entities=[].concat(n.entities,a.entities)}}),console.log(["IMPORTED RASA",n]),t(n)})})})(t).then(function(e){s(e)});break;default:c({error:"Invalid file type for import"})}else c({error:"Failed to import"})})},detectFileType:f}}var $=n(60),Q=n(145),X=n(1349),ee=n(1345),te=n(1338),ne=n(1339),ae=n(146),le=n.n(ae),ie=function(e){return l.a.createElement(ee.a,{as:te.a},l.a.createElement(ee.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(Q.a,{size:"sm"},"Tag"," "),l.a.createElement(ee.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(t){t.preventDefault(),e.tagAll(t.target.value)}},l.a.createElement(ne.a,null,l.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){e.setTagAllValue(t.target.value)},value:e.tagAllValue}),l.a.createElement(Q.a,{variant:"success",onClick:function(t){e.tagAll(e.tagAllValue)}},"Add"))),e.lookups.tagLookups&&e.lookups.tagLookups.sort().map(function(t,n){return l.a.createElement(ee.a.Item,{key:n,value:t},l.a.createElement(Q.a,{variant:"success",onClick:function(n){e.setTagAllValue(t),e.tagAll(t)}},"Add ",t),l.a.createElement(Q.a,{variant:"danger",onClick:function(n){e.untagAll(t)},style:{marginLeft:"0.5em"}},"Remove"))})))},re=function(e){return l.a.createElement(ee.a,{as:te.a},l.a.createElement(ee.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(Q.a,{size:"sm"},"Intent"," "),l.a.createElement(ee.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(t){t.preventDefault(),e.intentAll(t.target.value)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){e.setIntentAllValue(t.target.value)},value:e.intentAllValue}))),e.lookups.intentLookups&&e.lookups.intentLookups.sort().map(function(t,n){return l.a.createElement(ee.a.Item,{key:n,value:t,onClick:function(n){e.setIntentAllValue(t),e.intentAll(t)}},t)})))},se=function(e){return l.a.createElement(ee.a,{as:te.a},l.a.createElement(ee.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(Q.a,{size:"sm"},"Skill"," "),l.a.createElement(ee.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(t){t.preventDefault(),e.skillSetAll(t.target.value)}},l.a.createElement(ne.a,null,l.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){e.setSkillAllValue(t.target.value)},value:e.skillAllValue}),l.a.createElement(Q.a,{variant:"success",onClick:function(t){e.skillSetAll(e.tagAllValue)}},"Add"))),e.lookups.skillLookups&&e.lookups.skillLookups.sort().map(function(t,n){return l.a.createElement(ee.a.Item,{key:n,value:t},l.a.createElement(Q.a,{variant:"success",onClick:function(n){e.setSkillAllValue(t),e.skillSetAll(t)}},"Add to ",t),l.a.createElement(Q.a,{variant:"danger",onClick:function(n){e.unskillAll(t)},style:{marginLeft:"0.5em"}},"Remove"))})))},oe=n(147),ce=n.n(oe);function ue(e){return l.a.createElement("span",{style:{float:"left",fontWeight:"bold"}},"\xa0",e.filteredItems.length,"/",e.items.length," matches ")}function me(e){return l.a.createElement("div",null,l.a.createElement(o.b,{style:{marginRight:"1em"},to:"/help"},l.a.createElement(Q.a,null,"Home")),l.a.createElement(o.b,{style:{marginRight:"1em"},to:"/helpimport"},l.a.createElement(Q.a,null,"Import")),l.a.createElement(o.b,{style:{marginRight:"1em"},to:"/helpexport"},l.a.createElement(Q.a,null,"Export")),l.a.createElement(o.b,{style:{marginRight:"1em"},to:"/helpabout"},l.a.createElement(Q.a,null,"About")))}function pe(e){return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement(me,null),l.a.createElement("h1",null,"NLU tool"),l.a.createElement("img",{src:ce.a,style:{width:"80%",height:"15em"},alt:"Help Overview"}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("div",null,"This tool helps voice developers build vocabularies for their applications by providing ",l.a.createElement("b",null,"import and export of various NLU training data formats"),", and a ",l.a.createElement("b",null,"searchable database of community submitted, open licensed skills.")),l.a.createElement("hr",null),l.a.createElement("p",null,l.a.createElement(o.b,{to:"/search"},l.a.createElement(Q.a,null,"Search "))," the community database of NLU example records."),l.a.createElement("p",null,l.a.createElement(o.b,{to:"/sources"},l.a.createElement(Q.a,null,"Sources"))," to edit and import skills, pasted text or uploaded files."),l.a.createElement("p",null,l.a.createElement(o.b,{to:"/examples"},l.a.createElement(Q.a,null,"Organise"))," your examples using tags and markup the entities in your intent examples."),l.a.createElement("p",null,l.a.createElement(o.b,{to:"/skills"},l.a.createElement(Q.a,null,"Skills"))," to add platform metadata for export in various training formats or publishing to the community database."),l.a.createElement("hr",null),l.a.createElement("h3",null,"Features"),l.a.createElement("ul",null,l.a.createElement("li",null,"Search for open licenced training data submitted by the community"),l.a.createElement("li",null,"Import training data from text files, RASA , JOVO (Alexa, Google), Mycroft and native JSON."),l.a.createElement("li",null,"Edit training data and tag entities in intent examples"),l.a.createElement("li",null,"Filtering, tagging, multiple selection and bulk operations to quickly collect training data into an exportable skill"),l.a.createElement("li",null,"Virtual rendering with react-window is used to allow fast rendering of lists of intents and entities with many thousands of values"),l.a.createElement("li",null,"Export training data suitable for RASA, JOVO and Mycroft"),l.a.createElement("li",null,"Publish your skill to the community repository under an open source license")),l.a.createElement("ul",null,l.a.createElement("li",null,"This tool is a Progressive Web Application. Most features work without the Internet."),l.a.createElement("li",null,"MIT Open Source licensed code at ",l.a.createElement("a",{target:"_new",href:"https://github.com/syntithenai/opennludata"},"Github")),l.a.createElement("li",null,"Cross platform nodejs server"),l.a.createElement("li",null,"Published skills are committed to Github to ensure long term availability of collected data."),l.a.createElement("li",null,"To ensure ongoing availability, the web pages are hosted with github pages and the search interface relies on static data generated during publishing so a database/backend server is only required when publishing)"),l.a.createElement("li",null,"When the Internet is available, ",l.a.createElement("b",null,"this site uses Google Analytics to measure engagement and improve future versions.")," ")))}function de(e){return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement(me,null),l.a.createElement("h1",null,"Importing Data"),l.a.createElement("div",null,"This tool can import files a variety of file formats and allows you to cherry pick intents, entities and utterances.",l.a.createElement("br",null),"You can use zip files to to upload and import many files that make up a skill for Mycroft, RASA or JOVO.",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h3",null,"Supported File Types"),l.a.createElement("h4",null,"OpenNlu JSON"),"The native format for this tool is a JSON based structure that describes a skill and related data. Grab and edit a skill from the search page to see the structure.",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h4",null,"Text"),"Text files can be imported as intents, entities or utterances.",l.a.createElement("br",null),"The editor for text files provides sort and transformation tools.",l.a.createElement("br",null),l.a.createElement("ul",null,l.a.createElement("li",null,"One record is created for each line in the import file."),l.a.createElement("li",null,"When importing intents, multiple records are created for lines that use Mycroft style options expansion eg ",l.a.createElement("i",null,"the (man|woman|child) (walked to the (zoo|park)|ran to the train)")),l.a.createElement("li",null,"It is possible to use RASA style entity markup which is converted to entities on import."),l.a.createElement("li",null,"When importing entities, ____ can be used to split a value and synonym from a line eg ",l.a.createElement("i",null,"synonymvalue____entityvalue")),l.a.createElement("li",null,"When importing utterances, ____ can be used to create many addition alternatives eg ",l.a.createElement("i",null,"hi there____gday____howsitgoing"),"  ")),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h4",null,"RASA"),"The tool can import rasa intent training data files in MD and JSON format.",l.a.createElement("br",null),"Intents, entities, regular expressions (but not lookups) are imported.",l.a.createElement("br",null),l.a.createElement("br",null),"A zip file containing a root level domain.yml and some .md or .json files can also be imported.",l.a.createElement("br",null),"Where the training data references lookup files, and those files are available in the zip, the lookup files will be used to import entities.",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h4",null,"JOVO"),"The tool can read either a single JSON model file or search in zip file for models/en-US.json. This file is used to import intents and entities and an invocation for the skill. JOVO entity markers provide an entity type but no example value so intents are imported with the entity type as the value. :(",l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("h4",null,"Mycroft"),"The tool can read a zip file containing .dialog, .intent and .entity files.",l.a.createElement("br",null),l.a.createElement("br",null)),l.a.createElement("hr",null))}function ge(e){return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement(me,null),l.a.createElement("h1",null,"About"),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("h3",null,"Bugs/Feedback"),"Please share any feedback on the ",l.a.createElement("a",{target:"_new",href:"https://github.com/syntithenai/opennludata/issues"},"Github Issues Page")),l.a.createElement("br",null),l.a.createElement("div",null,"The ",l.a.createElement("a",{target:"_new",href:"https://github.com/syntithenai/opennludata"},"source code")," for this tool is available under an MIT Open Source Licence. "),l.a.createElement("hr",null),l.a.createElement("div",null,"Icons from  The Noun Project and others."),l.a.createElement("ul",null,l.a.createElement("li",null,"Man Singing by Gan Khoon Lay from  ",l.a.createElement("a",{href:"https://thenounproject.com/term/man-singing/642288/",target:"_new"},"The Noun Project")),l.a.createElement("li",null,"Head by hunotika from ",l.a.createElement("a",{href:"https://thenounproject.com/term/head/184237/",target:"_new"},"The Noun Project"))),l.a.createElement("hr",null),l.a.createElement("div",null,"Using many open source libraries including"),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("a",{target:"_new",href:"https://www.npmjs.com/package/create-node-app"},"create-node-app")," "),l.a.createElement("li",null,l.a.createElement("a",{target:"_new",href:"https://github.com/syntithenai/react-express-oauth-login-system"},"react-express-oauth-login-system")," for oauth based login with support for social providers"),l.a.createElement("li",null,l.a.createElement("a",{target:"_new",href:"https://github.com/localForage/localForage"},"localForage")," for cross platform local persistence."),l.a.createElement("li",null,l.a.createElement("a",{target:"_new",href:"https://github.com/florianholzapfel/express-restify-mongoose"},"express-restify-mongoose")," to simplify API development."),l.a.createElement("li",null,l.a.createElement("a",{target:"_new",href:"https://github.com/bvaughn/react-window"},"react-window")," for virtual rendering, allowing for lists with many thousands of elements."),l.a.createElement("li",null,l.a.createElement("a",{target:"_new",href:"https://github.com/josdejong/jsoneditor"},"JSON editor")," for editing uploaded sources."),l.a.createElement("li",null,"react, bootstrap, express, mongodb and mongoose")),l.a.createElement("hr",null))}function fe(e){return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement(me,null),l.a.createElement("h1",null,"Exporting"),l.a.createElement("div",null,"This tool can currently export to a number of formats including",l.a.createElement("ul",null,l.a.createElement("li",null,"Native JSON format"),l.a.createElement("li",null,"Mycroft intents and entities for Padatious NLU"),l.a.createElement("li",null,"RASA training data"),l.a.createElement("li",null,"JOVO model files"))))}function he(e){return l.a.createElement("span",null,l.a.createElement(o.b,{to:e.match.url+"/text",style:{float:"right"}},l.a.createElement(Q.a,null,"Paste Text")),l.a.createElement(ye,e))}function ye(e){return l.a.createElement("form",{onSubmit:function(e){e.preventDefault()},style:{float:"right"}},l.a.createElement(le.a,{multiple:!0,as:"binary",id:"my-file-input",onChange:e.handleFileSelection},l.a.createElement(Q.a,{style:{marginRight:"0.5em"}},"Select files")))}function ve(e){return l.a.createElement(a.Fragment,null,l.a.createElement("span",null,"With ",e.lookups.selectedTally," selected\xa0"),l.a.createElement(se,{skillSetAll:e.skillSetAll,skillAllValue:e.skillAllValue,setSkillAllValue:e.setSkillAllValue,lookups:e.lookups,untagAll:e.untagAll,unskillAll:e.unskillAll}),l.a.createElement(re,{intentAll:e.intentAll,intentAllValue:e.intentAllValue,setIntentAllValue:e.setIntentAllValue,lookups:e.lookups,untagAll:e.untagAll,unskillAll:e.unskillAll}),l.a.createElement(ie,{tagAll:e.tagAll,tagAllValue:e.tagAllValue,setTagAllValue:e.setTagAllValue,lookups:e.lookups,untagAll:e.untagAll,unskillAll:e.unskillAll}))}var Ee=n(148),be=(n(204),n(150)),ke=n.n(be);n(205),n(207);function Se(e){var t=Object(a.useState)(e.item&&e.item.title?e.item.title:""),n=Object(s.a)(t,2),i=n[0],r=n[1],c=Object(a.useState)(e.item&&e.item.data?e.item.data:""),u=Object(s.a)(c,2),m=u[0],p=u[1],d=Object(a.useState)(!1),g=Object(s.a)(d,2),f=g[0],h=g[1],y=Object(a.useState)([]),b=Object(s.a)(y,2),k=b[0],S=b[1],O=Object(a.useState)("json"),A=Object(s.a)(O,2),w=A[0],x=A[1],j=Object(a.useState)(["json","text"]),I=Object(s.a)(j,2),L=I[0],T=I[1],_=e.match.params.itemId?e.match.params.itemId:v(),C=(0,e.findKeyBy)("id",_),N=[{name:"sort",callMe:function(){var e=m?m.split("\n"):[];e.sort(),p(e.join("\n"))}},{name:"trim",callMe:function(){var e=m?m.split("\n"):[],t=[];e.map(function(e){t.push(e.trim())}),p(e.join("\n"))}},{name:"unique",callMe:function(){var e=m?m.split("\n"):[],t={};e.map(function(e){t[e]=!0}),p(Object.keys(t).join("\n"))}},{name:"lowercase",callMe:function(){p(m?m.toLowerCase():"")}},{name:"uppercase",callMe:function(){p(m?m.toUpperCase():"")}},{name:"capitalise",callMe:function(){var e=(m?m.split("\n"):[]).map(function(e){for(var t=e.split(" "),n=0,a=t.length;n<a;n++)t[n]=t[n][0].toUpperCase()+t[n].substr(1);return t.join(" ")});p(e.join("\n"))}},{name:"JSON values",callMe:function(){var e=(m?m.split("\n"):[]).map(function(e){return JSON.stringify({value:e})});p("["+e.join(",\n")+"]")}},{name:"JSON examples",callMe:function(){var e=(m?m.split("\n"):[]).map(function(e){return JSON.stringify({example:e})});p("["+e.join(",\n")+"]")}}];Object(a.useEffect)(function(){try{if("["===m[0]&&"]"===m[m.length-1]||"{"===m[0]&&"}"===m[m.length-1]){var e=JSON.parse(m);S(e),h(!0),T(["json","text"]),x("json")}else h(!1),T(["text"]),x("text")}catch(t){h(!1),T(["text"]),x("text")}},[m]);var F=E(e.match.url),R=e.match.url.split("/");"text"!==R[R.length-1]&&(F=E(E(e.match.url)));var M=L.map(function(e,t){return l.a.createElement(ee.a.Item,{key:t,value:e,onClick:function(t){x(e)}},e)});return l.a.createElement("div",{style:{minHeight:"60em"}},l.a.createElement(ee.a,{variant:"info",as:te.a},l.a.createElement(ee.a.Toggle,{variant:"info",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(Q.a,{variant:"info",size:"sm"},l.a.createElement("b",null,w)),l.a.createElement(ee.a.Menu,null,M)),(!f||"text"===w)&&l.a.createElement(ee.a,{variant:"info",style:{marginLeft:"1em"},as:te.a},l.a.createElement(ee.a.Toggle,{variant:"info",split:!0,size:"sm",id:"dropdown-transforms"}),l.a.createElement(Q.a,{variant:"info",size:"sm"},l.a.createElement("b",null,"Transform")),l.a.createElement(ee.a.Menu,null,N.map(function(e){return l.a.createElement(ee.a.Item,{key:e.name,value:e.name,onClick:e.callMe},e.name)}))),l.a.createElement("span",{style:{float:"right"}},m&&i&&l.a.createElement(o.b,{to:F},l.a.createElement(Q.a,{onClick:function(t){e.saveItem({id:_,title:i,data:m},C)},variant:"success"},"Save")),!(m&&i)&&l.a.createElement(Q.a,{variant:"secondary"},"Save"),l.a.createElement(o.b,{to:F},l.a.createElement(Q.a,{variant:"danger"},"Cancel"))),l.a.createElement("label",null,"\xa0Title ",l.a.createElement("input",{size:60,type:"text",onChange:function(e){r(e.target.value)},value:i})),(!f||"text"===w)&&l.a.createElement(l.a.Fragment,null,l.a.createElement("textarea",{style:{marginLeft:"0.2em",height:"100%",minHeight:"60em",width:"98%"},onChange:function(e){p(e.target.value)},value:m})),f&&"json"===w&&l.a.createElement("div",{style:{marginLeft:"0.2em",height:"100%",minHeight:"60em",width:"98%"}},l.a.createElement(Ee.a,{value:k,theme:"ace/theme/github",ace:ke.a,history:!0,mode:"code",allowedModes:["tree","code"],onChange:function(e){p(JSON.stringify(e))}})))}function Oe(e){return l.a.createElement("div",null,l.a.createElement(he,e),l.a.createElement("h1",null,"Sources"),l.a.createElement(Ae,e))}function Ae(e){var t=I.a.createInstance({name:"nlutool",storeName:"importing"}),n=e.items,a=function(n){t.setItem("alldata",n).then(function(){e.history.push("/importreview")})},i=function(t){t.error?e.setPageMessage(t.error,2e3):e.setPageMessage(t.toString(),2e3)};if(n){var r=Object.values(n).map(function(t,n){return l.a.createElement(X.a.Item,{key:n},t&&t.fileType&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Q.a,{style:{float:"right",marginLeft:"0.5em"},variant:"danger",onClick:function(a){window.confirm("Really delete source "+t.title+"-"+n)&&e.deleteItem(n)}},"Delete"),t.fileType.endsWith(".zip")&&l.a.createElement(Q.a,{style:{float:"right",marginLeft:"0.5em"},onClick:function(){!function(e){(new N.a).loadAsync(e.data).then(function(t){t.generateAsync({type:"blob"}).then(function(t){Object($.saveAs)(t,e.title)})})}(t)}},"Download"),!t.fileType.endsWith(".zip")&&l.a.createElement(Q.a,{style:{float:"right",marginLeft:"0.5em"},onClick:function(){Object($.saveAs)(new Blob([t.data],{type:"application/"+t.fileType}),t.title+"."+t.fileType)}},"Download"),!t.fileType.endsWith(".zip")&&l.a.createElement(o.b,{to:e.match.url+"/text/"+t.id},l.a.createElement(Q.a,{style:{float:"right",marginLeft:"0.5em"}},"Edit")),"text"===t.fileType&&l.a.createElement("div",{className:"textimportbuttons"},l.a.createElement(Q.a,{style:{float:"right",marginLeft:"0.5em"},variant:"success",onClick:function(n){e.importFunctions.importIntents(t).then(a).catch(i)}},"Import Intents"),l.a.createElement(Q.a,{style:{float:"right",marginLeft:"0.5em"},variant:"success",onClick:function(n){e.importFunctions.importEntities(t).then(a).catch(i)}},"Import Entities"),l.a.createElement(Q.a,{style:{float:"right",marginLeft:"0.5em"},variant:"success",onClick:function(n){e.importFunctions.importUtterances(t).then(a).catch(i)}},"Import Utterances")),"text"!==t.fileType&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Q.a,{style:{float:"right",marginLeft:"0.5em"},variant:"success",onClick:function(n){e.importFunctions.importAll(t).then(a).catch(i)}},"Import")),l.a.createElement("span",{style:{width:"90%"}}," ",t.fileType&&l.a.createElement(Q.a,null,t.fileType),"\xa0\xa0\xa0",t.title)))});return l.a.createElement(X.a,null,r)}return null}function we(e){var t=Y(e.setPageMessage),n=T("nlutool","sources"),i=n.loadAll,r=n.saveItem,o=n.deleteItem,u=n.items,m=n.findKeyBy,p=n.findBy;function d(n,a){n.preventDefault(),a&&a.forEach(function(n){var a=Object(s.a)(n,2),l=a[0],i=a[1],o={id:null,data:l.target.result,title:i.name};t.detectFileType(o).then(function(t){t&&t.type?(o.fileType=t.type,o.created_date=(new Date).getTime(),r(o,0)):(e.setPageMessage("Invalid file type"),setTimeout(function(){e.setPageMessage("")},2e3))})})}function g(e,n){t.detectFileType(e).then(function(t){e.fileType=t.type,e.created_date=(new Date).getTime(),r(e,n)})}return Object(a.useEffect)(function(){i()},[]),l.a.createElement("div",{className:"LocalStorageUploadManager"},l.a.createElement(c.a,{path:["".concat(e.match.path,"/text/:itemId?"),"".concat(e.match.path,"/text")],render:function(e){return l.a.createElement(Se,Object.assign({},e,{item:p("id",e.match.params.itemId),saveItem:g,deleteItem:o,findKeyBy:m}))}}),l.a.createElement(c.a,Object.assign({},e,{exact:!0,path:e.match.path,render:function(n){return l.a.createElement(Oe,Object.assign({},e,{items:u,deleteItem:o,saveItem:g,importFunctions:t,handleFileSelection:d}))}})))}var xe=n(40),je=function(e){return l.a.createElement(ee.a,{as:te.a},l.a.createElement(ee.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(Q.a,{size:"sm"},"Set List"," "),l.a.createElement(ee.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(t){t.preventDefault(),e.tagAll(t.target.value)}},l.a.createElement(ne.a,null,l.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){e.setTagAllValue(t.target.value)},value:e.tagAllValue}),l.a.createElement(Q.a,{variant:"success",onClick:function(t){e.tagAll(e.tagAllValue)}},"Add"))),e.lookups.listsLookups&&e.lookups.listsLookups.sort().map(function(t,n){return l.a.createElement(ee.a.Item,{key:n,value:t},l.a.createElement(Q.a,{variant:"success",onClick:function(n){e.setTagAllValue(t),e.tagAll(t)}},"Add to ",t),l.a.createElement(Q.a,{variant:"danger",onClick:function(n){e.untagAll(t)},style:{marginLeft:"0.5em"}},"Remove"))})))},Ie=function(e){var t=e.searchFilter,n=e.setSearchFilter;return l.a.createElement("input",{style:{marginLeft:"0.5em"},type:"text",value:t,onChange:function(e){var t=e.target.value;n(t)},placeholder:"Search"})},Le=n(14),Te=n.n(Le),_e=function(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)(function(){var t=e.lookups.listsLookups&&e.lookups.listsLookups.sort().map(function(t,n){return l.a.createElement(ee.a.Item,{key:n,value:t,onClick:function(n){e.setListFilterValue(t)}},t)});t.unshift(l.a.createElement(ee.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(t){e.setListFilterValue("")}},"\xa0")),t.push(l.a.createElement(ee.a.Item,{key:"Not In A List",value:"Not In A List",onClick:function(t){e.setListFilterValue("Not In A List")}},l.a.createElement("b",null,"Not In A List"))),r(t)},[e.lookups]),l.a.createElement("div",null,l.a.createElement("span",null,e.lookups.selectedListTally>0&&l.a.createElement(Q.a,{size:"lg",onClick:function(t){e.resetSelection(t)},variant:"success"},l.a.createElement("img",{style:{height:"1em"},src:Te.a,alt:"Deselect"})),e.lookups.selectedListTally<=0&&l.a.createElement(Q.a,{size:"lg",onClick:function(t){e.selectAll(t)},variant:"secondary"},l.a.createElement("img",{style:{height:"1em"},src:Te.a,alt:"Select"}))),l.a.createElement("span",{style:{marginLeft:"0.4em"}},l.a.createElement(Ie,{searchFilter:e.searchFilter,setSearchFilter:e.setSearchFilter})),l.a.createElement(ee.a,{style:{marginLeft:"0.5em"},as:te.a},l.a.createElement(ee.a.Toggle,{split:!0,id:"dropdown-split-basic"}),l.a.createElement(Q.a,null,"List"+(e.listFilterValue?" - "+e.listFilterValue:"")," "),l.a.createElement(ee.a.Menu,null,i)),l.a.createElement(Q.a,{style:{marginLeft:"1em"},variant:"success",onClick:function(t){e.createEmptyItem(e.listFilterValue)}},"New Entity"),l.a.createElement(Q.a,{style:{marginLeft:"1em"},variant:"primary",onClick:function(t){e.sort(function(e,t){return e.value<t.value?-1:1})}},"Sort"))},Ce=n(22),Ne=n.n(Ce);var Fe=function(e,t,n,i,r,o,c){var u=Object(a.useState)({}),m=Object(s.a)(u,2),p=m[0],d=m[1],g=Object(a.useState)([]),f=Object(s.a)(g,2),h=f[0],y=f[1],v=l.a.createRef();return Object(a.useEffect)(function(){e.tags&&y(e.tags.map(function(e,t){return{id:t,name:e}}))},[e,JSON.stringify(e.tags)]),{selectionState:p,setSelectionState:d,tags:h,setTags:y,reactTags:v,onTagDelete:function(a){var l=h.slice(0);l.splice(a,1),y(l);var i=e;return i.tags=l.map(function(e){return e.name}),t(i,n),!0},onTagAddition:function(a){if(a&&a.name.trim().length>0){var l=[].concat(h,a),i=e,r=k(l.map(function(e){return e.name}));return i.tags=r.sort(),t(i,n),!0}},updateExampleContent:function(a){if(e&&"string"===typeof a){var l=e;l.value=a,t(l,n)}},updateExampleSynonym:function(a){if(e&&"string"===typeof a){var l=e;l.synonym=a,t(l,n)}},selectItem:function(n,a){if(a.shiftKey&&r>=0)c(n,r),o(n);else{var l=e;e.isSelected=!0,t(l,n),o(n)}},deselectItem:function(n){var a=e;e.isSelected=!1,t(a,n)}}};function Re(e){var t=e.item,n=e.query;return l.a.createElement("span",{id:t.id,className:t.name===n?"match":"no-match"},t.name)}var Me=n(1340),Pe=function(e){var t=Object(a.useState)(e.value?e.value:""),n=Object(s.a)(t,2),i=n[0],r=n[1];return l.a.createElement(ee.a,{as:te.a},l.a.createElement(ee.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(Q.a,{size:"sm"},e.value?e.title+" - "+e.value:e.title," "),l.a.createElement(ee.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(e){e.preventDefault()}},l.a.createElement(ne.a,null,l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){r(e.target.value)},value:i}))),Array.isArray(e.options)&&e.options.map(function(t,n){return l.a.createElement(ee.a.Item,{style:{minHeight:"1.4em"},key:n,value:t,onClick:function(n){r(t),e.selectItem(t)}},t||l.a.createElement("b",null,"None"))})))};function Ve(e){return l.a.createElement(Q.a,{type:"button",size:"sm",variant:"warning",style:{marginLeft:"0.3em",height:"2.5em"}},l.a.createElement(Me.a,{pill:!0,variant:"danger",size:"lg",style:{float:"right",fontWeight:"bold",height:"2em",paddingTop:"0.5em"},onClick:e.onDelete},"X"),e.tag.name,"  \xa0\xa0\xa0 \xa0\xa0\xa0")}function We(e){var t=e.item,n=e.splitNumber,a=e.style,i=Fe(e.item,e.saveItem,e.splitNumber,e.style,e.lastSelected,e.setLastSelected,e.selectBetween),r=i.tags,s=i.reactTags,o=i.onTagDelete,c=i.onTagAddition,u=i.updateExampleContent,m=i.updateExampleSynonym,p=i.selectItem,d=i.deselectItem;return t&&l.a.createElement("div",{style:a,className:n%2?"ListItemOdd":"ListItemEven"},l.a.createElement("div",{style:{position:"relative",width:"100%",textAlign:"left",borderTop:"2px solid black"}},l.a.createElement("div",{style:{float:"right"}},l.a.createElement(Q.a,{variant:"danger",size:"sm",style:{float:"right",fontWeight:"bold",borderRadius:"15px",marginTop:"0.2em"},onClick:function(a){window.confirm("Really delete")&&e.deleteItem(n,t.id?t.id:"")}},"X")),l.a.createElement("div",{style:{float:"left"}},!t.isSelected&&l.a.createElement(Q.a,{style:{float:"left"},size:"lg",variant:"secondary",onClick:function(e){p(n,e)}},l.a.createElement("img",{style:{height:"1em"},src:Te.a,alt:"Select"})),t.isSelected&&l.a.createElement(Q.a,{style:{float:"left"},size:"lg",variant:"success",onClick:function(){d(n)}},l.a.createElement("img",{style:{height:"1em"},src:Te.a,alt:"Deselect"}))),l.a.createElement("input",{style:{float:"left"},size:"25",type:"text",value:t.value,onChange:function(e){u(e.target.value)}}),l.a.createElement("label",{style:{float:"left",marginLeft:"0.5em"}},"Synonym ",l.a.createElement("input",{size:"15",type:"text",value:t.synonym,onChange:function(e){m(e.target.value)}})),l.a.createElement("label",{style:{float:"left",marginLeft:"0.5em"}},l.a.createElement("span",{style:{float:"left",marginRight:"0.5em"}},"Lists "),l.a.createElement("span",{style:{float:"left"}},l.a.createElement(Ne.a,{placeholderText:"Add to list",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:s,tags:r,tagComponent:function(t){return l.a.createElement(Ve,Object.assign({},t,{setRegexpEntity:e.setRegexpEntity,setRegexpIntent:e.setRegexpIntent,lookups:e.lookups}))},suggestionComponent:Re,suggestions:e.lookups.listsLookups.map(function(e,t){return{id:t,name:e}}),onDelete:o,onAddition:c})))))}function ze(e,t){var n=parseInt(t.index);switch(t.type){case"append":return t.item?[].concat(Object(u.a)(e),[t.item]):e;case"prepend":return t.item?[t.item].concat(Object(u.a)(e)):e;case"insert":return t.item&&"number"===typeof n&&e.length>0?[].concat(Object(u.a)(e.slice(0,n)),[t.item],Object(u.a)(e.slice(n))):e;case"remove":return"number"===typeof n?[].concat(Object(u.a)(e.slice(0,n)),Object(u.a)(e.slice(n+1))):e;case"update":return t.item&&"number"===typeof n?[].concat(Object(u.a)(e.slice(0,n)),[t.item],Object(u.a)(e.slice(n+1))):e;case"replaceall":return"object"===typeof t.items?t.items:e;case"sort":if(console.log(["DISP SORT",t.sort]),"function"===typeof t.sort){var a=e.sort(t.sort);return console.log(["DISP SORT ret",a,a[0],a[1]]),Object(u.a)(a)}return e;default:throw new Error("Invalid reduction in useDBSingleKey")}}function De(e,t,n){var l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];n||(n="data");var i=Object(a.useReducer)(ze,l),r=Object(s.a)(i,2),o=r[0],c=r[1],u=I.a.createInstance({name:e||"localstoragemanager",storeName:t||"single_key_data"});function m(e,t){for(var n in o)if(o[n]&&o[n][e]===t)return n}return Object(a.useEffect)(function(){},[]),Object(a.useEffect)(function(){u.setItem(n,o)},[o]),{getId:function(e){if(e&&e.id)return e.id;throw new Error("Missing ID value in getId")},loadAll:function(){return new Promise(function(e,t){u.getItem(n).then(function(t){c({type:"replaceall",items:t||l}),e(t)})})},saveItem:function(e,t){if(e){var n=!1;if(e.id||(n=!0,e.id=v()),n)c({type:"prepend",item:e});else if(o){var a=null;o.map(function(t,n){return t.id===e.id&&(a=n),null}),c(null!=a?{type:"update",item:e,index:a}:{type:"prepend",item:e})}}},deleteItem:function(e){c({type:"remove",index:e})},items:o,setItems:function(e){u.clear().then(function(){c({type:"replaceall",items:e})})},findKeyBy:m,findBy:function(e,t){var n=m(e,t);return o[n]},filter:function(e){var t=[];return e&&o.map(function(n,a){return n&&e(n)&&t.push(n),null}),t},sort:function(e){c({type:"sort",sort:e})}}}var Ue=function(e,t,n,i,r){var o=De(e,t,n,r),u=o.loadAll,m=o.saveItem,p=o.deleteItem,d=o.items,g=o.setItems,f=o.findKeyBy,h=o.filter,y=o.sort,v=Object(a.useState)([]),E=Object(s.a)(v,2),b=E[0],k=E[1],S=Object(a.useState)([]),O=Object(s.a)(S,2),A=O[0],w=O[1],x=Object(a.useState)(""),j=Object(s.a)(x,2),I=j[0],L=j[1],T=Object(a.useState)(""),_=Object(s.a)(T,2),C=_[0],N=_[1],F=l.a.createRef(),R=Object(a.useState)(-1),M=Object(s.a)(R,2),P=M[0],V=M[1],W=Object(c.f)(),z=W.listId?W.listId:"",D=Object(c.e)();return Object(a.useEffect)(function(){var e=h(function(e){var t=!0;I&&I.trim().length>0&&(t=!(!e.value||-1===e.value.toLowerCase().indexOf(I.toLowerCase())));var n=!0;return"Not In A List"===z?n=!(e.tags&&(!e.tags||0!==e.tags.length)):z&&z.trim().length>0&&(n=!(!e.tags||-1===e.tags.indexOf(z))),t&&n}),t={};e.map(function(e){return e.id&&(t[e.id]=!0),null}),e.sort(function(e,t){return(e.value?e.value.toLowerCase():"")<(t.value?t.value.toLowerCase():"")}),k(e),w(t),i(e)},[d,I,z]),{loadAll:u,saveItem:m,deleteItem:p,items:d,setItems:g,findKeyBy:f,filter:h,filteredItems:b,setFilteredItems:k,sort:y,searchFilter:I,setSearchFilter:L,tagAllValue:C,setTagAllValue:N,listRef:F,listFilterValue:z,setListFilterValue:function(e){var t=["/"+D.location.pathname.split("/")[1]];t.push("/"+e),D.push(t.join(""))},tagAll:function(e){var t=e||C;if(d){var n=[];d.map(function(e,a){if(e&&e.id)if(e.isSelected&&A[e.id]){var l=JSON.parse(JSON.stringify(e));l.tags||(l.tags=[]),-1===l.tags.indexOf(t)&&l.tags.push(t),n.push(l)}else n.push(e);return null}),g(n)}},untagAll:function(e){if(d){var t=[];d.map(function(n,a){if(n&&n.id)if(n.isSelected&&A[n.id]){var l=JSON.parse(JSON.stringify(n));l.tags||(l.tags=[]);var i=[];l.tags.map(function(t){return t!==e&&i.push(t),null}),l.tags=i,t.push(l)}else t.push(n);return null}),g(t)}},resetSelection:function(){if(d){var e=[];d.map(function(t,n){if(t){var a=t;a.isSelected=!1,e.push(a)}return null}),g(e)}},selectAll:function(){if(d){var e=[];d.map(function(t,n){if(t&&t.id){var a=t;t.id&&A[t.id]?(a.isSelected=!0,e.push(a)):(a.isSelected=!1,e.push(a))}return null}),g(e)}},saveItemWrap:function(e,t){e&&(m(e,t),F.current.resetAfterIndex(t),i(d))},getItemSize:function(e){var t=40;window.innerWidth<430?t=120:window.innerWidth<=768&&(t=70);var n=0,a=d[e];return a&&a.tags&&(n+=1),t+40*parseInt(n+1/3)},deleteAll:function(e){if(window.confirm("Really delete all selected")&&d){var t=[];d.map(function(e,n){return e&&e.id&&(A[e.id]&&e.isSelected||t.push(e)),null}),g(t),F.current.resetAfterIndex(0)}},createEmptyItem:function(e){var t=[];e&&"Not In A List"!==e&&e.trim().length>0&&t.push(e),L(""),m({id:null,value:"",synonym:"",tags:t})},lastSelected:P,setLastSelected:V,selectBetween:function(e,t){var n=e,a=t;if(a<n&&(n=t,a=e),d){var l=[];d.map(function(e,t){if(e&&e.id){var i=e;e.id&&A[e.id]&&(t>=n&&t<=a&&(i.isSelected=!0),l.push(i))}return null}),g(l)}}}},Be=function(e){var t=e.index,n=e.style,a=e.data.items[t];return l.a.createElement(We,{item:a,splitNumber:t,style:n,saveItem:e.data.saveItem,deleteItem:e.data.deleteItem,saveNlu:e.data.saveNlu,lookups:e.data.lookups,lastSelected:e.data.lastSelected,setLastSelected:e.data.setLastSelected,selectBetween:e.data.selectBetween})};function Je(e){var t=Ue("nlutool","lists","alldata",e.updateFunctions.updateLists),n=t.listFilterValue,i=t.setListFilterValue,r=t.loadAll,s=t.deleteItem,o=t.items,c=t.findKeyBy,u=t.searchFilter,m=t.setSearchFilter,p=t.tagAllValue,d=t.setTagAllValue,g=t.listRef,f=t.tagAll,h=t.untagAll,y=t.resetSelection,v=t.selectAll,E=t.saveItemWrap,b=t.getItemSize,k=t.filteredItems,S=t.deleteAll,O=t.createEmptyItem,A=t.sort,w=t.lastSelected,x=t.setLastSelected,j=t.selectBetween;return Object(a.useEffect)(function(){r(),e.updateFunctions.updateLists(o)},[]),Object(a.useEffect)(function(){},[k]),l.a.createElement("div",null,l.a.createElement(_e,Object.assign({},e,{searchFilter:u,setSearchFilter:m,listFilterValue:n,setListFilterValue:i,resetSelection:y,selectAll:v,createEmptyItem:O,sort:A})),function(e){if(k&&k.length>0)return l.a.createElement("div",null,l.a.createElement("span",{style:{float:"left",fontWeight:"bold"}},"\xa0",k.length," matches "),e.lookups.selectedListTally>0&&l.a.createElement("span",{style:{float:"right"}},l.a.createElement("span",null,"With ",e.lookups.selectedListTally," selected\xa0"),l.a.createElement(je,{tagAll:f,tagAllValue:p,setTagAllValue:d,untagAll:h,lookups:e.lookups}),l.a.createElement(Q.a,{style:{marginLeft:"1em"},onClick:S,variant:"danger"},"Delete Selected")),l.a.createElement("div",{style:{clear:"both"}},l.a.createElement("div",{style:{clear:"both"}},l.a.createElement(xe.a,{key:"list",ref:g,itemData:{items:k,saveItem:E,deleteItem:s,findKeyBy:c,lookups:e.lookups,lastSelected:w,setLastSelected:x,selectBetween:j},itemKey:function(e){return e},className:"List",height:700,itemCount:k.length,itemSize:b,width:"100%"},Be))))}(e))}var Ze=function(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)(function(){var t=e.lookups.utteranceTagsLookups&&e.lookups.utteranceTagsLookups.sort().map(function(t,n){return l.a.createElement(ee.a.Item,{key:n,value:t,onClick:function(n){e.setListFilterValue(t)}},t)});t.unshift(l.a.createElement(ee.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(t){e.setListFilterValue("")}},"\xa0")),t.push(l.a.createElement(ee.a.Item,{key:"Not In A List",value:"Not In A List",onClick:function(t){e.setListFilterValue("Not In A List")}},l.a.createElement("b",null,"Not In A List"))),r(t)},[e.lookups]),l.a.createElement("div",null,l.a.createElement("span",null,e.lookups.selectedUtteranceTally>0&&l.a.createElement(Q.a,{size:"lg",onClick:function(t){e.resetSelection(t)},variant:"success"},l.a.createElement("img",{style:{height:"1em"},src:Te.a,alt:"Deselect"})),e.lookups.selectedUtteranceTally<=0&&l.a.createElement(Q.a,{size:"lg",onClick:function(t){e.selectAll(t)},variant:"secondary"},l.a.createElement("img",{style:{height:"1em"},src:Te.a,alt:"Select"}))),l.a.createElement("span",{style:{marginLeft:"0.4em"}},l.a.createElement(Ie,{searchFilter:e.searchFilter,setSearchFilter:e.setSearchFilter})),l.a.createElement(ee.a,{style:{marginLeft:"0.5em"},as:te.a},l.a.createElement(ee.a.Toggle,{split:!0,id:"dropdown-split-basic"}),l.a.createElement(Q.a,null,"List"+(e.listFilterValue?" - "+e.listFilterValue:"")," "),l.a.createElement(ee.a.Menu,null,i)),l.a.createElement(Q.a,{style:{marginLeft:"1em"},variant:"success",onClick:function(t){e.createEmptyItem(e.listFilterValue)}},"New Utterance"),l.a.createElement(Q.a,{style:{marginLeft:"1em"},variant:"primary",onClick:function(t){e.sort(function(e,t){return e.value<t.value?-1:1})}},"Sort"))};function Ke(e){var t=e.item,n=e.splitNumber,a=e.style,i=Fe(e.item,e.saveItem,e.splitNumber,e.style,e.lastSelected,e.setLastSelected,e.selectBetween),r=i.tags,s=i.reactTags,o=i.onTagDelete,c=i.onTagAddition,u=i.updateExampleContent,m=i.updateExampleSynonym,p=i.selectItem,d=i.deselectItem;return t&&l.a.createElement("div",{style:a,className:n%2?"ListItemOdd":"ListItemEven"},l.a.createElement("div",{style:{position:"relative",width:"100%",textAlign:"left",borderTop:"2px solid black"}},l.a.createElement("div",{style:{float:"right"}},l.a.createElement(Q.a,{variant:"danger",size:"sm",style:{float:"right",fontWeight:"bold",borderRadius:"15px",marginTop:"0.2em"},onClick:function(a){window.confirm("Really delete")&&e.deleteItem(n,t.id?t.id:"")}},"X")),l.a.createElement("div",{style:{float:"left"}},!t.isSelected&&l.a.createElement(Q.a,{style:{float:"left"},size:"lg",variant:"secondary",onClick:function(e){p(n,e)}},l.a.createElement("img",{style:{height:"1em"},src:Te.a,alt:"Select"})),t.isSelected&&l.a.createElement(Q.a,{style:{float:"left"},size:"lg",variant:"success",onClick:function(){d(n)}},l.a.createElement("img",{style:{height:"1em"},src:Te.a,alt:"Deselect"}))),l.a.createElement("label",{style:{float:"left",marginLeft:"0.5em"}},"Key ",l.a.createElement("input",{size:"50",type:"text",value:t.value,onChange:function(e){u(e.target.value)}})),l.a.createElement("label",{style:{float:"left",marginLeft:"0.5em"}},l.a.createElement("span",{style:{float:"left",marginRight:"0.5em"}},"Lists "),l.a.createElement("span",{style:{float:"left"}},l.a.createElement(Ne.a,{placeholderText:"Add to list",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:s,tags:r,tagComponent:function(t){return l.a.createElement(Ve,Object.assign({},t,{setRegexpEntity:e.setRegexpEntity,setRegexpIntent:e.setRegexpIntent,lookups:e.lookups}))},suggestionComponent:Re,suggestions:e.lookups.utteranceTagsLookups.map(function(e,t){return{id:t,name:e}}),onDelete:o,onAddition:c}))),l.a.createElement("label",{style:{width:"100%"}},l.a.createElement("span",{style:{float:"left",marginRight:"0.5em"}},"Alternatives"),l.a.createElement("textarea",{style:{width:"90%",minWidth:"34em",height:"5em"},type:"text",value:t.synonym,onChange:function(e){!function(e){m(e);var n=e?e.split("\n"):[];if(n&&n.length>1&&!(t&&t.value&&t.value.trim().length>0)){var a=n[0].trim().replaceAll(" ","_");u(a)}}(e.target.value)}}))))}var qe=function(e){var t=e.index,n=e.style,a=e.data.items[t];return l.a.createElement(Ke,{item:a,splitNumber:t,style:n,saveItem:e.data.saveItem,deleteItem:e.data.deleteItem,saveNlu:e.data.saveNlu,lookups:e.data.lookups,lastSelected:e.data.lastSelected,setLastSelected:e.data.setLastSelected,selectBetween:e.data.selectBetween})};function He(e){var t=Ue("nlutool","utterances","alldata",e.updateFunctions.updateUtterances),n=t.listFilterValue,i=t.setListFilterValue,r=t.loadAll,s=t.deleteItem,o=t.findKeyBy,c=t.searchFilter,u=t.setSearchFilter,m=t.tagAllValue,p=t.setTagAllValue,d=t.listRef,g=t.tagAll,f=t.untagAll,h=t.resetSelection,y=t.selectAll,v=t.saveItemWrap,E=t.filteredItems,b=t.deleteAll,k=t.createEmptyItem,S=t.sort,O=t.lastSelected,A=t.setLastSelected,w=t.selectBetween;function x(){return window.innerWidth<430?380:window.innerWidth<=768?230:180}return Object(a.useEffect)(function(){r()},[]),l.a.createElement("div",null,l.a.createElement(Ze,Object.assign({},e,{searchFilter:c,setSearchFilter:u,listFilterValue:n,setListFilterValue:i,resetSelection:h,selectAll:y,createEmptyItem:k,sort:S})),function(e){if(E&&E.length>0)return l.a.createElement("div",null,l.a.createElement("span",{style:{float:"left",fontWeight:"bold"}},"\xa0",E.length," matches "),e.lookups.selectedUtteranceTally>0&&l.a.createElement("span",{style:{float:"right"}},l.a.createElement("span",null,"With ",e.lookups.selectedUtteranceTally," selected\xa0"),l.a.createElement(je,{tagAll:g,tagAllValue:m,setTagAllValue:p,untagAll:f,lookups:e.lookups}),l.a.createElement(Q.a,{style:{marginLeft:"1em"},onClick:b,variant:"danger"},"Delete Selected")),l.a.createElement("div",{style:{clear:"both"}},l.a.createElement("div",{style:{clear:"both"}},l.a.createElement(xe.a,{key:"list",ref:d,itemData:{items:E,saveItem:v,deleteItem:s,findKeyBy:o,lookups:e.lookups,lastSelected:O,setLastSelected:A,selectBetween:w},itemKey:function(e){return e},className:"List",height:700,itemCount:E.length,itemSize:x,width:"100%"},qe))))}(e))}var Ge=function(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)(function(){var t=e.lookups.regexpTagsLookups&&e.lookups.regexpTagsLookups.sort().map(function(t,n){return l.a.createElement(ee.a.Item,{key:n,value:t,onClick:function(n){e.setListFilterValue(t)}},t)});t.unshift(l.a.createElement(ee.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(t){e.setListFilterValue("")}},"\xa0")),t.push(l.a.createElement(ee.a.Item,{key:"Not In A List",value:"Not In A List",onClick:function(t){e.setListFilterValue("Not In A List")}},l.a.createElement("b",null,"Not Tagged"))),r(t)},[e.lookups]),l.a.createElement("div",null,l.a.createElement("span",null,e.lookups.selectedRegexTally>0&&l.a.createElement(Q.a,{size:"lg",onClick:function(t){e.resetSelection(t)},variant:"success"},l.a.createElement("img",{style:{height:"1em"},src:Te.a,alt:"Deselect"})),e.lookups.selectedRegexTally<=0&&l.a.createElement(Q.a,{size:"lg",onClick:function(t){e.selectAll(t)},variant:"secondary"},l.a.createElement("img",{style:{height:"1em"},src:Te.a,alt:"Select"}))),l.a.createElement("span",{style:{marginLeft:"0.4em"}},l.a.createElement(Ie,{searchFilter:e.searchFilter,setSearchFilter:e.setSearchFilter})),l.a.createElement(ee.a,{style:{marginLeft:"0.5em"},as:te.a},l.a.createElement(ee.a.Toggle,{split:!0,id:"dropdown-split-basic"}),l.a.createElement(Q.a,null,"Tag"+(e.listFilterValue?" - "+e.listFilterValue:"")," "),l.a.createElement(ee.a.Menu,null,i)),l.a.createElement(Q.a,{style:{marginLeft:"1em"},variant:"success",onClick:function(t){e.createEmptyItem(e.listFilterValue)}},"New Expression"),l.a.createElement(Q.a,{style:{marginLeft:"1em"},variant:"primary",onClick:function(t){e.sort(function(e,t){return e.value<t.value?-1:1})}},"Sort"))};function Ye(e){var t=e.item,n=e.splitNumber,a=e.style,i=Fe(e.item,e.saveItem,e.splitNumber,e.style,e.lastSelected,e.setLastSelected,e.selectBetween),r=i.tags,s=i.reactTags,o=i.onTagDelete,c=i.onTagAddition,u=i.updateExampleContent,m=i.updateExampleSynonym,p=i.selectItem,d=i.deselectItem;return t&&l.a.createElement("div",{style:a,className:n%2?"ListItemOdd":"ListItemEven"},l.a.createElement("div",{style:{position:"relative",width:"100%",textAlign:"left",borderTop:"2px solid black"}},l.a.createElement("div",{style:{float:"right"}},l.a.createElement(Q.a,{variant:"danger",size:"sm",style:{float:"right",fontWeight:"bold",borderRadius:"15px",marginTop:"0.2em"},onClick:function(a){window.confirm("Really delete")&&e.deleteItem(n,t.id?t.id:"")}},"X")),l.a.createElement("div",{style:{float:"left"}},!t.isSelected&&l.a.createElement(Q.a,{style:{float:"left"},size:"lg",variant:"secondary",onClick:function(e){p(n,e)}},l.a.createElement("img",{style:{height:"1em"},src:Te.a,alt:"Select"})),t.isSelected&&l.a.createElement(Q.a,{style:{float:"left"},size:"lg",variant:"success",onClick:function(){d(n)}},l.a.createElement("img",{style:{height:"1em"},src:Te.a,alt:"Deselect"}))),l.a.createElement("label",null,l.a.createElement("span",{style:{float:"left",marginLeft:"0.5em",marginRight:"0.5em"}},"Description ")," ",l.a.createElement("input",{style:{float:"left"},size:"50",type:"text",value:t.value,onChange:function(e){u(e.target.value)}})),l.a.createElement("label",{style:{float:"right",marginRight:"2em"}},l.a.createElement("span",{style:{float:"left",marginRight:"0.5em"}},"Tags "),l.a.createElement("span",{style:{float:"left"}},l.a.createElement(Ne.a,{placeholderText:"Add tag",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:s,tags:r,tagComponent:function(t){return l.a.createElement(Ve,Object.assign({},t,{setRegexpEntity:e.setRegexpEntity,setRegexpIntent:e.setRegexpIntent,lookups:e.lookups}))},suggestionComponent:Re,suggestions:e.lookups.regexpTagsLookups.map(function(e,t){return{id:t,name:e}}),onDelete:o.bind(this),onAddition:c.bind(this)}))),l.a.createElement("label",{style:{float:"left",marginLeft:"0.5em"}},l.a.createElement("span",{style:{float:"left",marginRight:"0.5em"}},"Regular Expression"),l.a.createElement("textarea",{style:{width:"60em",height:"6em"},type:"text",value:t.synonym,onChange:function(e){m(e.target.value)}}))))}var $e=[{value:"Proper Noun/Name",synonym:"\t\n(?<FirstName>[A-Z]\\.?\\w*\\-?[A-Z]?\\w*)\\s?(?<MiddleName>[A-Z]\\w*|[A-Z]?\\.?)\\s?(?<LastName>[A-Z]\\w*\\-?[A-Z]?\\w*)(?:,\\s|)(?<Suffix>Jr\\.|Sr\\.|IV|III|II|)"},{value:"Credit Card (Visa/Mastercard/Discover/American Express/Diners Club)",synonym:"^((4\\d{3})|(5[1-5]\\d{2})|(6011))-?\\d{4}-?\\d{4}-?\\d{4}|3[4,7]\\d{13}$\t\n^((?:4\\d{3})|(?:5[1-5]\\d{2})|(?:6011)|(?:3[68]\\d{2})|(?:30[012345]\\d))[ -]?(\\d{4})[ -]?(\\d{4})[ -]?(\\d{4}|3[4,7]\\d{13})$"},{value:"Positive Integer",synonym:"^(0|(\\+)?[1-9]{1}[0-9]{0,8}|(\\+)?[1-3]{1}[0-9]{1,9}|(\\+)?[4]{1}([0-1]{1}[0-9]{8}|[2]{1}([0-8]{1}[0-9]{7}|[9]{1}([0-3]{1}[0-9]{6}|[4]{1}([0-8]{1}[0-9]{5}|[9]{1}([0-5]{1}[0-9]{4}|[6]{1}([0-6]{1}[0-9]{3}|[7]{1}([0-1]{1}[0-9]{2}|[2]{1}([0-8]{1}[0-9]{1}|[9]{1}[0-5]{1})))))))))$"},{value:"US Currency",synonym:"^\\$(\\d{1,3}(\\,\\d{3})*|(\\d+))(\\.\\d{2})?$\n^\\$?([0-9]{1,3},([0-9]{3},)*[0-9]{3}|[0-9]+)(\\.[0-9][0-9])?$"},{value:"URL",synonym:"^(ht|f)tp(s?)\\:\\/\\/[a-zA-Z0-9\\-\\._]+(\\.[a-zA-Z0-9\\-\\._]+){2,}(\\/?)([a-zA-Z0-9\\-\\.\\?\\,\\'\\/\\\\\\+&amp;%\\$#_]*)?$"},{value:"Domain Name",synonym:"^([a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?\\.)*[a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?$\n^([a-zA-Z0-9]([a-zA-Z0-9\\-]{0,61}[a-zA-Z0-9])?\\.)+[a-zA-Z]{2,6}$"},{value:"Email Address",synonym:"^([a-zA-Z0-9_\\-\\.]+)@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.)|(([a-zA-Z0-9\\-]+\\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\\]?)$"},{value:"US Zipcode",synonym:"(^(?!0{5})(\\d{5})(?!-?0{4})(-?\\d{4})?$)\n(^(?!0{5})(\\d{5})(?!-?0{4})(-?\\d{4})?$)"},{value:"UK Postcode",synonym:"^[A-Za-z]{1,2}[0-9A-Za-z]{1,2}[ ]?[0-9]{0,1}[A-Za-z]{2}$"}];$e=$e.map(function(e){return Object.assign(e,{id:v()})});var Qe=function(e){var t=e.index,n=e.style,a=e.data.items[t];return l.a.createElement(Ye,{item:a,splitNumber:t,style:n,saveItem:e.data.saveItem,deleteItem:e.data.deleteItem,saveNlu:e.data.saveNlu,lookups:e.data.lookups,lastSelected:e.data.lastSelected,setLastSelected:e.data.setLastSelected,selectBetween:e.data.selectBetween})};function Xe(e){var t=Ue("nlutool","regexps","alldata",e.updateFunctions.updateRegexps,$e),n=t.listFilterValue,i=t.setListFilterValue,r=t.loadAll,s=t.deleteItem,o=t.findKeyBy,c=t.searchFilter,u=t.setSearchFilter,m=t.tagAllValue,p=t.setTagAllValue,d=t.listRef,g=t.tagAll,f=t.untagAll,h=t.resetSelection,y=t.selectAll,v=t.saveItemWrap,E=t.filteredItems,b=t.deleteAll,k=t.createEmptyItem,S=t.sort,O=t.lastSelected,A=t.setLastSelected,w=t.selectBetween;function x(){return window.innerWidth<430?390:window.innerWidth<=768?325:205}return Object(a.useEffect)(function(){r()},[]),l.a.createElement("div",null,l.a.createElement(Ge,Object.assign({},e,{searchFilter:c,setSearchFilter:u,listFilterValue:n,setListFilterValue:i,resetSelection:h,selectAll:y,createEmptyItem:k,sort:S})),function(e){if(E&&E.length>0)return l.a.createElement("div",null,l.a.createElement("span",{style:{float:"left",fontWeight:"bold"}},"\xa0",E.length," matches "),e.lookups.selectedRegexTally>0&&l.a.createElement("span",{style:{float:"right"}},l.a.createElement("span",null,"With ",e.lookups.selectedRegexTally," selected\xa0"),l.a.createElement(je,{tagAll:g,tagAllValue:m,setTagAllValue:p,untagAll:f,lookups:e.lookups}),l.a.createElement(Q.a,{style:{marginLeft:"1em"},onClick:b,variant:"danger"},"Delete Selected")),l.a.createElement("div",{style:{clear:"both"}},l.a.createElement("div",{style:{clear:"both"}},l.a.createElement(xe.a,{key:"list",ref:d,itemData:{items:E,saveItem:v,deleteItem:s,findKeyBy:o,lookups:e.lookups,lastSelected:O,setLastSelected:A,selectBetween:w},itemKey:function(e){return e},className:"List",height:700,itemCount:E.length,itemSize:x,width:"100%"},Qe))))}(e))}var et=function(e,t,n,i,r,o,c,u){var m=Object(a.useState)({}),p=Object(s.a)(m,2),d=p[0],g=p[1],f=Object(a.useState)(""),h=Object(s.a)(f,2),y=h[0],v=h[1],E=Object(a.useState)(e&&e.intent?e.intent:""),b=Object(s.a)(E,2),O=b[0],A=b[1],w=Object(a.useState)([]),x=Object(s.a)(w,2),j=x[0],I=x[1],L=Object(a.useState)([]),T=Object(s.a)(L,2),_=T[0],C=T[1],N=l.a.createRef(),F=l.a.createRef();function R(e,t,n){if(e){if(e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveStart("character",t),a.moveEnd("character",n-t),a.select()}else e.setSelectionRange?e.setSelectionRange(t,n):e.selectionStart&&(e.selectionStart=t,e.selectionEnd=n);e.focus()}}function M(a,l){var i=e;Array.isArray(e.entities)||(e.entities=[]);var s=e.entities,o=s[a]?s[a]:{},c=!(l&&l.length>0&&l===o.type);if(o.type=l,d&&d.textSelection){var u=d.startTextSelection,m=d.endTextSelection,p=!1;"number"===typeof parseInt(u)&&"number"===typeof parseInt(m)&&e.entities.map(function(e){var t=!c&&e.type===l,n=e.start>u&&e.start<m||e.end>u&&e.end<m;return!t&&n&&(p=!0),null}),p?(r("Overlap with existing entity !"),setTimeout(function(){r("")},2e3)):(o.value=d.textSelection,o.start=d.startTextSelection,o.end=d.endTextSelection,s[a]?s[a]=o:s.push(o),i.entities=s,g(null),t(i,n))}else s[a]?s[a]=o:s.push(o),i.entities=s,g(null),t(i,n)}return Object(a.useEffect)(function(){e.tags&&I(e.tags.map(function(e,t){return{id:t,name:e}})),e.skills&&C(e.skills.map(function(e,t){return{id:t,name:e}}))},[e]),{intentTitle:O,setIntentTitle:A,selectionState:d,setSelectionState:g,newEntity:y,setNewEntity:v,tags:j,setTags:I,skills:_,setSkills:C,reactTags:N,reactSkills:F,onTagDelete:function(a){var l=j.slice(0);l.splice(a,1),I(l);var i=e;i.tags=l.map(function(e){return e.name}),t(i,n)},onTagAddition:function(a){if(a&&a.name.trim().length>0){var l=[].concat(j,a);I(S(l,"name").sort(function(e,t){return e.name>t.name?1:-1}));var i=e;i.tags=k(l.map(function(e){return e.name})).sort(),t(i,n)}},onSkillDelete:function(a){var l=_.slice(0);l.splice(a,1),C(l);var i=e;i.skills=l.map(function(e){return e.name}),t(i,n)},onSkillAddition:function(a){if(a&&a.name.trim().length>0){var l=[].concat(_,a);C(S(l,"name").sort(function(e,t){return e.name>t.name?1:-1}));var i=e;i.skills=k(l.map(function(e){return e.name})).sort(),t(i,n)}},createSelection:R,updateExampleContent:function(a){if(e&&"string"===typeof e.example&&"string"===typeof a){var l=JSON.parse(JSON.stringify(e));if(e.entities&&e.entities.length>0){var i=e.entities,r=function(e,t){if(e===t)return-1;for(var n=0;e[n]===t[n];n++);return n}(a,e.example);if(a.length-e.example.length>0){var s=a.length-e.example.length;l.entities=i.map(function(e,t){return r<e.start?(e.start+=s,e.end+=s):r<e.end&&(e.end+=s,e.value=a.slice(e.start,e.end)),e})}else if(a.length===e.example.length)l.entities=i.map(function(e,t){return r>=e.start&&r<e.end&&(e.value=a.slice(e.start,e.end)),e});else{var o=a.length-e.example.length;l.entities=i.map(function(e,t){return r<e.start?(e.start+=o,e.end+=o):r<e.end&&(e.end+=o,e.value=a.slice(e.start,e.end)),e})}}l.example=a,t(l,n)}},entityClicked:function(t,a){if(e.entities){var l=e.entities;d&&d.textSelection&&0!==d.textSelection.length?M(t,a):l[t]&&R(document.getElementById("example_input_"+n),l[t].start,l[t].end)}},entityTypeChanged:M,intentChanged:function(a){var l=e;l.intent=a,t(l,n)},entityDelete:function(a){if(e.entities){var l=e,i=e.entities.slice(0,a).concat(e.entities.slice(a+1));l.entities=i,t(l,n)}},selectItem:function(n,a){if(a.shiftKey&&o>=0)u(n,o),c(n);else{var l=e;e.isSelected=!0,t(l,n),c(n)}},setSkill:function(e,t){},deselectItem:function(n,a){if(a.shiftKey)var l=e;e.isSelected=!1,t(l,n),c(-2)}}};function tt(e){var t=e.item,n=e.splitNumber,i=e.style,r=et(e.item,e.saveItem,e.splitNumber,e.style,e.setPageMessage,e.lastSelected,e.setLastSelected,e.selectBetween),o=r.intentTitle,c=r.setIntentTitle,u=r.selectionState,m=r.setSelectionState,p=r.newEntity,d=r.setNewEntity,g=r.tags,f=r.skills,h=r.reactTags,y=r.reactSkills,v=r.onTagDelete,E=r.onTagAddition,b=r.onSkillDelete,k=r.onSkillAddition,S=r.updateExampleContent,O=r.entityClicked,A=r.entityTypeChanged,w=r.intentChanged,x=r.entityDelete,j=r.selectItem,I=r.deselectItem,L=Object(a.useState)(e.item&&e.item.example?e.item.example:""),T=Object(s.a)(L,2),_=T[0],C=T[1],N=e.lookups.intentLookups&&e.lookups.intentLookups.sort().map(function(e,t){return l.a.createElement(ee.a.Item,{key:t,value:e,onClick:function(t){w(e)}},e)}),F=t&&t.entities?t.entities.map(function(t,n){var a=e.lookups.entityLookups.sort().map(function(e,t){return l.a.createElement(ee.a.Item,{key:t,value:e,onClick:function(t){A(n,e)}},e)});return l.a.createElement(ee.a,{style:{marginLeft:"0.2em"},variant:"info",key:n,as:te.a},l.a.createElement(ee.a.Toggle,{variant:"info",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(Q.a,{variant:"info",size:"sm",onClick:function(e){O(n,t.type)}},l.a.createElement("b",null,t.type),"-",t.value?t.value:"Select Entity Type"),l.a.createElement(Q.a,{variant:"info",size:"sm",onClick:function(e){x(n,"")}},"X"),l.a.createElement(ee.a.Menu,null,l.a.createElement("form",{style:{display:"inline"}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){A(n,e.target.value)},value:t.type}))),a))}):[];if(u&&u.textSelection&&u.textSelection.length>0&&u.textSelectionFrom===n){var R=e.lookups.entityLookups&&e.lookups.entityLookups.sort().map(function(e,t){return l.a.createElement(ee.a.Item,{key:t,value:e,onClick:function(t){A(-1,e)}},e)});F.push(l.a.createElement(ee.a,{key:"new",variant:"success",as:te.a},l.a.createElement(ee.a.Toggle,{variant:"success",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(Q.a,{variant:"success",size:"sm"},"New Entity"),l.a.createElement(ee.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(e){e.preventDefault(),A(-1,p)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){d(e.target.value)},value:p}))),R)))}return t&&l.a.createElement("div",{style:i,className:n%2?"ListItemOdd":"ListItemEven"},l.a.createElement("div",{style:{position:"relative",width:"100%",textAlign:"left",borderTop:"2px solid black"}},!t.isSelected&&l.a.createElement(Q.a,{style:{float:"left"},size:"lg",variant:"secondary",onClick:function(e){j(n,e)}},l.a.createElement("img",{style:{height:"1em"},src:Te.a,alt:"Select"})),t.isSelected&&l.a.createElement(Q.a,{style:{float:"left"},size:"lg",variant:"success",onClick:function(e){I(n,e)}},l.a.createElement("img",{style:{height:"1em"},src:Te.a,alt:"Deselect"})),l.a.createElement(Q.a,{variant:"danger",size:"sm",style:{float:"right",fontWeight:"bold",borderRadius:"15px",marginTop:"0.2em"},onClick:function(a){window.confirm("Really delete")&&e.deleteItem(n,t.id?t.id:"")}},"X"),l.a.createElement(ee.a,{style:{float:"left"},as:te.a},l.a.createElement(ee.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(Q.a,{size:"sm"},t.intent?t.intent.toString():"Select Intent"," "),l.a.createElement(ee.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(e){e.preventDefault(),w(o)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",value:o,onChange:function(e){c(e.target.value)}}))),N)),l.a.createElement("span",{style:{float:"left"}},F),l.a.createElement("div",{style:{float:"left"}},l.a.createElement(Ne.a,{placeholderText:"Add to skill",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:y,tags:f,suggestionComponent:Re,suggestions:e.lookups.skillLookups.map(function(e,t){return{id:t,name:e}}),onDelete:b,onAddition:k})),l.a.createElement("div",{style:{float:"left"}},l.a.createElement(Ne.a,{placeholderText:"Add new tag",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:h,tags:g,tagComponent:function(t){return l.a.createElement(Ve,Object.assign({},t,{setRegexpEntity:e.setRegexpEntity,setRegexpIntent:e.setRegexpIntent,lookups:e.lookups}))},suggestionComponent:Re,suggestions:e.lookups.tagLookups.map(function(e,t){return{id:t,name:e}}),onDelete:v,onAddition:E})),l.a.createElement("input",{onFocus:function(e){m(null)},onSelect:function(e){var t=window.getSelection().toString();m({textSelection:t,textSelectionFrom:n,startTextSelection:e.target.selectionStart,endTextSelection:e.target.selectionEnd})},type:"text",style:{width:"80%"},value:_,id:"example_input_"+n,onChange:function(e){C(e.target.value),S(e.target.value)}})))}var nt=function(e){var t=e.lookups.skillLookups&&e.lookups.skillLookups.sort().map(function(t,n){return l.a.createElement(ee.a.Item,{key:n,value:t,onClick:function(n){e.setSkillFilterValue(t)}},t)});t.unshift(l.a.createElement(ee.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(t){e.setSkillFilterValue("")}},"\xa0"));var n=e.lookups.intentLookups&&e.lookups.intentLookups.sort().map(function(t,n){return l.a.createElement(ee.a.Item,{key:n,value:t,onClick:function(n){e.setIntentFilterValue(t)}},t)});n.unshift(l.a.createElement(ee.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(t){e.setIntentFilterValue("")}},"\xa0"));var a=e.lookups.tagLookups&&e.lookups.tagLookups.sort().map(function(t,n){return l.a.createElement(ee.a.Item,{key:n,value:t,onClick:function(n){e.setTagFilterValue(t)}},t)});return a.unshift(l.a.createElement(ee.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(t){e.setTagFilterValue("")}},"\xa0")),l.a.createElement("div",null,l.a.createElement("span",null,e.lookups.selectedTally>0&&l.a.createElement(Q.a,{size:"lg",onClick:function(t){e.resetSelection(t)},variant:"success"},l.a.createElement("img",{style:{height:"1em"},src:Te.a,alt:"Deselect"})),e.lookups.selectedTally<=0&&l.a.createElement(Q.a,{size:"lg",onClick:function(t){e.selectAll(t)},variant:"secondary"},l.a.createElement("img",{style:{height:"1em"},src:Te.a,alt:"Select"}))),l.a.createElement("span",{style:{marginLeft:"0.4em"}},l.a.createElement(Ie,{searchFilter:e.searchFilter,setSearchFilter:e.setSearchFilter})),l.a.createElement(ee.a,{style:{marginLeft:"0.5em"},as:te.a},l.a.createElement(ee.a.Toggle,{split:!0,id:"dropdown-split-basic"}),l.a.createElement(Q.a,null,"Skill "+(e.skillFilterValue?" - "+e.skillFilterValue:"")," "),l.a.createElement(ee.a.Menu,null,t)),l.a.createElement(ee.a,{style:{marginLeft:"0.5em"},as:te.a},l.a.createElement(ee.a.Toggle,{split:!0,id:"dropdown-split-basic"}),l.a.createElement(Q.a,null,"Intent "+(e.intentFilterValue?" - "+e.intentFilterValue:"")," "),l.a.createElement(ee.a.Menu,null,n)),l.a.createElement(ee.a,{style:{marginLeft:"0.5em"},as:te.a},l.a.createElement(ee.a.Toggle,{split:!0,id:"dropdown-split-basic"}),l.a.createElement(Q.a,null,"Tag "+(e.tagFilterValue?" - "+e.tagFilterValue:"")," "),l.a.createElement(ee.a.Menu,null,a)),l.a.createElement(Q.a,{style:{marginLeft:"1em"},variant:"success",onClick:function(t){e.createEmptyItem(e.skillFilterValue,e.intentFilterValue,e.tagFilterValue)}},"New Intent"),l.a.createElement(Q.a,{style:{marginLeft:"1em"},variant:"primary",onClick:function(t){e.sort(function(e,t){return e.value<t.value?-1:1})}},"Sort"),l.a.createElement("hr",null))};var at=function(e,t,n,i){var r=De(e,t,n),o=r.loadAll,u=r.saveItem,m=r.deleteItem,p=r.items,d=r.setItems,g=r.findKeyBy,f=r.filter,h=r.sort,y=Object(a.useState)([]),v=Object(s.a)(y,2),E=v[0],b=v[1],S=Object(a.useState)([]),O=Object(s.a)(S,2),A=O[0],w=O[1],x=Object(a.useState)(""),j=Object(s.a)(x,2),L=j[0],T=j[1],_=Object(a.useState)(""),C=Object(s.a)(_,2),N=C[0],F=C[1],R=Object(a.useState)(""),M=Object(s.a)(R,2),P=M[0],V=M[1],W=Object(a.useState)(""),z=Object(s.a)(W,2),D=z[0],U=z[1],B=l.a.createRef(),J=Object(a.useState)(-1),Z=Object(s.a)(J,2),K=Z[0],q=Z[1],H=Object(c.f)(),G=Object(c.e)(),Y=H.skillId?H.skillId:"",$=H.intentId?H.intentId:"",Q=H.tag?H.tag:"";return Object(a.useEffect)(function(){var e=f(function(e){if((!L||L.trim().length<=0)&&(!Y||Y.trim().length<=0)&&(!$||$.trim().length<=0)&&(!Q||Q.trim().length<=0))return!0;var t=!0;$&&$.length>0&&(t=e.intent===$);var n=!0;Q&&Q.length>0&&(n=!(!e.tags||-1===e.tags.indexOf(Q)));var a=!0;Y&&Y.length>0&&(a=!(!e.skills||-1===e.skills.indexOf(Y)));var l=!0;return L&&L.length>0&&(l=!(!e.example||-1===e.example.toLowerCase().indexOf(L.toLowerCase()))),l&&a&&t&&n}),t={};e.map(function(e){return e.id&&(t[e.id]=!0),null}),e.sort(function(e,t){return(e.value?e.value.toLowerCase():"")<(t.value?t.value.toLowerCase():"")}),b(e),w(t),i(e)},[p,L,Y,$]),{loadAll:o,saveItem:u,deleteItem:m,items:p,setItems:d,findKeyBy:g,filter:f,filteredItems:E,setFilteredItems:b,createEmptyItem:function(e,t,n){T("");var a=[];e&&e.trim().length>0&&a.push(e);var l=[];n&&n.trim().length>0&&l.push(n);var i="";t&&t.trim().length>0&&(i=t),u({id:null,example:"",intent:i,skills:a,tags:l}),setTimeout(function(){B&&B.current&&(console.log(["HAVE CURRENT",B.current.resetAfterIndex]),B.current.resetAfterIndex(0),B.current.scrollToItem(20),B.current.scrollToItem(0))},1e3)},sort:h,searchFilter:L,setSearchFilter:T,tagAllValue:N,setTagAllValue:F,skillAllValue:P,setSkillAllValue:V,skillFilterValue:Y,setSkillFilterValue:function(e){var t=["/"+G.location.pathname.split("/")[1]];(Y=e).length>0&&t.push("/skill/"+Y),$.length>0&&t.push("/intent/"+$),Q.length>0&&t.push("/tag/"+Q),G.push(t.join(""))},intentFilterValue:$,setIntentFilterValue:function(e){var t=["/"+G.location.pathname.split("/")[1]];$=e,Y.length>0&&t.push("/skill/"+Y),$.length>0&&t.push("/intent/"+$),Q.length>0&&t.push("/tag/"+Q),G.push(t.join(""))},intentAllValue:D,setIntentAllValue:U,listRef:B,tagFilterValue:Q,setTagFilterValue:function(e){var t=["/"+G.location.pathname.split("/")[1]];Q=e,Y.length>0&&t.push("/skill/"+Y),$.length>0&&t.push("/intent/"+$),Q.length>0&&t.push("/tag/"+Q),G.push(t.join(""))},tagAll:function(e){var t=e||N;if(p){var n=[];p.map(function(e,a){if(e&&e.id)if(e.isSelected&&A[e.id]){var l=JSON.parse(JSON.stringify(e));l.tags||(l.tags=[]),-1===l.tags.indexOf(t)&&l.tags.push(t),n.push(l)}else n.push(e);return null}),d(n)}},untagAll:function(e){if(p){var t=[];p.map(function(n,a){if(n&&n.id)if(n.isSelected&&A[n.id]){var l=JSON.parse(JSON.stringify(n));l.tags||(l.tags=[]);var i=[];l.tags.map(function(t){return t!==e&&i.push(t),null}),l.tags=i,t.push(l)}else t.push(n);return null}),d(t)}},unskillAll:function(e){if(p){var t=[];p.map(function(n,a){if(n&&n.id)if(n.isSelected&&A[n.id]){var l=JSON.parse(JSON.stringify(n));l.skills||(l.skills=[]);var i=[];l.skills.map(function(t){return t!==e&&i.push(t),null}),l.skills=i,t.push(l)}else t.push(n);return null}),d(t)}},intentAll:function(e){var t=e||D;if(p){var n=[];p.map(function(e,a){if(e&&e.id)if(e.isSelected&&A[e.id]){var l=e;l.intent=t,n.push(l)}else n.push(e);return null}),d(n)}},resetSelection:function(){if(p){var e=[];p.map(function(t,n){if(t){var a=t;a.isSelected=!1,e.push(a)}return null}),d(e)}},selectAll:function(){if(p){var e=[];p.map(function(t,n){if(t&&t.id){var a=t;t.id&&A[t.id]?(a.isSelected=!0,e.push(a)):(a.isSelected=!1,e.push(a))}return null}),d(e)}},skillSetAll:function(e){var t=e||P;if(p){var n=[];p.map(function(e,a){if(e&&e.id)if(e.isSelected&&A[e.id]){var l=JSON.parse(JSON.stringify(e));l.skills||(l.skills=[]),-1===l.skills.indexOf(t)&&l.skills.push(t),l.skills=k(l.skills),n.push(l)}else n.push(e);return null}),d(n)}},saveItemWrap:function(e,t){u(e,t),i(p),B&&B.current&&B.current.resetAfterIndex(t)},getItemSize:function(e){var t=100,n=70,a=10,l=8,i=6;window.innerWidth<430?(t=140,n=50,a=4,l=1,i=1):window.innerWidth<=768&&(t=120,n=30,a=2,l=1,i=2);var r=0,s=p[e];return s&&s.entities&&(r+=s.entities.length/l),s&&s.tags&&(r+=s.tags.length/a),s&&s.skills&&(r+=s.skills.length/i),t+Math.round(r)*n},deleteAll:function(e){if(window.confirm("Really delete all selected")&&p){var t=[];p.map(function(e,n){return e&&e.id&&(A[e.id]&&e.isSelected||t.push(e)),null}),d(t),B.current.resetAfterIndex(0)}},saveAll:function(e){if(p){var t=[],n=[];E.map(function(e,a){return e.intent&&e.intent.length>0&&e.id&&A[e.id]&&e.isSelected?n.push(e):t.push(e),null}),d(t),B.current.resetAfterIndex(0)}},saveNlu:function(e){p&&p[e]&&(function(e){var t=I.a.createInstance({name:"nlutool",storeName:"examples"});t.getItem("alldata").then(function(n){n.push(e),t.setItem("alldata",n)})}(p[e]),m(e))},lastSelected:K,setLastSelected:q,selectBetween:function(e,t){var n=e,a=t;if(a<n&&(n=t,a=e),p){var l=[];p.map(function(e,t){if(e&&e.id){var i=e;e.id&&A[e.id]&&(t>=n&&t<=a&&(i.isSelected=!0),l.push(i))}return null}),d(l)}}}},lt=function(e){var t=e.index,n=e.style,a=e.data.items[t];return l.a.createElement(tt,{item:a,splitNumber:t,style:n,saveItem:e.data.saveItem,deleteItem:e.data.deleteItem,lookups:e.data.lookups,setPageMessage:e.data.setPageMessage,lastSelected:e.data.lastSelected,setLastSelected:e.data.setLastSelected,selectBetween:e.data.selectBetween})};function it(e){var t=at("nlutool","examples","alldata",e.updateFunctions.updateLookups),n=t.loadAll,i=t.deleteItem,r=t.items,s=t.findKeyBy,c=t.searchFilter,u=t.setSearchFilter,m=t.skillFilterValue,p=t.setSkillFilterValue,d=t.intentFilterValue,g=t.setIntentFilterValue,f=t.tagAllValue,h=t.setTagAllValue,y=t.skillAllValue,v=t.setSkillAllValue,E=t.intentAllValue,b=t.setIntentAllValue,k=t.listRef,S=t.tagAll,O=t.untagAll,A=t.unskillAll,w=t.intentAll,x=t.resetSelection,j=t.selectAll,I=t.skillSetAll,L=t.saveItemWrap,T=t.getItemSize,_=t.deleteAll,C=t.filteredItems,N=t.createEmptyItem,F=t.sort,R=t.lastSelected,M=t.setLastSelected,P=t.selectBetween,V=t.tagFilterValue,W=t.setTagFilterValue;return Object(a.useEffect)(function(){n()},[]),l.a.createElement("div",null,l.a.createElement(nt,Object.assign({},e,{searchFilter:c,setSearchFilter:u,skillFilterValue:m,setSkillFilterValue:p,tagFilterValue:V,setTagFilterValue:W,resetSelection:x,selectAll:j,createEmptyItem:function(e,t,n){N(e,t,n)},intentFilterValue:d,setIntentFilterValue:g,untagAll:O,unskillAll:A,sort:F})),function(e){return C&&C.length>0?l.a.createElement("div",null,l.a.createElement(ue,{items:r,filteredItems:C}),e.lookups.selectedTally>0&&l.a.createElement("span",{style:{float:"right"}},l.a.createElement(ve,{skillSetAll:I,skillAllValue:y,setSkillAllValue:v,untagAll:O,unskillAll:A,intentAll:w,intentAllValue:E,setIntentAllValue:b,tagAll:S,tagAllValue:f,setTagAllValue:h,lookups:e.lookups}),l.a.createElement(Q.a,{style:{marginLeft:"1em"},onClick:_,variant:"danger"},"Delete Selected")),l.a.createElement(xe.a,{key:"intentlist",ref:k,itemData:{items:C,saveItem:L,deleteItem:i,findKeyBy:s,lookups:e.lookups,setPageMessage:e.setPageMessage,lastSelected:R,setLastSelected:M,selectBetween:P},itemKey:function(e){return e},className:"List",height:700,itemCount:C.length,itemSize:T,width:"100%"},lt)):l.a.createElement("div",null,l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("br",null),l.a.createElement("b",null,"No items"),l.a.createElement("br",null),l.a.createElement("br",null),"Upload ",l.a.createElement(o.b,{to:"/sources"},l.a.createElement(Q.a,null,"Sources"))," then ",l.a.createElement(o.b,{to:"/import"},l.a.createElement(Q.a,null,"Import")),"."))}(e))}var rt=n(1347),st=n(151),ot=n.n(st),ct=n(152),ut=n.n(ct),mt=n(98);function pt(e){mt.a.pageview(e.history.location.pathname);var t={paddingLeft:"0.3em"},n=e.history&&e.history.location&&e.history.location.pathname?e.history.location.pathname:"/",a={"/":{name:"NLU Tool",show:!1},"/search":{name:"Search",show:!0},"/sources":{name:"Import",show:!0},"/regexps":{name:"RegExps",show:!0},"/lists":{name:"Entities",show:!0},"/utterances":{name:"Utterances",show:!0},"/examples":{name:"Intents",show:!0},"/skills":{name:"Skills",show:!0},"/help":{name:"Help",show:!0}},i=Object.keys(a).map(function(e,i){var r=a[e];return r.show?r.link?l.a.createElement("a",{key:i,style:t,href:r.link},l.a.createElement(Q.a,{variant:"primary"},r.name)):l.a.createElement(o.b,{key:i,style:t,to:e},l.a.createElement(Q.a,{variant:-1!==n.indexOf(e)?"success":"primary"},r.name)):null});return l.a.createElement(rt.a,{bg:"dark",variant:"dark",style:{width:"100%",border:""}},e.message&&l.a.createElement("div",{style:{position:"fixed",top:100,left:window.innerWidth?window.innerWidth/2-40:100,border:"2px solid red",background:"pink",padding:"0.5em",minWidth:"400px",borderRadius:"5px",zIndex:999}},l.a.createElement(Q.a,{variant:"danger",size:"sm",style:{float:"right",fontWeight:"bold",borderRadius:"20px",marginLeft:"1em"},onClick:function(t){e.setPageMessage("")}},"X"),e.message),l.a.createElement("img",{src:ot.a,style:{height:"5em",marginRight:"0.4em"},alt:"logo"}),l.a.createElement("div",{style:{width:"100%"}},i),l.a.createElement("div",{style:{float:"right",vAlign:"top",minWidth:"10em",marginRight:"0em"}},e.isLoggedIn()&&l.a.createElement(l.a.Fragment,null,l.a.createElement(Q.a,{variant:"primary",onClick:e.doProfile},"Profile"),l.a.createElement(Q.a,{variant:"danger",onClick:e.doLogout},"Logout")),!e.isLoggedIn()&&l.a.createElement(Q.a,{variant:"success",onClick:e.doLogin},"Login")),l.a.createElement("img",{src:ut.a,alt:"waiting",style:{position:"fixed",top:5,right:5,zIndex:99,display:e.waiting?"block":"none"}}))}mt.a.initialize("UA-3712973-4");var dt=n(153),gt=n.n(dt),ft=n(95),ht=n.n(ft);function yt(e){var t=e.item,n=e.splitNumber,a=e.style,i=et(e.item,e.saveItem,e.splitNumber,e.style,e.setPageMessage),r=i.intentTitle,s=i.setIntentTitle,o=i.selectionState,c=i.setSelectionState,u=i.newEntity,m=i.setNewEntity,p=i.tags,d=i.skills,g=i.reactTags,f=i.reactSkills,h=i.onTagDelete,y=i.onTagAddition,v=i.onSkillDelete,E=i.onSkillAddition,b=i.updateExampleContent,k=i.entityClicked,S=i.entityTypeChanged,O=i.intentChanged,A=i.entityDelete,w=i.selectItem,x=i.deselectItem,j=e.lookups.intentLookups&&e.lookups.intentLookups.sort().map(function(e,t){return l.a.createElement(ee.a.Item,{key:t,value:e,onClick:function(t){O(e)}},e)}),I=t&&t.entities?t.entities.map(function(t,n){var a=e.lookups.entityLookups.sort().map(function(e,t){return l.a.createElement(ee.a.Item,{key:t,value:e,onClick:function(t){S(n,e)}},e)});return l.a.createElement(ee.a,{style:{marginLeft:"0.2em"},variant:"info",key:n,as:te.a},l.a.createElement(ee.a.Toggle,{variant:"info",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(Q.a,{variant:"info",size:"sm",onClick:function(e){k(n,t.type)}},l.a.createElement("b",null,t.type),"-",t.value?t.value:"Select Entity Type"),l.a.createElement(Q.a,{variant:"info",size:"sm",onClick:function(e){A(n,"")}},"X"),l.a.createElement(ee.a.Menu,null,l.a.createElement("form",{style:{display:"inline"}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){S(n,e.target.value)},value:t.type}))),a))}):[];if(o&&o.textSelection&&o.textSelection.length>0&&o.textSelectionFrom===n){var L=e.lookups.entityLookups&&e.lookups.entityLookups.sort().map(function(e,t){return l.a.createElement(ee.a.Item,{key:t,value:e,onClick:function(t){S(-1,e)}},e)});I.push(l.a.createElement(ee.a,{key:"new",variant:"success",as:te.a},l.a.createElement(ee.a.Toggle,{variant:"success",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(Q.a,{variant:"success",size:"sm"},"New Entity"),l.a.createElement(ee.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(e){e.preventDefault(),S(-1,u)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){m(e.target.value)},value:u}))),L)))}return t&&l.a.createElement("div",{style:a,className:n%2?"ListItemOdd":"ListItemEven"},l.a.createElement("div",{style:{position:"relative",width:"100%",textAlign:"left",borderTop:"2px solid black"}},!t.isSelected&&l.a.createElement(Q.a,{style:{float:"left"},size:"lg",variant:"secondary",onClick:function(){w(n)}},l.a.createElement("img",{style:{height:"1em"},src:Te.a,alt:"Select"})),t.isSelected&&l.a.createElement(Q.a,{style:{float:"left"},size:"lg",variant:"success",onClick:function(){x(n)}},l.a.createElement("img",{style:{height:"1em"},src:Te.a,alt:"Deselect"})),t.intent&&l.a.createElement(Q.a,{style:{float:"right",marginLeft:"0.2em"},variant:"success",onClick:function(){e.saveNlu(n)}},l.a.createElement("img",{src:ht.a,alt:"Save"})," Save"),!t&&l.a.createElement(Q.a,{style:{float:"right",marginLeft:"0.2em"},variant:"secondary"},l.a.createElement("img",{src:ht.a,alt:"Save"})," Import"),l.a.createElement(Q.a,{variant:"danger",style:{float:"right"},onClick:function(a){e.deleteItem(n,t.id?t.id:"")}},l.a.createElement("img",{src:gt.a,alt:"Delete"})," Delete"),l.a.createElement(ee.a,{style:{float:"left"},as:te.a},l.a.createElement(ee.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(Q.a,{size:"sm"},t.intent?t.intent.toString():"Select Intent"," "),l.a.createElement(ee.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(e){e.preventDefault(),O(r)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",value:r,onChange:function(e){s(e.target.value)}}))),j)),l.a.createElement("span",{style:{float:"left"}},I),l.a.createElement("div",{style:{float:"left"}},l.a.createElement(Ne.a,{placeholderText:"Add to skill",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:f,tags:d,suggestionComponent:Re,suggestions:e.lookups.skillLookups.map(function(e,t){return{id:t,name:e}}),onDelete:v,onAddition:E})),l.a.createElement("div",{style:{float:"left"}},l.a.createElement(Ne.a,{placeholderText:"Add new tag",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:g,tags:p,suggestionComponent:Re,suggestions:e.lookups.tagLookups.map(function(e,t){return{id:t,name:e}}),onDelete:h,onAddition:y})),l.a.createElement("input",{onFocus:function(e){c(null)},onSelect:function(e){var t=window.getSelection().toString();c({textSelection:t,textSelectionFrom:n,startTextSelection:e.target.selectionStart,endTextSelection:e.target.selectionEnd})},type:"text",style:{clear:"both",width:"80%"},value:t.example,id:"example_input_"+n,onChange:function(e){b(e.target.value)}})))}var vt=n(154),Et=n.n(vt),bt=n(155),kt=n.n(bt),St=function(e){var t=e.index,n=e.style,a=e.data.items[t];return l.a.createElement(yt,{item:a,splitNumber:t,style:n,saveItem:e.data.saveItem,deleteItem:e.data.deleteItem,saveNlu:e.data.saveNlu,lookups:e.data.lookups,setPageMessage:e.data.setPageMessage})};function Ot(e){var t=at("nlutool","import","alldata",e.updateFunctions.updateLookups),n=t.loadAll,i=t.deleteItem,r=t.items,s=t.findKeyBy,c=t.searchFilter,u=t.setSearchFilter,m=t.tagAllValue,p=t.setTagAllValue,d=t.skillAllValue,g=t.setSkillAllValue,f=t.skillFilterValue,h=t.setSkillFilterValue,y=t.intentFilterValue,v=t.setIntentFilterValue,E=t.intentAllValue,b=t.setIntentAllValue,k=t.listRef,S=t.tagAll,O=t.untagAll,A=t.unskillAll,w=t.intentAll,x=t.resetSelection,j=t.selectAll,I=t.skillSetAll,L=t.saveItemWrap,T=t.getItemSize,_=t.deleteAll,C=t.saveAll,N=t.saveNlu,F=t.filteredItems,R=t.createEmptyItem,M=t.sort;return Object(a.useEffect)(function(){n()},[]),l.a.createElement("div",null,l.a.createElement(nt,Object.assign({},e,{searchFilter:c,setSearchFilter:u,skillFilterValue:f,setSkillFilterValue:h,resetSelection:x,selectAll:j,createEmptyItem:R,untagAll:O,unskillAll:A,intentFilterValue:y,setIntentFilterValue:v,sort:M})),function(e){return F&&F.length>0?l.a.createElement("div",null,l.a.createElement("span",{style:{float:"left",fontWeight:"bold"}},"\xa0",F.length,"/",r.length," matches "),e.lookups.selectedTally>0&&l.a.createElement("span",{style:{float:"right"}},l.a.createElement("span",null,"With ",e.lookups.selectedTally," selected\xa0",l.a.createElement(se,{skillSetAll:I,skillAllValue:d,setSkillAllValue:g,lookups:e.lookups,untagAll:O,unskillAll:A}),l.a.createElement(re,{intentAll:w,intentAllValue:E,setIntentAllValue:b,lookups:e.lookups,untagAll:O,unskillAll:A}),l.a.createElement(ie,{tagAll:S,tagAllValue:m,setTagAllValue:p,lookups:e.lookups,untagAll:O,unskillAll:A})),l.a.createElement(Q.a,{style:{marginLeft:"1em"},onClick:C,variant:"success"},"Save Selected"),l.a.createElement(Q.a,{style:{marginLeft:"1em"},onClick:_,variant:"danger"},"Delete Selected")),l.a.createElement(xe.a,{ref:k,itemData:{items:F,saveItem:L,saveNlu:N,deleteItem:i,findKeyBy:s,lookups:e.lookups,setPageMessage:e.setPageMessage},itemKey:function(e){return e},className:"List",height:700,itemCount:F.length,itemSize:T,width:"100%"},St)):l.a.createElement("div",null,l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("br",null),l.a.createElement("b",null,"No more items to import"),l.a.createElement("br",null),l.a.createElement("br",null),"Open ",l.a.createElement(o.b,{to:"/sources"},l.a.createElement(Q.a,null,l.a.createElement("img",{style:{height:"1em",paddingRight:"1em"},src:Et.a,alt:"Sources"}),"Sources"))," to create more or ",l.a.createElement(o.b,{to:"/examples"},l.a.createElement(Q.a,null,"Organise",l.a.createElement("img",{src:kt.a,alt:"Intents",style:{height:"1em",paddingLeft:"1em"}})))," what you have imported into skills."))}(e))}var At=n(41),wt=n.n(At),xt=n(61);function jt(e){var t=new N.a;return function e(n,a){Array.isArray(n.files)&&n.files.map(function(e){var n=e.base64&&e.base64.length>0?{base64:!0}:{};return e.name&&e.name.length>0&&e.content&&t.file(a+"/"+e.name,e.content,n),null}),Array.isArray(n.folders)&&n.folders.map(function(n){return n.name&&n.name.length>0&&t.folder(n.name),(n.files&&n.files.length>0||n.folders&&n.folders.length>0)&&e(n,a+"/"+n.name),null})}(e,""),new Promise(function(e,n){t.generateAsync({type:"blob"}).then(function(t){e(t)})})}function It(e){return Lt.apply(this,arguments)}function Lt(){return(Lt=Object(xt.a)(wt.a.mark(function e(t){return wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){I.a.createInstance({name:"nlutool",storeName:"lists"}).getItem("alldata").then(function(n){var a={invocation:t.invocation},l={},i={};t.intents&&Object.keys(t.intents).map(function(e){var n=t.intents[e];l[e]||(l[e]={name:e,phrases:[],inputs:[]});var a={};return Array.isArray(n)&&n.map(function(t){return l[e].phrases.push(A(t.example,t.entities)),Array.isArray(t.entities)&&t.entities.map(function(e){return a[e.type]=!0,Array.isArray(i[e.type])||(i[e.type]=[]),i[e.type].push(e.value),null}),null}),l[e].phrases=k(l[e].phrases).sort(),l[e].inputs=Object.keys(a).map(function(e){var n=e+"Type";return t.entities&&t.entities[e]&&(t.entities[e].googleType||t.entities[e].alexaType)&&(n={},t.entities[e].googleType&&(n.dialogflow=t.entities[e].googleType),t.entities[e].alexaType&&(n.alexa=t.entities[e].alexaType)),{name:e,type:n}}),null}),a.intents=Object.values(l);var r={},s={};n.map(function(e){return e.value&&e.value.trim().length>0&&(e.synonym&&(Array.isArray(s[e.synonym])||(s[e.synonym]=[]),r[e.value]=e.synonym,s[e.synonym].push(e.value)),Object.keys(i).map(function(n){return t.entities&&t.entities[n]&&t.entities[n].lists&&t.entities[n].lists.map(function(t){return e&&e.tags&&-1!==e.tags.indexOf(t)&&i[n].push(e.value),null}),null})),null}),a.inputTypes=Object.keys(i).map(function(e){var t=[];return k(i[e]).sort().map(function(e){return r[e]||e&&e.trim().length>0&&t.push({value:e}),null}),Object.keys(s).map(function(e){return e&&e.trim().length>0&&t.push({value:e,synonyms:s[e]}),null}),{name:e+"Type",values:t}});var o=JSON.stringify(a);e({folders:[{name:"models",files:[{name:"en-US.json",content:o}]}]})})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Tt(){return(Tt=Object(xt.a)(wt.a.mark(function e(t){return wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=jt,e.next=3,It(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}},e)}))).apply(this,arguments)}function _t(e){var t=I.a.createInstance({name:"nlutool",storeName:"lists"}),n=I.a.createInstance({name:"nlutool",storeName:"utterances"}),a=[];return a.push(new Promise(function(n,a){e&&e.entities?t.getItem("alldata").then(function(t){var a={},l={};e&&e.entities&&(Object.values(e.entities).map(function(e){return e.lists&&e.lists.map(function(e){a[e]=!0}),null}),Object.keys(a).map(function(e){l[e]=t.filter(function(t){return!(!t.tags||-1===t.tags.indexOf(e))}).map(function(e){return{value:e.value,synonym:e.synonym}})})),n(l)}):n({})})),a.push(new Promise(function(t,a){var l={};e.utterancesLists||e.utterances?n.getItem("alldata").then(function(n){Array.isArray(n)&&n.map(function(t){return e.utterances&&e.utterances.map(function(e){return t.value===e&&(l[t.value]={value:t.value,synonym:t.synonym,tags:t.tags}),null}),e.utterancesLists&&e.utterancesLists.map(function(e){return t.tags&&-1!==t.tags.indexOf(e)&&(l[t.value]={value:t.value,synonym:t.synonym,tags:t.tags}),null}),null}),t(l)}):t({})})),new Promise(function(t,n){Promise.all(a).then(function(n){var a=e;a.entitiesData=n[0],a.utterancesData=n[1],t(a)})})}function Ct(e){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(xt.a)(wt.a.mark(function e(t){return wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){var a=I.a.createInstance({name:"nlutool",storeName:"lists"}),l=[];a.getItem("alldata").then(function(n){var a={};t.intents&&Object.keys(t.intents).map(function(e){var n=t.intents[e];return Array.isArray(a[e])||(a[e]=[]),Array.isArray(n)&&n.map(function(t){return a[e].push(A(t.example,t.entities)),null}),a[e]=k(a[e]).sort(),null});var i={};t.entities&&Object.keys(t.entities).map(function(e){var a=[],l=t.entities[e];return l.values&&(a=a.concat(l.values)),l.lists&&n.map(function(e){return l.lists.map(function(t){return e&&e.tags&&-1!==e.tags.indexOf(t)&&a.push(e.value),null}),null}),i[e]=k(a).sort(),null}),Object.keys(a).map(function(e){return l.push({name:e+".intent",content:a[e].join("\n")}),null}),Object.keys(i).map(function(e){return l.push({name:e+".entity",content:i[e].join("\n")}),null}),t.utterances&&Object.keys(t.utterances).map(function(e){return l.push({name:e.value+".dialog",content:e.synonym}),null}),e(l)})}));case 1:case"end":return e.stop()}},e)}))).apply(this,arguments)}function Ft(){return(Ft=Object(xt.a)(wt.a.mark(function e(t){var n;return wt.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ct(t);case 2:return n=e.sent,e.abrupt("return",jt({files:n}));case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Rt={config:'\nlanguage: en\npipeline:\n  - name: WhitespaceTokenizer\n  - name: RegexFeaturizer\n  - name: LexicalSyntacticFeaturizer\n  - name: CountVectorsFeaturizer\n  - name: CountVectorsFeaturizer\n    analyzer: "char_wb"\n    min_ngram: 1\n    max_ngram: 4\n  - name: ResponseSelector\n    epochs: 100\n  - name: DIETClassifier\n    epochs: 100\n  - name: EntitySynonymMapper\n\npolicies:\n  - name: FormPolicy\n  - name: MemoizationPolicy\n  - name: TEDPolicy\n    max_history: 5\n    epochs: 100\n  - name: MappingPolicy\n  - name: "FallbackPolicy"\n    nlu_threshold: 0.5\n    core_threshold: 0.3\n    fallback_action_name: "action_default_fallback"\n    ',credentials:'\n# This file contains the credentials for the voice & chat platforms\n# which your bot is using.\n# https://rasa.com/docs/rasa/user-guide/messaging-and-voice-channels/\n\nrest:\n#  # you don\'t need to provide anything here - this channel doesn\'t\n#  # require any credentials\n\n\n#facebook:\n#  verify: "<verify>"\n#  secret: "<your secret>"\n#  page-access-token: "<your page access token>"\n\n#slack:\n#  slack_token: "<your slack token>"\n#  slack_channel: "<the slack channel>"\n\n#socketio:\n#  user_message_evt: <event name for user message>\n#  bot_message_evt: <event name for but messages>\n#  session_persistence: <true/false>\n\n#mattermost:\n#  url: "https://<mattermost instance>/api/v4"\n#  token: "<bot token>"\n#  webhook_url: "<callback URL>"\n\n#rasa:\n  #url: "http://localhost:5002/api"\n \n    ',endpoint:"\n#action_endpoint:\n#  url: http://localhost:5055/webhook\n\n    ",actions:'\n""" RASA actions """\n \n    ',single_action:function(e,t){return'\n""" RASA action """\nimport sys\nimport logging\nfrom typing import Any, Text, Dict, List\nfrom datetime import datetime\nfrom rasa_sdk import Action, Tracker\nfrom rasa_sdk.executor import CollectingDispatcher\nfrom rasa_sdk.events import SlotSet, FollowupAction\n\nclass '+e+'(Action):\n    def name(self) -> Text:\n        return "'+t+"\"\n    def run(self, dispatcher: CollectingDispatcher,\n            tracker: Tracker,\n            domain: Dict[Text, Any]) -> List[Dict[Text, Any]]:\n        var slotsets = []\n        logger = logging.getLogger(__name__)    \n        logger.debug('Action "+t+'\')\n        return [SlotSet("hermod_force_end", "true"),SlotSet("hermod_force_continue", None)] \n        \n        dispatcher.utter_message(text="Action '+t+'")\n        return slotsets\n    \n    '},domain:"\nsession_config:\n  carry_over_slots_to_new_session: true\n  session_expiration_time: 5    \n\n",stories:'\n## greet + location/price + cuisine + num people    \x3c!-- name of the story - just for debugging --\x3e\n* greet\n   - action_ask_howcanhelp\n* inform{"location": "rome", "price": "cheap"}  \x3c!-- user utterance, in format intent{entities} --\x3e\n   - action_on_it\n   - action_ask_cuisine\n* inform{"cuisine": "spanish"}\n   - action_ask_numpeople        \x3c!-- action that the bot should execute --\x3e\n* inform{"people": "six"}\n   - action_ack_dosearch    \n',session:"\nsession_config:\n  carry_over_slots_to_new_session: true\n  session_expiration_time: 5\n"};function Mt(e,t,n,a,l,i,r,s,o){return{files:[{name:"actions.py",content:n},{name:"config.yml",content:a},{name:"domain.yml",content:l},{name:"credentials.yml",content:i},{name:"endpoints.yml",content:r}],folders:[{name:"actions",files:s},{name:"data",files:[{name:"nlu.md",content:e},{name:"stories.md",content:o||""}],folders:[{name:"lookups",files:t}]}]}}function Pt(e,t,n,a,l,i,r,s,o){return{files:[{name:"actions.py",content:n},{name:"config.yml",content:a},{name:"domain.yml",content:l},{name:"credentials.yml",content:i},{name:"endpoints.yml",content:r}],folders:[{name:"actions",files:s},{name:"data",files:[{name:"nlu.json",content:e},{name:"stories.md",content:o||""}],folders:[{name:"lookups",files:t}]}]}}var Vt=[{name:"JSON",exportFunction:function(e){return new Promise(function(t,n){_t(e).then(function(e){var n=new Blob([JSON.stringify(e,null,2)],{type:"application/json"});t(n)})})}},{name:"JOVO",exportFunction:function(e){return Tt.apply(this,arguments)}},{name:"Mycroft",exportFunction:function(e){return Ft.apply(this,arguments)}},{name:"RASA Markdown",exportFunction:function(e){return new Promise(function(t,n){(function(e){return new Promise(function(t,n){var a=I.a.createInstance({name:"nlutool",storeName:"lists"}),l=I.a.createInstance({name:"nlutool",storeName:"utterances"});a.getItem("alldata").then(function(n){var a={};e.entities&&Object.keys(e.entities).map(function(t,l){var i=e.entities[t];return i&&i.values&&(a[t]=i.values),e.entities[t]&&Array.isArray(e.entities[t].lists)&&n.map(function(n,l){return e.entities[t].lists.map(function(e){return n.tags&&-1!==n.tags.indexOf(e)&&a[t].push(n.value),null}),null}),null});var i=[],r=[];Object.keys(a).map(function(e){var t=a[e];return i.push({name:e+".txt",content:t.join("\n")}),r.push("## lookup:"+e),r.push("data/lookups/"+e+".txt"),null});var s={};n.map(function(e){return e.value&&e.value.trim().length>0&&e.synonym&&(Array.isArray(s[e.synonym])||(s[e.synonym]=[]),s[e.synonym].push(e.value)),null});var o=[];Object.keys(s).map(function(e){return o.push("## synonym:"+e),k(s[e]).sort().map(function(e){return o.push("- "+e),null}),o.push("\n"),null});var c=[];e.intents&&Object.keys(e.intents).map(function(t){var n=e.intents[t];c.push("## intent:"+t);var a=[];return n.map(function(e){if(e&&e.example&&e.example.trim().length>0){var t=w(e.example,e.entities);a[t]="- "+t}return null}),(c=[].concat(Object(u.a)(c),Object(u.a)(Object.values(a)))).push("\n"),null});var m=c.join("\n")+"\n"+o.join("\n")+r.join("\n"),p=e.rasaConfig?e.rasaConfig:Rt.config,d=e.rasaCredentials?e.rasaCredentials:Rt.credentials,g=e.rasaEndpoint?e.rasaEndpoint:Rt.endpoint,v=Rt.actions,E=[],b=[];Array.isArray(e.rasaActions)&&e.rasaActions.map(function(e){if(e&&e.trim().length>0){var t=h(f(y(e))),n=y(t)+"_action";E.push(n);var a=t&&t.trim().length>0?t[0].toUpperCase()+t.substring(1):"";b.push({name:a+"Action.py",content:Rt.single_action(a+"Action",n)}),v+="\n import "+a+"Action.py"}return null});var S=e.entities?Object.keys(e.entities):[],O=e.intents?Object.keys(e.intents):[],A=e.slots?Object.keys(e.slots):e.entities?Object.keys(e.entities):[],x={};A.map(function(t){return x[t]={type:e.slots&&e.slots[t]&&e.slots[t].slotType?e.slots[t].slotType:"unfeaturized"},null});var j=[];O.length>0&&(j.push("intents:"),O.map(function(e){return j.push("- "+e),null}),j.push("\n")),S.length>0&&(j.push("entities:"),S.map(function(e){return j.push("- "+e),null}),j.push("\n")),A.length>0&&(j.push("slots:"),A.map(function(e,t){return j.push("  "+e+":"),j.push("    type: "+x[e].type),null}),j.push("\n")),e.rasaSession&&e.rasaSession.trim().split("\n").map(function(e){return j.push(e),null});var I={};e.utterancesLists||e.utterances?l.getItem("alldata").then(function(n){Array.isArray(n)?(n.map(function(t){return e.utterances&&e.utterances.map(function(e){return t.value===e&&(I[t.value]=t),null}),e.utterancesLists&&e.utterancesLists.map(function(e){return t.tags&&-1!==t.tags.indexOf(e)&&(I[t.value]=t),null}),null}),Object.keys(I).length>0&&(j.push("responses:"),Object.keys(I).map(function(e){var t=I[e];return j.push("utter_"+f(t.value)),j.push("- text: "+t.value),t.synonyms&&t.synonyms.length>0&&t.synonyms.map(function(e){return j.push("- text: "+e),null}),null})),t(Mt(m,i,v,p,j.join("\n"),d,g,b,e.rasaStories))):t(Mt(m,i,v,p,j.join("\n"),d,g,b,e.rasaStories))}):t(Mt(m,i,v,p,j.join("\n"),d,g,b,e.rasaStories))})})})(e).then(function(e){jt(e).then(function(e){t(e)})})})}},{name:"RASA JSON",exportFunction:function(e){return new Promise(function(t,n){(function(e){return new Promise(function(t,n){var a=I.a.createInstance({name:"nlutool",storeName:"lists"}),l=I.a.createInstance({name:"nlutool",storeName:"utterances"});a.getItem("alldata").then(function(n){var a={};e.entities&&Object.keys(e.entities).map(function(t,l){var i=e.entities[t];return i&&i.values&&(a[t]=i.values),e.entities[t]&&Array.isArray(e.entities[t].lists)&&n.map(function(n,l){return e.entities[t].lists.map(function(e){return n.tags&&-1!==n.tags.indexOf(e)&&a[t].push(n.value),null}),null}),null});var i=[],r=[];Object.keys(a).map(function(e){var t=a[e];return i.push({name:e+".txt",content:t.join("\n")}),r.push("## lookup:"+e),r.push("data/lookups/"+e+".txt"),null});var s={};n&&n.map(function(e){return e.value&&e.value.trim().length>0&&e.synonym&&(Array.isArray(s[e.synonym])||(s[e.synonym]=[]),s[e.synonym].push(e.value)),null});var o={};e.intents&&Object.keys(e.intents).map(function(t){return e.intents[t].map(function(e){if(e&&e.example&&e.example.trim().length>0){var n=w(e.example,e.entities);o[n]={text:n,intent:t,entities:e.entities?e.entities.map(function(e){return{end:e.end,entity:e.type,start:e.start,value:e.value}}):[]}}return null}),null});var c=JSON.stringify({rasa_nlu_data:{regex_features:[],entity_synonyms:Object.keys(s).map(function(e){return{synonyms:s[e],value:e}}),common_examples:Object.values(o)}}),u=e.rasaConfig?e.rasaConfig:Rt.config,m=e.rasaCredentials?e.rasaCredentials:Rt.credentials,p=e.rasaEndpoint?e.rasaEndpoint:Rt.endpoint,d=Rt.actions,g=[],v=[];Array.isArray(e.rasaActions)&&e.rasaActions.map(function(e){if(e&&e.trim().length>0){var t=h(f(y(e))),n=y(t)+"_action";g.push(n);var a=t&&t.trim().length>0?t[0].toUpperCase()+t.substring(1):"";v.push({name:a+"Action.py",content:Rt.single_action(a+"Action",n)}),d+="\n import "+a+"Action.py"}return null});var E=e.entities?Object.keys(e.entities):[],b=e.intents?Object.keys(e.intents):[],k=e.slots?Object.keys(e.slots):e.entities?Object.keys(e.entities):[],S={};k.map(function(t){return S[t]={type:e.slots&&e.slots[t]&&e.slots[t].slotType?e.slots[t].slotType:"unfeaturized"},null});var O=[];b.length>0&&(O.push("intents:"),b.map(function(e){return O.push("- "+e),null}),O.push("\n")),E.length>0&&(O.push("entities:"),E.map(function(e){return O.push("- "+e),null}),O.push("\n")),k.length>0&&(O.push("slots:"),k.map(function(e,t){return O.push("  "+e+":"),O.push("    type: "+S[e].type),null}),O.push("\n")),e.rasaSession&&e.rasaSession.trim().split("\n").map(function(e){return O.push(e),null});var A={};e.utterancesLists||e.utterances?l.getItem("alldata").then(function(n){Array.isArray(n)?(n.map(function(t){return e.utterances&&e.utterances.map(function(e){return t.value===e&&(A[t.value]=t),null}),e.utterancesLists&&e.utterancesLists.map(function(e){return t.tags&&-1!==t.tags.indexOf(e)&&(A[t.value]=t),null}),null}),Object.keys(A).length>0&&(O.push("responses:"),Object.keys(A).map(function(e){var t=A[e];return O.push("utter_"+f(t.value)),O.push("- text: "+t.value),t.synonyms&&t.synonyms.length>0&&t.synonyms.map(function(e){return O.push("- text: "+e),null}),null})),t(Pt(c,i,d,u,O.join("\n"),m,p,v,e.rasaStories))):t(Pt(c,i,d,u,O.join("\n"),m,p,v,e.rasaStories))}):t(Pt(c,i,d,u,O.join("\n"),m,p,v,e.rasaStories))})})})(e).then(function(e){jt(e).then(function(e){t(e)})})})}}];function Wt(e){return l.a.createElement("div",null,l.a.createElement(o.b,{to:"/skills/skill/"+e.currentSkill.title},l.a.createElement(Q.a,{variant:"success",style:{float:"right"}},"Back to Skill")),l.a.createElement("h1",null,"Publish"),l.a.createElement("div",null,"Ready to share your skill - ",l.a.createElement("b",null,e.currentSkill.title),",  so other people can download and remix your intents, entities and utterances into new skills."),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("b",null,"By publishing your extension, you are agreeing to the following"),l.a.createElement("ul",null,l.a.createElement("li",null,"Your skill will be available for download under an MIT Open Source License, allowing people to download the data and do whatever they want with it."),l.a.createElement("li",null,"Your skill will be committed to the ",l.a.createElement("a",{href:"https://github.com/syntithenai/opennludata",target:"_new"},"Github repository")," "),l.a.createElement("li",null,"Your skill can be unpublished/deleted from the searchable index but will remain in the history of the git repository."))),l.a.createElement("div",null,"Submitted skills can be found using the search tools on this website. "),l.a.createElement("br",null),l.a.createElement("div",{style:{width:"100%",textAlign:"center"}},!e.currentSkill._id&&l.a.createElement(Q.a,{variant:"success",style:{display:"inline"},onClick:function(t){e.startWaiting(),_t(e.currentSkill).then(function(t){e.saveItem("Skill",t).then(function(t){t&&t.data&&t.data._id&&(e.setCurrentSkill(t.data),e.setMongoId(t.data._id),e.setPageMessage("Published",3e3),e.stopWaiting(),e.updateFunctions.loadSkills().then(function(){e.history.push("/skills/skill/"+e.currentSkill.title)}))})})}},"Publish ",e.currentSkill.title),e.currentSkill._id&&l.a.createElement(Q.a,{variant:"success",style:{display:"inline"},onClick:function(t){e.startWaiting(),_t(e.currentSkill).then(function(t){e.saveItem("Skill",t).then(function(t){t&&t.data&&t.data._id&&(e.setCurrentSkill(t.data),e.setMongoId(t.data._id),e.setPageMessage("Published",3e3),e.stopWaiting(),e.updateFunctions.loadSkills().then(function(){e.history.push("/skills/skill/"+e.currentSkill.title)}))})})}},"Publish Again"),e.currentSkill._id&&l.a.createElement(Q.a,{variant:"danger",style:{display:"inline"},onClick:function(t){e.setMongoId(""),e.startWaiting(),e.deleteItem("Skill",e.currentSkill._id).then(function(t){e.setMongoId(null),e.setPageMessage("Unpublished",3e3),e.stopWaiting(),e.updateFunctions.loadSkills().then(function(){e.history.push("/skills/skill/"+e.currentSkill.title)})})}},"Unpublish")))}var zt=n(1346),Dt=n(1341);function Ut(e){var t=e.lookups,n=e.setRegexpEntity,a=e.setRegexpIntent;return l.a.createElement(X.a.Item,{type:"button",style:{width:"100%"}},l.a.createElement(Q.a,{variant:"danger",size:"sm",style:{float:"right",fontWeight:"bold",borderRadius:"15px",marginTop:"0.2em"},onClick:function(t){window.confirm("Really delete")&&e.onDelete(t)}},"X"),e.tag.name,"  \xa0\xa0\xa0 \xa0\xa0\xa0",l.a.createElement("div",{style:{float:"right"}},"\xa0\xa0",l.a.createElement(Pe,{title:"Intent",value:e.tag&&e.tag.intent?e.tag.intent:"",options:t&&t.intentLookups?t.intentLookups:[],selectItem:function(t){a(e.tag.id,t)}}),"\xa0\xa0",l.a.createElement(Pe,{title:"Entity",value:e.tag&&e.tag.entity?e.tag.entity:"",options:t&&t.entityLookups?t.entityLookups:[],selectItem:function(t){n(e.tag.id,t)}}),"\xa0\xa0"))}function Bt(e){if(e.skillFilterValue&&e.skillFilterValue.length>0){if(e.filteredItems&&e.filteredItems.length>0){var t=e.currentSkill&&e.currentSkill.utterances?e.currentSkill.utterances.map(function(e,t){return{id:t,name:e}}):[],n=e.currentSkill&&e.currentSkill.utterancesLists?e.currentSkill.utterancesLists.map(function(e,t){return{id:t,name:e}}):[],a=e.currentSkill&&e.currentSkill.rasa&&e.currentSkill.rasa.slots?e.currentSkill.rasa.slots:e.entitiesForSkill,i=e.currentSkill&&e.currentSkill.tags?e.currentSkill.tags.map(function(e,t){return{id:t,name:e}}):[];return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("h3",null,e.skillFilterValue," ")),l.a.createElement("div",{style:{marginTop:"0.7em",marginBottom:"0.7em"}},l.a.createElement("b",{style:{marginRight:"1em",marginLeft:"0.5em"}},"Tags"),l.a.createElement(Ne.a,{placeholderText:"Select Tags  ",minQueryLength:0,maxSuggestionsLength:50,autoresize:!0,allowNew:!0,tags:i,suggestions:[],onDelete:function(t){e.removeSkillTag(t)},onAddition:function(t){e.addSkillTag(t)}})),l.a.createElement("div",{style:{marginTop:"0.7em",marginBottom:"0.7em",borderTop:"2px solid black"}},l.a.createElement("b",{style:{marginRight:"1em",marginLeft:"0.5em"}},"Intents"),l.a.createElement("span",null,Object.keys(e.collatedItems).sort().map(function(t,n){var a=e.currentIntent?e.currentIntent:Object.keys(e.collatedItems)[0],i="danger";return e.collatedItems[t].length>300?i="success":e.collatedItems[t].length>100?i="primary":e.collatedItems[t].length>10&&(i="warning"),e.collatedItems[t].length===e.collatedCounts[t]?l.a.createElement(o.b,{key:t,to:"/examples/skill/"+e.skillFilterValue+"/intent/"+t},l.a.createElement(Q.a,{key:t,variant:t===a?"primary":"outline-primary",onClick:function(){e.setCurrentIntent(t)}},l.a.createElement(Me.a,{variant:i}," ",e.collatedItems[t].length," "),"\xa0",t)):l.a.createElement(o.b,{key:t,to:"/examples/skill/"+e.skillFilterValue+"/intent/"+t},l.a.createElement(Q.a,{variant:t===a?"primary":"outline-primary",onClick:function(){e.setCurrentIntent(t)}},l.a.createElement(Me.a,{variant:"danger"}," ",e.collatedItems[t].length,"/",e.collatedCounts[t]," "),"\xa0",t))}))),l.a.createElement("div",{style:{marginTop:"0.7em",borderTop:"2px solid black"}},l.a.createElement("b",{style:{marginRight:"1em",marginLeft:"0.5em"}},"Entities"),l.a.createElement(X.a,null,Object.keys(e.entitiesForSkill).map(function(t,n){var a=e.currentSkill&&e.currentSkill.entities&&e.currentSkill.entities[t]&&e.currentSkill.entities[t].lists?e.currentSkill.entities[t].lists.map(function(e,t){return{id:t,name:e}}):[];return l.a.createElement(X.a.Item,{key:t},l.a.createElement("span",{style:{marginLeft:"1em",float:"left",fontWeight:"bold"}},"\xa0",t),l.a.createElement("span",{style:{marginLeft:"1em",float:"left"}},"\xa0",e.entitiesForSkill[t]&&e.entitiesForSkill[t].values&&e.entitiesForSkill[t].values.slice(0,5).join(", "),e.entitiesForSkill[t]&&e.entitiesForSkill[t].values&&e.entitiesForSkill[t].values.length>5?l.a.createElement(Me.a,null,"... ",e.entitiesForSkill[t]&&e.entitiesForSkill[t].values&&e.entitiesForSkill[t].values.length-5," more "):""),l.a.createElement("span",{style:{marginLeft:"1em",float:"left"}},l.a.createElement("label",null,l.a.createElement("i",null)," ",l.a.createElement(Ne.a,{placeholderText:"Also use values from ",minQueryLength:0,maxSuggestionsLength:50,autoresize:!0,allowNew:!1,tags:a,suggestionComponent:Re,suggestions:e.lookups.listsLookups.map(function(e,t){return{id:t,name:e}}),onDelete:function(n){e.removeListFromSkillEntity(t,n)},onAddition:function(n){e.addListToSkillEntity(t,n)}})," ")),l.a.createElement("div",{style:{float:"right"}},l.a.createElement(Pe,{options:[""].concat(Object(u.a)(g.entityTypes)),title:"Alexa",value:e.currentSkill.entities&&e.currentSkill.entities[t]&&e.currentSkill.entities[t].alexaType?e.currentSkill.entities[t].alexaType:"",selectItem:function(n){e.setAlexaEntityType(t,n)}}),"\xa0\xa0",l.a.createElement(Pe,{options:[""].concat(Object(u.a)(d.entityTypes)),title:"Google",value:e.currentSkill.entities&&e.currentSkill.entities[t]&&e.currentSkill.entities[t].googleType?e.currentSkill.entities[t].googleType:"",selectItem:function(n){e.setGoogleAssistantEntityType(t,n)}})))}))),l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"0.4em",borderTop:"2px solid black"}},l.a.createElement("div",null,l.a.createElement("b",null,"Regular Expressions")),l.a.createElement("div",{style:{clear:"both"}},l.a.createElement("div",{style:{marginLeft:"1em"}},l.a.createElement(X.a,{style:{minWidth:"500px"}},l.a.createElement(Ne.a,{placeholderText:"Select Regular Expression  ",minQueryLength:0,maxSuggestionsLength:50,autoresize:!0,allowNew:!1,tags:e.currentSkill&&e.currentSkill.regexps?e.currentSkill.regexps.map(function(e,t){return{id:t,name:e.name,intent:e.intent?e.intent:"",entity:e.entity?e.entity:"",synonym:e.synonym}}):[],tagComponent:function(t){return l.a.createElement(Ut,Object.assign({},t,{setRegexpEntity:e.setRegexpEntity,setRegexpIntent:e.setRegexpIntent,lookups:e.lookups}))},suggestionComponent:Re,suggestions:e.lookups.regexpsLookups?e.lookups.regexpsCompleteLookups.map(function(e,t){return{id:t,name:e.value,intent:e.intent?e.intent:"",entity:e.entity?e.entity:"",synonym:e.synonym}}):[],onDelete:function(t){e.removeRegexp(t)},onAddition:function(t){e.addRegexp(t)}}))))),l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"0.4em",borderTop:"2px solid black"}},l.a.createElement("div",null,l.a.createElement("b",null,"Utterances")),l.a.createElement("div",{style:{clear:"both"}},l.a.createElement("div",{style:{marginLeft:"1em"}},l.a.createElement("label",null,"Utterances",l.a.createElement(Ne.a,{placeholderText:"Use utterance ",minQueryLength:0,maxSuggestionsLength:50,autoresize:!0,allowNew:!0,tags:t,suggestionComponent:Re,suggestions:e.lookups.utterancesLookups?e.lookups.utterancesLookups.map(function(e,t){return{id:t,name:e}}):[],onDelete:function(t){e.removeUtterance(t)},onAddition:function(t){e.addUtterance(t)}})," ")),l.a.createElement("div",{style:{marginLeft:"1em"}},l.a.createElement("label",null,"Utterance Lists",l.a.createElement(Ne.a,{placeholderText:"Use utterances from ",minQueryLength:0,maxSuggestionsLength:50,autoresize:!0,allowNew:!1,tags:n,suggestionComponent:Re,suggestions:e.lookups.utteranceTagsLookups?e.lookups.utteranceTagsLookups.map(function(e,t){return{id:t,name:e}}):[],onDelete:function(t){e.removeUtteranceList(t)},onAddition:function(t){e.addUtteranceList(t)}})," ")))),l.a.createElement("div",{style:{marginTop:"0.7em",borderTop:"2px solid black"}},l.a.createElement("div",null,l.a.createElement("b",null,"Platform")),l.a.createElement(zt.a,{defaultActiveKey:"rasa",id:"platform-tabs"},l.a.createElement(Dt.a,{eventKey:"rasa",title:"RASA"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em"}},l.a.createElement(zt.a,{defaultActiveKey:"slots",id:"platform-rasa"},l.a.createElement(Dt.a,{eventKey:"slots",title:"Slots"},l.a.createElement("div",{style:{marginLeft:"1.4em",marginTop:"0.7em",borderTop:"2px solid black"}},l.a.createElement("form",{onSubmit:function(t){t.preventDefault(),e.newSlot(e.newSlotValue,a)}},l.a.createElement("input",{value:e.newSlotValue,onChange:function(t){e.setNewSlotValue(t.target.value)}}),l.a.createElement(Q.a,{size:"sm",onClick:function(){e.newSlot(e.newSlotValue,a)}},"New Slot")),l.a.createElement(X.a,null,Object.keys(a).map(function(t,n){return l.a.createElement(X.a.Item,{key:t},l.a.createElement("span",{style:{marginLeft:"1em",float:"left",fontWeight:"bold"}},"\xa0",t),l.a.createElement("div",{style:{float:"right"}},e.entitiesForSkill[t]&&l.a.createElement(Pe,{options:p.autofillOptions,title:"Autofill",value:e.currentSkill.rasa&&e.currentSkill.rasa.slots&&e.currentSkill.entities[t]&&e.currentSkill.rasa.slots[t]&&e.currentSkill.rasa.slots[t].slotAutofill&&e.currentSkill.rasa.slots[t].slotAutofill.trim().length>0?e.currentSkill.rasa.slots[t].slotAutofill:"Yes",selectItem:function(n){e.setRASASlotAutofill(t,n,a)}}),"\xa0\xa0",l.a.createElement(Pe,{options:Object.keys(p.slotTypes),title:"Slot",value:e.currentSkill.rasa&&e.currentSkill.rasa.slots&&e.currentSkill.rasa.slots[t]&&e.currentSkill.rasa.slots[t].slotType?e.currentSkill.rasa.slots[t].slotType:"unfeaturized",selectItem:function(n){e.setRASASlotType(t,n,a)}}),l.a.createElement(Q.a,{variant:"danger",size:"sm",style:{marginLeft:"0.5em",float:"right",fontWeight:"bold",borderRadius:"15px",marginTop:"0.2em"},onClick:function(n){e.deleteSlot(t,a)}},"X")))})))),l.a.createElement(Dt.a,{eventKey:"actions",title:"Actions"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em",borderTop:"2px solid black"}},l.a.createElement("label",null,l.a.createElement("div",{style:{fontStyle:"italic"}},"One per line, _action will be appended to each line"),l.a.createElement("textarea",{style:{width:"40em",height:"10em"},value:e.currentSkill.rasa&&Array.isArray(e.currentSkill.rasa.actions)?e.currentSkill.rasa.actions.join("\n"):"",onChange:function(t){e.setRASAActions(t.target.value?t.target.value.split("\n"):[])},placeholder:"fred\nfindSname\nis_whatsi\nblah name"})))),l.a.createElement(Dt.a,{eventKey:"config",title:"Config"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em",borderTop:"2px solid black"}},l.a.createElement("label",null,l.a.createElement("textarea",{style:{width:"60em",height:"30em"},value:e.currentSkill.rasa&&e.currentSkill.rasa.config?e.currentSkill.rasa.config:"",onChange:function(t){e.setRASAConfig(t.target.value)},placeholder:Rt.config})))),l.a.createElement(Dt.a,{eventKey:"stories",title:"Stories"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em",borderTop:"2px solid black"}},l.a.createElement("label",null,l.a.createElement("textarea",{style:{width:"60em",height:"30em"},value:e.currentSkill.rasa&&e.currentSkill.rasa.stories?e.currentSkill.rasa.stories:"",onChange:function(t){e.setRASAStories(t.target.value)},placeholder:Rt.stories})))),l.a.createElement(Dt.a,{eventKey:"credentials",title:"Credentials"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em",borderTop:"2px solid black"}},l.a.createElement("label",null,l.a.createElement("textarea",{style:{width:"60em",height:"30em"},value:e.currentSkill.rasa&&e.currentSkill.rasa.credentials?e.currentSkill.rasa.credentials:Rt.credentials,onChange:function(t){e.setRASACredentials(t.target.value)}})))),l.a.createElement(Dt.a,{eventKey:"endpoints",title:"Endpoints"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em",borderTop:"2px solid black"}},l.a.createElement("label",null,l.a.createElement("textarea",{style:{width:"60em",height:"30em"},value:e.currentSkill.rasa&&e.currentSkill.rasa.endpoint?e.currentSkill.rasa.endpoint:Rt.endpoint,onChange:function(t){e.setRASAEndpoint(t.target.value)}})))),l.a.createElement(Dt.a,{eventKey:"session",title:"Session Config"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em",borderTop:"2px solid black"}},l.a.createElement("label",null,l.a.createElement("textarea",{style:{width:"60em",height:"30em"},value:e.currentSkill.rasa&&e.currentSkill.rasa.session?e.currentSkill.rasa.session:Rt.session,onChange:function(t){e.setRASASession(t.target.value)}}))))))),l.a.createElement(Dt.a,{eventKey:"mycroft",title:"Mycroft"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em"}},l.a.createElement("b",null,"not yet"))),l.a.createElement(Dt.a,{eventKey:"jovo",title:"JOVO"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em"}},l.a.createElement("label",{style:{fontWeight:"bold",marginLeft:"0.5em"}}," Invocation ",l.a.createElement("input",{type:"text",value:e.invocation,onChange:function(t){e.setInvocation(t.target.value)}})))),l.a.createElement(Dt.a,{eventKey:"alexa",title:"Alexa"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em"}},l.a.createElement("label",{style:{fontWeight:"bold",marginLeft:"0.5em"}}," Invocation ",l.a.createElement("input",{type:"text",value:e.invocation,onChange:function(t){e.setInvocation(t.target.value)}})))),l.a.createElement(Dt.a,{eventKey:"google_assistant",title:"Google Assistant"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em"}},l.a.createElement("label",{style:{fontWeight:"bold",marginLeft:"0.5em"}}," Invocation ",l.a.createElement("input",{type:"text",value:e.invocation,onChange:function(t){e.setInvocation(t.target.value)}})))))))}return l.a.createElement("b",null)}return[]}function Jt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"https://auth.opennludata.org:5000/api/v1/";return{saveItem:function(n,a){var l=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return new Promise(function(i,r){n&&(a._id&&a._id.trim&&a._id.trim()?l?function(n,a){return new Promise(function(l,i){n&&a&&a._id?e.patch(t+n+"/"+a._id,a,{headers:{"Content-Type":"application/json"}}).then(function(e){l(e)}).catch(function(e){i(e)}):i("Missing post params")})}(n,a).then(function(e){i(e)}):function(n,a){return new Promise(function(l,i){n&&a&&a._id?e.put(t+n+"/"+a._id,a,{headers:{"Content-Type":"application/json"}}).then(function(e){l(e)}).catch(function(e){i(e)}):i("Missing post params")})}(n,a).then(function(e){i(e)}):(delete a._id,function(n,a){return new Promise(function(l,i){n&&a?e.post(t+n,a,{headers:{"Content-Type":"application/json"}}).then(function(e){l(e)}).catch(function(e){i(e)}):i("Missing post params")})}(n,a).then(function(e){i(e)})))})},deleteItem:function(n,a){return new Promise(function(l,i){n&&a&&function(n,a){return new Promise(function(l,i){if(a)return e.delete(t+n+"/"+a,{},{headers:{"Content-Type":"application/json"}}).then(function(e){l(e)}).catch(function(e){i(e)});i("DELETE request missing id")})}(n,a).then(function(e){l(e)})})},getItem:function(n,a){return new Promise(function(l,i){n&&a&&function(n,a){return new Promise(function(l,i){a?e.get(t+n+"/"+a,{},{headers:{"Content-Type":"application/json"}}).then(function(e){l(e)}).catch(function(e){i(e)}):i("GET request missing id")})}(n,a).then(function(e){l(e)})})},searchItems:function(n,a,l,i){return new Promise(function(r,s){n&&function(n,a){var l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return new Promise(function(o,c){var u=["query="+encodeURIComponent(JSON.stringify(a)),"limit="+l,"skip="+i];s&&u.push("populate="+encodeURIComponent(JSON.stringify(s))),r&&u.push("sort="+encodeURIComponent(JSON.stringify(r))),e.get(t+n+"?"+u.join("&"),{},{headers:{"Content-Type":"application/json"}}).then(function(e){o(e)}).catch(function(e){c(e)})})}(n,a,l,i).then(function(e){r(e)})})}}}function Zt(e){console.log(["USE SKILLS ED",e.user]);var t=Object(a.useState)([]),n=Object(s.a)(t,2),l=n[0],i=n[1],r=Object(a.useState)([]),o=Object(s.a)(r,2),m=o[0],p=o[1],d=Object(a.useState)(""),g=Object(s.a)(d,2),f=g[0],h=g[1],y=Object(a.useState)({}),E=Object(s.a)(y,2),b=E[0],S=E[1],O=Object(a.useState)({}),A=Object(s.a)(O,2),w=A[0],x=A[1],j=Object(a.useState)(null),L=Object(s.a)(j,2),_=L[0],C=L[1],N=T("nlutool","lists"),F=Object(a.useState)({}),R=Object(s.a)(F,2),M=R[0],P=R[1],V=Object(a.useState)({}),W=Object(s.a)(V,2),z=W[0],D=W[1],U=Object(a.useState)({}),B=Object(s.a)(U,2),J=B[0],Z=B[1],K=Object(a.useState)(""),q=Object(s.a)(K,2),H=q[0],G=q[1],Y=Object(a.useState)([]),$=Object(s.a)(Y,2),Q=$[0],X=$[1],ee=Object(a.useState)([]),te=Object(s.a)(ee,2),ne=te[0],ae=te[1],le=I.a.createInstance({name:"nlutool",storeName:"skills"}),ie=I.a.createInstance({name:"nlutool",storeName:"examples"}),re=e.user&&e.user.token&&e.user.token.access_token?e.user.token.access_token:"";console.log(["SETOKE",re]);var se=Jt(e.getAxiosClient(re),"https://auth.opennludata.org:5000/api/v1/"),oe=se.saveItem,ce=se.deleteItem,ue=se.searchItems,me=Object(a.useState)(""),pe=Object(s.a)(me,2),de=pe[0],ge=pe[1],fe=Object(a.useState)(""),he=Object(s.a)(fe,2),ye=he[0],ve=he[1],Ee=Object(c.f)(),be=Object(c.e)(),ke=Ee.skillId?Ee.skillId:"";function Se(t,n){t&&t._id&&n.title&&e.lookups.skills&&X(Object.values(e.lookups.skills).filter(function(e){e&&e.title===n.title&&t._id===e.user&&(!n.updated_date||n.updated_date<e.updated_date)&&ae([e])}))}function Oe(e){var t=e&&e.id?e:_&&_.id?_:{};x(JSON.stringify([t._id,t.entitiesListsData,t.utterancesListsData,t.rasa,t.jovo,t.mycroft,t.entities,t.utterances,t.utterancesLists,t.regexps,t.tags]))}return Object(a.useEffect)(function(){ie.getItem("alldata").then(function(t){if(t&&Array.isArray(t)){var n=[],a={};t.map(function(e){return e.skills&&e.skills.map(function(e){return a[e]=!0,null}),ke&&e.skills&&-1!==e.skills.indexOf(ke)&&n.push(e),null}),i(Object.keys(a)),p(n),ke&&le.getItem(ke,function(t,a){if(t)throw new Error(t);var l=a&&a.id?a:{};l.id=l.id?l.id:v(),l.title=ke,l.invocation=l.invocation?l.invocation:"",l.entities=function(e,t){var n={};return Array.isArray(t)&&t.map(function(t,a){return Array.isArray(t.entities)&&t.entities.map(function(t,a){return t&&t.type&&t.type.length>0&&("object"!==typeof n[t.type]&&(n[t.type]={}),Array.isArray(n[t.type].values)||(n[t.type].values=[]),e&&e.entities&&e.entities[t.type]&&e.entities[t.type].alexaType&&(n[t.type].alexaType=e.entities[t.type].alexaType),e&&e.entities&&e.entities[t.type]&&e.entities[t.type].googleType&&(n[t.type].googleType=e.entities[t.type].googleType),e&&e.entities&&e.entities[t.type]&&e.entities[t.type].lists&&(n[t.type].lists=e.entities[t.type].lists),n[t.type].values.push(t.value)),null}),null}),Object.keys(n).map(function(e,t){var a=n[e];return a.values=k(a.values).sort(),null}),S(n),n}(l,n),l.title&&Se(e.user,l);var i=function(e,t){if(e){var n=M,a=J,l={};if(t)return t.map(function(e){return e.intent&&(n[e.intent]||(n[e.intent]=[]),a[e.intent]=a[e.intent]>0?a[e.intent]+1:1,n[e.intent].push({example:e.example,entities:e.entities})),Array.isArray(e.tags)&&e.tags.map(function(e){return l[e]=!0,null}),null}),P(n),Z(a),D(l),[M,Object.keys(l)]}return[[],[]]}(a,n),r=Object(s.a)(i,2),o=r[0];r[1],l.intents=o,C(l),ge(l.invocation),ve(l._id),N.loadAll(),e.updateFunctions.updateUtterances(),e.updateFunctions.updateRegexps(),e.updateFunctions.updateLookups(),Oe(l)})}})},[]),Object(a.useEffect)(function(){N.items.length>0&&(e.updateFunctions.updateLists(N.items[0]),e.updateFunctions.updateLookups(N.items[0]))},[N.items]),Object(a.useEffect)(function(){if(_){var e=_;e._id=ye,C(e)}},[ye]),Object(a.useEffect)(function(){if(_){var e=_;e.invocation=de,C(e)}},[de]),Object(a.useEffect)(function(){_&&e.user&&e.user._id&&Se(e.user,_)},[e.user,w]),Object(a.useEffect)(function(){var e=_;e&&e.title&&e.title.length>0&&(b&&Object.keys(b).map(function(t){return e.entities&&e.entities[t]&&(e.entities[t].values=b[t].values),null}),e.intents=M,le.setItem(ke,_,function(e){if(e)throw new Error(e)}))},[ye,_,w,de]),{setAlexaEntityType:function(e,t){if(_&&e){var n=_;n.entities||(n.entities={}),n.entities[e]||(n.entities[e]={}),n.entities[e].alexaType=t,C(n),Oe()}},setGoogleAssistantEntityType:function(e,t){if(_&&e){var n=_;n.entities||(n.entities={}),n.entities[e]||(n.entities[e]={}),n.entities[e].googleType=t,C(n),Oe()}},removeListFromSkillEntity:function(e,t){var n=_;if(n&&n.entities&&e&&n.entities[e]&&n.entities[e].lists){var a=n.entities[e].lists;a=a.slice(0,t).concat(a.slice(t+1)),n.entities[e].lists=a,C(n),Oe()}},addListToSkillEntity:function(e,t){if(e&&t&&t.name){var n=_;n.entities||(n.entities={}),n.entities[e]||(n.entities[e]={lists:[]}),Array.isArray(n.entities[e].lists)||(n.entities[e].lists=[]),n.entities[e].lists.push(t.name),n.entities[e].lists=k(n.entities[e].lists).sort(),C(n),Oe()}},currentSkill:_,setCurrentSkill:C,skillFilterValue:ke,invocation:de,setInvocation:ge,entitiesForSkill:b,collatedItems:M,collatedCounts:J,setCurrentIntent:h,setSkillFilterValue:function(e){var t=["/"+be.location.pathname.split("/")[1]];(ke=e).length>0&&t.push("/skill/"+ke),be.push(t.join(""))},addRegexp:function(e){if(_&&e){var t=_;Array.isArray(t.regexps)||(t.regexps=[]),t.regexps.push({name:e.name,synonym:e.synonym}),C(t),Oe()}},removeRegexp:function(e){if("number"===typeof e&&_&&_.regexps&&_.regexps.length>e){var t=_;t.regexps=[].concat(Object(u.a)(t.regexps.slice(0,e)),Object(u.a)(t.regexps.slice(e+1))),C(t),Oe()}},setRegexpIntent:function(e,t){if("number"===typeof e&&_&&_.regexps&&_.regexps.length>e){var n=_;n.regexps=n.regexps?n.regexps:[];var a=isNaN(parseInt(e))?0:parseInt(e),l=n.regexps[a]?n.regexps[a]:{};l.intent=t,n.regexps[a]=l,C(n),Oe()}},setRegexpEntity:function(e,t){if("number"===typeof e&&_&&_.regexps&&_.regexps.length>e){var n=_;n.regexps=n.regexps?n.regexps:[];var a=NaN!=parseInt(e)?parseInt(e):0,l=n.regexps[a]?n.regexps[a]:{};l.entity=t,n.regexps[a]=l,C(n),Oe()}},setMongoId:ve,saveItem:oe,deleteItem:ce,searchItems:ue,removeUtterance:function(e){if("number"===typeof e&&_&&_.utterances&&_.utterances.length>e){var t=_;t.utterances=[].concat(Object(u.a)(t.utterances.slice(0,e)),Object(u.a)(t.utterances.slice(e+1))),C(t),Oe()}},addUtterance:function(t){if(_&&t&&t.name){var n=_;if(Array.isArray(n.utterances)||(n.utterances=[]),n.utterances.push(t.name),n.utterances=k(n.utterances),C(n),!e.lookups.utteranceListsLookups[t.name]&&!e.lookups.utterancesLookups[t.name]){var a=I.a.createInstance({name:"nlutool",storeName:"utterances"});a.getItem("alldata",function(e,n){if(e)throw new Error(e);Array.isArray(n)&&(n.unshift({id:v(),value:t&&t.name?t.name.trim().replaceAll(" ","_"):"",synonym:t.name,tags:[]}),a.setItem("alldata",n))})}Oe()}},addUtteranceList:function(e){if(_&&e){var t=_;Array.isArray(t.utterancesLists)||(t.utterancesLists=[]),t.utterancesLists.push(e.name),t.utterancesLists=k(t.utterancesLists),C(t),Oe()}},removeUtteranceList:function(e){if("number"===typeof e&&_&&_.utterancesLists){var t=_;t.utterancesLists=[].concat(Object(u.a)(t.utterancesLists.slice(0,e)),Object(u.a)(t.utterancesLists.slice(e+1))),C(t),Oe()}},skillKeys:l,addSkillTag:function(e){if(_&&e){var t=_;Array.isArray(t.tags)||(t.tags=[]),t.tags.push(e.name),t.utterancesLists=k(t.utterancesLists).sort(),C(t),Oe()}},removeSkillTag:function(e){if("number"===typeof e&&_&&_.tags){var t=_;t.tags=[].concat(Object(u.a)(t.tags.slice(0,e)),Object(u.a)(t.tags.slice(e+1))),C(t),Oe()}},newSlot:function(e,t){if(e&&e.trim().length>0){var n=_,a=t||{},l=n.rasa?n.rasa:{};a[e]={},l.slots=t,n.rasa=l,C(n),G(""),Oe()}},newSlotValue:H,setNewSlotValue:G,slots:e.slots,setRASASlotAutofill:function(e,t,n){if(_&&e&&t){var a=_,l=n||{};l[e].slotAutofill=t;var i=a.rasa?a.rasa:{};i.slots=l,a.rasa=i,C(a),Oe()}},setRASASlotType:function(e,t,n){if(_&&e&&t){var a=_,l=n||{};l[e].slotType=t;var i=a.rasa?a.rasa:{};i.slots=l,a.rasa=i,C(a),Oe()}},deleteSlot:function(e,t){if(_&&e&&t){var n=_;delete t[e],n.rasa=n.rasa?n.rasa:{},n.rasa.slots=t,C(n),Oe()}},setRASAActions:function(e){if(_&&e){var t=_;t.rasa=t.rasa?t.rasa:{},t.rasa.actions=e,C(t),Oe()}},setRASASession:function(e){if(_){var t=_;t.rasa=t.rasa?t.rasa:{},t.rasa.session=e,C(t),Oe()}},setRASAEndpoint:function(e){if(_){var t=_;t.rasa=t.rasa?t.rasa:{},t.rasa.endpoint=e,C(t),Oe()}},setRASACredentials:function(e){if(_){var t=_;t.rasa=t.rasa?t.rasa:{},t.rasa.credentials=e,C(t),Oe()}},setRASAStories:function(e){if(_){var t=_;t.rasa=t.rasa?t.rasa:{},t.rasa.stories=e,C(t),Oe()}},setRASAConfig:function(e){if(_){var t=_;t.rasa=t.rasa?t.rasa:{},t.rasa.config=e,C(t),Oe()}},filteredItems:m,currentIntent:f,listsForEntity:w,listsManager:N,collatedTags:z,skillMatches:Q,skillUpdatedMatches:ne,setSkillMatches:X,setSkillUpdatedMatches:ae,setSkill:function(e){e&&e.id&&(C(e),ve(e._id))},forceReload:Oe}}function Kt(e){var t=Zt(Object.assign({},e,{user:e.user,lookups:e.lookups})),n=t.currentSkill,a=t.setCurrentSkill,i=t.skillFilterValue,r=t.setSkillFilterValue,s=t.skillKeys,c=t.setMongoId,u=t.saveItem,m=t.deleteItem,p=t.listsForEntity,d=(t.skillMatches,t.skillUpdatedMatches),g=(t.setSkillMatches,t.setSkillUpdatedMatches),f=t.setSkill,h=t.forceReload;(s&&s.sort().map(function(e,t){return l.a.createElement(ee.a.Item,{key:t,value:e,onClick:function(t){r(e)}},e)})).unshift(l.a.createElement(ee.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(e){r("")}},"\xa0"));var y=s?s.map(function(e,t){return l.a.createElement(Q.a,{key:t,onClick:function(t){r(e)},style:{marginLeft:"1em"}},e)}):[];return l.a.createElement("div",null,l.a.createElement("hr",null),n&&d&&d.length>0&&l.a.createElement("span",null,"You have a more recent published version of this skill\xa0",d.map(function(t){return l.a.createElement("span",null,"saved ",new Date(t.updated_date).toUTCString()," ",l.a.createElement(Q.a,{variant:"warning",onClick:function(n){var a;a=t,new Promise(function(t,n){a&&a.file?e.getAxiosClient().get("/static/media/skills/"+a.file).then(function(e){e.data?(f(e.data),t({fileType:"opennlu.skill",created_date:(new Date).getTime(),title:e.data.title,data:JSON.stringify(e.data)})):n("Failed to load skill")}).catch(function(e){n("Failed to load skill")}):n("Incomplete skill data")}),g([]),h()}},"Merge"))})),n&&!e.publish&&i&&i.length>0&&l.a.createElement(l.a.Fragment,null,l.a.createElement(ee.a,{style:{float:"right",marginLeft:"0.5em"},as:te.a},l.a.createElement(ee.a.Toggle,{split:!0,variant:"primary",id:"dropdown-split-basic"}),l.a.createElement(Q.a,{variant:"primary"},"Export"),l.a.createElement(ee.a.Menu,{variant:"primary"},Vt.map(function(e,t){var a=i+"_opennludata_"+e.name+"_"+Date.now(),r="JSON"===e.name?"success":"primary";return l.a.createElement(ee.a.Item,{variant:r,key:t,value:e.name,onClick:function(t){e.exportFunction(n).then(function(t){"JSON"===e.name?Object($.saveAs)(t,a+".json"):Object($.saveAs)(t,a+".zip")})}},e.name)})))),n&&!e.publish&&e.user&&e.user.token&&e.user.token.access_token&&l.a.createElement(o.b,{to:"/skills/skill/"+n.title+"/publish"},l.a.createElement(Q.a,{variant:"success",style:{float:"right"}},"Publish")),n&&!e.publish&&!(e.user&&e.user.token&&e.user.token.access_token)&&l.a.createElement(Q.a,{variant:"success",style:{float:"right"},onClick:e.doLogin},"Login to Publish"),n&&!e.publish&&l.a.createElement(Bt,Object.assign({user:e.user,lookups:e.lookups},t)),!n&&l.a.createElement("div",null,l.a.createElement("h1",null,"Skills"),y.length>0&&y,y.length<=0&&l.a.createElement("div",null,"You dont have any skills yet. Import some ",l.a.createElement(o.b,{to:"/sources"},l.a.createElement(Q.a,null,"Sources"))," or ",l.a.createElement(o.b,{to:"/search"},l.a.createElement(Q.a,null,"Search"))," the community archive.")),n&&e.publish&&l.a.createElement(Wt,Object.assign({},e,{setCurrentSkill:a,listsForEntity:p,forceReload:h,user:e.user,setMongoId:c,currentSkill:n,saveItem:u,deleteItem:m})))}var qt=n(59),Ht=n(1350),Gt=n(1348),Yt=n(85);function $t(e){e.children;var t=e.eventKey,n=e.callback,i=Object(a.useContext)(qt.a),r=Object(Yt.b)(t,function(){return n&&n(t)}),s=i===t;return l.a.createElement(l.a.Fragment,null,!s&&l.a.createElement(Q.a,{onClick:r},"+"),s&&l.a.createElement(Q.a,{onClick:r},"-"))}var Qt=function(e){var t=_(),n=t.mergeEntities,i=t.mergeIntents,r=t.mergeUtterances,o=Object(a.useState)(""),c=Object(s.a)(o,2),u=c[0],m=c[1],p=Object(a.useState)({}),d=Object(s.a)(p,2),g=d[0],f=d[1],h=Object(a.useState)({}),y=Object(s.a)(h,2),v=y[0],E=y[1],b=Object(a.useState)({}),k=Object(s.a)(b,2),S=k[0],O=k[1],A=I.a.createInstance({name:"nlutool",storeName:"importing"});Object(a.useEffect)(function(){A.getItem("alldata").then(function(e){if(console.log("importData"),console.log(e),O(e),e.title&&m(e.title),e.intents){var t={};e.intents.map(function(e){if(e){var n=e.intent?e.intent:"_";t[n]=t[n]?t[n]:[],t[n].push(e)}return null}),f(t)}if(e.entities){var n={};e.entities.map(function(e,t){return e&&e.tags&&e.tags.length>0?e.tags.map(function(e){n[e]=n[e]?n[e]:[],n[e].push(t)}):(n.untagged=n.untagged?n.untagged:[],n.untagged.push(t)),null}),E(n)}})},[]);var w=Object(a.useState)({}),x=Object(s.a)(w,2);return x[0],x[1],l.a.createElement("div",{style:{marginLeft:"1em"}},l.a.createElement("h3",null,"Import Review"),l.a.createElement(Ht.a,null,S.intents&&l.a.createElement(Gt.a,null,l.a.createElement(Gt.a.Header,null,l.a.createElement($t,{as:Q.a,variant:"link",eventKey:"root-0"}),S.intents&&l.a.createElement("span",{style:{marginLeft:"2em"},id:"intents"},Object.keys(g).length," intents with ",S.intents?Object.keys(S.intents).length:0," examples ",l.a.createElement(Q.a,{style:{marginLeft:"2em"},onClick:function(t){i(S.intents,u).then(function(t){e.setPageMessage("Updated "+(t.updated?t.updated:0)+" and created "+(t.created?t.created:0),4e3)})}},"Import All Intents"))),l.a.createElement(Ht.a.Collapse,{eventKey:"root-0"},l.a.createElement(Gt.a.Body,null,Object.keys(g).map(function(t,n){return l.a.createElement(Gt.a,{key:n},l.a.createElement(Ht.a,null,l.a.createElement(Gt.a.Header,null,l.a.createElement($t,{as:Q.a,variant:"link",eventKey:"intent-"+n}),"\xa0\xa0",l.a.createElement("b",null,t)," with ",g[t].length," examples",l.a.createElement(Q.a,{style:{marginLeft:"2em"},onClick:function(n){i(g[t],u).then(function(t){e.setPageMessage("Updated "+(t.updated?t.updated:0)+" and created "+(t.created?t.created:0),4e3)})}},"Import ",t)),l.a.createElement(Ht.a.Collapse,{eventKey:"intent-"+n},l.a.createElement(Gt.a.Body,null,l.a.createElement("ul",null,g[t].map(function(e,t){return l.a.createElement("li",{key:t},e.example)}))))))})))),S.entities&&l.a.createElement(Gt.a,null,l.a.createElement(Gt.a.Header,null,l.a.createElement($t,{as:Q.a,variant:"link",eventKey:"root-1"}),S.entities&&l.a.createElement("span",{style:{marginLeft:"2em"},id:"entities"},S.entities?Object.keys(S.entities).length:0," entities ",l.a.createElement(Q.a,{style:{marginLeft:"2em"},onClick:function(t){n(S.entities,u).then(function(t){e.setPageMessage("Updated "+(t.updated?t.updated:0)+" and created "+(t.created?t.created:0),4e3)})}},"Import All Entities"))),l.a.createElement(Ht.a.Collapse,{eventKey:"root-1"},l.a.createElement(Gt.a.Body,null,Object.keys(v).map(function(t,a){return l.a.createElement(Gt.a,{key:a},l.a.createElement(Ht.a,null,l.a.createElement(Gt.a.Header,null,l.a.createElement($t,{as:Q.a,variant:"link",eventKey:"entity-"+a}),"\xa0\xa0",l.a.createElement(Q.a,{style:{marginLeft:"2em"},onClick:function(a){n(v[t].map(function(e){return S.entities[e]}),u).then(function(t){e.setPageMessage("Updated "+(t.updated?t.updated:0)+" and created "+(t.created?t.created:0),4e3)})}},"Import ",t)),l.a.createElement(Ht.a.Collapse,{eventKey:"entity-"+a},l.a.createElement(Gt.a.Body,null,l.a.createElement("ul",null,v[t]&&v[t].map(function(e,t){return l.a.createElement("li",{key:t},S&&S.entities[e]&&S.entities[e].value?S.entities[e].value:"")}))))))})))),S.utterances&&l.a.createElement(Gt.a,null,l.a.createElement(Gt.a.Header,null,l.a.createElement($t,{as:Q.a,variant:"link",eventKey:"root-2"}),S.utterances&&l.a.createElement("span",{style:{marginLeft:"2em"},id:"utterances"},S.utterances?Object.keys(S.utterances).length:0," utterances ",l.a.createElement(Q.a,{style:{marginLeft:"2em"},onClick:function(t){r(S.utterances,u).then(function(t){e.setPageMessage("Updated "+(t.updated?t.updated:0)+" and created "+(t.created?t.created:0),4e3)})}},"Import All Utterances"))),l.a.createElement(Ht.a.Collapse,{eventKey:"root-2"},l.a.createElement(Gt.a.Body,null,S.utterances&&Object.values(S.utterances).map(function(t,n){return l.a.createElement(Gt.a,{key:n},l.a.createElement(Gt.a.Header,null,l.a.createElement("b",null,t.value),l.a.createElement(Q.a,{style:{marginLeft:"2em"},onClick:function(n){r([t],u).then(function(t){e.setPageMessage("Updated "+(t.updated?t.updated:0)+" and created "+(t.created?t.created:0),4e3)})}},"Import")),l.a.createElement("div",null,t.synonym&&t.synonym.split("\n").map(function(e){return l.a.createElement("div",null,e)})))}))))))},Xt=n(1344),en=n(1342),tn=n(157),nn=n(1343),an=n(156),ln=n.n(an);function rn(e){var t=Object(a.useState)(""),n=Object(s.a)(t,2),i=n[0],r=n[1],o=Object(a.useState)([]),u=Object(s.a)(o,2),m=u[0],p=u[1],d=Object(a.useState)([]),g=Object(s.a)(d,2),f=g[0],h=g[1],y=e.user&&e.user.token&&e.user.token.access_token?e.user.token.access_token:"",v=Jt(e.getAxiosClient(y),"https://auth.opennludata.org:5000/public/api/v1/"),E=(v.saveItem,v.deleteItem,v.getItem,v.searchItems,Y(),Object(c.e)()),b=Object(a.useState)({}),k=Object(s.a)(b,2),S=(k[0],k[1],Object(a.useState)({})),O=Object(s.a)(S,2),A=(O[0],O[1],T("nlutool","sources"));function w(t){(function(t){return new Promise(function(n,a){t&&t.file?e.getAxiosClient().get("/static/media/skills/"+t.file).then(function(e){e.data?n({fileType:"opennlu.skill",created_date:(new Date).getTime(),title:e.data.title,data:JSON.stringify(e.data)}):a("Failed to load skill")}).catch(function(e){a("Failed to load skill")}):a("Incomplete skill data")})})(t).then(function(e){A.saveItem(e,0),E.push("/sources")}).catch(function(e){})}function x(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=t&&t.trim&&t.trim()?t:i&&i.trim()?i:"";if(e.lookups.skills)if(n){var a=[];Object.values(e.lookups.skills).map(function(e){return e.userAvatar&&-1!==e.userAvatar.indexOf(n)?a.push(e):e.title&&-1!==e.title.indexOf(n)?a.push(e):e.tags&&-1!==e.tags.indexOf(n)&&a.push(e),null}),h(a)}else h(Object.values(e.lookups.skills))}Object(a.useEffect)(function(e){x()},[e.lookups.skills]);return l.a.createElement("div",{style:{marginLeft:"1em"}},l.a.createElement(Xt.a,{onSubmit:function(e){e.preventDefault(),x()}},l.a.createElement(en.a,null,l.a.createElement(tn.a,null,l.a.createElement(ln.a,{suggestions:m,onSuggestionsFetchRequested:function(t){t.value,e.lookups.tags&&p(e.lookups.tags.sort().map(function(e){return{tag:e}}))},onSuggestionsClearRequested:function(){p([])},getSuggestionValue:function(e){return e.tag},renderSuggestion:function(e){return l.a.createElement("div",null,e.tag)},onSuggestionSelected:function(e,t){t.suggestion;var n=t.suggestionValue;t.suggestionIndex,t.sectionIndex,t.method;r(n),x(n)},inputProps:{style:{width:"100%"},value:i,onChange:function(e){r(e.target.value)}}})),l.a.createElement(tn.a,null,l.a.createElement(Q.a,{variant:"success",onClick:x},"Search"),l.a.createElement(Q.a,{variant:"danger",onClick:function(){r(""),x("")}},"Reset")))),!i.trim()&&l.a.createElement("h3",null,"Recent Skills"),i.trim()&&l.a.createElement("h3",null,"Search Results"),l.a.createElement(nn.a,{fluid:!0},l.a.createElement(en.a,null,f.map(function(e,t){var n={marginLeft:"0.5em",marginBottom:"0.2em"};return l.a.createElement(tn.a,{sm:12,md:6,lg:4,xl:4,key:t,style:{border:"2px solid black",padding:"0.5em",margin:"0.5em"}},l.a.createElement(Q.a,{variant:"success",style:{float:"right"},onClick:function(t){w(e)}},"Grab"),l.a.createElement("h4",{style:{marginBottom:"0.3em"}},e.title," ",e.userAvatar&&l.a.createElement("span",null,"by ",e.userAvatar)," "),e.tags&&e.tags.length>0&&l.a.createElement(Q.a,{style:n,variant:"outline-warning"},e.tags.join(", ")),l.a.createElement("div",null,e.intents>0&&l.a.createElement(Q.a,{variant:"outline-primary",style:n},e.intents," intents "),e.entities>0&&l.a.createElement(Q.a,{variant:"outline-primary",style:n},e.entities," entities"),e.regexps>0&&l.a.createElement(Q.a,{variant:"outline-primary",style:n},e.regexps," regular expressions"),e.utterances>0&&l.a.createElement(Q.a,{variant:"outline-primary",style:n},e.utterances," utterances"),l.a.createElement(Q.a,{style:{marginLeft:"0.5em",marginTop:"1em"},variant:"outline-secondary"},"Updated: ",new Date(e.updated_date).toUTCString())))}))))}var sn=n(164),on=n(12),cn=n(34),un=n(35),mn=n(38),pn=n(37),dn=n(1),gn=n.n(dn),fn=n(17),hn=n(36),yn=(n(222),n(225),n(226),n(99)),vn=n(158),En=n.n(vn),bn=n(159),kn=n.n(bn),Sn=n(160),On=n.n(Sn),An=function(e){Object(mn.a)(n,e);var t=Object(pn.a)(n);function n(){return Object(cn.a)(this,n),t.apply(this,arguments)}return Object(un.a)(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout(function(){console.log(["LOGOUT"]),e.props.user&&e.props.user.token&&e.props.user.token.access_token&&(console.log(["LOGOUT USER"]),e.props.logout(e.props.user.token.access_token).then(function(){console.log(["DONE LOGOUT"]);var t=!!(e.props.allowedOrigins&&e.props.allowedOrigins.length>0);console.log(["LOGOUT SA ",t]),setTimeout(function(){t&&window.close()},1e3)}))},1500)}},{key:"render",value:function(){return gn.a.createElement("div",{style:{width:"100%",textAlign:"center",paddingTop:"1em"}},gn.a.createElement("b",null,"Logging Out ...."),gn.a.createElement("br",null))}}]),n}(dn.Component);function wn(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var l=n[a];" "==l.charAt(0);)l=l.substring(1,l.length);if(0==l.indexOf(t))return l.substring(t.length,l.length)}return null}function xn(e){return"_csrf="+wn("csrf-token")+"&_media="+(e?kn()(e):"")}function jn(){return"_csrf="+wn("csrf-token")}function In(){document.body.scrollTop=0,document.documentElement.scrollTop=0}function Ln(e){var t={httpsAgent:new On.a.Agent({rejectUnauthorized:!1}),headers:{}},n=wn("csrf-token");return n&&n.trim().length>0&&(t.headers["x-csrf-token"]=n),e&&e.length>0&&(t.headers.Authorization="Bearer "+e),En.a.create(t)}var Tn=function(e){Object(mn.a)(n,e);var t=Object(pn.a)(n);function n(e){var a;return Object(cn.a)(this,n),(a=t.call(this,e)).change=a.change.bind(Object(on.a)(a)),a.saveUser=a.saveUser.bind(Object(on.a)(a)),a.saveUserReal=a.saveUserReal.bind(Object(on.a)(a)),a.state={warning_message:"",redirect:""},a.redirTimeout=null,a}return Object(un.a)(n,[{key:"change",value:function(e){var t=Object(sn.a)({},this.props.user),n=e.target.name;return e.target.name.startsWith("fake_")&&(n=e.target.name.slice(5)),t[n]=e.target.value,this.props.setUser(t),!0}},{key:"saveUser",value:function(e){return e.preventDefault(),this.saveUserReal(this.props.user),!1}},{key:"saveUserReal",value:function(e){var t=this;return new Promise(function(n,a){(t.props.startWaiting&&t.props.startWaiting(),e&&e.token&&e.token.access_token)&&Ln(e.token.access_token)({url:t.props.authServerHostname+t.props.authServer+"/saveuser",method:"post",data:e}).then(function(e){return t.props.stopWaiting&&t.props.stopWaiting(),e.data}).then(function(e){e.error?t.props.submitWarning(e.error):e.message&&t.props.submitWarning(e.message)}).catch(function(e){console.log(e)})})}},{key:"componentDidMount",value:function(){In()}},{key:"render",value:function(){if(this.state.redirect)return gn.a.createElement(fn.a,{to:this.state.redirect});if(this.props.user){var e=this.props.history.location.pathname.split("/"),t="";"/"===(t=e[0]&&e[0].trim()?"/"+e.slice(0,e.length-1).join("/"):"/"+e.slice(1,e.length-1).join("/"))&&(t="");var n=!!(this.props.allowedOrigins&&this.props.allowedOrigins.length>0);return gn.a.createElement("div",null,n&&gn.a.createElement("button",{className:"btn btn-danger",style:{float:"right",marginLeft:"3em"},onClick:function(){window.close()}},"Close"),this.props.isLoggedIn()&&gn.a.createElement(hn.b,{to:t+"/logout"},gn.a.createElement("button",{className:"btn btn-warning",style:{float:"right"}},gn.a.createElement(yn.b,null)," Logout")),!n&&gn.a.createElement(hn.b,{to:t+"/login",style:{clear:"both",display:"inline"}},gn.a.createElement("button",{style:{float:"right",marginRight:"0.3em",marginLeft:"0.5em"},className:"btn btn-primary"},"Login")),gn.a.createElement("form",{method:"POST",onSubmit:this.saveUser,autoComplete:"false"},gn.a.createElement("div",{className:"form-group",style:{width:"70%",marginLeft:"4em"}},gn.a.createElement("h3",{style:{textAlign:"left"}},"Profile"),this.props.warning_message&&gn.a.createElement("div",{className:"warning-message"},this.props.warning_message),gn.a.createElement("label",{htmlFor:"username",className:"row"},"Email "),gn.a.createElement("input",{autoComplete:"false",id:"username",readOnly:!0,type:"text",name:"username",onChange:this.change,value:this.props.user?this.props.user.username:"",className:"form-control"}),gn.a.createElement("label",{htmlFor:"name",className:"row"},"Name "),gn.a.createElement("input",{autoComplete:"false",id:"name",type:"text",name:"name",onChange:this.change,value:this.props.user?this.props.user.name:"",className:"form-control"}),gn.a.createElement("label",{htmlFor:"avatar",className:"row"},"Avatar "),gn.a.createElement("input",{autoComplete:"false",id:"avatar",type:"text",name:"avatar",onChange:this.change,value:this.props.user?this.props.user.avatar:"",className:"form-control"}),gn.a.createElement("label",{htmlFor:"password",className:"row"},"Password")," ",gn.a.createElement("input",{autoComplete:"false",id:"password",type:"password",name:"fake_password",onChange:this.change,className:"form-control"}),gn.a.createElement("label",{htmlFor:"password2",className:"row"},"Repeat Password"),gn.a.createElement("input",{autoComplete:"false",id:"password2",type:"password",name:"fake_password2",onChange:this.change,className:"form-control"}),gn.a.createElement("input",{id:"id",type:"hidden",name:"_id",value:this.props.user?this.props.user._id:""}),gn.a.createElement("br",null),gn.a.createElement("br",null),gn.a.createElement("button",{className:"btn btn-lg btn-success btn-block"},gn.a.createElement(yn.a,null)," Save"))))}return"<b>no user</b>"}}]),n}(dn.Component);function _n(){return(_n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Cn=Object(dn.createElement)("path",{fill:"currentColor",d:"M488 261.8C488 403.3 391.1 504 248 504 110.8 504 0 393.2 0 256S110.8 8 248 8c66.8 0 123 24.5 166.3 64.9l-67.5 64.9C258.5 52.6 94.3 116.6 94.3 256c0 86.5 69.1 156.6 153.7 156.6 98.2 0 135-70.4 140.8-106.9H248v-85.3h236.1c2.3 12.7 3.9 24.9 3.9 41.4z"});function Nn(e){return Object(dn.createElement)("svg",_n({"aria-hidden":"true","data-prefix":"fab","data-icon":"google",className:"google-brands_svg__svg-inline--fa google-brands_svg__fa-google google-brands_svg__fa-w-16",viewBox:"0 0 488 512"},e),Cn)}function Fn(){return(Fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Rn=Object(dn.createElement)("path",{fill:"currentColor",d:"M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"});function Mn(e){return Object(dn.createElement)("svg",Fn({"aria-hidden":"true","data-prefix":"fab","data-icon":"twitter",className:"twitter-brands_svg__svg-inline--fa twitter-brands_svg__fa-twitter twitter-brands_svg__fa-w-16",viewBox:"0 0 512 512"},e),Rn)}function Pn(){return(Pn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Vn=Object(dn.createElement)("path",{fill:"currentColor",d:"M448 56.7v398.5c0 13.7-11.1 24.7-24.7 24.7H309.1V306.5h58.2l8.7-67.6h-67v-43.2c0-19.6 5.4-32.9 33.5-32.9h35.8v-60.5c-6.2-.8-27.4-2.7-52.2-2.7-51.6 0-87 31.5-87 89.4v49.9h-58.4v67.6h58.4V480H24.7C11.1 480 0 468.9 0 455.3V56.7C0 43.1 11.1 32 24.7 32h398.5c13.7 0 24.8 11.1 24.8 24.7z"});function Wn(e){return Object(dn.createElement)("svg",Pn({"aria-hidden":"true","data-prefix":"fab","data-icon":"facebook",className:"facebook-brands_svg__svg-inline--fa facebook-brands_svg__fa-facebook facebook-brands_svg__fa-w-14",viewBox:"0 0 448 512"},e),Vn)}function zn(){return(zn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Dn=Object(dn.createElement)("path",{fill:"currentColor",d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"});function Un(e){return Object(dn.createElement)("svg",zn({"aria-hidden":"true","data-prefix":"fab","data-icon":"github",className:"github-brands_svg__svg-inline--fa github-brands_svg__fa-github github-brands_svg__fa-w-16",viewBox:"0 0 496 512"},e),Dn)}function Bn(){return(Bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var Jn=Object(dn.createElement)("path",{fill:"currentColor",d:"M257.2 162.7c-48.7 1.8-169.5 15.5-169.5 117.5 0 109.5 138.3 114 183.5 43.2 6.5 10.2 35.4 37.5 45.3 46.8l56.8-56S341 288.9 341 261.4V114.3C341 89 316.5 32 228.7 32 140.7 32 94 87 94 136.3l73.5 6.8c16.3-49.5 54.2-49.5 54.2-49.5 40.7-.1 35.5 29.8 35.5 69.1zm0 86.8c0 80-84.2 68-84.2 17.2 0-47.2 50.5-56.7 84.2-57.8v40.6zm136 163.5c-7.7 10-70 67-174.5 67S34.2 408.5 9.7 379c-6.8-7.7 1-11.3 5.5-8.3C88.5 415.2 203 488.5 387.7 401c7.5-3.7 13.3 2 5.5 12zm39.8 2.2c-6.5 15.8-16 26.8-21.2 31-5.5 4.5-9.5 2.7-6.5-3.8s19.3-46.5 12.7-55c-6.5-8.3-37-4.3-48-3.2-10.8 1-13 2-14-.3-2.3-5.7 21.7-15.5 37.5-17.5 15.7-1.8 41-.8 46 5.7 3.7 5.1 0 27.1-6.5 43.1z"});function Zn(e){return Object(dn.createElement)("svg",Bn({"aria-hidden":"true","data-prefix":"fab","data-icon":"amazon",className:"amazon-brands_svg__svg-inline--fa amazon-brands_svg__fa-amazon amazon-brands_svg__fa-w-14",viewBox:"0 0 448 512"},e),Jn)}var Kn=function(e){Object(mn.a)(n,e);var t=Object(pn.a)(n);function n(e){var a;return Object(cn.a)(this,n),(a=t.call(this,e)).state={signin_username:"",signin_password:"",rememberme:!1,buttons:[]},a.change=a.change.bind(Object(on.a)(a)),a}return Object(un.a)(n,[{key:"componentDidMount",value:function(){var e=this;-1!==window.location.search.indexOf("fail=true")&&this.props.submitWarning("Login Failed"),Ln().get(this.props.authServerHostname+this.props.authServer+"/buttons").then(function(t){e.setState({buttons:t&&t.data&&t.data.buttons?t.data.buttons.split(","):[]})})}},{key:"change",value:function(e){var t={};return t[e.target.name]=e.target.value,this.setState(t),!0}},{key:"render",value:function(){var e=this,t=!!(this.props.allowedOrigins&&this.props.allowedOrigins.length>0),n=e.state.buttons.map(function(t){var n=e.props.authServer+"/"+t,a=t.slice(0,1).toUpperCase()+t.slice(1);return gn.a.createElement("span",{key:t},"\xa0",gn.a.createElement("a",{className:"btn btn-primary",href:n},"amazon"===t&&gn.a.createElement(Zn,{style:{marginRight:"0.6em",height:"2em",color:"black"}}),"google"===t&&gn.a.createElement(Nn,{style:{marginRight:"0.6em",height:"2em",color:"black"}}),"github"===t&&gn.a.createElement(Un,{style:{marginRight:"0.6em",height:"2em",color:"black"}}),"twitter"===t&&gn.a.createElement(Mn,{style:{marginRight:"0.6em",height:"2em",color:"black"}}),"facebook"===t&&gn.a.createElement(Wn,{style:{marginRight:"0.6em",height:"2em",color:"black"}}),a))});if(e.props.isRoot)l=e.props.history.location.pathname&&"/"!==e.props.history.location.pathname?e.props.history.location.pathname:"";else var a=e.props.history.location.pathname.split("/"),l=a.slice(0,a.length-1).join("/");return gn.a.createElement("div",null,t&&gn.a.createElement("button",{className:"btn btn-danger",style:{float:"right",marginLeft:"3em"},onClick:function(){window.close()}},"Close"),!t&&this.props.isLoggedIn()&&gn.a.createElement(hn.b,{to:l+"/profile",style:{clear:"both",display:"inline"}},gn.a.createElement("div",{style:{float:"right",marginRight:"0.3em",marginLeft:"0.5em"},className:"btn btn-primary"},"Profile")),gn.a.createElement(hn.b,{to:l+"/forgot",style:{clear:"both",display:"inline"}},gn.a.createElement("div",{style:{float:"right",marginRight:"0.3em",marginLeft:"0.5em"},className:"btn btn-primary"},"Forgot Password")),gn.a.createElement(hn.b,{to:l+"/register",style:{clear:"both",display:"inline"}},gn.a.createElement("div",{style:{float:"right",marginRight:"0.3em",marginLeft:"0.5em"},className:"btn btn-primary"},"Register")),gn.a.createElement("h1",{className:"h3 mb-3 font-weight-normal",style:{textAlign:"left"}},"Sign in"),n&&n.length>0&&gn.a.createElement("div",{style:{float:"right"}}," using ",n,"  ",gn.a.createElement("br",null)," "),gn.a.createElement("form",{className:"form-signin",method:"POST",action:e.props.authServerHostname+e.props.authServer+"/signin"},gn.a.createElement("label",{htmlFor:"inputEmail",className:"sr-only"},"Email address"),gn.a.createElement("input",{type:"text",name:"username",id:"inputEmail",className:"form-control",placeholder:"Email address",required:!0,autoComplete:"signin_username"}),gn.a.createElement("label",{htmlFor:"inputPassword",className:"sr-only"},"Password"),gn.a.createElement("input",{type:"password",name:"password",id:"inputPassword",className:"form-control",placeholder:"Password",required:!0,autoComplete:"signin_password"}),gn.a.createElement("button",{className:"btn btn-lg btn-success btn-block",type:"submit"},"Sign in")))}}]),n}(dn.Component),qn=n(266),Hn=function(e){Object(mn.a)(n,e);var t=Object(pn.a)(n);function n(e){var a;return Object(cn.a)(this,n),(a=t.call(this,e)).state={warning_message:"",signin_warning_message:"",signup_warning_message:"",email_login:"",password_login:"",name:"",email:"",password:"",password2:"",justSignedUp:!1,forgotPassword:!1,avatar:qn.commerce.productAdjective()+qn.name.firstName()+qn.name.lastName()},a.change=a.change.bind(Object(on.a)(a)),a.submitSignUp=a.submitSignUp.bind(Object(on.a)(a)),a.submitSignUpReal=a.submitSignUpReal.bind(Object(on.a)(a)),a}return Object(un.a)(n,[{key:"componentDidMount",value:function(){In()}},{key:"submitSignUp",value:function(e){return e.preventDefault(),this.submitSignUpReal(this.state.name,this.state.avatar,this.state.email,this.state.password,this.state.password2),!1}},{key:"change",value:function(e){var t={};return t[e.target.name]=e.target.value,this.setState(t),!0}},{key:"submitSignUpReal",value:function(e,t,n,a,l){var i=this;this.props.submitWarning(""),this.props.startWaiting&&this.props.startWaiting(),Ln()({url:i.props.authServerHostname+i.props.authServer+"/signup",method:"post",headers:{"Content-Type":"application/json"},data:{name:e,avatar:t,username:n,password:a,password2:l}}).then(function(e){return e.data}).then(function(e){if(i.props.stopWaiting&&i.props.stopWaiting(),e.error)i.props.submitWarning(e.error);else{e.message&&i.props.submitWarning(e.message);var t=function(e){var t=e.location.pathname.split("/"),n="";return n=t[0]&&t[0].trim()?"/"+t.slice(0,t.length-1).join("/"):"/"+t.slice(1,t.length-1).join("/"),console.log(["PP",n]),n}(i.props.history);"/"===t&&(t=""),i.props.history.push(t+"/registerconfirm")}}).catch(function(e){console.log(["request failed",e])})}},{key:"render",value:function(){var e=this,t=this.props.history.location.pathname.split("/"),n=t.slice(0,t.length-1).join("/"),a=!!(this.props.allowedOrigins&&this.props.allowedOrigins.length>0);return gn.a.createElement("div",{id:"registrationform"},gn.a.createElement("div",{style:{paddingLeft:"1em",clear:"both"}},gn.a.createElement("form",{className:"col-lg-12",style:{minWidth:"400px"},method:"POST",onSubmit:function(t){return e.submitSignUp(t)}},gn.a.createElement("div",{className:"form-group"},a&&gn.a.createElement("button",{className:"btn btn-danger",style:{float:"right",marginLeft:"3em"},onClick:function(){window.close()}},"Close"),gn.a.createElement(hn.b,{to:n+"/forgot"},gn.a.createElement("div",{style:{float:"right",marginRight:"0.3em",marginLeft:"0.5em"},className:"btn btn-primary"},"Forgot Password")),gn.a.createElement(hn.b,{to:n+"/login",style:{clear:"both",display:"inline"}},gn.a.createElement("div",{style:{float:"right",marginRight:"0.3em",marginLeft:"0.5em"},className:"btn btn-primary"},"Login")),gn.a.createElement("h3",{style:{textAlign:"left"},className:"card-title"},"Registration"),gn.a.createElement("label",{htmlFor:"name",style:{float:"left"}},"Name"),gn.a.createElement("input",{className:"form-control",autoComplete:"false",id:"name",type:"text",value:this.state.name,name:"name",onChange:this.change}),gn.a.createElement("label",{htmlFor:"avatar",className:"row"},"Avatar "),gn.a.createElement("input",{className:"form-control",autoComplete:"false",id:"avatar",type:"text",name:"avatar",value:this.state.avatar,onChange:this.change}),gn.a.createElement("label",{htmlFor:"email",className:"row"},"Email "),gn.a.createElement("input",{className:"form-control",autoComplete:"false",id:"email",type:"text",name:"email",value:this.state.email,onChange:this.change}),gn.a.createElement("label",{htmlFor:"password",className:"row"},"Password")," ",gn.a.createElement("input",{value:this.state.password,className:"form-control",autoComplete:"false",id:"password",type:"password",name:"password",onChange:this.change}),gn.a.createElement("label",{htmlFor:"password2",className:"row"},"Repeat Password"),gn.a.createElement("input",{className:"form-control",autoComplete:"false",id:"password2",type:"password",name:"password2",value:this.state.password2,onChange:this.change})),gn.a.createElement("div",{style:{textAlign:"left"}},gn.a.createElement("b",null,"By registering, you are agreeing to our ",gn.a.createElement("a",{target:"_new",href:"../privacy",style:{clear:"both",display:"inline"}},gn.a.createElement("div",{style:{marginRight:"0.3em",marginLeft:"0.5em"},className:"btn btn-primary"},"Terms and Conditions"))),gn.a.createElement("br",null),gn.a.createElement("br",null)),gn.a.createElement("button",{className:"btn btn-lg btn-success btn-block"},"Register"))))}}]),n}(dn.Component),Gn=function(e){Object(mn.a)(n,e);var t=Object(pn.a)(n);function n(){return Object(cn.a)(this,n),t.apply(this,arguments)}return Object(un.a)(n,[{key:"render",value:function(){var e=!!(this.props.allowedOrigins&&this.props.allowedOrigins.length>0);return gn.a.createElement("div",null,e&&gn.a.createElement("button",{className:"btn btn-danger",style:{float:"right",marginLeft:"3em"},onClick:function(){window.close()}},"Close"),gn.a.createElement("div",{style:{textAlign:"center"}},gn.a.createElement("h2",null,"Terms of Use/Privacy Policy")),gn.a.createElement("div",{className:"termsofuse",style:{textAlign:"left"}},gn.a.createElement("br",null),gn.a.createElement("ol",null,gn.a.createElement("li",null,gn.a.createElement("span",null,gn.a.createElement("strong",null,"Agreement to be bound")),gn.a.createElement("ol",null,gn.a.createElement("li",null,gn.a.createElement("span",null,"By using our service you agree to be bound by the terms of agreement, which may change from time to time")))),gn.a.createElement("li",null,gn.a.createElement("span",null,gn.a.createElement("strong",null,"Privacy")),gn.a.createElement("ol",null,gn.a.createElement("li",null,gn.a.createElement("span",null,"Your personal information such as name and email address will not be shared with anybody unless required by law. ")),gn.a.createElement("li",null,gn.a.createElement("span",null,"We will use your personal information only for the purpose of providing this service, for example by recording activity and performance on this site to provide analytics to users. ")),gn.a.createElement("li",null,gn.a.createElement("span",null,"We use cookies on this site, which you can reject through your browser settings.")))),gn.a.createElement("li",null,gn.a.createElement("span",null,gn.a.createElement("strong",null," Age limit")),gn.a.createElement("ol",null,gn.a.createElement("li",null,gn.a.createElement("span",null,"Children under the age of 13 may not create an account independent of their parent or guardian"),gn.a.createElement("span",null)))),gn.a.createElement("li",null,gn.a.createElement("span",null,gn.a.createElement("strong",null,"Intellectual property")),gn.a.createElement("ol",null,gn.a.createElement("li",null,gn.a.createElement("span",null,"The content on this site, including that contributed by users, is subject to a Creative Commons Licence (Attribution CC BY Version 4.0 (international licence)) (",gn.a.createElement("a",{href:"http://creativecommons.org.au/learn/licences/"},"see here"),"). This means that 'whenever a work is copied or redistributed ... the original creator (and any other nominated parties) must be credited and the source linked to.' ")),gn.a.createElement("li",null,gn.a.createElement("span",null,"The software used on this site is open source and subject to GNU General Public License version 3 (",gn.a.createElement("a",{href:"https://opensource.org"},"see here"),")")))),gn.a.createElement("li",null,gn.a.createElement("span",null," ",gn.a.createElement("strong",null,"Third-party content")),gn.a.createElement("ol",null,gn.a.createElement("li",null,gn.a.createElement("span",null,"This site imports content from third parties. This is not an endorsement of this material and we have no responsibility for any loss caused by reliance or access to third-party sites.")))),gn.a.createElement("li",null,gn.a.createElement("span",null," ",gn.a.createElement("strong",null,"Third-party login")),gn.a.createElement("ol",null,gn.a.createElement("li",null,gn.a.createElement("span",null,"This site allows users to login using their social accounts with Google, Github, Facebook, Amazon and Twitter. This site collects and stores your name and email address from your social provider to allow our website to identify and login repeat users and  to send newsletters regarding website updates. We do not share this information with anyone unless required by law.")))),gn.a.createElement("li",null,gn.a.createElement("span",null," ",gn.a.createElement("strong",null,"User conduct")),gn.a.createElement("ol",null,gn.a.createElement("li",null,gn.a.createElement("span",null,"You will not engage in conduct or contribute content that belongs to another party or is offensive, obscene, threatening, unlawful, defamatory, vilifying, inducing to violence, harassing, invasive of privacy, or discriminatory, solicitation or spam or private or confidential information or that jeopardises the operations of the site in any way or seek to gain unauthorised access to our servers or misuse the site to cause harm.")),gn.a.createElement("li",null,gn.a.createElement("span",null,"We will endeavour to and reserve the right to remove content that breaches these terms as quickly as possible but we accept no liability for any harm suffered by exposure to or reliance on such content.")),gn.a.createElement("li",null,gn.a.createElement("span",null,"We may preserve and disclose user content if required to do so by law.")))),gn.a.createElement("li",null,gn.a.createElement("span",null," ",gn.a.createElement("strong",null,"Termination of Your Account")),gn.a.createElement("ol",null,gn.a.createElement("li",null,gn.a.createElement("span",null,"We may modify, suspend or delete your account and associated user content and block your access to the site if you breach these terms. ")),gn.a.createElement("li",null,gn.a.createElement("span",null,"You may request that your account be deleted at any time and we will comply in reasonable time.")),gn.a.createElement("li",null,gn.a.createElement("span",null,"Termination of your account will not necessarily remove content you have contributed according to the terms in the preceding clause. ")))),gn.a.createElement("li",null,gn.a.createElement("span",null," ",gn.a.createElement("strong",null,"No Representations or Warranties")),gn.a.createElement("ol",null,gn.a.createElement("li",null,gn.a.createElement("span",null,"We do not guarantee that our services will always be available or free from bugs or viruses and the onus is on you to maintain current anti-virus software.")),gn.a.createElement("li",null,gn.a.createElement("span",null,"We will endeavor to provide quality content, but make no guarantees to the ongoing quality or quantity of content, including premium content.")),gn.a.createElement("li",null,gn.a.createElement("span",null,"We do not guarantee any warranties such as implied warranties of fitness for purpose or that this site will result in any improvement in your learning.")),gn.a.createElement("li",null,gn.a.createElement("span",null,"We do not guarantee that the information on this site is accurate or up to date.")))),gn.a.createElement("li",null,gn.a.createElement("span",null," ",gn.a.createElement("strong",null,"Limitation of Liability")),gn.a.createElement("ol",null,gn.a.createElement("li",null,gn.a.createElement("span",null,"Other than as required by law, we are not liable to you for any damages caused by use of or reliance on this site",gn.a.createElement("br",null))))),gn.a.createElement("li",null,gn.a.createElement("span",null," ",gn.a.createElement("strong",null,"Indemnity")),gn.a.createElement("ol",null,gn.a.createElement("li",null,gn.a.createElement("span",null,"You agree to indemnify us from any loss or liability due to a claim brought by any third party arising from your user content or conduct.")))),gn.a.createElement("li",null,gn.a.createElement("span",null," ",gn.a.createElement("strong",null,"Dispute resolution etc")),gn.a.createElement("ol",null,gn.a.createElement("li",null,gn.a.createElement("span",null,"These terms and the relationship between us and you are governed by the laws of Australia and subject to the exclusive jurisdiction of Australian courts, with the exception of injunctive relief in any jurisdiction in order to enforce our rights under these terms.")),gn.a.createElement("li",null,gn.a.createElement("span",null,"If we fail to exercise or enforce any rights or provision of these terms, this does not constitute a waiver of such rights or provisions.")),gn.a.createElement("li",null,gn.a.createElement("span",null,"If any provision of the terms are found by a court of competent jurisdiction to be invalid, the parties nevertheless agree that the court should endeavour to give effect to the parties' intentions as reflected in the provision, and the other provisions of the terms remain in full force and effect.")),gn.a.createElement("li",null,gn.a.createElement("span",null,"You agree that these terms represent the entire understanding between us and you and these terms supersede any previous agreements, promises, assurances, warranties, representations and understandings, whether written or oral, between us and you.")))))))}}]),n}(dn.Component),Yn=function(e){Object(mn.a)(n,e);var t=Object(pn.a)(n);function n(e){var a;return Object(cn.a)(this,n),(a=t.call(this,e)).state={signin_username:"",signin_password:"",rememberme:!1},a.change=a.change.bind(Object(on.a)(a)),a}return Object(un.a)(n,[{key:"componentDidMount",value:function(){In()}},{key:"change",value:function(e){var t={};return t[e.target.name]=e.target.value,this.setState(t),!0}},{key:"recoverPassword",value:function(e,t,n){var a=this;return a.props.submitWarning(""),this.props.startWaiting&&this.props.startWaiting(),Ln()({url:a.props.authServerHostname+a.props.authServer+"/recover",method:"post",headers:{"Content-Type":"application/json"},data:{email:e,password:t,password2:n,code:Math.random().toString(36).replace(/[^a-z]+/g,"")}}).then(function(e){return e.data}).then(function(e){a.props.stopWaiting?a.props.stopWaiting():e.message&&a.props.submitWarning(e.message),e.error&&a.props.submitWarning(e.error)}).catch(function(e){console.log(["recover request failed",e])}),!1}},{key:"render",value:function(){var e=this,t=!!(this.props.allowedOrigins&&this.props.allowedOrigins.length>0),n=this.props.history.location.pathname.split("/"),a=n.slice(0,n.length-1).join("/");return gn.a.createElement("div",null,t&&gn.a.createElement("button",{className:"btn btn-danger",style:{float:"right",marginLeft:"3em"},onClick:function(){window.close()}},"Close"),gn.a.createElement(hn.b,{to:a+"/register",style:{clear:"both",display:"inline"}},gn.a.createElement("div",{style:{float:"right",marginRight:"0.3em",marginLeft:"0.5em"},className:"btn btn-primary"},"Register")),gn.a.createElement(hn.b,{to:a+"/login",style:{clear:"both",display:"inline"}},gn.a.createElement("div",{style:{float:"right",marginRight:"0.3em",marginLeft:"0.5em"},className:"btn btn-primary"},"Login")),gn.a.createElement("form",{className:"form-signin",onSubmit:function(t){return t.preventDefault(),e.recoverPassword(e.state.email,e.state.password,e.state.password2),!1}},gn.a.createElement("h1",{className:"h3 mb-3 font-weight-normal",style:{textAlign:"left"}},"Password Recovery"),this.props.message&&gn.a.createElement("div",{className:"warning-message"},this.props.message),gn.a.createElement("fieldset",{className:"col-12"},gn.a.createElement("label",{htmlFor:"email",className:"row"},"Email "),gn.a.createElement("input",{autoComplete:"signin_email",id:"email",type:"email",name:"email",onChange:this.change}),gn.a.createElement("label",{htmlFor:"password",className:"row"},"New Password")," ",gn.a.createElement("input",{autoComplete:"off",id:"password",type:"password",name:"password",onChange:this.change}),gn.a.createElement("label",{htmlFor:"password2",className:"row"},"Repeat New Password"),gn.a.createElement("input",{autoComplete:"off",id:"password2",type:"password",name:"password2",onChange:this.change}),gn.a.createElement("br",null),gn.a.createElement("br",null),gn.a.createElement("button",{className:"btn btn-lg btn-success btn-block",type:"submit"},"Send Recovery Email"))))}}]),n}(dn.Component),$n=function(e){Object(mn.a)(n,e);var t=Object(pn.a)(n);function n(){return Object(cn.a)(this,n),t.apply(this,arguments)}return Object(un.a)(n,[{key:"componentDidMount",value:function(){var e=!!(this.props.allowedOrigins&&this.props.allowedOrigins.length>0);setTimeout(function(){e&&window.close()},5e3)}},{key:"render",value:function(){return gn.a.createElement("div",{className:"registrationconfirmation",style:{textAlign:"left"}},gn.a.createElement("h3",null,"Thanks for Registering"),gn.a.createElement("div",null,"To finish creating your account, check your email and open the confirmation link."))}}]),n}(dn.Component),Qn=function(e){Object(mn.a)(n,e);var t=Object(pn.a)(n);function n(e){var a;return Object(cn.a)(this,n),(a=t.call(this,e)).state={},a.change=a.change.bind(Object(on.a)(a)),a.cancelAuthRequest=a.cancelAuthRequest.bind(Object(on.a)(a)),a}return Object(un.a)(n,[{key:"change",value:function(e){var t={};return t[e.target.name]=e.target.value,this.setState(t),!0}},{key:"cancelAuthRequest",value:function(e){return e.preventDefault(),this.setState({authRequest:null}),localStorage.setItem("auth_request",""),window.location="/",!1}},{key:"componentDidUpdate",value:function(){this.props.isLoggedIn()||this.props.history.push("../login")}},{key:"componentDidMount",value:function(){var e=this;if(this.props.isLoggedIn()){var t=this.props.location.search?this.props.location.search.slice(1).split("&"):[],n={};if(t.map(function(e){var t=e.split("=");return 2===t.length&&(n[t[0]]=t[1]),null}),n.response_type&&n.response_type.length>0&&n.client_id&&n.client_id.length>0){var a={client_id:n.client_id,redirect_uri:n.redirect_uri,response_type:n.response_type,scope:n.scope,state:n.state};e.props.startWaiting&&e.props.startWaiting(),fetch(e.props.authServerHostname+e.props.authServer+"/oauthclient?clientId="+n.client_id,{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e.props.user.token.access_code}}).then(this.checkStatus).then(function(t){return e.parseJSON(t)}).then(function(t){e.props.stopWaiting&&e.props.stopWaiting(),t.error?(console.log(t.error,t),e.props.submitWarning(t.error)):(a.name=t.name,a.website_url=t.website_url,a.privacy_url=t.privacy_url,a.user=e.props.user?e.props.user.username:"",localStorage.setItem("auth_request",JSON.stringify(a)),e.setState({authRequest:a}))}).catch(function(e){console.log(["SIGN IN request failed",e])})}else{var l=localStorage.getItem("auth_request");e.setState({authRequest:JSON.parse(l)})}}else this.props.history.push("../login")}},{key:"checkStatus",value:function(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}},{key:"parseJSON",value:function(e){return e.json()}},{key:"render",value:function(){return gn.a.createElement("div",null,this.state.authRequest&&gn.a.createElement("div",{className:"row"},gn.a.createElement("h1",null,"Authorize ",this.state.authRequest.name),gn.a.createElement("div",null,"Do you want to allow ",this.state.authRequest.name," to login ",this.props.user?" as "+this.props.user.name:"","?",gn.a.createElement("br",null)),gn.a.createElement("br",null),gn.a.createElement("br",null),gn.a.createElement("div",{style:{fontSize:"1.2em",width:"100%",clear:"both"}},gn.a.createElement("a",{target:"_new",style:{float:"left"},href:this.state.authRequest.website_url},"Website"),gn.a.createElement("a",{target:"_new",style:{float:"right"},href:this.state.authRequest.privacy_url},"Privacy Policy")),gn.a.createElement("br",null),gn.a.createElement("div",{style:{width:"100%",fontSize:"0.8em",padding:"0.2em",border:"1px solid grey",textAlign:"left"}},"Authorization will allow ",this.state.authRequest.name," to",gn.a.createElement("br",null),gn.a.createElement("ul",{style:{marginLeft:"-1em"}},gn.a.createElement("li",null,"See your name and email address"),gn.a.createElement("li",null,"Interact with this website on your behalf")),gn.a.createElement("form",{style:{width:"100%"},action:that.props.authServerHostname+this.props.authServer+"/authorize",method:"POST"},gn.a.createElement("input",{type:"hidden",name:"response_type",value:this.state.authRequest.response_type}),gn.a.createElement("input",{type:"hidden",name:"client_id",value:this.state.authRequest.client_id}),gn.a.createElement("input",{type:"hidden",name:"client_secret",value:this.state.authRequest.client_secret}),gn.a.createElement("input",{type:"hidden",name:"redirect_uri",value:this.state.authRequest.redirect_uri}),gn.a.createElement("input",{type:"hidden",name:"scope",value:this.state.authRequest.scope}),gn.a.createElement("input",{type:"hidden",name:"state",value:this.state.authRequest.state}),gn.a.createElement("input",{type:"hidden",name:"access_token",value:this.props.user&&this.props.user.token?this.props.user.token.access_token:""}),gn.a.createElement("div",{style:{fontSize:"1.1em",clear:"both",width:"100%"},className:"row"},gn.a.createElement("div",{className:"col-6"},gn.a.createElement("button",{type:"submit",style:{color:"black",width:"100%",fontWeight:"bold"},className:"btn btn-block btn-lg  btn-success"},gn.a.createElement("img",{src:"check-solid~bdswbrUp.svg",style:{marginRight:"0.2em",height:"1.2em"},alt:"Yes"}),"\xa0Yes")),gn.a.createElement("div",{className:"col-6"},gn.a.createElement("button",{style:{color:"black",width:"100%",fontWeight:"bold"},className:"btn  btn-block btn-lg  btn-danger",onClick:this.cancelAuthRequest},gn.a.createElement("img",{src:"times-circle-solid~bjunytod.svg",style:{marginRight:"0.2em",height:"1.2em"},alt:"No"}),"\xa0No"))))),gn.a.createElement("br",null),gn.a.createElement("br",null),gn.a.createElement("br",null)))}}]),n}(dn.Component),Xn=(dn.Component,dn.Component,function(e){Object(mn.a)(n,e);var t=Object(pn.a)(n);function n(e){var a;return Object(cn.a)(this,n),(a=t.call(this,e)).state={user:null,checkLoginIframe:null},a.loginPopup=null,a.pollLoginTimeout=null,a.pollCloseTimeout=null,a.receiveMessage=a.receiveMessage.bind(Object(on.a)(a)),a.pollShouldClose=a.pollShouldClose.bind(Object(on.a)(a)),a.checkIsLoggedIn=a.checkIsLoggedIn.bind(Object(on.a)(a)),a.checkLogin=a.checkLogin.bind(Object(on.a)(a)),a.doLogin=a.doLogin.bind(Object(on.a)(a)),a.doProfile=a.doProfile.bind(Object(on.a)(a)),a.doLogout=a.doLogout.bind(Object(on.a)(a)),a.isLoggedIn=a.isLoggedIn.bind(Object(on.a)(a)),a.loadUser=a.loadUser.bind(Object(on.a)(a)),a.setUser=a.setUser.bind(Object(on.a)(a)),a.setCheckLoginIframe=a.setCheckLoginIframe.bind(Object(on.a)(a)),a}return Object(un.a)(n,[{key:"setUser",value:function(e){this.setState({user:e})}},{key:"setCheckLoginIframe",value:function(e){this.setState({checkLoginIframe:e})}},{key:"componentDidMount",value:function(e){var t=this;window.addEventListener("message",this.receiveMessage,!1),setTimeout(function(){t.checkLogin()},1e3)}},{key:"receiveMessage",value:function(e){console.log(["msg",e.origin,e.data,e.source]),e.origin===this.props.authServerHostname&&(console.log(["msgOK",e.origin,e.data,e.source]),this.setUser(e.data.user),this.loginPopup&&this.loginPopup.close())}},{key:"pollShouldClose",value:function(e,t){var n=this;this.pollTimeout&&clearTimeout(this.pollTimeout),this.pollTimeout=setTimeout(function(){e&&!e.closed&&(console.log(["send msg",{check_login:!0,allowedPages:t},n.props.authServerHostname]),e.postMessage({check_login:!0,allowedPages:t},n.props.authServerHostname),n.pollShouldClose(e,t))},500)}},{key:"checkIsLoggedIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this;this.pollLoginTimeout&&clearTimeout(this.pollLoginTimeout),this.pollLoginTimeout=setTimeout(function(){e&&t<10&&(console.log([t,"send iframe login msg",{check_login:!0},n.props.authServerHostname]),e.postMessage({check_login:!0},n.props.authServerHostname),n.checkIsLoggedIn(e,t+1))},1e3)}},{key:"checkLogin",value:function(){var e=this.props.authServerHostname+this.props.authWeb+"/blank";this.loginPopup=window.open(e,"mywin","resizable=no, scrollbars=no, status=no, width=10,height=10, top: 0, left:"+window.screen.availHeight+10),this.checkIsLoggedIn(this.loginPopup)}},{key:"doLogin",value:function(){var e=this.props.authServerHostname+this.props.authWeb+"/login",t=window.open(e,"mywin");this.pollShouldClose(t,["login","register","forgot","registerconfirm","privacy"])}},{key:"doProfile",value:function(){var e=this.props.authServerHostname+this.props.authWeb+"/profile",t=window.open(e,"mywin");this.pollShouldClose(t,["profile","logout"])}},{key:"doLogout",value:function(){var e=this.props.authServerHostname+this.props.authWeb+"/logout",t=window.open(e,"mywin");this.pollShouldClose(t,["logout"])}},{key:"isLoggedIn",value:function(){return this.state.user&&this.state.user.token&&this.state.user.token.access_token}},{key:"loadUser",value:function(e){var t=this;return new Promise(function(n,a){e?Ln(e).post(t.props.authServerHostname+t.props.authServer+"/me",{}).then(function(e){return e.data}).then(function(e){t.setUser(e),n(e)}).catch(function(e){console.log(e),a()}):a()})}},{key:"render",value:function(e){return gn.a.createElement("div",null,"EXTUWSERL:::",JSON.stringify(this.state.user),this.props.children(this.state.user,this.setUser,Ln,xn,jn,this.isLoggedIn,this.loadUser,this.doLogout,this.doLogin,this.doProfile,this.props.authServer,this.props.authServerHostname))}}]),n}(dn.Component)),ea=(n(1313),n(1316));function ta(e){var t={paddingLeft:"0.3em"};return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement("h1",null,"Menu"),l.a.createElement(o.b,{style:t,to:"/sources"},l.a.createElement(Q.a,null,"Sources")),l.a.createElement(o.b,{style:t,to:"/import"},l.a.createElement(Q.a,null,"Import")),l.a.createElement(o.b,{style:t,to:"/examples"},l.a.createElement(Q.a,null,"Organise")),l.a.createElement(o.b,{style:t,to:"/skills"},l.a.createElement(Q.a,null,"Skills ")),l.a.createElement(o.b,{style:t,to:"/search"},l.a.createElement(Q.a,null,"Search Community ")))}var na=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)(""),u=Object(s.a)(r,2),m=u[0],p=u[1],d=null;function g(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;p(e),t>0&&(d&&clearTimeout(d),d=setTimeout(function(){g("")},t))}var f=Object(a.useState)([]),h=Object(s.a)(f,2),y=h[0],v=h[1],E=Object(a.useState)([]),b=Object(s.a)(E,2),k=b[0],S=b[1],O=Object(a.useState)([]),A=Object(s.a)(O,2),w=A[0],x=A[1],j=Object(a.useState)([]),L=Object(s.a)(j,2),T=L[0],_=L[1],C=Object(a.useState)([]),N=Object(s.a)(C,2),F=N[0],R=N[1],M=Object(a.useState)(0),P=Object(s.a)(M,2),V=P[0],W=P[1],z=Object(a.useState)([]),D=Object(s.a)(z,2),U=D[0],B=D[1],J=Object(a.useState)([]),Z=Object(s.a)(J,2),K=Z[0],q=Z[1],H=Object(a.useState)([]),G=Object(s.a)(H,2),Y=G[0],$=G[1],Q=Object(a.useState)([]),X=Object(s.a)(Q,2),ee=X[0],te=X[1],ne=Object(a.useState)([]),ae=Object(s.a)(ne,2),le=ae[0],ie=ae[1],re=Object(a.useState)([]),se=Object(s.a)(re,2),oe=se[0],ce=se[1],ue=Object(a.useState)([]),me=Object(s.a)(ue,2),he=me[0],ye=me[1],ve=Object(a.useState)(0),Ee=Object(s.a)(ve,2),be=Ee[0],ke=Ee[1],Se=Object(a.useState)(0),Oe=Object(s.a)(Se,2),Ae=Oe[0],xe=Oe[1],je=Object(a.useState)({}),Ie=Object(s.a)(je,2),Le=Ie[0],Te=Ie[1],_e=Object(a.useState)({}),Ce=Object(s.a)(_e,2),Ne=Ce[0],Fe=Ce[1],Re=Object(a.useState)(0),Me=Object(s.a)(Re,2),Pe=Me[0],Ve=Me[1],We=Object(a.useState)(0),ze=Object(s.a)(We,2),De=ze[0],Ue=ze[1],Be=Object(a.useState)(0),Ze=Object(s.a)(Be,2),Ke=Ze[0],qe=Ze[1],Ge=Object(a.useState)(0),Ye=Object(s.a)(Ge,2),$e=Ye[0],Qe=Ye[1],et=Object(a.useState)({}),tt=Object(s.a)(et,2),nt=tt[0],at=tt[1],lt=Object(a.useState)({}),rt=Object(s.a)(lt,2),st=rt[0],ot=rt[1];function ct(){return ea.get("/static/media/skills/index.js").then(function(e){var t={};e.data&&(Object.values(e.data).map(function(e){return e.tags&&e.tags.map(function(e){return t[e]=!0,null}),null}),ot(Object.keys(t).sort()),at(e.data))}).catch(function(e){})}function ut(){i(!0)}function mt(){setTimeout(function(){i(!1)},300)}Object(a.useEffect)(function(){ct()},[]);var dt={regexpTagsLookups:he,regexpsLookups:ee,regexpListsLookups:oe,regexpsCompleteLookups:le,utteranceTagsLookups:Y,utterancesLookups:U,utteranceListsLookups:K,intentLookups:y,entityLookups:k,tagLookups:w,skillLookups:T,selectedTally:V,listsLookups:F,listTally:be,selectedListTally:Ae,listTallyByList:Le,selectedListTallyByList:Ne,utteranceTally:Ke,selectedUtteranceTally:$e,regexTally:Pe,selectedRegexTally:De,skills:nt,skillTags:st},gt={updateLookups:function(){I.a.createInstance({name:"nlutool",storeName:"examples"}).getItem("alldata",function(e,t){if(t&&t.length>0){var n={},a={},l={},i={},r=0;t.map(function(e){return e&&(e.isSelected&&(r+=1),a[e.intent]=!0,e.tags&&e.tags.length>0&&e.tags.map(function(e){return n[e]=!0,null}),e.skills&&e.skills.length>0&&e.skills.map(function(e){return i[e]=!0,null}),e.entities&&e.entities.length>0&&e.entities.map(function(e){return e.type&&(l[e.type]=!0),null})),null});var s=function(e,t,n){return n.indexOf(e)===t};v([].concat(Object.keys(a),y).filter(s)),S([].concat(Object.keys(l),k).filter(s)),x([].concat(Object.keys(n),w).filter(s)),_([].concat(Object.keys(i),T).filter(s)),W(r)}})},updateLists:function(){I.a.createInstance({name:"nlutool",storeName:"lists"}).getItem("alldata",function(e,t){if(t){var n={},a={},l=0,i=0;t.map(function(e){return e.isSelected&&(i+=1),l+=1,e&&e.tags&&e.tags.length>0&&e.tags.map(function(t){return t&&t.trim().length>0&&(e.isSelected?(a[t]=a[t]>0?a[t]+1:1,n[t]=n[t]>0?n[t]+1:1):a[t]=a[t]>0?a[t]+1:1),null}),null}),ke(l),xe(i),Fe(n),Te(a),R(Object.keys(a))}})},updateUtterances:function(){var e=I.a.createInstance({name:"nlutool",storeName:"utterances"}),t=0,n=0;e.getItem("alldata",function(e,a){var l={},i={},r={};Array.isArray(a)&&(a.map(function(e,a){return e.isSelected&&(n+=1),t+=1,e.value&&(i[e.value]=!0),e.synonym&&e.synonym.split("\n").map(function(e){return l[e]=!0,null}),e.tags&&e.tags.length>0&&e.tags.map(function(e){return r[e]=!0,null}),null}),qe(t),Qe(n),B(Object.keys(i)),$(Object.keys(r)),q(Object.keys(l)))})},updateRegexps:function(){I.a.createInstance({name:"nlutool",storeName:"regexps"}).getItem("alldata",function(e,t){var n=0,a=0,l={},i={},r={},s={};Array.isArray(t)&&(t.map(function(e,t){return e.isSelected&&(a+=1),n+=1,e.value&&(i[e.value]=!0,r[e.value]={value:e.value,synonym:e.synonym}),e.synonym&&e.synonym.split("\n").map(function(e){return l[e]=!0,null}),e.tags&&e.tags.length>0&&e.tags.map(function(e){return s[e]=!0,null}),null}),Ve(n),Ue(a),te(Object.keys(i)),ie(Object.values(r)),ye(Object.keys(s)),ce(Object.keys(l)))})},loadSkills:ct};return l.a.createElement("div",{className:"OpenNluDataApp"},l.a.createElement(Xn,{authServer:"/api/login",authServerHostname:"https://auth.opennludata.org:5000",authWeb:""},function(e,t,a,i,r,s,u,p,d,f,h,y){return l.a.createElement("div",null,"USER:::",JSON.stringify(e),l.a.createElement(o.a,null,l.a.createElement(c.a,{exact:!0,path:"*",render:function(t){return l.a.createElement(pt,{waiting:n,user:e,doLogin:d,doLogout:p,doProfile:f,isLoggedIn:s,history:t.history,message:m,setPageMessage:g,getAxiosClient:a})}}),l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement(c.a,{exact:!0,path:"/menu",component:ta}),l.a.createElement(c.a,{path:"/sources",render:function(e){return l.a.createElement(we,Object.assign({},e,{startWaiting:ut,stopWaiting:mt,setPageMessage:g,updateFunctions:gt,lookups:dt}))}}),l.a.createElement(c.a,{path:"/importreview",render:function(e){return l.a.createElement(Qt,Object.assign({},e,{startWaiting:ut,stopWaiting:mt,setPageMessage:g,updateFunctions:gt,lookups:dt}))}}),l.a.createElement(c.a,{exact:!0,path:"/import",render:function(e){return l.a.createElement(Ot,Object.assign({},e,{lookups:dt,startWaiting:ut,stopWaiting:mt,updateFunctions:gt,setPageMessage:g}))}}),l.a.createElement(c.a,{exact:!0,path:"/import/skill/:skillId",render:function(e){return l.a.createElement(Ot,Object.assign({},e,{lookups:dt,startWaiting:ut,stopWaiting:mt,updateFunctions:gt,setPageMessage:g}))}}),l.a.createElement(c.a,{exact:!0,path:"/import/intent/:intentId",render:function(e){return l.a.createElement(Ot,Object.assign({},e,{lookups:dt,startWaiting:ut,stopWaiting:mt,updateFunctions:gt,setPageMessage:g}))}}),l.a.createElement(c.a,{path:"/import/skill/:skillId/intent/:intentId",render:function(e){return l.a.createElement(Ot,Object.assign({},e,{lookups:dt,startWaiting:ut,stopWaiting:mt,updateFunctions:gt,setPageMessage:g}))}}),l.a.createElement(c.a,{exact:!0,path:"/examples",render:function(e){return l.a.createElement(it,Object.assign({},e,{lookups:dt,startWaiting:ut,stopWaiting:mt,updateFunctions:gt,setPageMessage:g}))}}),l.a.createElement(c.a,{exact:!0,path:"/examples/skill/:skillId",render:function(e){return l.a.createElement(it,Object.assign({},e,{lookups:dt,startWaiting:ut,stopWaiting:mt,updateFunctions:gt,setPageMessage:g}))}}),l.a.createElement(c.a,{path:"/examples/intent/:intentId",render:function(e){return l.a.createElement(it,Object.assign({},e,{lookups:dt,startWaiting:ut,stopWaiting:mt,updateFunctions:gt,setPageMessage:g}))}}),l.a.createElement(c.a,{path:"/examples/tag/:tag",render:function(e){return l.a.createElement(it,Object.assign({},e,{lookups:dt,startWaiting:ut,stopWaiting:mt,updateFunctions:gt,setPageMessage:g}))}}),l.a.createElement(c.a,{exact:!0,path:"/examples/skill/:skillId/intent/:intentId",render:function(e){return l.a.createElement(it,Object.assign({},e,{lookups:dt,startWaiting:ut,stopWaiting:mt,updateFunctions:gt,setPageMessage:g}))}}),l.a.createElement(c.a,{exact:!0,path:"/examples/skill/:skillId/tag/:tag",render:function(e){return l.a.createElement(it,Object.assign({},e,{lookups:dt,startWaiting:ut,stopWaiting:mt,updateFunctions:gt,setPageMessage:g}))}}),l.a.createElement(c.a,{exact:!0,path:"/examples/intent/:intentId/tag/:tag",render:function(e){return l.a.createElement(it,Object.assign({},e,{lookups:dt,startWaiting:ut,stopWaiting:mt,updateFunctions:gt,setPageMessage:g}))}}),l.a.createElement(c.a,{exact:!0,path:"/examples/skill/:skillId/intent/:intentId/tag/:tag",render:function(e){return l.a.createElement(it,Object.assign({},e,{lookups:dt,startWaiting:ut,stopWaiting:mt,updateFunctions:gt,setPageMessage:g}))}}),l.a.createElement(c.a,{exact:!0,path:"/skills/:skillId",render:function(t){return l.a.createElement(Kt,Object.assign({},t,{doLogin:d,user:e,lookups:dt,startWaiting:ut,stopWaiting:mt,updateFunctions:gt,setPageMessage:g,getAxiosClient:a}))}}),l.a.createElement(c.a,{exact:!0,path:"/skills/skill/:skillId",render:function(t){return l.a.createElement(Kt,Object.assign({},t,{doLogin:d,user:e,lookups:dt,startWaiting:ut,stopWaiting:mt,updateFunctions:gt,setPageMessage:g,getAxiosClient:a}))}}),l.a.createElement(c.a,{exact:!0,path:"/skills/:skillId/publish",render:function(t){return l.a.createElement(Kt,Object.assign({},t,{doLogin:d,user:e,lookups:dt,startWaiting:ut,stopWaiting:mt,updateFunctions:gt,setPageMessage:g,publish:!0,getAxiosClient:a}))}}),l.a.createElement(c.a,{exact:!0,path:"/skills/skill/:skillId/publish",render:function(t){return l.a.createElement(Kt,Object.assign({},t,{doLogin:d,user:e,lookups:dt,startWaiting:ut,stopWaiting:mt,updateFunctions:gt,setPageMessage:g,publish:!0,getAxiosClient:a}))}}),l.a.createElement(c.a,{exact:!0,path:"/skills",render:function(t){return l.a.createElement(Kt,Object.assign({},t,{doLogin:d,user:e,lookups:dt,startWaiting:ut,stopWaiting:mt,updateFunctions:gt,setPageMessage:g,getAxiosClient:a}))}}),l.a.createElement(c.a,{exact:!0,path:"/lists",render:function(e){return l.a.createElement(Je,Object.assign({},e,{lookups:dt,startWaiting:ut,stopWaiting:mt,updateFunctions:gt,setPageMessage:g}))}}),l.a.createElement(c.a,{exact:!0,path:"/lists/:listId",render:function(e){return l.a.createElement(Je,Object.assign({},e,{lookups:dt,startWaiting:ut,stopWaiting:mt,updateFunctions:gt,setPageMessage:g}))}}),l.a.createElement(c.a,{exact:!0,path:"/utterances",render:function(e){return l.a.createElement(He,Object.assign({},e,{lookups:dt,startWaiting:ut,stopWaiting:mt,setPageMessage:g,updateFunctions:gt}))}}),l.a.createElement(c.a,{exact:!0,path:"/utterances/:listId",render:function(e){return l.a.createElement(He,Object.assign({},e,{lookups:dt,startWaiting:ut,stopWaiting:mt,setPageMessage:g,updateFunctions:gt}))}}),l.a.createElement(c.a,{exact:!0,path:"/regexps",render:function(e){return l.a.createElement(Xe,Object.assign({},e,{lookups:dt,startWaiting:ut,stopWaiting:mt,setPageMessage:g,updateFunctions:gt}))}}),l.a.createElement(c.a,{exact:!0,path:"/regexps/:listId",render:function(e){return l.a.createElement(Xe,Object.assign({},e,{lookups:dt,startWaiting:ut,stopWaiting:mt,setPageMessage:g,updateFunctions:gt}))}}),l.a.createElement(c.a,{exact:!0,path:"/help",component:pe}),l.a.createElement(c.a,{exact:!0,path:"/helpimport",component:de}),l.a.createElement(c.a,{exact:!0,path:"/helpexport",component:fe}),l.a.createElement(c.a,{exact:!0,path:"/helpabout",component:ge}),l.a.createElement(c.a,{exact:!0,path:"/search",render:function(t){return l.a.createElement(rn,{user:e,getAxiosClient:a,lookups:dt,updateFunctions:gt})}}),l.a.createElement(c.a,{exact:!0,path:"/",component:pe}))))}),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))},aa=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function la(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(na,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");aa?(function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):la(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):la(t,e)})}}()},14:function(e,t,n){e.exports=n.p+"static/media/check.8ab01baf.svg"},147:function(e,t,n){e.exports=n.p+"static/media/helpoverview.646ef0b8.svg"},151:function(e,t,n){e.exports=n.p+"static/media/singingman.5d08cb4f.svg"},152:function(e,t,n){e.exports=n.p+"static/media/waiting.d362cb3f.gif"},153:function(e,t,n){e.exports=n.p+"static/media/thumb-down.73b0ce24.svg"},154:function(e,t,n){e.exports=n.p+"static/media/arrow-thick-left.f29ee705.svg"},155:function(e,t,n){e.exports=n.p+"static/media/arrow-thick-right.9ba7683e.svg"},166:function(e,t,n){e.exports=n(167)},167:function(e,t,n){e.exports=n(1333)},172:function(e,t,n){},247:function(e,t){},249:function(e,t){},31:function(e,t,n){},95:function(e,t,n){e.exports=n.p+"static/media/thumb-up.f18de183.svg"}},[[166,1,2]]]);
//# sourceMappingURL=main.7f6c9dce.chunk.js.map