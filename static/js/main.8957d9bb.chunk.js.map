{"version":3,"sources":["utils.js","useDB.js","parsers.js","components/TagAllDropDown.js","components/IntentAllDropDown.js","components/SkillAllDropDown.js","components/ImportListsDropDown.js","components/Components.js","components/JSONTextEditor.js","LocalStorageUploadManager.js","components/ListAllDropDown.js","components/SearchInput.js","components/ListsManagerSearchBar.js","useListItemRow.js","components/SuggestionComponent.js","ListsManagerRow.js","useDBSingleKey.js","useListItemEditor.js","ListsManager.js","components/UtterancesManagerSearchBar.js","UtterancesManagerRow.js","UtterancesManager.js","useNluRow.js","NluExampleRow.js","components/EditorSearchBar.js","useNluEditor.js","NluExampleEditor.js","components/NavbarComponent.js","NluImportRow.js","NluImportEditor.js","export/createZip.js","export/exportJOVO.js","export/exportMycroft.js","export/RASATemplates.js","export/exportRASAMD.js","export/exportRASAJSON.js","export/index.js","export/exportJSON.js","components/DropDownComponent.js","NluSkillsEditor.js","SearchPage.js","App.js","serviceWorker.js","index.js","images/check.svg","images/thumb-up.svg","images/helpoverview.svg","images/singingman.svg","images/waiting.gif","images/thumb-down.svg","images/arrow-thick-left.svg","images/arrow-thick-right.svg"],"names":["RASA","slotTypes","autofillOptions","GoogleAssistant","Alexa","toSnakeCase","str","toLowerCase","replace","snakeToCamelCase","group","toUpperCase","camelToSnakeCase","letter","generateObjectId","Date","getTime","toString","Math","random","parentUrl","url","split","slice","join","splitSentences","text","final","splits","splitText","trim","length","push","uniquifyArray","a","Array","isArray","index","map","value","Object","keys","uniquifyArrayOfObjects","field","emptyIndex","concat","values","replaceEntities","example","entities","sort","b","start","offset","newExample","entity","type","end","diff","replaceEntitiesWithValues","replacement","reducer","state","action","parseInt","item","items","Error","useDB","database","databaseTable","useReducer","dispatch","localforageStorage","localforage","createInstance","name","storeName","getId","id","findKeyBy","k","loadAll","then","ipromises","key","Promise","iresolve","ireject","getItem","res","all","saveItem","console","log","isNewItem","setItem","found","listItem","listItemIndex","deleteItem","getIdForIndex","removeItem","setItems","clear","findBy","filter","matchFunction","filtered","i","cleanListItem","extractSynonym","parts","sortListSplits","sortExampleSplits","TagAllDropDown","props","Dropdown","as","ButtonGroup","Toggle","size","Button","Menu","style","display","onSubmit","e","preventDefault","tagAll","target","InputGroup","className","onChange","setTagAllValue","tagAllValue","variant","onClick","lookups","tagLookups","skillKey","Item","untagAll","marginLeft","IntentAllDropDown","intentAll","setIntentAllValue","intentAllValue","intentLookups","intentKey","SkillAllDropDown","skillSetAll","setSkillAllValue","skillAllValue","skillLookups","unskillAll","ImportListsDropDown","useState","importTo","importToValue","setImportToValue","float","importListTo","listsLookups","MatchesTallies","fontWeight","filteredItems","HelpMenu","marginRight","to","HelpText","src","helpSVG","width","height","alt","href","HelpTextImport","HelpTextAbout","HelpTextExport","NewFileButtons","match","FileSelector","FilesList","list","ListGroup","window","confirm","title","importExamples","listName","importLists","multiple","handleFileSelection","WithSelectedDropDowns","selectedTally","JSONTextEditor","setTitle","data","setText","isJson","setIsJson","json","setJson","editorMode","setEditorMode","editorOptions","setEditorOptions","params","itemId","useEffect","jsonParsed","JSON","parse","parentLink","linkParts","editorModeOptions","j","minHeight","theme","ace","history","mode","allowedModes","stringify","IndexPage","LocalStorageUploadManager","localforageStorageImport","localforageStorageLists","ev","results","forEach","result","file","parsed","generateSplits","newSplits","rasa_nlu_data","common_examples","cleanEntities","el","intent","tags","invocation","intents","l","phrases","phrase","inputs","inputKey","input","markerStart","indexOf","entityi","parseImportText","newTextSplits","textInner","synonym","lists","listKey","uniqueKeys","q","parseLists","allLists","allListsIndex","newListItem","setPageMessage","setTimeout","path","render","exact","iprops","ListAllDropDown","SearchInput","searchFilter","setSearchFilter","placeholder","ListsManagerSearchBar","topTagOptions","setTopTagOptions","topTagOptionss","setListFilterValue","unshift","selectedListTally","resetSelection","checkImage","selectAll","listFilterValue","createEmptyItem","useListItemRow","splitNumber","selectionState","setSelectionState","setTags","reactTags","React","createRef","tag","onTagDelete","newTags","splice","newItem","newTag","onTagAddition","updateExampleContent","content","updateExampleSynonym","selectItem","isSelected","deselectItem","SuggestionComponent","query","ListsManagerRow","position","textAlign","borderTop","borderRadius","marginTop","placeholderText","minQueryLength","maxSuggestionsLength","autoresize","allowNew","ref","suggestionComponent","suggestions","onDelete","onAddition","ret","singleKey","sortFunction","useListItemEditor","databaseKey","updateLists","useDBSingleKey","setFilteredItems","filteredItemsKeys","setFilteredItemsKeys","listRef","useParams","listId","useHistory","matchText","matchPicklist","itemKeys","location","pathname","val","tagValue","newItems","finalTags","saveItemWrap","current","resetAfterIndex","getItemSize","baseSize","innerWidth","deleteAll","RenderRow","saveNlu","ListsManager","updateFunctions","itemData","itemKey","itemCount","itemSize","renderEditor","UtterancesManagerSearchBar","utteranceTagsLookups","UtterancesManagerRow","UtterancesManager","updateUtterances","useNluRow","newEntity","setNewEntity","intentTitle","setIntentTitle","skills","setSkills","reactSkills","createSelection","createTextRange","selRange","collapse","moveStart","moveEnd","select","setSelectionRange","selectionStart","selectionEnd","focus","entityTypeChanged","entityNumber","newEntities","typeChanged","textSelection","startTextSelection","endTextSelection","isOverlapProblem","bypass","isOverlap","skill","onSkillDelete","newSkills","newSkill","onSkillAddition","diffPos","findFirstDiffPos","insertionLength","entityIndex","deletionLength","entityClicked","entityKey","entityType","document","getElementById","intentChanged","entityDelete","setSkill","NluExampleRow","textInput","setTextInput","intentOptions","entitiesDropdowns","entityOptions","entityLookups","textSelectionFrom","onFocus","onSelect","getSelection","EditorSearchBar","topskillOptions","setSkillFilterValue","setIntentFilterValue","intentFilterValue","skillFilterValue","useNluEditor","updateLookups","skillId","intentId","intentFilter","skillFilter","searchFilterBool","newIntent","intentValue","skillValue","heightPerLine","tagsPerLine","entitiesPerLine","skillsPerLine","tallyExtras","round","saveAll","lsItems","exampleItems","saveLSItems","saveLSItem","NluExampleEditor","NavbarComponent","ReactGA","pageview","astyle","paddingLeft","currentPage","pages","show","links","link","page","helpButton","helpComponent","Navbar","bg","message","top","left","border","background","padding","minWidth","fireImage","Text","right","waitingImage","zIndex","waiting","initialize","NluImportRow","thumbupImage","thumbdownImage","NluImportEditor","paddingRight","arrowthickleftImage","arrowthickrightImage","createZip","zipStructure","zip","JSZip","recurseZipStructure","files","options","base64","folders","folder","resolve","reject","generateAsync","exportJOVO","jovo","entityTypes","examples","entityTypeName","googleType","alexaType","dialogflow","alexa","synonyms","synonymsIndex","entityExtrasList","inputTypes","exportMycroft","listsStorage","modelFiles","combinedEntities","RASATemplates","config","credentials","endpoint","actions","single_action","actionName","domain","stories","session","generateFolderTree","nluContent","fileLookups","actionsContent","configContent","domainContent","credentialsContent","endpointsContent","actionFiles","storyData","folderTree","storyContent","exportFormats","exportFunction","utterancesStorage","usedLists","skillLists","utterances","utterancesLists","allUtterances","thisUtterance","utteranceLookups","exportJSON","blob","Blob","entityLists","entityValue","entityList","synonymsOut","nluOut","intentItem","rasaConfig","rasaCredentials","rasaEndpoint","domainActions","rasaActions","string","snake","substring","domainEntities","domainIntents","domainSlots","slots","domainSlotsMeta","slot","slotType","domainContentParts","rasaSession","line","utteranceKey","utterance","rasaStories","exportRASAMD","exportRASAJSON","DropDownComponent","filterValue","setFilterValue","optionKey","NluSkillsEditor","currentIntent","setCurrentIntent","setInvocation","entitiesForSkill","setEntitiesForSkill","listsForEntity","setListsForEntity","currentSkill","setCurrentSkill","listsManager","collatedItems","setCollatedItems","collatedTags","setCollatedTags","collatedCounts","setCollatedCounts","newSlotValue","setNewSlotValue","skillsStorage","loadSkill","err","forceReload","rasaExtraSlots","newSlot","addUtterance","utteranceListsLookups","utterancesLookups","utteranceStorage","entityName","updatedSkill","newCollatedItems","newCollatedCounts","newCollatedTags","publish","exportFormat","now","zipBody","saveAs","skillsList","utteranceTags","listItemKey","utteranceListTags","marginBottom","collatedIntent","useCurrentIntent","completionVariant","Badge","collatedEntity","listTags","listIndex","removeListFromSkillEntity","addListToSkillEntity","setAlexaEntityType","setGoogleAssistantEntityType","removeUtterance","removeUtteranceList","addUtteranceList","Tabs","defaultActiveKey","Tab","eventKey","slotAutofill","setRASASlotAutofill","setRASASlotType","deleteSlot","fontStyle","setRASAActions","setRASAConfig","setRASAStories","setRASACredentials","setRASAEndpoint","setRASASession","SearchPage","SiteMenu","App","setWaiting","pageMessage","setIntentLookups","setEntityLookups","setTagLookups","setSkillLookups","setListsLookups","setSelectedTally","setUtterancesLookups","setUtteranceListsLookups","setUtteranceTagsLookups","listTally","setListTally","setSelectedListTally","listTallyByList","setListTallyByList","selectedListTallyByList","setSelectedListTallyByList","startWaiting","stopWaiting","selected","distinct","self","newSelectedLists","newLists","tally","utteranceLists","utteranceIndex","component","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","ReactDOM","StrictMode","URL","process","origin","addEventListener","fetch","headers","response","contentType","get","status","ready","unregister","reload","checkValidServiceWorker","module","exports"],"mappings":"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","file":"static/js/main.8957d9bb.chunk.js","sourcesContent":["//const yaml = require('js-yaml');\n// FUNCTIONS \n\nconst RASA = {\n    slotTypes : {\n        'unfeaturized': {},\n        'text': {},\n        'bool': {},\n        'list': {},\n        'float': {'min_value':'int', 'max_value':'int'},\n        'categorical': {'values':'list'}\n    },\n    autofillOptions: ['Yes','No']\n}\n\n// https://cloud.google.com/dialogflow/docs/reference/system-entities\nconst GoogleAssistant = {\n    entityTypes: [\"@sys.date-time\",\"@sys.date\",\"@sys.date-period\",\"@sys.time\",\"@sys.time-period\",\"@sys.number\",\"@sys.cardinal\",\"@sys.ordinal\",\"@sys.number-integer\",\"@sys.number-sequence\",\"@sys.flight-number\",\"@sys.unit-area\",\"@sys.unit-currency\",\"@sys.unit-length\",\"@sys.unit-speed\",\"@sys.unit-volume\",\"@sys.unit-weight\",\"@sys.unit-information\",\"@sys.percentage\",\"@sys.temperature\",\"@sys.duration\",\"@sys.age\",\"@sys.currency-name\",\"@sys.unit-area-name\",\"@sys.unit-length-name\",\"@sys.unit-speed-name\",\"@sys.unit-volume-name\",\"@sys.unit-weight-name\",\"@sys.unit-information-name\",\"@sys.address\",\"@sys.zip-code\",\"@sys.geo-capital\",\"@sys.geo-country\",\"@sys.geo-country-code\",\"@sys.geo-city\",\"@sys.geo-state\",\"@sys.place-attraction\",\"@sys.airport\",\"@sys.location\",\"@sys.email\",\"@sys.phone-number\",\"@sys.person\",\"@sys.music-artist\",\"@sys.music-genre\",\"@sys.color\",\"@sys.language\",\"@sys.any\",\"@sys.url\"]\n}\n\n//https://developer.amazon.com/en-US/docs/alexa/custom-skills/slot-type-reference.html\",\nconst Alexa = {\n    entityTypes: [\"AMAZON.DATE\",\"AMAZON.DURATION\",\"AMAZON.FOUR_DIGIT_NUMBER\",\"AMAZON.NUMBER\",\"AMAZON.Ordinal\",\"AMAZON.PhoneNumber\",\"AMAZON.TIME\",\"AMAZON.SearchQuery\",\"AMAZON.Actor\",\"AMAZON.Airline\",\"AMAZON.Airport\",\"AMAZON.Anaphor\",\"AMAZON.Animal\",\"AMAZON.Artist\",\"AMAZON.Author\",\"AMAZON.Book\",\"AMAZON.City\",\"AMAZON.Color\",\"AMAZON.Corporation\",\"AMAZON.Country\",\"AMAZON.CreativeWorkType\",\"AMAZON.DayOfWeek\",\"AMAZON.FictionalCharacter\",\"AMAZON.FirstName\",\"AMAZON.Food\",\"AMAZON.Genre\",\"AMAZON.Language\",\"AMAZON.Month\",\"AMAZON.Movie\",\"AMAZON.MusicAlbum\",\"AMAZON.MusicGroup\",\"AMAZON.Musician\",\"AMAZON.MusicRecording\",\"AMAZON.Person\",\"AMAZON.RadioChannel\",\"AMAZON.Region\",\"AMAZON.RelativePosition\",\"AMAZON.Room\",\"AMAZON.Sport\",\"AMAZON.StreetName\",\"AMAZON.TVSeries\",\"AMAZON.VideoGame\",\"AMAZON.VisualModeTrigger\"]\n}\n\n\nfunction toSnakeCase(str) {\n    return str.toLowerCase().replace(/[^a-z]/g, '_').replace('__','_')\n}\n\nconst snakeToCamelCase = (str) => str.replace(\n    /([-_][a-z])/g,\n    (group) => group.toUpperCase()\n                    .replace('-', '')\n                    .replace('_', '')\n);\n\nconst camelToSnakeCase = str => str.replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`);\n\n\n\nfunction generateObjectId() {\n    var timestamp = (new Date().getTime() / 1000 | 0).toString(16);\n    return timestamp + 'xxxxxxxxxxxxxxxx'.replace(/[x]/g, function() {\n        return (Math.random() * 16 | 0).toString(16);\n    }).toLowerCase();\n}\n   \nfunction parentUrl(url) {\n    return url.split(\"/\").slice(0,-1).join(\"/\") \n}\n\nfunction concatText(text,words) {\n   let parts = text.split(' ')\n   let shorter = parts.slice(0,20).join(' ')\n   return (shorter.length < text.length) ? shorter + '...' : shorter;\n}\n\nfunction splitSentences(text) {\n      var final = []\n      if (text) {\n          // split by newline and full stop\n         var splits = text.split('\\n').join('::::').split('.').join('::::').split('::::') //.map(function(value) { return value.trim()})\n        // trim all splits\n        for (var splitText in splits) {\n            if(splitText.trim().length > 0) final.push(splits[splitText])\n        }\n     }\n     return final;\n}\n\n\n    \n    function findFirstDiffPos(a, b) {\n      if (a === b) return -1;\n      for (var i=0; a[i] === b[i]; i++) {}\n      return i;\n    }\n    \n    function uniquifyArray(a) {\n        //console.log(['UNIQARRAY',a])\n        if (Array.isArray(a)) {\n            var index = {}\n            a.map(function(value) {\n                index[value] = true \n                return null\n            })\n            return Object.keys(index)\n        } else {\n            return []\n        }\n    }\n\n    function uniquifyArrayOfObjects(a,field) {\n         if (Array.isArray(a)) {\n             var index = {}\n            var emptyIndex = null\n            a.map(function(value) {\n                if (value) {\n                    if (value[field]) {\n                        index[value[field]] = value \n                    } else {\n                        emptyIndex = value\n                    }\n                }\n                return null\n            })\n            if (emptyIndex) return [emptyIndex].concat(Object.values(index))\n            else return Object.values(index)\n        } else {\n            return []\n        }\n    }\n    function replaceEntities(example,entities) {\n        // replace entity values with {entityName}\n        // first sort entities by start key\n        entities = entities.sort(function(a,b) {\n          if (a.start < b.start) return -1\n          else return 1  \n        })\n        var offset = 0\n        var newExample = example\n        entities.map(function(entity) {\n            newExample = newExample.slice(0,entity.start + offset)+\"{\"+entity.type+\"}\"+newExample.slice(entity.end + offset)\n            var diff = (entity.end - entity.start) - (entity.type.length + 2)\n            offset -= diff\n            return null\n        })\n        return newExample\n    }\n    \n    function replaceEntitiesWithValues(example,entities) {\n        // replace entity values with {entityName}\n        // first sort entities by start key\n        if (example && Array.isArray(entities)) {\n                entities = entities.sort(function(a,b) {\n              if (a.start < b.start) return -1\n              else return 1  \n            })\n            var offset = 0\n            var newExample = example\n            entities.map(function(entity) {\n                var replacement = \"[\"+entity.value+\"](\"+entity.type+\")\"\n                newExample = newExample.slice(0,entity.start + offset)+replacement+newExample.slice(entity.end + offset)\n                var diff = (entity.end - entity.start) - (replacement.length)\n                offset -= diff\n                return null\n            })\n            return newExample\n        } else {\n            return example\n        }\n    }\n    \n    \nexport {generateObjectId, parentUrl, concatText , findFirstDiffPos, splitSentences,uniquifyArray, uniquifyArrayOfObjects, replaceEntities,replaceEntitiesWithValues,  RASA, GoogleAssistant, Alexa, snakeToCamelCase, camelToSnakeCase, toSnakeCase }\n","import {useReducer} from 'react';\nimport {generateObjectId} from './utils'\nimport localforage from 'localforage'\n\n// handle list updates with minimum disruption to top level items\nfunction reducer(state, action) {\n    const index = parseInt(action.index)\n switch (action.type) {\n    case \"append\":\n      if (action.item) {\n        return [...state, action.item];\n      } else return state\n    case \"prepend\":\n      if (action.item) {\n        return [action.item, ...state];\n      } else return state\n    case \"insert\":\n      if (action.item && typeof index === \"number\" ) {\n          if (state.length > 0) {\n              return [\n                ...state.slice(0, index),\n                action.item,\n                ...state.slice(index)\n              ];\n          } else return state\n        } else return state\n    case \"remove\":\n      if (typeof index === \"number\" ) {\n          return [\n            ...state.slice(0, index),\n            ...state.slice(index + 1)\n          ];\n       } else return state \n    case \"update\":\n       if (action.item && typeof index === \"number\" ) {\n           return  [\n            ...state.slice(0, index),\n            action.item,\n            ...state.slice(index + 1)\n          ];\n        } else return state \n    case \"replaceall\":\n        if (typeof action.items === \"object\") {\n            return action.items\n        } else return state\n    default:\n      throw new Error('Invalid reduction in useDB');\n  }\n}\n   \n\n// state manager with local storage backing\nexport default function useDB(database, databaseTable) {\n     const [items, dispatch] = useReducer(reducer,[]);\n     var localforageStorage = localforage.createInstance({\n       name: database ? database : \"localstoragemanager\",\n       storeName   : databaseTable ? databaseTable : 'data',\n     });\n\n    function getId(item) {\n        if (item && item.id) {\n            return item.id\n        } else {\n            throw new Error(\"Missing ID value in getId\")\n        }\n    }\n    function getIdForIndex(index) {\n        if (items && items[index] && items[index].id) {\n            return items[index].id\n        } else {\n            throw new Error(\"Missing ID value in getIdForIndex\")\n        }\n    }\n    \n\n    function loadAll() {\n        localforageStorage.keys().then(function(keys) {\n            var ipromises = []\n            keys.map(function(key) {\n                ipromises.push(new Promise(function(iresolve,ireject) {\n                   localforageStorage.getItem(key).then(function(res) {\n                       iresolve(res)\n                   })\n                }))\n                return null\n            })\n            Promise.all(ipromises).then(function(res) {\n                dispatch({ type: \"replaceall\", items: res });\n            })\n        })\n        \n    }\n\n    \n    // save or create\n    function saveItem(item,index) {\n        if (item) {\n            console.log(['SAVEDB',item,index])\n            // update sources and save text in seperate localstorage\n            // ensure id\n            var isNewItem = false;\n            if (!item.id) {\n                isNewItem = true;\n                item.id = generateObjectId()\n            }\n            localforageStorage.setItem(item.id,item)\n            if (isNewItem) {\n                dispatch({ type: \"prepend\",item: item });\n            } else {\n                if (items) {\n                    var found = null\n                    items.map(function(listItem,listItemIndex) {\n                        if (listItem.id === item.id) {\n                            found = listItemIndex\n                        } \n                        return null\n                    })\n                    if (found != null) {\n                        dispatch({ type: \"update\",item: item , index: found});\n                    } else {\n                        dispatch({ type: \"prepend\",item: item });\n                    }\n                } \n            }  \n        }\n    }\n    \n    function findBy(field,value) {\n        var key = findKeyBy(field,value)\n        if (key) return items[key];\n        return null\n    }\n    \n    function findKeyBy(field,value) {\n        for (var k in items) {\n            if (items[k] && items[k][field] === value) return k\n        }\n        return null\n    }\n\n\n    function setItemsWrap(items) {\n        localforageStorage.clear().then(function() {\n            dispatch({ type: \"replaceall\", items: items})\n            if (items) {\n                items.map(function(item) { localforageStorage.setItem(getId(item),item); return null})\n            }\n        })\n        \n    }\n    \n    function deleteItem(index) {\n        var id = getIdForIndex(index)\n        if (id) {\n            localforageStorage.removeItem(id).then(function() {\n                dispatch({ type: \"remove\", index: index})\n            })\n        }\n        \n    }\n    \n    function filter(matchFunction) {\n        var filtered = []\n        if (matchFunction) {\n            items.map(function(item,i) {\n              if (matchFunction(item)) {\n                  filtered.push(item)\n              }  \n              return null\n            })\n        }\n        return filtered\n        \n    }\n    \n    return {getId:getId, loadAll:loadAll, saveItem:saveItem, deleteItem:deleteItem , items:items, setItems:setItemsWrap, findKeyBy:findKeyBy, findBy:findBy, filter: filter}\n    \n}\n","import {splitSentences, generateObjectId} from './utils'\n\nfunction cleanListItem(text) {\n    return text ? text.replace(/[^0-9a-z ,]/gi, '') : ''\n}\n\nfunction extractSynonym(text) {\n    if (text) { \n        var parts = text.split(':')\n        if (parts.length > 1) {\n           return [parts[0],parts.slice(1).join(\":\")]   \n        } else {\n            return ['',text]\n        }\n    } else {\n        return ['','']\n    }\n}\n\nfunction sortListSplits(a,b) {\n    if (a.value < b.value) return -1;  else return 1;\n}\n\nfunction sortExampleSplits(a,b) {\n    if (a.example < b.example) return -1 ;else return 1;\n}\n\nfunction parseLists(text,listName) {\n        var key = listName ? listName : '___'\n        // plain text\n        function generateSplits() {\n            var newTextSplits=[]\n            const splits = splitSentences(text)\n            splits.map(function(textInner,i) {\n                var [synonym, value] = extractSynonym(textInner)\n                value = value.trim().replace(/[^0-9a-z ]/gi, '')\n                if (value && value.length > 0) {\n                    newTextSplits.push({'id':generateObjectId(), 'value':value,'synonym':synonym})\n                }\n                return null\n            })\n            return newTextSplits.sort(sortListSplits);\n        }\n        try {\n            var json = JSON.parse(text)\n            //  JSON ARRAY FORMAT\n            if (Array.isArray(json)) {\n                // value and optional synonyn\n                var lists = {}\n                //console.log(['LISTS',lists])\n                if (json.length > 0 && json[0].value && json[0].value.trim().length > 0) {\n                    for (var i in json) {\n                        var entity = json[i]\n                        if (entity.value && entity.value.trim().length > 0) {\n                            var listKey = entity.list ? entity.list : key\n                            //console.log(['reset push',listKey,lists])\n                            if (!lists[listKey]  ) {\n                                lists[listKey] = []\n                            }\n                            lists[listKey].push({'id':generateObjectId(), 'value':cleanListItem(entity.value),'synonym':entity.synonym})\n                        }\n                    }\n                    // now sort and uniquify each list\n                    \n                    Object.keys(lists).map(function(listKey) {\n                        var list = lists[listKey]\n                        var uniqueKeys = {}\n                        list.map(function(listItem) {\n                           uniqueKeys[listItem.value+':'+listItem.synonym] = listItem\n                           return null\n                        })\n                        lists[listKey] = Object.values(uniqueKeys).sort(sortListSplits)\n                        return null\n                    })\n                    \n                // array of text\n                } else {\n                    var newSplits=[]\n                    for (var q in json) {\n                        var textInner = json[q].trim().replace(/[^0-9a-z]/gi, '')\n                        if (textInner && textInner.length > 0) {\n                            const [synonym, value] = extractSynonym(textInner)\n                            newSplits.push({'id':generateObjectId(), 'value':value,'synonym':synonym, 'list':listName})\n                        }\n                    }\n                    lists[key] = newSplits.sort(sortListSplits)\n                }\n                //console.log(['LISTS',lists])\n                return lists\n                //return items.sort(sortListSplits) \n            // PLAIN TEXT LIST\n            }  else {\n                lists = {}\n                lists[key] = generateSplits() \n                return lists\n            }\n        } catch (e) {\n            console.log(e)\n            // TODO try for yaml\n            //try {\n              //const doc = yaml.safeLoad(text);\n              //console.log(doc);\n            //} catch (e) {\n               // finally text\n                lists = {}\n                lists[key] = generateSplits() \n                return lists\n            //}\n           \n        }  \n}\n\n\nfunction parseImportText(text) {\n        var items = []\n        function generateSplits() {\n            const splits = splitSentences(text)\n            var newSplits=[]\n            splits.map(function(text,i) {\n                if (text && text.trim().length > 0) {\n                 newSplits.push({'id':generateObjectId(), 'example':text,'intent':'',\"entities\":[], \"tags\":[]})\n                }\n                return null\n            })\n            return newSplits.sort(sortExampleSplits)\n        }\n        try {\n            var json = JSON.parse(text)\n            // RASA JSON FORMAT\n            if (json && json.rasa_nlu_data && json.rasa_nlu_data.common_examples) {\n                for (var i in json.rasa_nlu_data.common_examples) {\n                    var entity = json.rasa_nlu_data.common_examples[i]\n                    var cleanEntities = entity.entities && entity.entities.map(function(el,j) { return {type:el.entity, value:el.value, start:el.start, end:el.end} })\n                    if (entity.text && entity.text.trim().length > 0) {\n                        items.push({'id':generateObjectId(), 'example':entity.text,'intent':entity.intent,\"entities\":cleanEntities, tags:[]})\n                    }\n                }\n                return items.sort(sortExampleSplits)\n            // JOVO JSON { \"invocation\": \"my test app\", \"intents\": [{\"name\": \"HelloWorldIntent\",\"phrases\": [\"hello\",\"say hello\"]}] } ,\n            } else if (json && json.invocation && json.intents) {\n                for (var l in json.intents) {\n                    if (json.intents[l] && json.intents[l].phrases) {\n                        for (var k in json.intents[l].phrases) {\n                            if (json.intents[l].phrases[k] && json.intents[l].phrases[k].trim().length > 0)  {\n                                 var phrase = json.intents[l].phrases[k]\n                                 var entities = []\n                                if (json.intents[l].inputs) {\n                                    for (var inputKey in json.intents[l].inputs) {\n                                       var input = json.intents[l].inputs[inputKey]\n                                       //console.log([phrase,input.name])\n                                       const markerStart = phrase.indexOf(\"{\"+input.name+\"}\")\n                                       if (markerStart !== -1)  {\n                                           phrase = phrase.replace(\"{\"+input.name+\"}\",input.name)\n                                       }\n                                       var entityi = {type:input.name, value:input.name , start: markerStart , end: markerStart + input.name.length  }\n                                       entities.push(entityi)\n                                       return null\n                                    }\n                                }\n                                items.push({'id':generateObjectId(), 'example':phrase.trim(),'intent':json.intents[l].name,\"entities\": entities, tags: []})\n                            }\n                        }\n                    }\n                    //console.log(['JOVO IMPORT',items])\n                    //var entity = json.rasa_nlu_data.common_examples[i]\n                    //var cleanEntities = entity.entities && entity.entities.map(function(el,j) { return {type:el.entity, value:el.value, start:el.start, end:el.end} })\n                    //if (entity.text && entity.text.trim().length > 0) items.push({'id':generateObjectId(), 'example':entity.text,'intent':entity.intent,\"entities\":cleanEntities, tags:[]})\n                }\n                return items.sort(sortExampleSplits) //[items, intents, entities, tags]\n            // VANILLA JSON [{example:'',intent:'',entities:[{value:'',start:33,end:45}], tags:['dd']}]\n            } else if (json && json.length > 0 && json[0].example && json[0].example.trim().length > 0) {\n                for (var j in json) {\n                    var item = json[j]\n                    if (item) {\n                        if (item.example && item.example.trim().length > 0) items.push({'id':generateObjectId(), 'example':item.example,'intent':item.intent,\"entities\":item.entities && item.entities.length > 0 && item.entities[0].value ? item.entities : [], tags:item.tags ? item.tags : []})\n                    }\n                }\n                return items.sort(sortExampleSplits) \n            // PLAIN TEXT LIST\n            }  else {\n                return generateSplits()\n            }\n        } catch (e) {\n            console.log(e)\n            // TODO try for yaml\n            //try {\n              //const doc = yaml.safeLoad(text);\n              //console.log(doc);\n            //} catch (e) {\n               // finally text\n            return generateSplits()\n            //}\n           \n        }   \n    }\n    \nexport {parseImportText, parseLists}    \n    \n","import React from 'react';\nimport {Button, Dropdown, ButtonGroup, InputGroup} from 'react-bootstrap'\n\nconst TagAllDropDown = function(props) {\n    return <Dropdown  as={ButtonGroup}>\n          <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button   size=\"sm\" >{'Tag'} </Button>\n          <Dropdown.Menu>\n           <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.tagAll(e.target.value)}} >\n                <InputGroup>\n                  <input type=\"text\" className=\"form-control\" onChange={function(e) {props.setTagAllValue(e.target.value)}}\n                value={props.tagAllValue} />\n                <Button variant=\"success\" onClick={function(e) {props.tagAll(props.tagAllValue)}} >Add</Button>\n                </InputGroup>\n                \n              </form>\n              {props.lookups.tagLookups && props.lookups.tagLookups.sort().map(function(skillKey,i) {\n              return <Dropdown.Item key={i} value={skillKey}  >\n                <Button variant=\"success\" onClick={function(e) {props.setTagAllValue(skillKey); props.tagAll(skillKey)}} >Add {skillKey}</Button>\n                <Button variant=\"danger\" onClick={function(e) { props.untagAll(skillKey)}} style={{marginLeft: '0.5em'}}>Remove</Button></Dropdown.Item>\n    })}\n          </Dropdown.Menu>\n      </Dropdown>\n      \n              //return <Dropdown  as={ButtonGroup}>\n              //<Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n              //<Button   size=\"sm\" >{'Tag'} </Button>\n              //<Dropdown.Menu>\n               //<form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.tagAll(e.target.value)}} >\n                    //<div className=\"form-group\">\n                      //<input type=\"text\" className=\"form-control\" onChange={function(e) {props.setTagAllValue(e.target.value)}}\n                    //value={props.tagAllValue} />\n                    //</div>\n                  //</form>\n                  //{props.lookups.tagLookups && props.lookups.tagLookups.sort().map(function(tagKey,i) {\n                      //return <Dropdown.Item key={i} value={tagKey} onClick={function(e) {props.setTagAllValue(tagKey); props.tagAll(tagKey)}}  >{tagKey}</Dropdown.Item>\n                   //})}\n              //</Dropdown.Menu>\n          //</Dropdown>\n}\nexport default TagAllDropDown\n","import React from 'react';\nimport {Button, Dropdown, ButtonGroup} from 'react-bootstrap'\n\nconst IntentAllDropDown = function(props) {\n    return  <Dropdown  as={ButtonGroup}>\n              <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n              <Button   size=\"sm\" >{'Intent'} </Button>\n              <Dropdown.Menu>\n               <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.intentAll(e.target.value)}} >\n                    <div className=\"form-group\">\n                      <input type=\"text\" className=\"form-control\" onChange={function(e) {props.setIntentAllValue(e.target.value)}}\n                    value={props.intentAllValue} />\n                    </div>\n                  </form>\n                  {props.lookups.intentLookups && props.lookups.intentLookups.sort().map(function(intentKey,i) {\n                      return <Dropdown.Item key={i} value={intentKey} onClick={function(e) {props.setIntentAllValue(intentKey); props.intentAll(intentKey)}}  >{intentKey}</Dropdown.Item>\n                   })}\n              </Dropdown.Menu>\n          </Dropdown>\n}\nexport default IntentAllDropDown\n","import React from 'react';\nimport {Button, Dropdown, ButtonGroup, InputGroup} from 'react-bootstrap'\n\nconst SkillAllDropDown = function(props) {\n    return <Dropdown  as={ButtonGroup}>\n          <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button   size=\"sm\" >{'Skill'} </Button>\n          <Dropdown.Menu>\n           <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.skillSetAll(e.target.value)}} >\n                <InputGroup>\n                  <input type=\"text\" className=\"form-control\" onChange={function(e) {props.setSkillAllValue(e.target.value)}}\n                value={props.skillAllValue} />\n                <Button variant=\"success\" onClick={function(e) {props.skillSetAll(props.tagAllValue)}} >Add</Button>\n                </InputGroup>\n                \n              </form>\n              {props.lookups.skillLookups && props.lookups.skillLookups.sort().map(function(skillKey,i) {\n              return <Dropdown.Item key={i} value={skillKey}  >\n                <Button variant=\"success\" onClick={function(e) {props.setSkillAllValue(skillKey); props.skillSetAll(skillKey)}} >Add to {skillKey}</Button>\n                <Button variant=\"danger\" onClick={function(e) { props.unskillAll(skillKey)}} style={{marginLeft: '0.5em'}}>Remove</Button></Dropdown.Item>\n    })}\n          </Dropdown.Menu>\n      </Dropdown>\n      \n      \n    \n    //return <Dropdown  as={ButtonGroup}>\n          //<Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          //<Button   size=\"sm\" >{'Skill'} </Button>\n          //<Dropdown.Menu>\n           //<form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.skillSetAll(e.target.value)}} >\n                //<div className=\"form-group\">\n                  //<input type=\"text\" className=\"form-control\" onChange={function(e) {props.setSkillAllValue(e.target.value)}}\n                //value={props.skillAllValue} />\n                //</div>\n              //</form>\n              //{props.lookups.skillLookups && props.lookups.skillLookups.sort().map(function(skillKey,i) {\n              //return <Dropdown.Item key={i} value={skillKey} onClick={function(e) {props.setSkillAllValue(skillKey); props.skillSetAll(skillKey)}}  >{skillKey}</Dropdown.Item>\n    //})}\n          //</Dropdown.Menu>\n      //</Dropdown>\n}\nexport default SkillAllDropDown\n","import React, {useState} from 'react';\nimport {Button, Dropdown, ButtonGroup, InputGroup} from 'react-bootstrap'\n\nconst ImportListsDropDown = function(props) {\n    //console.log(props)\n    const [importToValue,setImportToValue] = useState(props.importTo ? props.importTo : '')\n    return <Dropdown style={{float:'right', marginLeft:'0.5em'}} variant=\"success\"  as={ButtonGroup}>\n          <Dropdown.Toggle split  size=\"md\" variant=\"success\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button variant=\"success\"  size=\"md\" >{'Import Entities as'} </Button>\n          <Dropdown.Menu>\n           <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.importListTo(importToValue)}} >\n                <div className=\"form-group\">\n                <InputGroup> \n                    <input type=\"text\" className=\"form-control\" onChange={function(e) {setImportToValue(e.target.value)}}\n                value={importToValue} />\n                    <Button size=\"sm\"  onClick={function(e) {props.importListTo(importToValue)}} >Import</Button>\n                </InputGroup>\n                </div>\n              </form>\n              {props && props.lookups && props.lookups.listsLookups && props.lookups.listsLookups.sort().map(function(skillKey,i) {\n              return <Dropdown.Item key={i} value={skillKey} onClick={function(e) {setImportToValue(skillKey); props.importListTo(skillKey)}}  >{skillKey}</Dropdown.Item>\n    })}\n          </Dropdown.Menu>\n      </Dropdown>\n}\nexport default ImportListsDropDown\n","/* global window */\nimport {Link} from 'react-router-dom'\nimport {Button, ListGroup } from 'react-bootstrap'\nimport React, {Fragment} from 'react';\nimport FileReaderInput from 'react-file-reader-input';\n\nimport TagAllDropDown from './TagAllDropDown'\nimport IntentAllDropDown from './IntentAllDropDown'\nimport SkillAllDropDown from './SkillAllDropDown'\n\nimport ImportListsDropDown from './ImportListsDropDown'\nimport helpSVG from '../images/helpoverview.svg'\n\nfunction MatchesTallies(props) {\n    return <span style={{float:'left', fontWeight:'bold'}} >&nbsp;{props.filteredItems.length}/{props.items.length} matches </span>\n}\n\nfunction HelpMenu(props) {\n    return <div>\n        <Link style={{marginRight:'1em'}} to=\"/help\" ><Button>Home</Button></Link>\n        <Link style={{marginRight:'1em'}} to=\"/helpimport\" ><Button>Import</Button></Link>\n        <Link style={{marginRight:'1em'}} to=\"/helpexport\" ><Button>Export</Button></Link>\n        <Link style={{marginRight:'1em'}} to=\"/helpabout\" ><Button>About</Button></Link>\n    </div>\n}\n\nfunction HelpText(props) { \n    return <div style={{marginLeft:'0.5em'}}>\n        <HelpMenu/>\n        <h1>NLU tool</h1>\n        <img src={helpSVG} style={{width: '80%', height:'15em' }} alt=\"Help Overview\"/>\n        <div>This tool is intended to help collect open licensed NLU data. Specifically, it captures sentences with related intent and entity maps.</div>\n        <div>Examples can be tagged for organisation and collected into your own skills for export into various NLU training data formats including RASA, JOVO (Alexa, Google), Mycroft and native JSON.</div>\n        <hr/>\n        <div>This tool is a Progressive Web Application. It works without the Internet. All data is stored locally in your web browser. Source Code at <a target=\"_new\" href=\"https://github.com/syntithenai/opennludata\" >Github</a></div>\n        <div>React window is used to allow the tool to work with tens of thousands of example and entity records.</div>\n        <div>When the Internet is available, <b>this site uses Google Analytics to measure engagement and improve future versions.</b></div>\n       <hr/>\n       \n        <p>Create <Link to=\"/sources\" ><Button>Sources</Button></Link> from pasted text or uploaded files.</p>\n        <p>Use the <Link to=\"/import\" ><Button>Import</Button></Link> page to break text into sentences and create NLU example records.</p>\n        <p><Link to=\"/examples\" ><Button>Organise</Button></Link> your examples using tags and cleanup untagged examples.</p>\n        <p><Link to=\"/search\" ><Button>Search </Button></Link> the community database of NLU example records.</p>\n        <p><Link to=\"/skills\" ><Button>Collect </Button></Link> examples into a skill for export in various training formats.</p>\n        </div>\n}\n\nfunction HelpTextImport(props) { \n    return <div style={{marginLeft:'0.5em'}}>\n    <HelpMenu/>\n            <h1>Importing Data</h1>\n            <div>This tool can import files two types of data, entities and intents.\n            <ul>\n                <li><h3>Entity Values</h3>\n                    \n                </li>\n                <li><h3>Intent Examples</h3>\n                \n                </li>\n            </ul>\n            \n            </div>\n            <hr/>\n        </div>\n}\n\nfunction HelpTextAbout(props) { \n    return <div style={{marginLeft:'0.5em'}}>\n    <HelpMenu/>\n            <h1>About</h1>\n<br/>\n            <div><h3>Bugs/Feedback</h3>Please share any feedback on the <a target=\"_new\" href=\"https://github.com/syntithenai/opennludata/issues\" >Github Issues Page</a></div>\n            <br/>\n             <div>The source code for this tools is available under an MIT Open Source Licence. It is built using create-react-app with localForage for cross platform local persistence.</div>\n            <hr/>\n            <div>MIT Licenced Open Source Licence  - CopyLeft Steve Ryan (syntithenai@gmail.com)</div>\n            \n             <div>Icons from  The Noun Project and others.</div>\n             <ul>\n             <li>Man Singing by Gan Khoon Lay from  <a href='https://thenounproject.com/term/man-singing/642288/' target=\"_new\" >The Noun Project</a></li>\n             <li>Head by hunotika from <a href='https://thenounproject.com/term/head/184237/' target=\"_new\" >The Noun Project</a></li>\n             </ul>\n            <hr/>\n        </div>\n}\n\nfunction HelpTextExport(props) { \n    return <div style={{marginLeft:'0.5em'}}>\n    <HelpMenu/>\n            <h1>Exporting</h1>\n            <div>This tool can currently export to a number of formats including\n            <ul>\n                <li>Native JSON format</li>\n                <li>Mycroft intents and entities for Padatious NLU</li>\n                <li>RASA training data</li>\n                <li>JOVO model files</li>\n            </ul>\n            </div>\n\n        </div>\n}\n\n\nfunction NewFileButtons(props) {\n    return <span>\n        <Link to={props.match.url + '/text'} style={{float:'right'}} ><Button>Paste Text</Button></Link>\n        <FileSelector {...props}/>   \n    </span>\n}\n\nfunction FilesList(props) {\n    //console.log(['man fl ',props])\n     const { items} = props  \n     if (items) {\n       const list = Object.values(items).map(function(item,i) {\n            return <ListGroup.Item  key={i}  >\n                   <Button style={{float:'right', marginLeft:'0.5em'}} variant=\"danger\" onClick={function(e) {if(window.confirm('Really delete source '+items[i].title)) props.deleteItem(i)}} >Delete</Button>\n                   <Link to={props.match.url+\"/text/\"+item.id} ><Button style={{float:'right',marginLeft:'0.5em'}}  >Edit</Button></Link>\n                   <Button style={{float:'right', marginLeft:'0.5em'}} variant=\"success\" onClick={function(e) { props.importExamples(items[i]) }}    >Import Intents</Button>\n                   <ImportListsDropDown lookups={props.lookups} importListTo={function(listName) {props.importLists(items[i],listName)}} importTo={items[i].title} />\n                   <span style={{width:'90%'}}  >{item.title}</span>\n               </ListGroup.Item>\n        })\n        return <ListGroup>{list}</ListGroup>\n    } else {\n        return null\n    }\n}\n\nfunction ListsList(props) {\n     const { items} = props  \n     if (items) {\n       const list = Object.values(items).map(function(item,i) {\n            return <ListGroup.Item  key={i}  >\n                   <Button style={{float:'right', marginLeft:'0.5em'}} variant=\"danger\" onClick={function(e) {if(window.confirm('Really delete list '+items[i].title)) props.deleteItem(i)}} >Delete</Button>\n                   <Link to={props.match.url+\"/text/\"+item.id} ><Button style={{float:'right',marginLeft:'0.5em'}}  >Edit</Button></Link>\n                   <span style={{width:'90%'}}  >{item.title}</span>\n               </ListGroup.Item>\n        })\n        return <ListGroup>{list}</ListGroup>\n    } else {\n        return null\n    }\n}\n\nfunction FileSelector(props) {\n    return <form onSubmit={function(e) {e.preventDefault()}} style={{float:'right'}}>\n            <FileReaderInput multiple as=\"binary\" id=\"my-file-input\"\n                             onChange={props.handleFileSelection}>\n              <Button style={{ marginRight:'0.5em'}} >Select files</Button>\n            </FileReaderInput>\n          </form>\n}\n\nfunction WithSelectedDropDowns(props) {\n    return <Fragment>\n        <span>With {props.lookups.selectedTally} selected&nbsp;</span>\n               \n        <SkillAllDropDown skillSetAll={props.skillSetAll} skillAllValue={props.skillAllValue}  setSkillAllValue={props.setSkillAllValue}  lookups={props.lookups} untagAll={props.untagAll} unskillAll={props.unskillAll} />\n        <IntentAllDropDown intentAll={props.intentAll} intentAllValue={props.intentAllValue} setIntentAllValue={props.setIntentAllValue}  lookups={props.lookups} untagAll={props.untagAll} unskillAll={props.unskillAll} />\n        <TagAllDropDown tagAll={props.tagAll} tagAllValue={props.tagAllValue} setTagAllValue={props.setTagAllValue}  lookups={props.lookups} untagAll={props.untagAll} unskillAll={props.unskillAll} />\n    </Fragment>\n\n}\n\nexport { MatchesTallies,  HelpTextImport,HelpTextExport,HelpTextAbout,HelpText, NewFileButtons, FilesList, ListsList, FileSelector, WithSelectedDropDowns}\n","import {Link} from 'react-router-dom'\nimport {Button,  Dropdown, ButtonGroup } from 'react-bootstrap'\nimport React, {useState, useEffect} from 'react';\n//import FileReaderInput from 'react-file-reader-input';\nimport {generateObjectId, parentUrl} from '../utils'\nimport { JsonEditor } from 'jsoneditor-react';\nimport 'jsoneditor-react/es/editor.min.css';\nimport ace from 'brace';\nimport 'brace/mode/json';\nimport 'brace/theme/github';\n//import useDB from './useDB'\n//import useDBSingleKey from './useDBSingleKey'\n//import {parseImportText} from './utils'\n//import localforage from 'localforage'\n//import {NewFileButtons, FileSelector, FilesList} from './Components'\n\nexport default function JSONTextEditor(props) {\n    const [title,setTitle] = useState(props.item && props.item.title ? props.item.title : '')\n    const [text, setText ] = useState(props.item && props.item.data ? props.item.data : '') \n    const [isJson, setIsJson ] = useState(false) \n    const [json, setJson ] = useState([]) \n    const [editorMode, setEditorMode] = useState('json')\n    const [editorOptions, setEditorOptions] = useState(['json','text'])\n    \n    const id = props.match.params.itemId ? props.match.params.itemId  : generateObjectId()\n    const { findKeyBy} = props  \n    const index = findKeyBy('id',id)\n   \n    \n    useEffect(() => {\n        try {\n            if ((text[0] === \"[\" && text[text.length - 1] === \"]\") || (text[0] === \"{\" && text[text.length - 1] === \"}\")) {\n                var jsonParsed = JSON.parse(text)\n                setJson(jsonParsed)\n                setIsJson(true)\n                setEditorOptions(['json','text'])\n                setEditorMode('json')\n            } else {\n                setIsJson(false)\n                setEditorOptions(['text'])\n                setEditorMode('text')\n            }\n        } catch (e) {\n            setIsJson(false)\n            setEditorOptions(['text'])\n            setEditorMode('text')\n        }\n    \n    },[text])\n     \n    var parentLink = parentUrl(props.match.url)\n    var linkParts = props.match.url.split(\"/\")\n    // link up two where id is present\n    if (linkParts[linkParts.length -1] !== \"text\") {\n       parentLink = parentUrl(parentUrl(props.match.url)) \n    }\n    var editorModeOptions = editorOptions.map(function(value,j) {\n      return <Dropdown.Item key={j} value={value} onClick={function(e) {setEditorMode(value); }}  >{value}</Dropdown.Item>\n   })\n    \n    return <div style={{minHeight:'60em'}}>\n          <Dropdown variant='info'  as={ButtonGroup}>\n\n          <Dropdown.Toggle variant='info'  split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button variant='info'   size=\"sm\"  >\n          <b>{editorMode}</b>\n          </Button>\n          <Dropdown.Menu>\n              {editorModeOptions}\n          </Dropdown.Menu>\n        </Dropdown>\n\n            <span style={{float:'right'}} >\n                \n                {(text && title) && <Link to={parentLink} ><Button onClick={function(e) {props.saveItem({id:id,title:title,data:text},index)}} variant='success' >Save</Button></Link>}\n                {!(text && title) && <Button variant='secondary' >Save</Button>}\n                \n                <Link  to={parentLink} ><Button variant=\"danger\" >Cancel</Button></Link>\n            </span>\n            <label>&nbsp;Title <input size={60}  type='text' onChange={function(e) { setTitle(e.target.value)}}  value={title} /></label>\n            {(!isJson || editorMode === \"text\") && <textarea style={{marginLeft: '0.2em', height:'100%', minHeight:'60em', width:'98%'}}  onChange={function(e) { setText(e.target.value)}}  value={text} ></textarea>}\n            {(isJson && editorMode === \"json\") && <div style={{marginLeft: '0.2em', height:'100%', minHeight:'60em', width:'98%'}} >\n                <JsonEditor\n                value={json}\n                theme={\"ace/theme/github\"}\n                ace={ace}\n                history={true}\n                mode={'code'}\n                allowedModes={['tree','code']}\n                onChange={function(value) { setText(JSON.stringify(value))}}\n            /></div>}\n           \n    </div>\n}\n","import {Route} from 'react-router-dom'\nimport React, {useEffect} from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport useDB from './useDB'\nimport {parseImportText, parseLists} from './parsers'\nimport localforage from 'localforage'\nimport {NewFileButtons, FilesList} from './components/Components'\nimport JSONTextEditor from './components/JSONTextEditor'\nimport {generateObjectId, uniquifyArray } from './utils'\n\n// COMPONENTS\nfunction IndexPage(props) {\n    //console.log(['man index ',props])\n    return <div>\n                 <NewFileButtons {...props} />\n                 <h1>Sources</h1>\n                 <FilesList {...props} />\n            </div>\n}\n\nexport default function LocalStorageUploadManager(props) {\n    //console.log('man')\n    //console.log(props)\n     var localforageStorageImport = localforage.createInstance({\n       name: 'nlutool',\n       storeName   :'import',\n     });\n     var localforageStorageLists = localforage.createInstance({\n       name: 'nlutool',\n       storeName   :'lists',\n     });\n\n\n     const {loadAll, saveItem, deleteItem ,items, findKeyBy, findBy} = useDB('nlutool','sources');\n    \n    // just on mount \n    useEffect(() => {\n        loadAll()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n    \n    \n    \n    function handleFileSelection(ev, results) {\n        ev.preventDefault()\n        if (results) {\n            results.forEach(result => {\n              const [e, file] = result;\n               var item = {id:null, data:e.target.result, title:file.name}\n                saveItem(item)\n            });\n            \n        }\n    }    \n  \n    function importExamples(item) {\n         //console.log(['import examples',item])\n        if (item && item.id && item.data) {\n            var parsed = parseImportText(item.data)\n            localforageStorageImport.getItem('alldata').then(function(res) {\n                //console.log('IMPORT MERGE',res,parsed,[].concat(parsed,res))\n                localforageStorageImport.setItem('alldata',[].concat(parsed,res)) \n                props.history.push('/import') \n            })\n          } else {\n            throw new Error(\"Missing import data\")\n        }\n    }\n    \n    function importLists(item,title) {\n        //console.log(['import lists',item,title])\n        if (item && item.id && item.data) {\n            var parsed = parseLists(item.data)\n            //console.log(['import lists',parsed])\n            if (parsed) {\n                localforageStorageLists.getItem('alldata').then(function(allLists) {\n                    //console.log(['got list ',allLists])\n                    var allListsIndex = {}\n                    if (!allLists) {\n                        allLists = []\n                    }\n                    // index by value\n                    allLists.map(function(listItem) {\n                        if (listItem && listItem.value && listItem.value.trim().length > 0)  {\n                            allListsIndex[listItem.value] = listItem\n                        }\n                        return null\n                    })\n                    // update incoming list values\n                    Object.keys(parsed).map(function(listName,i) {\n                        var list = parsed[listName]  \n                        if (list) {\n                            list.map(function(listItem,listItemIndex) {\n                                var newListItem = listItem;\n                                // already there, just update tags\n                                if (allListsIndex[listItem.value]) {\n                                    if (listName !== '___') {\n                                        if (listItem.tags) newListItem.tags.push(listName)\n                                        else newListItem.tags = [listName]\n                                    } else {\n                                        newListItem.tags = []\n                                    }\n                                    if (title && title.trim().length > 0) newListItem.tags.push(title.trim())\n                                    // uniquify and sort tags\n                                    newListItem.tags = uniquifyArray(newListItem.tags).sort()\n                                    //var tagsClean = {}\n                                    //newListItem.tags.map(function(tag) {\n                                        //tagsClean[tag] = true \n                                    //})\n                                    //newListItem.tags = Object.keys(tagsClean).sort()\n                                    \n                                    allListsIndex[newListItem.value] = newListItem\n                                // new list item    \n                                } else {\n                                    newListItem = {id: generateObjectId() , value: newListItem.value, synonym: newListItem.synonym ? newListItem.synonym : '', tags:[]}\n                                    \n                                    if (listName !== '___') {\n                                        if (listItem.tags) newListItem.tags.push(listName)\n                                        else newListItem.tags = [listName]\n                                    }\n                                    if (title && title.trim().length > 0) newListItem.tags.push(title.trim())\n                                    // uniquify and sort tags\n                                    newListItem.tags = uniquifyArray(newListItem.tags).sort()\n                                    \n                                    allListsIndex[newListItem.value] = newListItem\n                                }\n                                return null\n                            })\n                        }\n                        return null\n                    })\n                    //console.log('IMPORT MERGE',res,parsed,[].concat(parsed,res))\n                    localforageStorageLists.setItem('alldata',Object.values(allListsIndex)) \n                    props.history.push('/lists') \n                    //props.setPageMessage(<div><b>sdfsdf</b><br/><b>sdfsdf</b><br/><b>sdfsdf</b><br/><b>sdfsdf</b><br/></div>)\n                    props.setPageMessage('Imported '+Object.keys(allListsIndex).length +' entities into the list '+ title)\n                    setTimeout(function() {\n                        props.setPageMessage('')\n                    },2000)\n                })\n            } else {\n                throw new Error(\"Failed import\")\n            }\n        } else {\n            throw new Error(\"Missing import data\")\n        }\n    }\n    \n    //console.log(['RENDER LOMAN',props])\n    return (\n        <div className=\"LocalStorageUploadManager\" >\n            <Route \n                path={[`${props.match.path}/text/:itemId?`, `${props.match.path}/text`]}  \n                render={(props) => <JSONTextEditor {...props} \n                    item={findBy('id',props.match.params.itemId)} \n                    saveItem={saveItem} deleteItem={deleteItem} findKeyBy={findKeyBy} \n                    \n                />}     \n            />\n            <Route {...props} exact path={props.match.path} \n                render={function(iprops) { return  <IndexPage {...props} \n                    items={items}\n                    deleteItem={deleteItem} saveItem={saveItem} importExamples={importExamples} importLists={importLists}\n                    handleFileSelection={handleFileSelection}\n                />}} \n            />\n\n        </div>\n    );\n}\n","import React from 'react';\nimport {Button, Dropdown, ButtonGroup, InputGroup} from 'react-bootstrap'\n\nconst ListAllDropDown = function(props) {\n    return <Dropdown  as={ButtonGroup}>\n          <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button   size=\"sm\" >{'Set List'} </Button>\n          <Dropdown.Menu>\n           <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.tagAll(e.target.value)}} >\n                <InputGroup>\n                  <input type=\"text\" className=\"form-control\" onChange={function(e) {props.setTagAllValue(e.target.value)}}\n                value={props.tagAllValue} />\n                <Button variant=\"success\" onClick={function(e) {props.tagAll(props.tagAllValue)}} >Add</Button>\n                </InputGroup>\n                \n              </form>\n              {props.lookups.listsLookups && props.lookups.listsLookups.sort().map(function(skillKey,i) {\n              return <Dropdown.Item key={i} value={skillKey}  >\n                <Button variant=\"success\" onClick={function(e) {props.setTagAllValue(skillKey); props.tagAll(skillKey)}} >Add to {skillKey}</Button>\n                <Button variant=\"danger\" onClick={function(e) { props.untagAll(skillKey)}} style={{marginLeft: '0.5em'}}>Remove</Button></Dropdown.Item>\n    })}\n          </Dropdown.Menu>\n      </Dropdown>\n}\nexport default ListAllDropDown\n","import React from 'react'\nconst SearchInput = function({searchFilter,setSearchFilter}) {\n    return (<input style={{marginLeft:'0.5em'}}  type='text' value={searchFilter} \n            onChange={\n                function(e) {\n                    const filter = e.target.value\n                    setSearchFilter(filter); \n                }\n            } placeholder='Search' />)\n}\n    \nexport default SearchInput\n","import React, {useEffect, useState} from 'react';\n//import {Link} from 'react-router-dom'\nimport {Button, Dropdown, ButtonGroup} from 'react-bootstrap'\nimport SearchInput from './SearchInput'\nimport checkImage from '../images/check.svg'\n\n\nconst ListsManagerSearchBar = function(props) {\n    const [topTagOptions,setTopTagOptions] = useState([])\n    useEffect(() => {\n        //console.log(['kust nabager ',props.lookups.listsLookups])\n        var topTagOptionss = props.lookups.listsLookups && props.lookups.listsLookups.sort().map(function(listKey,i) {\n              return <Dropdown.Item key={i} value={listKey} onClick={function(e) {props.setListFilterValue(listKey)}}  >{listKey}</Dropdown.Item>\n        })\n        topTagOptionss.unshift(<Dropdown.Item key={'empty_key_value_empty'} value={''} onClick={function(e) {props.setListFilterValue('')}}  >&nbsp;</Dropdown.Item>)\n        topTagOptionss.push(<Dropdown.Item key={'Not In A List'} value={'Not In A List'} onClick={function(e) {props.setListFilterValue('Not In A List')}}  ><b>Not In A List</b></Dropdown.Item>)\n        setTopTagOptions(topTagOptionss)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.lookups])\n    \n    return <div>\n            {<span>\n            \n                {props.lookups.selectedListTally > 0 && <Button size=\"lg\"  onClick={function(e) { props.resetSelection(e) }} variant=\"success\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\" /></Button> }\n                {props.lookups.selectedListTally <= 0 && <Button size=\"lg\" onClick={function(e) { props.selectAll(e) }} variant=\"secondary\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Select\" /></Button> }\n                \n                \n           </span>}   \n            {<span style={{marginLeft:'0.4em'}}><SearchInput searchFilter={props.searchFilter} setSearchFilter={props.setSearchFilter} /></span>}   \n            {<Dropdown style={{marginLeft:'0.5em'}}  as={ButtonGroup}>\n                  <Dropdown.Toggle split   id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button  >{'List'+(props.listFilterValue ? ' - '+ props.listFilterValue : '')} </Button>\n                  <Dropdown.Menu>\n                      {topTagOptions}\n                  </Dropdown.Menu>\n                </Dropdown>}\n              \n              <Button  style={{marginLeft:'1em'}} variant=\"success\" onClick={function(e) {props.createEmptyItem(props.listFilterValue)}} >New Entity</Button>\n              <Button  style={{marginLeft:'1em'}} variant=\"primary\" onClick={function(e) {props.sort(function(a,b) { if (a.value < b.value) return -1; else return 1;})}} >Sort</Button>\n        </div>\n}\nexport default ListsManagerSearchBar\n","import React, {useState, useEffect} from 'react'\nimport {uniquifyArray, uniquifyArrayOfObjects} from './utils'\nfunction useListItemRow(item, saveItem, splitNumber, style) {\n    const [selectionState, setSelectionState] = useState({})\n    //const [newEntity, setNewEntity] = useState('')\n    // for ReactTags format using objects\n    const [tags, setTags] = useState([])\n    //console.log(['USENLUROW',splitNumber])\n    const reactTags = React.createRef()\n     // tags\n    useEffect(() => {\n        if (item.tags) setTags(item.tags.map(function(tag,i) {return {id:i, name:tag}}))\n    },[item])\n\n     function onTagDelete (i) {\n        const newTags = tags.slice(0)\n        newTags.splice(i, 1)\n        setTags(newTags)\n        var newItem = item\n        newItem.tags = newTags.map(function(newTag) { return newTag.name})\n        saveItem(newItem,splitNumber)\n      }\n     \n     function onTagAddition (tag) {\n         if (tag && tag.name.trim().length > 0) {\n            const newTags = [].concat(tags, tag)\n            setTags(uniquifyArrayOfObjects(newTags,'name').sort(function(a,b) {if (a.name > b.name) return 1; else return -1} ))\n            var newItem = item\n            newItem.tags = uniquifyArray(newTags.map(function(newTag) { return newTag.name})).sort()\n            saveItem(newItem,splitNumber)\n        }\n      }\n    \n    function updateExampleContent(content) {\n        //console.log(['UPDTEXT', item, content])\n        if (item && typeof content === \"string\") {\n            //console.log('UPDTEXTREAL')\n            const newItem = item //JSON.parse(JSON.stringify(item));\n            \n            newItem.value = content;\n            saveItem(newItem,splitNumber)\n        }\n    }\n    \n     function updateExampleSynonym(content) {\n        //console.log('UPDTEXT')\n        if (item && typeof content === \"string\") {\n            //console.log('UPDTEXTREAL')\n            const newItem = item //JSON.parse(JSON.stringify(item));\n            \n            newItem.synonym = content;\n            saveItem(newItem,splitNumber)\n        }\n    }\n    \n    \n    function selectItem(splitNumber) {\n        var newItem = item\n        item.isSelected = true;\n        console.log(['SELECT LIST ITEM',newItem,splitNumber])\n        saveItem(newItem,splitNumber)\n    }\n   \n    \n    function deselectItem(splitNumber) {\n        var newItem = item\n        item.isSelected = false;\n        console.log(['DESELECT LIST ITEM',newItem,splitNumber])\n        saveItem(newItem,splitNumber)\n    } \n    \n    return {    \n        selectionState, setSelectionState, tags, setTags, reactTags, onTagDelete, onTagAddition, updateExampleContent, updateExampleSynonym, selectItem, deselectItem\n    }\n    \n}\nexport default useListItemRow\n","import React from 'react';\nexport default function SuggestionComponent({ item, query }) {\n  return (\n    <span  id={item.id} className={item.name === query ? 'match' : 'no-match'}>\n      {item.name}\n    </span>\n  )\n}\n","/* global window */\nimport {Button } from 'react-bootstrap'\nimport React from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ReactTags from 'react-tag-autocomplete'\nimport useListItemRow from './useListItemRow'\nimport SuggestionComponent from './components/SuggestionComponent'\nimport checkImage from './images/check.svg'\n\nexport default function ListsManagerRow(props) {\n        const  {item, splitNumber , style} = props;\n       const {    \n            tags, reactTags, \n            onTagDelete, onTagAddition, updateExampleContent,updateExampleSynonym,  selectItem, deselectItem\n        } = useListItemRow(props.item, props.saveItem, props.splitNumber, props.style)\n            \n       \n       //var buttonImageStyle={color:'white', height:'2em'}\n       return item && <div style={style} className={splitNumber % 2 ? 'ListItemOdd' : 'ListItemEven'}>\n               <div style={{position:'relative', width: '100%', textAlign:'left',  borderTop: '2px solid black'}}>\n                   \n                   <div style={{float:'right'}} > \n                        <Button  variant=\"danger\"  size=\"sm\" style={{float:'right', fontWeight:'bold', borderRadius:'15px', marginTop:'0.2em'}} onClick={function(e) {if (window.confirm('Really delete')) {props.deleteItem(splitNumber,(item.id ? item.id : ''))}}} >X</Button>\n               \n                    </div>\n                   \n                  <div style={{float:'left'}}>\n                     {!item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"secondary\" onClick={function() {selectItem(splitNumber)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Select\"  /></Button>}\n                      {item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"success\" onClick={function() {deselectItem(splitNumber)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\"  /></Button>}\n                </div>\n                \n                <input style={{float:'left'}} size='25'   \n                       type='text'  value={item.value}  onChange={function(e) { updateExampleContent(e.target.value)}} />\n                    \n                     \n                   \n                     <label style={{float:'left', marginLeft:'0.5em'}} >Synonym <input size='15' type='text' value={item.synonym} onChange={function(e) {updateExampleSynonym(e.target.value)}} /></label>\n                     <label style={{float:'left', marginLeft:'0.5em'}} >\n                     <span  style={{float:'left', marginRight:'0.5em'}}>Lists </span>\n                     <span  style={{float:'left'}}>\n                       <ReactTags\n                        placeholderText=\"Add to list\"\n                        minQueryLength={0}\n                        maxSuggestionsLength={50}\n                        autoresize={false}\n                        allowNew={true}\n                        ref={reactTags}\n                        tags={tags}\n                        suggestionComponent={SuggestionComponent}\n                        suggestions={props.lookups.listsLookups.map(function(listName,i) {return {id: i, name: listName}})}\n                        onDelete={onTagDelete}\n                        onAddition={onTagAddition} /> \n                        </span>\n                    </label>\n                  </div> \n               \n                \n                 \n           \n      </div>\n}\n","// USE A SINGLE LOCALSTORAGE KEY FOR PERSISTENCE\n// this is much faster than using set/getItem for each item\n// workable for many thousands of rows\nimport { useEffect, useReducer} from 'react';\n\nimport {generateObjectId} from './utils'\nimport localforage from 'localforage'\n\n// handle list updates with minimum disruption to top level items\nfunction reducer(state, action) {\n    const index = parseInt(action.index)\n    //console.log(['REDUCE',action.type,action.index, action.item,action.items,state])\n    switch (action.type) {\n    case \"append\":\n      if (action.item) {\n        return [...state, action.item];\n      } else return state\n    case \"prepend\":\n      if (action.item) {\n        return [action.item,...state];\n      } else return state\n    case \"insert\":\n      if (action.item && typeof index === \"number\" ) {\n          if (state.length > 0) {\n              return [\n                ...state.slice(0, index),\n                action.item,\n                ...state.slice(index)\n              ];\n          } else return state\n        } else return state\n    case \"remove\":\n      if (typeof index === \"number\" ) {\n          return [\n            ...state.slice(0, index),\n            ...state.slice(index + 1)\n          ];\n       } else return state \n    case \"update\":\n       if (action.item && typeof index === \"number\" ) {\n           return  [\n            ...state.slice(0, index),\n            action.item,\n            ...state.slice(index + 1)\n          ];\n        } else return state \n    case \"replaceall\":\n        if (typeof action.items === \"object\") {\n            return action.items\n        } else return state\n    case \"sort\":\n    //console.log(['DISP SORT',action.sort])\n        if (typeof action.sort === \"function\") {\n            var ret = state.sort(action.sort)\n            //console.log(['DISP SORT ret',ret])\n            return [...ret]\n        } else return state\n    default:\n      throw new Error('Invalid reduction in useDBSingleKey');\n  }\n    \n}\n\n// state manager with local storage backing\nexport default function useDB(database, databaseTable,singleKey) {\n    if (!singleKey) singleKey = 'data'\n     const [items, dispatch] = useReducer(reducer,[]);\n     var localforageStorage = localforage.createInstance({\n       name: database ? database : \"localstoragemanager\",\n       storeName   : databaseTable ? databaseTable : 'single_key_data',\n     });\n\n    useEffect(function() {\n        localforageStorage.setItem(singleKey,items)  \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[items])\n\n    function getId(item) {\n        if (item && item.id) {\n            return item.id\n        } else {\n            throw new Error(\"Missing ID value in getId\")\n        }\n    }\n\n    function loadAll() {\n        localforageStorage.getItem(singleKey).then(function(res) {\n          //console.log(['loadall',database, databaseTable,singleKey,res])\n          dispatch({ type: \"replaceall\", items: res ? res : []});\n        })\n    }\n\n    \n    // save or create\n    function saveItem(item,index) {\n        //console.log(['save',item,index])\n        if (item) {\n            // update sources and save text in seperate localstorage\n            // ensure id\n            var isNewItem = false;\n            if (!item.id) {\n                isNewItem = true;\n                item.id = generateObjectId()\n            }\n             \n            if (isNewItem) {\n                dispatch({ type: \"prepend\",item: item });\n            } else {\n                if (items) {\n                    var found = null\n                    items.map(function(listItem,listItemIndex) {\n                        if (listItem.id === item.id) {\n                            found = listItemIndex\n                        } \n                        return null\n                    })\n                    if (found != null) {\n                        dispatch({ type: \"update\",item: item , index: found});\n                    } else {\n                        dispatch({ type: \"prepend\",item: item });\n                    }\n                } \n            }  \n            \n        }\n    }\n    \n    function findBy(field,value) {\n        var key = findKeyBy(field,value)\n        return items[key];\n    }\n    \n    function findKeyBy(field,value) {\n        for (var k in items) {\n            if (items[k] && items[k][field] === value) return k\n        }\n    }\n\n    function setItemsWrap(items) {\n        localforageStorage.clear().then(function() {\n            dispatch({ type: \"replaceall\", items: items})\n        })\n    }\n    \n    function sort(sortFunction) {\n        dispatch({ type: \"sort\", sort: sortFunction})\n    }\n    \n    function filter(matchFunction) {\n        var filtered = []\n        if (matchFunction) {\n            items.map(function(item,i) {\n              if (item && matchFunction(item)) {\n                  filtered.push(item)\n              } \n              return null \n            })\n        }\n        return filtered\n        \n    }\n    \n    function deleteItem(index) {\n        dispatch({ type: \"remove\", index: index})\n    }\n    return {getId:getId, loadAll:loadAll, saveItem:saveItem, deleteItem:deleteItem , items:items, setItems:setItemsWrap, findKeyBy:findKeyBy, findBy:findBy, filter: filter, sort: sort}\n    \n}\n","import React, {useState, useEffect} from 'react';\nimport useDBSingleKey from './useDBSingleKey'\nimport {useParams, useHistory} from 'react-router-dom'\n\nfunction useListItemEditor(database, databaseTable, databaseKey, updateLists) {\n    const {loadAll, saveItem, deleteItem , items, setItems, findKeyBy, filter, sort} = useDBSingleKey(database, databaseTable, databaseKey)\n    const [filteredItems, setFilteredItems] = useState([])\n    const [filteredItemsKeys, setFilteredItemsKeys] = useState([])\n    const [searchFilter, setSearchFilter] = useState('')\n    const [tagAllValue, setTagAllValue] = useState('')\n    const listRef = React.createRef()\n    //const [listFilterValue, setListFilterValue] = useState('')\n    \n    var params = useParams()\n    var listFilterValue = params.listId ? params.listId : '';\n    var history = useHistory()\n    function setListFilterValue(value) {\n        var root = history.location.pathname.split(\"/\")\n        var parts=['/'+root[1]]\n        parts.push('/'+value)\n        history.push(parts.join(''))\n    }\n   \n      \n    useEffect(() => {\n         var filteredItems = filter(function(item) {\n            //return true;\n            var matchText = true\n            if (searchFilter && searchFilter.trim().length >0) {\n                if (item.value.indexOf(searchFilter) !== -1) {\n                    matchText = true\n                } else {\n                    matchText = false\n                }\n            }\n            var matchPicklist = true\n            if (listFilterValue === \"Not In A List\") {\n                //console.log(['tags',item.tags])\n                if (!item.tags || (item.tags && item.tags.length === 0)) {\n                    matchPicklist =  true\n                } else {\n                    matchPicklist = false\n                }\n            } else if (listFilterValue && listFilterValue.trim().length >0) {\n                if (item.tags && item.tags.indexOf(listFilterValue) !== -1) {\n                    matchPicklist = true\n                } else {\n                    matchPicklist = false\n                }\n            }\n            \n            return matchText && matchPicklist\n            //return (item.value.indexOf(searchFilter) !== -1 \n                        //|| (item.tags && item.tags.indexOf(searchFilter) !== -1)) ? true : false\n        })\n        var itemKeys = {}\n        filteredItems.map(function(item) {if (item.id) itemKeys[item.id] = true; return null})\n        filteredItems.sort(function(a,b) { return a.value < b.value ? true : false})\n        setFilteredItems(filteredItems)\n        setFilteredItemsKeys(itemKeys)\n        updateLists(filteredItems)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[items, searchFilter, listFilterValue])\n    \n    function deleteAll(e)  {\n        if (window.confirm('Really delete all selected')) {\n            if (items) {\n                var newItems = []\n                items.map(function(item,i) {\n                    // dump items without id\n                    if (item && item.id) {\n                        // only delete filtered items\n                        if (filteredItemsKeys[item.id]) {\n                           // only delete selected filtered items\n                           if (!item.isSelected) {\n                               newItems.push(item)\n                           }\n                        // not filtered so push\n                        } else {\n                            newItems.push(item)\n                        }\n                    }\n                    return null\n                })\n                setItems(newItems)\n                listRef.current.resetAfterIndex(0);\n            }\n        }\n    }\n    \n    function tagAll(val) {\n        console.log(['tagall',tagAllValue,val])\n        var tagValue = val ? val : tagAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                if (item && item.id) { \n                    if (item.isSelected && filteredItemsKeys[item.id]) {\n                       var newItem = JSON.parse(JSON.stringify(item));\n                       if (!newItem.tags) newItem.tags=[]\n                       if (newItem.tags.indexOf(tagValue) === -1) newItem.tags.push(tagValue)\n                       newItems.push(newItem)\n                    } else {\n                       newItems.push(item)\n                    }\n                }\n               return null\n            })\n            setItems(newItems)\n        }\n    }\n\n    function untagAll(val) {\n        console.log(['untagall',tagAllValue,val])\n        //var tagValue = val ? val : tagAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n               if (item && item.id) {\n                   if (item.isSelected && filteredItemsKeys[item.id]) {\n                       var newItem = JSON.parse(JSON.stringify(item));\n                       if (!newItem.tags) newItem.tags=[]\n                       var finalTags = []\n                       newItem.tags.map(function(tag) {\n                           if (tag !== val) {\n                               finalTags.push(tag)\n                           }  \n                           return null\n                       })\n                       newItem.tags = finalTags\n                       newItems.push(newItem)\n                   } else {\n                       newItems.push(item)\n                   }  \n               }\n               return null\n            })\n            setItems(newItems)\n        }\n    }\n    \n    \n    function resetSelection() {\n         //console.log('reset sa')\n         if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                if (item) {\n                    var newItem = item\n                   newItem.isSelected = false\n                   newItems.push(newItem)\n                }\n               return null\n            })\n            setItems(newItems)\n            \n        }\n    }\n    \n     function selectAll() {\n         console.log(['SELECTALL',items])\n         if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                if (item && item.id) {\n                    var newItem = item\n                    if (item.id && filteredItemsKeys[item.id]) {\n                       newItem.isSelected = true\n                       newItems.push(newItem)\n                    } else {\n                        newItem.isSelected = false\n                        newItems.push(newItem)\n                    }\n                }\n                return null\n            })\n            setItems(newItems)\n        }\n    }\n    \n    //function sort() {\n         //console.log(['SORT',items])\n         //if (items) {\n            //var newItems = items.sort(function(a,b) { if (a.value < b.value) return -1; else return 1;})\n            //setItems(newItems)\n            //listRef.current.resetAfterIndex(0);\n            //console.log(['SORTed',newItems])\n        //}\n    //}\n    \n    function saveItemWrap(item,index) {\n        console.log(['SAVE ITEM WRAP',item,index])\n        if (item) {\n            saveItem(item,index)\n            listRef.current.resetAfterIndex(index);\n            updateLists(items)\n        }\n    }\n    \n    function getItemSize(index) {\n        //console.log(window.innerWidth,window.innerHeight)\n        // set parameters for full size > 1024\n        var baseSize = 40\n        //// tiny screen mobile \n        if (window.innerWidth < 430) {\n            baseSize = 120\n        // medium screen tablet\n        } else if (window.innerWidth <= 768) {\n            baseSize = 70\n        }\n        return baseSize\n    }\n    \n   function createEmptyItem(list) {\n       var tags=[]\n        if (list && list !== \"Not In A List\" && list.trim().length > 0) tags.push(list)\n        setSearchFilter('')\n        saveItem({id:null, value:'', synonym:'',tags:tags})\n   }\n    \n    return {\n        loadAll, saveItem, deleteItem , items, setItems, findKeyBy, filter, filteredItems, setFilteredItems, sort, \n        searchFilter, setSearchFilter, tagAllValue, setTagAllValue,listRef, listFilterValue, setListFilterValue,\n        tagAll,untagAll, resetSelection, selectAll, saveItemWrap, getItemSize, deleteAll, createEmptyItem\n    }\n}\nexport default useListItemEditor\n","import React, { useEffect} from 'react';\nimport './App.css';\n//import {Link, useParams, useHistory} from 'react-router-dom'\nimport {Button } from 'react-bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { VariableSizeList as List } from 'react-window';\nimport ListAllDropDown from './components/ListAllDropDown'\n\nimport ListsManagerSearchBar from './components/ListsManagerSearchBar'\nimport ListsManagerRow from './ListsManagerRow'\nimport useListItemEditor from './useListItemEditor'\n\nconst RenderRow = function(props) {\n    const index = props.index\n    const style = props.style\n    const item = props.data.items[index]\n    return <ListsManagerRow  \n         item={item}  splitNumber={index} style={style}\n         saveItem={props.data.saveItem} deleteItem={props.data.deleteItem} saveNlu={props.data.saveNlu}\n         lookups={props.data.lookups} />\n}\n\nexport default  function ListsManager(props) {\n    const {listFilterValue, setListFilterValue, loadAll, deleteItem ,items, findKeyBy, searchFilter, setSearchFilter, tagAllValue, setTagAllValue, listRef, tagAll,untagAll, resetSelection, selectAll, saveItemWrap, getItemSize,  filteredItems, deleteAll, createEmptyItem, sort} = useListItemEditor('nlutool','lists','alldata', props.updateFunctions.updateLists)\n    //const [currentList, setCurrentList] = useState('')\n\n    useEffect(() => {\n        loadAll()\n        props.updateFunctions.updateLists(items)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n    \n    useEffect(() => {\n        //props.updateFunctions.updateLists(filteredItems)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[filteredItems])\n    \n    \n  \n    \n    function renderEditor(props) {\n                \n            if (filteredItems && filteredItems.length > 0) {\n                return <div>\n                    <span style={{float:'left', fontWeight:'bold'}} >&nbsp;{filteredItems.length} matches </span>\n                    \n                     \n                     {props.lookups.selectedListTally > 0 && <span style={{float:'right'}}> \n                        \n                        <span>With {props.lookups.selectedListTally} selected&nbsp;</span>\n                        <ListAllDropDown tagAll={tagAll} tagAllValue={tagAllValue} setTagAllValue={setTagAllValue} untagAll={untagAll} lookups={props.lookups}/>\n                        <Button style={{marginLeft:'1em'}} onClick={deleteAll} variant=\"danger\"  >Delete Selected</Button> \n                    </span>} \n                    \n                      <div style={{clear:'both'}}>\n                        <div style={{clear:'both'}}>\n                            <List\n                                key=\"list\"\n                                ref={listRef}\n                                itemData={{items: filteredItems, saveItem: saveItemWrap, deleteItem, findKeyBy, lookups: props.lookups}}\n                                itemKey={index => index}  \n                                className=\"List\"\n                                height={700}\n                                itemCount={filteredItems.length}\n                                itemSize={getItemSize}\n                                width={'100%'}\n                              >{RenderRow}\n                            </List>\n                        </div>\n                    </div>\n               </div>\n          }\n    }\n    \n   return <div>\n   \n        {<ListsManagerSearchBar {...props} searchFilter={searchFilter} setSearchFilter={setSearchFilter} listFilterValue={listFilterValue} setListFilterValue={setListFilterValue} resetSelection={resetSelection} selectAll={selectAll} createEmptyItem={createEmptyItem} sort={sort} />}\n         \n         {renderEditor(props)}\n    </div>\n            \n}\n      \n","import React, {useEffect, useState} from 'react';\n//import {Link} from 'react-router-dom'\nimport {Button, Dropdown, ButtonGroup} from 'react-bootstrap'\nimport SearchInput from './SearchInput'\nimport checkImage from '../images/check.svg'\n\n\nconst UtterancesManagerSearchBar = function(props) {\n    const [topTagOptions,setTopTagOptions] = useState([])\n    useEffect(() => {\n        //console.log(['kust nabager ',props.lookups.listsLookups])\n        var topTagOptionss = props.lookups.utteranceTagsLookups && props.lookups.utteranceTagsLookups.sort().map(function(listKey,i) {\n              return <Dropdown.Item key={i} value={listKey} onClick={function(e) {props.setListFilterValue(listKey)}}  >{listKey}</Dropdown.Item>\n        })\n        topTagOptionss.unshift(<Dropdown.Item key={'empty_key_value_empty'} value={''} onClick={function(e) {props.setListFilterValue('')}}  >&nbsp;</Dropdown.Item>)\n        topTagOptionss.push(<Dropdown.Item key={'Not In A List'} value={'Not In A List'} onClick={function(e) {props.setListFilterValue('Not In A List')}}  ><b>Not In A List</b></Dropdown.Item>)\n        setTopTagOptions(topTagOptionss)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.lookups])\n    \n    return <div>\n            {<span>\n            \n                {props.lookups.selectedListTally > 0 && <Button size=\"lg\"  onClick={function(e) { props.resetSelection(e) }} variant=\"success\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\" /></Button> }\n                {props.lookups.selectedListTally <= 0 && <Button size=\"lg\" onClick={function(e) { props.selectAll(e) }} variant=\"secondary\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Select\" /></Button> }\n                \n                \n           </span>}   \n            {<span style={{marginLeft:'0.4em'}}><SearchInput searchFilter={props.searchFilter} setSearchFilter={props.setSearchFilter} /></span>}   \n            {<Dropdown style={{marginLeft:'0.5em'}}  as={ButtonGroup}>\n                  <Dropdown.Toggle split   id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button  >{'List'+(props.listFilterValue ? ' - '+ props.listFilterValue : '')} </Button>\n                  <Dropdown.Menu>\n                      {topTagOptions}\n                  </Dropdown.Menu>\n                </Dropdown>}\n              <Button  style={{marginLeft:'1em'}} variant=\"success\" onClick={function(e) {props.createEmptyItem(props.listFilterValue)}} >New Utterance</Button>\n              <Button  style={{marginLeft:'1em'}} variant=\"primary\" onClick={function(e) {props.sort(function(a,b) { if (a.value < b.value) return -1; else return 1;})}} >Sort</Button>\n        </div>\n}\nexport default UtterancesManagerSearchBar\n","/* global window */\nimport {Button } from 'react-bootstrap'\nimport React from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ReactTags from 'react-tag-autocomplete'\nimport useListItemRow from './useListItemRow'\nimport SuggestionComponent from './components/SuggestionComponent'\nimport checkImage from './images/check.svg'\n\nexport default function UtterancesManagerRow(props) {\n        const  {item, splitNumber , style} = props;\n       const {    \n            tags, reactTags, \n            onTagDelete, onTagAddition, updateExampleContent,updateExampleSynonym,  selectItem, deselectItem\n        } = useListItemRow(props.item, props.saveItem, props.splitNumber, props.style)\n            \n       \n       //var buttonImageStyle={color:'white', height:'2em'}\n       return item && <div style={style} className={splitNumber % 2 ? 'ListItemOdd' : 'ListItemEven'}>\n               <div style={{position:'relative', width: '100%', textAlign:'left',  borderTop: '2px solid black'}}>\n                   \n                   <div style={{float:'right'}} > \n                        <Button  variant=\"danger\"  size=\"sm\" style={{float:'right', fontWeight:'bold', borderRadius:'15px', marginTop:'0.2em'}} onClick={function(e) {if (window.confirm('Really delete')) {props.deleteItem(splitNumber,(item.id ? item.id : ''))}}} >X</Button>\n               \n                    </div>\n                   \n                  <div style={{float:'left'}}>\n                     {!item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"secondary\" onClick={function() {selectItem(splitNumber)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Select\"  /></Button>}\n                      {item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"success\" onClick={function() {deselectItem(splitNumber)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\"  /></Button>}\n                </div>\n                \n                <input style={{float:'left'}} size='25'   \n                       type='text'  value={item.value}  onChange={function(e) { updateExampleContent(e.target.value)}} />\n                    \n                     \n                     <label style={{float:'left', marginLeft:'0.5em'}} >\n                     <span  style={{float:'left', marginRight:'0.5em'}}>Lists </span>\n                     <span  style={{float:'left'}}>\n                       <ReactTags\n                        placeholderText=\"Add to list\"\n                        minQueryLength={0}\n                        maxSuggestionsLength={50}\n                        autoresize={false}\n                        allowNew={true}\n                        ref={reactTags}\n                        tags={tags}\n                        suggestionComponent={SuggestionComponent}\n                        suggestions={props.lookups.utteranceTagsLookups.map(function(listName,i) {return {id: i, name: listName}})}\n                        onDelete={onTagDelete}\n                        onAddition={onTagAddition} /> \n                        </span>\n                        </label>\n                        \n                        \n                        \n                    <label style={{float:'left', marginLeft:'0.5em'}} ><span style={{float:'left', marginRight:'0.5em'}}>Alternatives</span> \n                        <textarea style={{width:\"34em\", height:\"5em\"}} type='text' value={item.synonym} onChange={function(e) {updateExampleSynonym(e.target.value)}} />\n                    </label>\n                  </div> \n               \n                \n                 \n           \n      </div>\n}\n","/* global window */\nimport React, { useEffect} from 'react';\nimport './App.css';\n//import {Link, useParams, useHistory} from 'react-router-dom'\nimport {Button } from 'react-bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { VariableSizeList as List } from 'react-window';\nimport ListAllDropDown from './components/ListAllDropDown'\n\nimport UtterancesManagerSearchBar from './components/UtterancesManagerSearchBar'\nimport UtterancesManagerRow from './UtterancesManagerRow'\nimport useListItemEditor from './useListItemEditor'\n\nconst RenderRow = function(props) {\n    const index = props.index\n    const style = props.style\n    const item = props.data.items[index]\n    return <UtterancesManagerRow  \n         item={item}  splitNumber={index} style={style}\n         saveItem={props.data.saveItem} deleteItem={props.data.deleteItem} saveNlu={props.data.saveNlu}\n         lookups={props.data.lookups} />\n}\n\nexport default  function UtterancesManager(props) {\n    const {listFilterValue, setListFilterValue, loadAll, deleteItem , findKeyBy, searchFilter, setSearchFilter, tagAllValue, setTagAllValue, listRef, tagAll,untagAll, resetSelection, selectAll, saveItemWrap,  filteredItems, deleteAll, createEmptyItem, sort} = useListItemEditor('nlutool','utterances','alldata', props.updateFunctions.updateUtterances)\n    //const [currentList, setCurrentList] = useState('')\n\n    function getItemSize() {\n        if (window.innerWidth < 430) {\n               return 220\n        // medium screen tablet\n        } else if (window.innerWidth <= 768) {\n               return 160\n        } else {\n            return 130\n        }\n    }\n\n    useEffect(() => {\n        loadAll()\n        //props.updateFunctions.updateLists(items)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n   \n    \n    function renderEditor(props) {\n            if (filteredItems && filteredItems.length > 0) {\n            \n                return <div>\n                    <span style={{float:'left', fontWeight:'bold'}} >&nbsp;{filteredItems.length} matches </span>\n                     \n                     {props.lookups.selectedListTally > 0 && <span style={{float:'right'}}> \n                        \n                        <span>With {props.lookups.selectedListTally} selected&nbsp;</span>\n                        <ListAllDropDown tagAll={tagAll} tagAllValue={tagAllValue} setTagAllValue={setTagAllValue} untagAll={untagAll} lookups={props.lookups}/>\n                        <Button style={{marginLeft:'1em'}} onClick={deleteAll} variant=\"danger\"  >Delete Selected</Button> \n                    </span>} \n                    \n                      <div style={{clear:'both'}}>\n                        <div style={{clear:'both'}}>\n                            <List\n                                key=\"list\"\n                                ref={listRef}\n                                itemData={{items: filteredItems, saveItem: saveItemWrap, deleteItem, findKeyBy, lookups: props.lookups}}\n                                itemKey={index => index}  \n                                className=\"List\"\n                                height={700}\n                                itemCount={filteredItems.length}\n                                itemSize={getItemSize}\n                                width={'100%'}\n                              >{RenderRow}\n                            </List>\n                        </div>\n                    </div>\n               </div>\n\n            }\n              \n    }\n    \n  \n    return <div>\n       \n                   \n        {<UtterancesManagerSearchBar {...props} searchFilter={searchFilter} setSearchFilter={setSearchFilter} listFilterValue={listFilterValue} setListFilterValue={setListFilterValue} resetSelection={resetSelection} selectAll={selectAll} createEmptyItem={createEmptyItem} sort={sort} />}\n         \n         \n         {renderEditor(props)}\n    </div>\n            \n}\n      \n\n //{JSON.stringify(items)}\n    //<hr/>\n    \n    \n    //<hr/>\n    //{JSON.stringify(filteredItems)}\n\n\n","import React, {useState, useEffect} from 'react'\nimport {findFirstDiffPos, uniquifyArray, uniquifyArrayOfObjects } from './utils'\nfunction useNluRow(item, saveItem, splitNumber, style, setPageMessage) {\n    const [selectionState, setSelectionState] = useState({})\n    const [newEntity, setNewEntity] = useState('')\n    const [intentTitle, setIntentTitle] = useState(item && item.intent ? item.intent : '')\n    // for ReactTags format using objects\n    const [tags, setTags] = useState([])\n    const [skills, setSkills] = useState([])\n    //console.log(['USENLUROW',splitNumber])\n    const reactTags = React.createRef()\n    const reactSkills = React.createRef()\n     // tags\n    useEffect(() => {\n        if (item.tags) setTags(item.tags.map(function(tag,i) {return {id:i, name:tag}}))\n        if (item.skills) setSkills(item.skills.map(function(skill,i) {return {id:i, name:skill}}))\n    },[item])\n\n     function onTagDelete (i) {\n        const newTags = tags.slice(0)\n        newTags.splice(i, 1)\n        setTags(newTags)\n        var newItem = item\n        newItem.tags = newTags.map(function(newTag) { return newTag.name})\n        saveItem(newItem,splitNumber)\n      }\n     \n     function onTagAddition (tag) {\n        if (tag && tag.name.trim().length > 0) {\n            const newTags = [].concat(tags, tag)\n            setTags(uniquifyArrayOfObjects(newTags,'name').sort(function(a,b) {if (a.name > b.name) return 1; else return -1} ))\n            var newItem = item\n            newItem.tags = uniquifyArray(newTags.map(function(newTag) { return newTag.name})).sort()\n            saveItem(newItem,splitNumber)\n        }\n      }\n      \n      function onSkillDelete (i) {\n        const newSkills = skills.slice(0)\n        newSkills.splice(i, 1)\n        setSkills(newSkills)\n        var newItem = item\n        newItem.skills = newSkills.map(function(newSkill) { return newSkill.name})\n        saveItem(newItem,splitNumber)\n      }\n     \n     function onSkillAddition (skill) {\n         if (skill && skill.name.trim().length > 0) {\n            const newSkills = [].concat(skills, skill)\n            setSkills(uniquifyArrayOfObjects(newSkills,'name').sort(function(a,b) {if (a.name > b.name) return 1 ;else return -1} ))\n            var newItem = item\n            newItem.skills = uniquifyArray(newSkills.map(function(newSkill) { return newSkill.name})).sort()\n            saveItem(newItem,splitNumber)\n        }\n     }\n    \n        \n    function createSelection(field, start, end) {\n        if (field) {\n            if( field.createTextRange ) {\n                var selRange = field.createTextRange();\n                selRange.collapse(true);\n                selRange.moveStart('character', start);\n                selRange.moveEnd('character', end-start);\n                selRange.select();\n            } else if( field.setSelectionRange ) {\n                field.setSelectionRange(start, end);\n            } else if( field.selectionStart ) {\n                field.selectionStart = start;\n                field.selectionEnd = end;\n            }\n            field.focus();\n        }\n    }\n    \n    function updateExampleContent(content) {\n        //console.log('UPDTEXT')\n        if (item && typeof item.example === \"string\" && typeof content === \"string\") {\n            //console.log('UPDTEXTREAL')\n            const newItem = JSON.parse(JSON.stringify(item));\n            if (item.entities && item.entities.length > 0) {\n                var entities = item.entities\n                // deal with entity ranges * allow for delete multiple\n                const diffPos = findFirstDiffPos(content,item.example)\n                // insertion\n                if (content.length - item.example.length > 0) {\n                    \n                    //console.log('UPDTEXT insert')\n                    const insertionLength = content.length - item.example.length\n                    // update start and end subtract deletionLength\n                    newItem.entities = entities.map(function(entity,entityIndex) {\n                        if (diffPos < entity.start) {\n                            entity.start += insertionLength\n                            entity.end += insertionLength;\n                        } else if (diffPos < entity.end) {\n                            // update entity value\n                            entity.end += insertionLength;\n                            entity.value = content.slice(entity.start,entity.end)\n                        }\n                        return entity \n                    })\n                // replace    \n                } \n                else if (content.length === item.example.length) {\n                    //console.log('UPDTEXT replace')\n                    // check if was inside an entity and update value as required\n                    newItem.entities = entities.map(function(entity,entityIndex) {\n                        if (diffPos >= entity.start && diffPos < entity.end) {\n                            // update entity value\n                            entity.value = content.slice(entity.start,entity.end)\n                        }\n                        return entity \n                    })\n                // deletion\n                } else {\n                    //console.log('UPDTEXT delete')\n                    const deletionLength = content.length - item.example.length\n                    // update start and end subtract deletionLength\n                    newItem.entities = entities.map(function(entity,entityIndex) {\n                        if (diffPos < entity.start) {\n                            entity.start += deletionLength\n                            entity.end += deletionLength;\n                        } else if (diffPos < entity.end) {\n                            // update entity value\n                            entity.end += deletionLength;\n                            entity.value = content.slice(entity.start,entity.end)\n                        }\n                        return entity \n                    })\n                }\n            }\n            newItem.example = content;\n            saveItem(newItem,splitNumber)\n        }\n    }\n    \n    function entityClicked(entityKey,entityType) {\n        if (item.entities)  {\n            var entities = item.entities\n            if (! selectionState || !selectionState.textSelection || selectionState.textSelection.length === 0) {\n                // select text in string\n                if (entities[entityKey]) {\n                   createSelection(document.getElementById('example_input_'+splitNumber),entities[entityKey].start,entities[entityKey].end)\n                }\n            } else {\n                entityTypeChanged(entityKey,entityType);\n            }\n        }\n    }\n    \n    function entityTypeChanged(entityNumber,type) {\n        //console.log(['ENTY TYPE CHANGE',entityNumber,type])\n        var newItem = item\n        if (!Array.isArray(item.entities)) {\n            item.entities = []\n        }\n         //console.log(['ENTY TYPE CHANGE ITEM ENT',item.entities])\n        var newEntities = item.entities \n        var entity = newEntities[entityNumber] ? newEntities[entityNumber] : {}\n        const typeChanged = !(type && type.length > 0 && type === entity.type)\n        //console.log(['ENTY TYPE CHANGED',typeChanged,type,entity.type])\n        entity.type = type\n        if (selectionState && selectionState.textSelection) {\n            //console.log(['HAVE SELECTION',selectionState.textSelection])\n            const start = selectionState.startTextSelection\n            const end = selectionState.endTextSelection\n            var isOverlapProblem = false;\n            if (typeof parseInt(start) === \"number\" && typeof parseInt(end) === \"number\") {\n                item.entities.map(function(entity) {\n                    // is OK if updating entity \n                    const bypass = !typeChanged && entity.type === type\n                    const isOverlap = (entity.start > start && entity.start < end) || (entity.end > start && entity.end < end)\n                    //console.log(['CHECK ENTITY',bypass, isOverlap, entity.type,start,end,entity.start,entity.end])\n                    if (!bypass && isOverlap) isOverlapProblem = true\n                    return null\n                })\n            }\n            if (isOverlapProblem) {\n                setPageMessage('Overlap with existing entity !')\n                setTimeout(function() {\n                    setPageMessage('')\n                },2000)\n            } else {\n                entity.value = selectionState.textSelection\n                entity.start = selectionState.startTextSelection\n                entity.end = selectionState.endTextSelection\n                if (!newEntities[entityNumber]) newEntities.push(entity)\n                else newEntities[entityNumber] = entity\n                newItem.entities = newEntities\n                setSelectionState(null)\n                saveItem(newItem,splitNumber)\n            }\n        } else {\n            if (!newEntities[entityNumber]) newEntities.push(entity)\n            else newEntities[entityNumber] = entity\n            newItem.entities = newEntities\n            setSelectionState(null)\n            saveItem(newItem,splitNumber)\n        }\n        \n    }\n    \n    function intentChanged(intent) {\n        var newItem = item \n        newItem.intent = intent\n        saveItem(newItem,splitNumber)\n    }\n \n    \n    function entityDelete(entityNumber) {\n        if (item.entities) {\n            var newItem = item \n            var newEntities = item.entities.slice(0,entityNumber).concat(item.entities.slice(entityNumber + 1))\n            newItem.entities = newEntities\n            saveItem(newItem,splitNumber)\n        }\n    }\n    \n    function selectItem(splitNumber) {\n        var newItem = item\n        item.isSelected = true;\n        saveItem(newItem,splitNumber)\n    }\n    \n    \n    function setSkill(skill, splitNumber) {\n        //var newItem = item\n        //item.isSelected = true;\n        //props.saveItem(newItem,splitNumber)\n    }\n    \n    function deselectItem(splitNumber) {\n        var newItem = item\n        item.isSelected = false;\n        saveItem(newItem,splitNumber)\n    } \n    \n    return {    \n        intentTitle, setIntentTitle, selectionState, setSelectionState, newEntity, setNewEntity, tags, setTags, skills, setSkills, reactTags, reactSkills, onTagDelete, onTagAddition, onSkillDelete,onSkillAddition, createSelection, updateExampleContent, entityClicked, entityTypeChanged, intentChanged, entityDelete, selectItem, setSkill, deselectItem\n    }\n    \n}\nexport default useNluRow\n","/* global window */\nimport {Button,   Dropdown, ButtonGroup } from 'react-bootstrap'\nimport React, {useState} from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ReactTags from 'react-tag-autocomplete'\nimport useNluRow from './useNluRow'\nimport SuggestionComponent from './components/SuggestionComponent'\nimport checkImage from './images/check.svg'\n\nexport default function NluExampleRow(props) {\n       const  {item, splitNumber , style} = props;\n       const {    \n            intentTitle, setIntentTitle, selectionState, setSelectionState, newEntity, setNewEntity, tags, skills, reactTags, reactSkills, \n            onTagDelete, onTagAddition, onSkillDelete,onSkillAddition, updateExampleContent, entityClicked, entityTypeChanged, intentChanged, entityDelete, selectItem,  deselectItem\n        } = useNluRow(props.item, props.saveItem, props.splitNumber, props.style, props.setPageMessage)\n        const [textInput, setTextInput] = useState(props.item && props.item.example ? props.item.example  : '')\n         \n       var intentOptions = props.lookups.intentLookups && props.lookups.intentLookups.sort().map(function(intentKey,i) {\n          return <Dropdown.Item key={i} value={intentKey} onClick={function(e) {intentChanged(intentKey)}}  >{intentKey}</Dropdown.Item>\n       })\n       //var skillOptions = props.lookups.skillLookups && props.lookups.skillLookups.sort().map(function(skillKey,i) {\n          //return <Dropdown.Item key={i} value={skillKey} onClick={function(e) {setSkill(skillKey,props.splitNumber)}}  >{skillKey}</Dropdown.Item>\n       //})\n       // ONE PER ENTITY FOR THIS EXAMPLE\n       var entitiesDropdowns = item && item.entities ? item.entities.map(function(entity,i) {\n           var entityOptions = props.lookups.entityLookups.sort().map(function(entityKey,j) {\n              return <Dropdown.Item  key={j} value={entityKey} onClick={function(e) {entityTypeChanged(i,entityKey)}}  >{entityKey}</Dropdown.Item>\n           })\n           return<Dropdown style={{marginLeft:'0.2em'}} variant='info'  key={i}  as={ButtonGroup}>\n              <Dropdown.Toggle variant='info'  split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n              <Button variant='info'   size=\"sm\"  onClick={function(e) {entityClicked(i,entity.type)}} >\n              <b>{entity.type}</b> \n                -\n              {entity.value ? entity.value : 'Select Entity Type'}\n              </Button>\n              <Button variant=\"info\" size=\"sm\" onClick={function(e) {entityDelete(i,'')}} >X</Button>\n              <Dropdown.Menu>\n                  <form  style={{display:'inline'}}>\n                    <div className=\"form-group\">\n                      <input type=\"text\" className=\"form-control\" onChange={function(e) {entityTypeChanged(i,e.target.value)}}\n                    value={entity.type} />\n                    </div>\n                  </form>\n                  {entityOptions}\n              </Dropdown.Menu>\n            </Dropdown>\n       }) : [];\n        //PLUS CREATE NEW WHEN TEXT IS SELECTED\n       if (selectionState  && selectionState.textSelection && selectionState.textSelection.length > 0 &&  selectionState.textSelectionFrom === splitNumber) {\n           var entityOptions =  props.lookups.entityLookups && props.lookups.entityLookups.sort().map(function(entityKey,j) {\n              return <Dropdown.Item key={j} value={entityKey} onClick={function(e) {entityTypeChanged(-1,entityKey)}}  >{entityKey}</Dropdown.Item>\n           })\n           entitiesDropdowns.push(<Dropdown key=\"new\" variant='success'  as={ButtonGroup}>\n\n          <Dropdown.Toggle variant='success'  split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button  variant='success' size=\"sm\" >New Entity</Button>\n\n          <Dropdown.Menu>\n           <form style={{display:'inline'}} onSubmit={function(e) {e.preventDefault(); entityTypeChanged(-1,newEntity)}}>\n                <div className=\"form-group\">\n                  <input type=\"text\" className=\"form-control\" onChange={function(e) {setNewEntity(e.target.value)}}\n                value={newEntity} />\n                </div>\n              </form>\n              {entityOptions}\n          </Dropdown.Menu>\n        </Dropdown>)\n       }\n       //var buttonImageStyle={color:'white', height:'2em'}\n       return item && <div style={style} className={splitNumber % 2 ? 'ListItemOdd' : 'ListItemEven'}>\n               <div style={{position:'relative', width: '100%', textAlign:'left',  borderTop: '2px solid black'}}>\n                  \n                   {!item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"secondary\" onClick={function() {selectItem(splitNumber)}} ><img  style={{height:'1em'}} src={checkImage} alt=\"Select\" /></Button>}\n                  {item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"success\" onClick={function() {deselectItem(splitNumber)}} ><img  style={{height:'1em'}} src={checkImage} alt=\"Deselect\" /></Button>}\n                  \n                <Button  variant=\"danger\" size=\"sm\" style={{float:'right', fontWeight:'bold', borderRadius:'15px', marginTop:'0.2em'}} onClick={function(e) {if (window.confirm('Really delete')) {props.deleteItem(splitNumber,(item.id ? item.id : ''))}}} >X</Button>\n                 \n                 \n                  <Dropdown  style={{float:'left'}} as={ButtonGroup}>\n                  <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button   size=\"sm\" >{item.intent ? item.intent.toString() : 'Select Intent'} </Button>\n                  <Dropdown.Menu>\n                   <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault(); intentChanged(intentTitle)}}>\n                        <div className=\"form-group\">\n                          <input type=\"text\" className=\"form-control\" value={intentTitle} onChange={function(e) {setIntentTitle(e.target.value)}}\n                         />\n                        </div>\n                      </form>\n                      {intentOptions}\n                  </Dropdown.Menu>\n                  </Dropdown>\n                  <span style={{float:'left'}}>{entitiesDropdowns}</span>\n                 \n                   <div style={{float:'left'}}>\n                   <ReactTags\n                    placeholderText=\"Add to skill\"\n                    minQueryLength={0}\n                    maxSuggestionsLength={50}\n                    autoresize={false}\n                    allowNew={true}\n                    ref={reactSkills}\n                    tags={skills}\n                    suggestionComponent={SuggestionComponent}\n                    suggestions={props.lookups.skillLookups.map(function(tag,i) {return {id: i, name: tag}})}\n                    onDelete={onSkillDelete}\n                    onAddition={onSkillAddition} /> \n                    </div>\n                    \n                  <div style={{float:'left'}}>\n                   <ReactTags\n                    placeholderText=\"Add new tag\"\n                    minQueryLength={0}\n                    maxSuggestionsLength={50}\n                    autoresize={false}\n                    allowNew={true}\n                    ref={reactTags}\n                    tags={tags}\n                    suggestionComponent={SuggestionComponent}\n                    suggestions={props.lookups.tagLookups.map(function(tag,i) {return {id: i, name: tag}})}\n                    onDelete={onTagDelete}\n                    onAddition={onTagAddition} /> \n                    </div>\n                  \n                  <input     \n                   onFocus={ function(e) {\n                       setSelectionState(null)\n                    }}\n                   onSelect={ function(e) {\n                     var textSelection = window.getSelection().toString(); \n                     setSelectionState({textSelection:textSelection, textSelectionFrom: splitNumber, startTextSelection: e.target.selectionStart, endTextSelection: e.target.selectionEnd})\n                  }}  \n                   type='text' style={{width:'80%'}} value={textInput} id={\"example_input_\"+splitNumber} onChange={function(e) { setTextInput(e.target.value); updateExampleContent(e.target.value)}} />\n                  \n                  \n                \n                \n            </div>\n      </div>\n}\n","import React from 'react';\n//import {Link} from 'react-router-dom'\nimport {Button, Dropdown, ButtonGroup} from 'react-bootstrap'\nimport SearchInput from './SearchInput'\nimport checkImage from '../images/check.svg'\n\nconst EditorSearchBar = function(props) {\n    var topskillOptions = props.lookups.skillLookups && props.lookups.skillLookups.sort().map(function(skillKey,i) {\n          return <Dropdown.Item key={i} value={skillKey} onClick={function(e) {props.setSkillFilterValue(skillKey)}}  >{skillKey}</Dropdown.Item>\n    })\n    topskillOptions.unshift(<Dropdown.Item key={'empty_key_value_empty'} value={''} onClick={function(e) {props.setSkillFilterValue('')}}  >&nbsp;</Dropdown.Item>)\n        \n    var intentOptions = props.lookups.intentLookups && props.lookups.intentLookups.sort().map(function(intentKey,i) {\n          return <Dropdown.Item key={i} value={intentKey} onClick={function(e) {props.setIntentFilterValue(intentKey)}}  >{intentKey}</Dropdown.Item>\n    })\n    intentOptions.unshift(<Dropdown.Item key={'empty_key_value_empty'} value={''} onClick={function(e) {props.setIntentFilterValue('')}}  >&nbsp;</Dropdown.Item>)\n        \n    return <div>\n            {<span>\n            \n                {props.lookups.selectedTally > 0 && <Button size=\"lg\"  onClick={function(e) { props.resetSelection(e) }} variant=\"success\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\" /></Button> }\n                {props.lookups.selectedTally <= 0 && <Button size=\"lg\" onClick={function(e) { props.selectAll(e) }} variant=\"secondary\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Select\" /></Button> }\n                \n                \n           </span>}   \n            {<span style={{marginLeft:'0.4em'}}><SearchInput searchFilter={props.searchFilter} setSearchFilter={props.setSearchFilter} /></span>}   \n            \n            {<Dropdown style={{marginLeft:'0.5em'}}  as={ButtonGroup}>\n                  <Dropdown.Toggle split   id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button  >{'Intent '+(props.intentFilterValue ? ' - '+ props.intentFilterValue : '')} </Button>\n                  <Dropdown.Menu>\n                      {intentOptions}\n                  </Dropdown.Menu>\n                </Dropdown>}\n            \n            {<Dropdown style={{marginLeft:'0.5em'}}  as={ButtonGroup}>\n                  <Dropdown.Toggle split   id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button  >{'Skill '+(props.skillFilterValue ? ' - '+ props.skillFilterValue : '')} </Button>\n                  <Dropdown.Menu>\n                      {topskillOptions}\n                  </Dropdown.Menu>\n                </Dropdown>}\n             <Button  style={{marginLeft:'1em'}} variant=\"success\" onClick={function(e) {props.createEmptyItem(props.skillFilterValue, props.intentFilterValue)}} >New Intent</Button>\n             <Button  style={{marginLeft:'1em'}} variant=\"primary\" onClick={function(e) {props.sort(function(a,b) { if (a.value < b.value) return -1; else return 1;})}} >Sort</Button>\n        </div>\n}\nexport default EditorSearchBar\n","import React, {useState, useEffect} from 'react';\nimport localforage from 'localforage'\nimport useDBSingleKey from './useDBSingleKey'\nimport {uniquifyArray} from './utils'\nimport {useParams, useHistory} from 'react-router-dom'\n\nfunction useNluEditor(database, databaseTable, databaseKey, updateLookups) {\n    const {loadAll, saveItem, deleteItem , items, setItems, findKeyBy, filter, sort} = useDBSingleKey(database, databaseTable, databaseKey)\n    const [filteredItems, setFilteredItems] = useState([])\n    const [filteredItemsKeys, setFilteredItemsKeys] = useState([])\n    const [searchFilter, setSearchFilter] = useState('')\n    const [tagAllValue, setTagAllValue] = useState('')\n    const [skillAllValue, setSkillAllValue] = useState('')\n    //const [skillFilterValue, setSkillFilterValue] = useState('')\n    //const [intentFilterValue, setIntentFilterValue] = useState('')\n    const [intentAllValue, setIntentAllValue] = useState('')\n    const listRef = React.createRef()\n    \n    const params = useParams()\n    const history = useHistory()\n    var skillFilterValue = params.skillId ? params.skillId : '';\n    function setSkillFilterValue(value) {\n        //console.log('SETSKILLVAL')\n        //console.log(history)\n        var root = history.location.pathname.split(\"/\")\n        var parts=['/'+root[1]]\n        skillFilterValue = value;\n        if (skillFilterValue.length > 0) {\n            parts.push('/skill/'+skillFilterValue)\n        }\n        if (intentFilterValue.length > 0) {\n            parts.push('/intent/'+intentFilterValue)\n        }\n        //console.log(['ssv',parts,value])\n        history.push(parts.join(''))\n    }\n    var intentFilterValue = params.intentId ? params.intentId : '';\n    \n    function setIntentFilterValue(value) {\n        var root = history.location.pathname.split(\"/\")\n        var parts=['/'+root[1]]\n        intentFilterValue = value;\n        if (skillFilterValue.length > 0) {\n            parts.push('/skill/'+skillFilterValue)\n        }\n        if (intentFilterValue.length > 0) {\n            parts.push('/intent/'+intentFilterValue)\n        }\n        history.push(parts.join(''))\n    }\n    \n    //const examplesDB = useDBSingleKey('nlutool','examples','alldata')\n    //var updateLookupsTimeout = null\n    //var updateFilteredTimeout = null\n    //useEffect(() => {\n        ////clearTimeout(updateLookupsTimeout)\n        ////updateLookupsTimeout = setTimeout(function() {\n            \n        ////},2000)\n    //// eslint-disable-next-line react-hooks/exhaustive-deps\n    //},[items])\n     \n    useEffect(() => {\n        //clearTimeout(updateFilteredTimeout)\n        //console.log('UPDATE FILTERED'+intentFilterValue)\n        //updateFilteredTimeout = setTimeout(function() {\n             //console.log('UPDATE FILTERED NOW')\n             var filteredItems = filter(function(item) {\n                if ((!searchFilter || searchFilter.trim().length <=0 ) && (!skillFilterValue || skillFilterValue.trim().length <=0 ) && (!intentFilterValue || intentFilterValue.trim().length <=0 )) return true;\n                var intentFilter = true\n                if (intentFilterValue && intentFilterValue.length > 0) {\n                    if (item.intent === intentFilterValue) {\n                        intentFilter = true\n                    } else {\n                        intentFilter = false\n                    }\n                }\n                var skillFilter = true\n                if (skillFilterValue && skillFilterValue.length > 0) {\n                    if (item.skills && item.skills.indexOf(skillFilterValue) !== -1) {\n                        skillFilter = true\n                    } else {\n                        skillFilter = false\n                    }\n                }\n                var searchFilterBool = true\n                if (searchFilter && searchFilter.length > 0) {\n                    if (item.example && item.example.indexOf(searchFilter) !== -1 ) {\n                        searchFilterBool = true\n                    } else {\n                        searchFilterBool = false\n                    }\n                }         \n                return searchFilterBool && skillFilter && intentFilter;       \n                //intentFilterValue\n                //return (item.example.indexOf(searchFilter) !== -1 \n                            //&& intentFilter \n                            //&& ((skillFilterValue.length <= 0 || (skillFilterValue.length > 0 && typeof item.skills ===\"object\" && item.skills.indexOf(skillFilterValue) !== -1)) ? true : false\n            })\n            var itemKeys = {}\n            filteredItems.map(function(item) {if (item.id) itemKeys[item.id] = true; return null})\n            filteredItems.sort(function(a,b) { return a.example < b.example ? true : false})\n            setFilteredItems(filteredItems)\n            setFilteredItemsKeys(itemKeys)\n            updateLookups(filteredItems)\n        //},800)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[items, searchFilter, skillFilterValue, intentFilterValue])\n    \n    function deleteAll(e)  {\n        if (window.confirm('Really delete all selected')) {\n            if (items) {\n                var newItems = []\n                items.map(function(item,i) {\n                    // dump items without id\n                    if (item && item.id) {\n                        // only delete filtered items\n                        if (filteredItemsKeys[item.id]) {\n                           // only delete selected filtered items\n                           if (!item.isSelected) {\n                               newItems.push(item)\n                           }\n                        // not filtered so push\n                        } else {\n                            newItems.push(item)\n                        }\n                    }\n                    return null\n                })\n                setItems(newItems)\n                listRef.current.resetAfterIndex(0);\n            }\n        }\n    }\n    \n    function tagAll(val) {\n        console.log(['tagall',tagAllValue,val])\n        var tagValue = val ? val : tagAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                if (item && item.id) { \n                    if (item.isSelected && filteredItemsKeys[item.id]) {\n                       var newItem = JSON.parse(JSON.stringify(item));\n                       if (!newItem.tags) newItem.tags=[]\n                       if (newItem.tags.indexOf(tagValue) === -1) newItem.tags.push(tagValue)\n                       newItems.push(newItem)\n                    } else {\n                       newItems.push(item)\n                    }\n                }\n               return null\n            })\n            setItems(newItems)\n        }\n    }\n\n    function untagAll(val) {\n        console.log(['untagall',tagAllValue,val])\n        //var tagValue = val ? val : tagAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n               if (item && item.id) {\n                   if (item.isSelected && filteredItemsKeys[item.id]) {\n                       var newItem = JSON.parse(JSON.stringify(item));\n                       if (!newItem.tags) newItem.tags=[]\n                       var finalTags = []\n                       newItem.tags.map(function(tag) {\n                           if (tag !== val) {\n                               finalTags.push(tag)\n                           }  \n                           return null\n                       })\n                       newItem.tags = finalTags\n                       newItems.push(newItem)\n                   } else {\n                       newItems.push(item)\n                   }  \n               }\n               return null\n            })\n            setItems(newItems)\n        }\n    }\n    \n    function intentAll(val) {\n        //console.log(['intentall',intentAllValue,val])\n        var intentValue = val ? val : intentAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                if (item && item.id) {\n                   if (item.isSelected && filteredItemsKeys[item.id]) {\n                       var newItem = item\n                       newItem.intent = intentValue\n                       newItems.push(newItem)\n                   } else {\n                       newItems.push(item)\n                   }  \n                }\n               return null\n            })\n            setItems(newItems)\n        }\n    }\n    function resetSelection() {\n         if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                if (item && item.id) {\n                   var newItem = item\n                   newItem.isSelected = false\n                   newItems.push(newItem)\n                }\n               return null\n            })\n            setItems(newItems)\n            \n        }\n    }\n    \n     function selectAll() {\n         if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                if (item && item.id) {\n                    var newItem = item\n                       \n                    if (filteredItemsKeys[item.id]) {\n                       newItem.isSelected = true\n                       newItems.push(newItem)\n                    } else {\n                        newItem.isSelected = false\n                        newItems.push(newItem)\n                    }\n                }\n                return null\n            })\n            setItems(newItems)\n        }\n    }\n    \n     function skillSetAll(val) {\n         //console.log(['set skill all',tagAllValue,val])\n        var skillValue = val ? val : skillAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n               if (item && item.id) { \n                   if (item.isSelected && filteredItemsKeys[item.id]) {\n                       var newItem = JSON.parse(JSON.stringify(item));\n                       if (!newItem.skills) newItem.skills=[]\n                       if (newItem.skills.indexOf(skillValue) === -1) newItem.skills.push(skillValue)\n                       newItem.skills = uniquifyArray(newItem.skills)\n                       newItems.push(newItem)\n                   } else {\n                       newItems.push(item)\n                   }  \n                }\n               return null\n            })\n            setItems(newItems)\n        }\n    }\n\n       function unskillAll(val) {\n        //console.log(['unskillall',tagAllValue,val])\n        //var tagValue = val ? val : tagAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n               if (item && item.id) { \n                   if (item.isSelected && filteredItemsKeys[item.id]) {\n                       var newItem = JSON.parse(JSON.stringify(item));\n                       if (!newItem.skills) newItem.skills=[]\n                       var finalTags = []\n                       newItem.skills.map(function(tag) {\n                           if (tag !== val) {\n                               finalTags.push(tag)\n                           }  \n                           return null\n                       })\n                       newItem.skills = finalTags\n                       newItems.push(newItem)\n                   } else {\n                       newItems.push(item)\n                   }  \n                }\n               return null\n            })\n            setItems(newItems)\n        }\n    }\n        \n       \n    function saveAll(e)  {\n        //console.log(['save akk',filteredItems])\n        if (items) {\n            var newItems = []\n            var lsItems = []\n            filteredItems.map(function(item,i) {\n                if (item.intent && item.intent.length > 0 && item.id && filteredItemsKeys[item.id]) {\n                   if (item.isSelected) {\n                       lsItems.push(item)\n                   } else {\n                       newItems.push(item)\n                   }\n                } else {\n                    newItems.push(item)\n               }\n               return null\n            })\n            saveLSItems(lsItems)\n            setItems(newItems)\n            listRef.current.resetAfterIndex(0);\n        }\n         \n    }\n   \n    function createEmptyItem(skill, intent) {\n        setSearchFilter('')\n        var skills=[]\n        if (skill && skill.trim().length > 0) skills.push(skill)\n        var newIntent=''\n        if (intent && intent.trim().length > 0) newIntent = intent\n        saveItem({id:null, example:'', intent:newIntent, skills:skills,tags:[]})\n   }\n    \n    function saveItemWrap(item,index) {\n        saveItem(item,index)\n        listRef.current.resetAfterIndex(index);\n        updateLookups(items)\n    }\n    \n    function getItemSize(index) {\n        //console.log(window.innerWidth,window.innerHeight)\n        // set parameters for full size > 1024\n        var baseSize = 100\n        var heightPerLine = 70\n        var tagsPerLine = 10\n        var entitiesPerLine = 8\n        var skillsPerLine = 6\n        // tiny screen mobile \n        if (window.innerWidth < 430) {\n            baseSize = 140\n            heightPerLine = 50\n            tagsPerLine = 4\n            entitiesPerLine = 1\n            skillsPerLine = 1\n        // medium screen tablet\n        } else if (window.innerWidth <= 768) {\n            baseSize = 120\n            heightPerLine = 30\n            tagsPerLine = 2\n            entitiesPerLine = 1\n            skillsPerLine = 2\n        }\n        var tallyExtras = 0;\n        var item = items[index]\n        if (item && item.entities) tallyExtras += item.entities.length/entitiesPerLine;\n        if (item && item.tags) tallyExtras += item.tags.length/tagsPerLine;\n        if (item && item.skills) tallyExtras += item.skills.length/skillsPerLine;\n        var size = baseSize + (Math.round(tallyExtras)) * heightPerLine\n        //console.log(['ITEM SIZE',size, baseSize,heightPerLine,tagsPerLine,entitiesPerLine,tallyExtras,item])\n        return size \n    }\n    \n    function saveLSItem(item) {\n        var localforageStorage = localforage.createInstance({\n           name: 'nlutool',\n           storeName   :'examples',\n         });\n         localforageStorage.getItem('alldata').then(function(exampleItems) {\n                exampleItems.push(item)\n                localforageStorage.setItem('alldata',exampleItems)\n         })\n       \n    }\n    \n    function saveLSItems(newItems) {\n        if (newItems) {\n            var localforageStorage = localforage.createInstance({\n               name: 'nlutool',\n               storeName   :'examples',\n             });\n             localforageStorage.getItem('alldata').then(function(exampleItems) {\n                 if (exampleItems) {\n                    newItems.map(function(newItem) { exampleItems.push(newItem ); return null})\n                    localforageStorage.setItem('alldata',exampleItems)\n                 }\n             })\n        }\n    }\n\n     \n    function saveNlu(splitNumber) {\n        if (items && items[splitNumber]) {\n            //props.saveNluItem(items[splitNumber]) \n            saveLSItem(items[splitNumber])\n            deleteItem(splitNumber)\n        }\n    }\n\n    //function sortItems() {\n        \n    //}\n    \n\n    \n    return {\n        loadAll, saveItem, deleteItem , items, setItems, findKeyBy, filter, filteredItems, setFilteredItems,createEmptyItem, sort, \n        searchFilter, setSearchFilter, tagAllValue, setTagAllValue, skillAllValue, setSkillAllValue, skillFilterValue, setSkillFilterValue,intentFilterValue, setIntentFilterValue,\n         intentAllValue, setIntentAllValue, listRef, \n        tagAll,untagAll, unskillAll, intentAll, resetSelection, selectAll,  skillSetAll, saveItemWrap, getItemSize, deleteAll, saveAll, saveNlu\n    }\n}\nexport default useNluEditor\n","import React, { useEffect} from 'react';\nimport './App.css';\nimport {Link} from 'react-router-dom'\nimport {Button} from 'react-bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { VariableSizeList as List } from 'react-window';\nimport NluExampleRow from './NluExampleRow'\nimport EditorSearchBar from './components/EditorSearchBar'\nimport useNluEditor from './useNluEditor'\nimport {MatchesTallies,WithSelectedDropDowns} from './components/Components'\nconst RenderRow = function(props) {\n    const index = props.index\n    const style = props.style\n    const item = props.data.items[index]\n    return <NluExampleRow  \n         item={item} splitNumber={index} style={style}\n         saveItem={props.data.saveItem} deleteItem={props.data.deleteItem} \n         lookups={props.data.lookups} setPageMessage={props.data.setPageMessage} />\n}\n\nexport default function NluExampleEditor(props) {\n    const {loadAll, deleteItem , items, findKeyBy, searchFilter, setSearchFilter, skillFilterValue, setSkillFilterValue, intentFilterValue, setIntentFilterValue, tagAllValue, setTagAllValue, skillAllValue, setSkillAllValue,  intentAllValue, setIntentAllValue, listRef, tagAll,untagAll, unskillAll, intentAll, resetSelection, selectAll,  skillSetAll, saveItemWrap, getItemSize, deleteAll, filteredItems, createEmptyItem, sort} = useNluEditor('nlutool','examples','alldata', props.updateFunctions.updateLookups)\n    useEffect(() => {\n        loadAll()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n    \n    //useEffect(() => {\n        //if (importFrom) {\n            //var parsed = parseImportText(importFrom)\n            //setItems(parsed)\n            //props.setImportFrom('')\n        //}\n    //// eslint-disable-next-line react-hooks/exhaustive-deps\n    //},[props.importFrom])\n    \n\n    function renderEditor(props) {\n        // filter rendered list using callback \n       //var filteredItems = filter(function(item) {\n                //if (!searchFilter || searchFilter.length <=0 ) return true;\n                //const matchSearchFilter = item.example.indexOf(searchFilter) !== -1 \n                        //|| item.intent.indexOf(searchFilter) !== -1 \n                        //|| (item.tags && item.tags.indexOf(searchFilter) !== -1)\n                //return matchSearchFilter && skillFilterValue && item.skills && item.skills.indexOf(skillFilterValue) !== -1\n            //})\n            \n        if (filteredItems && filteredItems.length > 0) {\n            return <div>\n            <MatchesTallies items={items} filteredItems={filteredItems}/>\n             {props.lookups.selectedTally > 0 && <span style={{float:'right'}}> \n                 <WithSelectedDropDowns\n                  skillSetAll={skillSetAll} skillAllValue={skillAllValue}  setSkillAllValue={setSkillAllValue}  untagAll={untagAll} unskillAll={unskillAll} \n                     intentAll={intentAll} intentAllValue={intentAllValue} setIntentAllValue={setIntentAllValue}  \n                     tagAll={tagAll} tagAllValue={tagAllValue} setTagAllValue={setTagAllValue}  lookups={props.lookups}\n                 />\n                 \n                        \n                \n                 <Button style={{marginLeft:'1em'}} onClick={deleteAll} variant=\"danger\"  >Delete Selected</Button> \n               \n            </span> } \n               \n                <List\n                    ref={listRef}\n                    itemData={{items: filteredItems, saveItem: saveItemWrap, deleteItem, findKeyBy, lookups: props.lookups, setPageMessage: props.setPageMessage}}\n                    itemKey={index => index}  \n                    className=\"List\"\n                    height={700}\n                    itemCount={filteredItems.length}\n                    itemSize={getItemSize}\n                    width={'100%'}\n                  >{RenderRow}</List>\n            </div>\n        } else {\n            //{JSON.stringify(filteredItems)}\n            return <div >\n             \n                <div style={{textAlign:'center'}}>\n            <br/><b>No items</b><br/><br/>Upload <Link to=\"/sources\" ><Button>Sources</Button></Link> then <Link to=\"/import\" ><Button>Import</Button></Link>.</div></div>\n        }\n    }\n    \n     return <div>\n        <EditorSearchBar {...props} searchFilter={searchFilter} setSearchFilter={setSearchFilter} skillFilterValue={skillFilterValue} setSkillFilterValue={setSkillFilterValue} resetSelection={resetSelection} selectAll={selectAll}  createEmptyItem={createEmptyItem} intentFilterValue={intentFilterValue} setIntentFilterValue={setIntentFilterValue} untagAll={untagAll} unskillAll={unskillAll} sort={sort}  />\n         {renderEditor(props)}\n    </div>\n    \n}\n      \n\n\n\n\n","/* global window */\nimport React  from 'react';\nimport {Button, Navbar } from 'react-bootstrap'\nimport {Link} from 'react-router-dom'\nimport fireImage from '../images/singingman.svg'\nimport waitingImage from '../images/waiting.gif'\nimport ReactGA from 'react-ga';\n\n\nReactGA.initialize('UA-3712973-4');\n\nexport default function NavbarComponent(props) {\n    //console.log(props)\n    ReactGA.pageview(props.history.location.pathname);\n    var astyle={paddingLeft:'0.3em'}\n    const currentPage = props.history && props.history.location && props.history.location.pathname ? props.history.location.pathname : '/'\n    const pages = {\n        '/': {name: 'NLU Tool',show: false},\n        '/search': {name: 'Search',show: true},//link:'https://github.com/syntithenai/opennludata/wiki'\n        '/sources': {name: 'Sources',show: true},\n        '/import': {name: 'Import',show: true},\n        '/lists': {name: 'Entities',show: true},\n        '/utterances': {name: 'Utterances',show: true},\n        '/examples': {name: 'Intents',show: true},\n        '/skills': {name: 'Skills',show: true},\n        '/help': {name: 'Help',show: false},\n        \n    }\n    \n    const links = Object.keys(pages).map(function(link,k) {\n        const page = pages[link]\n        if (page.show) {\n            if (page.link) {\n                return <a key={k} style={astyle} href={page.link} ><Button variant='primary' >{page.name}</Button></a>                \n            } else {\n                return <Link key={k} style={astyle} to={link} ><Button variant={currentPage.indexOf(link) !== -1 ? 'success' : 'primary'}>{page.name}</Button></Link>\n            }\n        }\n        return null\n    })\n    \n    const helpButton = pages[currentPage] && pages[currentPage].helpComponent ? pages[currentPage].helpComponent : <Link to=\"/help\" ><Button>Help</Button></Link>\n    \n//        <Navbar.Text><Button><img src='/menu.svg' alt='menu' /></Button></Navbar.Text>\n\n    return <Navbar  bg=\"dark\" variant=\"dark\"  >\n        {props.message && <div style={{position:'fixed',top:5,left:window.innerWidth ? (window.innerWidth /2 - 40) : 100, border: '2px solid red', background: 'pink', padding: '0.5em', minWidth:'400px' ,borderRadius:'5px'}} >\n            <Button variant=\"danger\" size=\"sm\"  style={{float:'right', fontWeight: 'bold',borderRadius:'20px',marginLeft:'1em'}} onClick={function(e) {props.setPageMessage('')}}>X</Button>{props.message} \n        </div>}\n    \n        <img src={fireImage}  style={{height:'5em', marginRight:'0.4em'}} alt=\"logo\"/>\n        \n         \n        <div style={{width: '100%'}}>\n        {links}\n        </div>\n        \n        {props.message}\n        <Navbar.Text style={{position:'fixed', top:'2px', right:'2px'}} className=\"justify-content-end\" >{helpButton}</Navbar.Text>\n        <img src={waitingImage} alt='waiting' style={{position:'fixed', top:5, right:5, zIndex:99, display: props.waiting ? 'block' : 'none' }} />\n    </Navbar>\n}\n\n\n        //<Navbar.Text><Link to=\"/organise\" ><Button>Organise</Button></Link></Navbar.Text>\n        //<Navbar.Text><Link to=\"/skills\" ><Button>My Skills</Button></Link></Navbar.Text>\n        //<Navbar.Text><Link to=\"/search\" ><Button>Search Community</Button></Link></Navbar.Text>\n","/* global window */\nimport {Button,   Dropdown, ButtonGroup } from 'react-bootstrap'\nimport React from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ReactTags from 'react-tag-autocomplete'\nimport useNluRow from './useNluRow'\nimport SuggestionComponent from './components/SuggestionComponent'\nimport checkImage from './images/check.svg'\nimport thumbdownImage from './images/thumb-down.svg'\nimport thumbupImage from './images/thumb-up.svg'\n\n\nexport default function NluImportRow(props) {\n     const  {item, splitNumber , style} = props;\n       const {    \n            intentTitle, setIntentTitle, selectionState, setSelectionState, newEntity, setNewEntity, tags, skills, reactTags, reactSkills, \n            onTagDelete, onTagAddition, onSkillDelete,onSkillAddition,  updateExampleContent, entityClicked, entityTypeChanged, intentChanged, entityDelete, selectItem,  deselectItem\n        } = useNluRow(props.item, props.saveItem, props.splitNumber, props.style, props.setPageMessage)\n                \n       var intentOptions = props.lookups.intentLookups && props.lookups.intentLookups.sort().map(function(intentKey,i) {\n          return <Dropdown.Item key={i} value={intentKey} onClick={function(e) {intentChanged(intentKey)}}  >{intentKey}</Dropdown.Item>\n       })\n       // ONE PER ENTITY FOR THIS EXAMPLE\n       var entitiesDropdowns = item && item.entities ? item.entities.map(function(entity,i) {\n           var entityOptions = props.lookups.entityLookups.sort().map(function(entityKey,j) {\n              return <Dropdown.Item  key={j} value={entityKey} onClick={function(e) {entityTypeChanged(i,entityKey)}}  >{entityKey}</Dropdown.Item>\n           }) \n           return<Dropdown style={{marginLeft:'0.2em'}} variant='info'  key={i}  as={ButtonGroup}>\n              <Dropdown.Toggle variant='info'  split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n              <Button variant='info'   size=\"sm\"  onClick={function(e) {entityClicked(i,entity.type)}} >\n              <b>{entity.type}</b> \n                -\n              {entity.value ? entity.value : 'Select Entity Type'}\n              </Button>\n              <Button variant=\"info\" size=\"sm\" onClick={function(e) {entityDelete(i,'')}} >X</Button>\n              <Dropdown.Menu>\n                  <form  style={{display:'inline'}}>\n                    <div className=\"form-group\">\n                      <input type=\"text\" className=\"form-control\" onChange={function(e) {entityTypeChanged(i,e.target.value)}}\n                    value={entity.type} />\n                    </div>\n                  </form>\n                  {entityOptions}\n              </Dropdown.Menu>\n            </Dropdown>\n       }): [] ;\n        //PLUS CREATE NEW WHEN TEXT IS SELECTED\n       if (selectionState  && selectionState.textSelection && selectionState.textSelection.length > 0 &&  selectionState.textSelectionFrom === splitNumber) {\n           var entityOptions =  props.lookups.entityLookups && props.lookups.entityLookups.sort().map(function(entityKey,j) {\n              return <Dropdown.Item key={j} value={entityKey} onClick={function(e) {entityTypeChanged(-1,entityKey)}}  >{entityKey}</Dropdown.Item>\n           })\n           entitiesDropdowns.push(<Dropdown key=\"new\" variant='success'  as={ButtonGroup}>\n\n          <Dropdown.Toggle variant='success'  split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button  variant='success' size=\"sm\" >New Entity</Button>\n\n          <Dropdown.Menu>\n           <form style={{display:'inline'}} onSubmit={function(e) {e.preventDefault(); entityTypeChanged(-1,newEntity)}}>\n                <div className=\"form-group\">\n                  <input type=\"text\" className=\"form-control\" onChange={function(e) {setNewEntity(e.target.value)}}\n                value={newEntity} />\n                </div>\n              </form>\n              {entityOptions}\n          </Dropdown.Menu>\n        </Dropdown>)\n       }\n       //var buttonImageStyle={color:'white', height:'2em'}\n       return item && <div style={style} className={splitNumber % 2 ? 'ListItemOdd' : 'ListItemEven'}>\n               <div style={{position:'relative', width: '100%', textAlign:'left',  borderTop: '2px solid black'}}>\n                  \n                   {!item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"secondary\" onClick={function() {selectItem(splitNumber)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Select\" /></Button>}\n                  {item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"success\" onClick={function() {deselectItem(splitNumber)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\" /></Button>}\n                  \n                  {item.intent && <Button  style={{float:'right', marginLeft:'0.2em'}}  variant=\"success\"  onClick={function() {props.saveNlu(splitNumber)}} ><img src={thumbupImage} alt=\"Save\" /> Save</Button>}\n                  {!item && <Button   style={{float:'right', marginLeft:'0.2em'}} variant=\"secondary\" ><img src={thumbupImage} alt=\"Save\" /> Import</Button>} \n                  <Button  variant=\"danger\" style={{float:'right'}} onClick={function(e) {props.deleteItem(splitNumber,(item.id ? item.id : ''))}} ><img src={thumbdownImage} alt=\"Delete\" /> Delete</Button>\n                  \n                 \n                  <Dropdown  style={{float:'left'}} as={ButtonGroup}>\n                  <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button   size=\"sm\" >{item.intent ? item.intent.toString() : 'Select Intent'} </Button>\n                  <Dropdown.Menu>\n                   <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault(); intentChanged(intentTitle)}}>\n                        <div className=\"form-group\">\n                          <input type=\"text\" className=\"form-control\" value={intentTitle} onChange={function(e) {setIntentTitle(e.target.value)}}\n                         />\n                        </div>\n                      </form>\n                      {intentOptions}\n                  </Dropdown.Menu>\n                  </Dropdown>\n                  <span style={{float:'left'}}>{entitiesDropdowns}</span>\n                 \n                  \n                  <div style={{float:'left'}}>\n                   <ReactTags\n                    placeholderText=\"Add to skill\"\n                    minQueryLength={0}\n                    maxSuggestionsLength={50}\n                    autoresize={false}\n                    allowNew={true}\n                    ref={reactSkills}\n                    tags={skills}\n                    suggestionComponent={SuggestionComponent}\n                    suggestions={props.lookups.skillLookups.map(function(tag,i) {return {id: i, name: tag}})}\n                    onDelete={onSkillDelete}\n                    onAddition={onSkillAddition} /> \n                    </div>\n                    \n                  <div style={{float:'left'}}>\n                   <ReactTags\n                    placeholderText=\"Add new tag\"\n                    minQueryLength={0}\n                    maxSuggestionsLength={50}\n                    autoresize={false}\n                    allowNew={true}\n                    ref={reactTags}\n                    tags={tags}\n                    suggestionComponent={SuggestionComponent}\n                    suggestions={props.lookups.tagLookups.map(function(tag,i) {return {id: i, name: tag}})}\n                    onDelete={onTagDelete}\n                    onAddition={onTagAddition} /> \n                    </div>\n                  \n                  <input  \n                 \n                   onFocus={ function(e) {\n                       setSelectionState(null)\n                    }}\n                   onSelect={ function(e) {\n                     var textSelection = window.getSelection().toString(); \n                     setSelectionState({textSelection:textSelection, textSelectionFrom: splitNumber, startTextSelection: e.target.selectionStart, endTextSelection: e.target.selectionEnd})\n                  }}  \n                   type='text'   style={{clear:'both', width:'80%'}}  value={item.example} id={\"example_input_\"+splitNumber} \n                   onChange={function(e) { updateExampleContent(e.target.value)}} />\n                  \n                  \n                \n                \n            </div>\n      </div>\n}\n","import React, {useEffect} from 'react';\nimport './App.css';\nimport {Link} from 'react-router-dom'\nimport {Button} from 'react-bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { VariableSizeList as List } from 'react-window';\nimport NluImportRow from './NluImportRow'\nimport EditorSearchBar from './components/EditorSearchBar'\nimport useNluEditor from './useNluEditor'\nimport TagAllDropDown from './components/TagAllDropDown'\nimport IntentAllDropDown from './components/IntentAllDropDown'\nimport SkillAllDropDown from './components/SkillAllDropDown'\nimport arrowthickleftImage from './images/arrow-thick-left.svg'\nimport arrowthickrightImage from './images/arrow-thick-right.svg'\n\n\nconst RenderRow = function(props) {\n    const index = props.index\n    const style = props.style\n    const item = props.data.items[index]\n    //console.log(['USENLUROW rr',index])\n    return <NluImportRow  \n         item={item}  splitNumber={index} style={style}\n         saveItem={props.data.saveItem} deleteItem={props.data.deleteItem} saveNlu={props.data.saveNlu}\n         lookups={props.data.lookups}  setPageMessage={props.data.setPageMessage} />\n}\n\n\nexport default function NluImportEditor(props) {\n    \n    //const examplesDB = useDBSingleKey('nlutool','examples','alldata')\n    const {loadAll, deleteItem ,items,  findKeyBy, searchFilter, setSearchFilter, tagAllValue, setTagAllValue, skillAllValue, setSkillAllValue, skillFilterValue, setSkillFilterValue, intentFilterValue, setIntentFilterValue, intentAllValue, setIntentAllValue, listRef, tagAll, untagAll, unskillAll, intentAll, resetSelection, selectAll,  skillSetAll, saveItemWrap, getItemSize, deleteAll, saveAll, saveNlu, filteredItems, createEmptyItem, sort} = useNluEditor('nlutool','import','alldata', props.updateFunctions.updateLookups)\n    useEffect(() => {\n        loadAll()\n        //examplesDB.loadAll()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n    \n    //useEffect(() => {\n        //if (importFrom) {\n            //var parsed = parseImportText(importFrom)\n            //setItems(parsed)\n            //props.setImportFrom('')\n        //}\n    //// eslint-disable-next-line react-hooks/exhaustive-deps\n    //},[props.importFrom])\n    \n    \n    \n   \n    \n    function renderEditor(props) {\n        // filter rendered list using callback \n       \n         //filteredItems.sort(function(oldItem,item) {console.log( ['SORT',oldItem.example,item.example]); return (item.example && oldItem.example && item.example.trim().toLowerCase <= oldItem.example.trim().toLowerCase) })\n           \n        if (filteredItems && filteredItems.length > 0) {\n            \n           //var skillOptions = props.lookups.skillLookups && props.lookups.skillLookups.sort().map(function(skillKey,i) {\n                  //return <Dropdown.Item key={i} value={skillKey} onClick={function(e) {setSkillAllValue(skillKey); skillSetAll(skillKey)}}  >{skillKey}</Dropdown.Item>\n            //})\n            \n            //var tagOptions = props.lookups.tagLookups && props.lookups.tagLookups.sort().map(function(tagKey,i) {\n              //return <Dropdown.Item key={i} value={tagKey} onClick={function(e) {setTagAllValue(tagKey); tagAll(tagKey)}}  >{tagKey}</Dropdown.Item>\n           //})\n           //var intentOptions = props.lookups.intentLookups && props.lookups.intentLookups.sort().map(function(intentKey,i) {\n              //return <Dropdown.Item key={i} value={intentKey} onClick={function(e) {setIntentAllValue(intentKey);intentAll(intentKey)}}  >{intentKey}</Dropdown.Item>\n           //})\n            return <div>\n             <span style={{float:'left', fontWeight:'bold'}} >&nbsp;{filteredItems.length}/{items.length} matches </span>\n             {props.lookups.selectedTally > 0 && <span style={{float:'right'}}> \n                <span>With {props.lookups.selectedTally} selected&nbsp;\n              <SkillAllDropDown skillSetAll={skillSetAll} skillAllValue={skillAllValue}  setSkillAllValue={setSkillAllValue}  lookups={props.lookups}  untagAll={untagAll} unskillAll={unskillAll}/>\n                <IntentAllDropDown intentAll={intentAll} intentAllValue={intentAllValue} setIntentAllValue={setIntentAllValue}  lookups={props.lookups}  untagAll={untagAll} unskillAll={unskillAll}/>\n                <TagAllDropDown tagAll={tagAll} tagAllValue={tagAllValue} setTagAllValue={setTagAllValue}  lookups={props.lookups}  untagAll={untagAll} unskillAll={unskillAll}/>\n                \n                </span>\n                <Button style={{marginLeft:'1em'}} onClick={saveAll} variant=\"success\"  >Save Selected</Button> \n                <Button style={{marginLeft:'1em'}} onClick={deleteAll} variant=\"danger\"  >Delete Selected</Button> \n                \n            </span> } \n                \n              \n                \n                <List\n                    ref={listRef}\n                    itemData={{items: filteredItems, saveItem: saveItemWrap, saveNlu, deleteItem, findKeyBy, lookups:props.lookups, setPageMessage: props.setPageMessage}}\n                    itemKey={index => index}  \n                    className=\"List\"\n                    height={700}\n                    itemCount={filteredItems.length}\n                    itemSize={getItemSize}\n                    width={'100%'}\n                  >{RenderRow}</List>\n            </div>\n            \n            \n        } else {\n            //{JSON.stringify(filteredItems)}\n            return <div >\n                <div style={{textAlign:'center'}}>\n            <br/><b>No more items to import</b><br/><br/>Open <Link to=\"/sources\" ><Button><img style={{height:'1em', paddingRight:'1em'}}  src={arrowthickleftImage} alt=\"Sources\" />Sources</Button></Link> to create more or <Link to=\"/examples\" ><Button>Organise<img src={arrowthickrightImage} alt=\"Intents\" style={{height:'1em', paddingLeft:'1em'}}  /></Button></Link> what you have imported into skills.\n            </div></div>\n        }\n    }\n    // {JSON.stringify(items)}\n    return <div>\n         \n        <EditorSearchBar {...props} searchFilter={searchFilter} setSearchFilter={setSearchFilter} skillFilterValue={skillFilterValue} setSkillFilterValue={setSkillFilterValue} resetSelection={resetSelection} selectAll={selectAll} createEmptyItem={createEmptyItem} untagAll={untagAll} unskillAll={unskillAll} intentFilterValue={intentFilterValue} setIntentFilterValue={setIntentFilterValue}  sort={sort} />\n         {renderEditor(props)}\n    </div>\n    \n    \n}\n      \n\n","import JSZip from 'jszip'\n\nfunction createZip(zipStructure) {\n    var zip = new JSZip();\n     console.log(['ZIP',zipStructure])\n    function recurseZipStructure(zipStructure, path) {\n        if (Array.isArray(zipStructure.files)) {\n            zipStructure.files.map(function(file) {\n                console.log(['ZIP file',file])\n                var options = (file.base64 && file.base64.length > 0) ? {base64: true} : {} \n                if (file.name && file.name.length > 0 && file.content) zip.file(path+\"/\"+file.name,file.content, options);\n                return null\n            })\n        }\n        if (Array.isArray(zipStructure.folders)) {\n            zipStructure.folders.map(function(folder) {\n                console.log(['ZIP folder',folder])\n                if (folder.name && folder.name.length > 0) zip.folder(folder.name);\n                if ((folder.files && folder.files.length > 0) || (folder.folders && folder.folders.length > 0)) {\n                    recurseZipStructure(folder, path+\"/\"+folder.name)\n                }\n                return null\n            })\n        }\n         \n    } \n     \n    recurseZipStructure(zipStructure,'')\n     \n    return new Promise(function(resolve,reject) {\n        zip.generateAsync({type:\"blob\"}).then(function(content) {\n            resolve(content)\n        })\n    })\n}\n\nexport {createZip}\n","import {  uniquifyArray, replaceEntities } from '../utils';\nimport {createZip} from './createZip'\nimport localforage from 'localforage'\n\nasync function exportJOVO(skill) {\n     return new Promise(function(resolve,reject) {\n         var listsStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"lists\",\n         });\n         listsStorage.getItem('alldata').then(function(lists) {\n             var jovo={invocation: skill.invocation}\n             //console.log(['JVO export',skill])\n             var intents = {}\n             var entityTypes={}\n             if (skill.intents) {\n                 Object.keys(skill.intents).map(function(intentKey) {\n                     var examples = skill.intents[intentKey]\n                     if (!intents[intentKey])  intents[intentKey] = {name:intentKey, phrases:[], inputs: []}\n                     var inputs = {}\n                     if (Array.isArray(examples)) {\n                         examples.map(function(example) {\n                            intents[intentKey].phrases.push(replaceEntities(example.example,example.entities))\n                            if (Array.isArray(example.entities)) {\n                                example.entities.map(function(entity) {\n                                   inputs[entity.type] = true  \n                                   if (!Array.isArray(entityTypes[entity.type])) entityTypes[entity.type] = []\n                                   entityTypes[entity.type].push(entity.value)\n                                   return null\n                                })\n                            }\n                            return null\n                         })\n                     }\n                     intents[intentKey].phrases = uniquifyArray(intents[intentKey].phrases).sort()\n                     intents[intentKey].inputs = Object.keys(inputs).map(function(entityType) { \n                         var entityTypeName = entityType+\"Type\"\n                         if (skill.entities && skill.entities[entityType] && (skill.entities[entityType].googleType || skill.entities[entityType].alexaType)) {\n                             entityTypeName ={}\n                             if (skill.entities[entityType].googleType) entityTypeName.dialogflow = skill.entities[entityType].googleType\n                             if (skill.entities[entityType].alexaType) entityTypeName.alexa = skill.entities[entityType].alexaType\n                         } \n                         return {name: entityType, type: entityTypeName} \n                    })\n                    return null\n                 }) \n             }\n             jovo.intents = Object.values(intents)\n             //console.log(['skill lists',entityTypes, skill.lists])\n             //var usedLists = {}\n             //if (skill.entities) {\n                //Object.keys(skill.entities).map(function(entity,i) {\n                    //if (skill.entities[entity] && Array.isArray(skill.entities[entity].lists)) {\n                        //skill.entities[entity].lists.map(function(list) {\n                           //usedLists[list] = true  \n                        //})\n                    //}\n                //})\n             //}\n            \n             //lists.map(function(item) {\n                 //console.log(['LIST',item])\n                 //Object.keys(usedLists).map(function(listKey) {\n                    //console.log([listKey,item.tags.indexOf(listKey) !== -1, item.tags])\n                    //if (item && item.tags && item.tags.indexOf(listKey) !== -1) {\n                        //console.log('list item used ')\n                        //entityTypes[listKey].push(item.value)\n                    //}\n                //})\n            //})\n            var synonyms = {}\n            var synonymsIndex = {}\n            lists.map(function(item) {\n                 if (item.value && item.value.trim().length > 0) {\n                    if (item.synonym) {\n                        if (!Array.isArray(synonymsIndex[item.synonym])) synonymsIndex[item.synonym] = [] \n                        synonyms[item.value] = item.synonym\n                        synonymsIndex[item.synonym].push(item.value)\n                    }\n                    Object.keys(entityTypes).map(function(entityType) {\n                        if (skill.entities && skill.entities[entityType]  && skill.entities[entityType].lists)  {\n                            skill.entities[entityType].lists.map(function(entityExtrasList) {\n                                //console.log(['li',entityExtrasList,item.tags,item.tags.indexOf(entityExtrasList)])\n                                if (item && item.tags && item.tags.indexOf(entityExtrasList) !== -1) {\n                                    //console.log(['USE ENTITY',entityType, entityExtrasList,lists[entityExtrasList]])\n                                    entityTypes[entityType].push(item.value)\n                               }\n                               return null\n                            })\n                        }\n                        return null\n                    })\n                }\n                return null\n            })\n             \n            console.log(['synonyms',synonyms, synonymsIndex])\n        \n            jovo.inputTypes = Object.keys(entityTypes).map(function(entityType) {\n            //console.log(['JOVOEX',lists,entityType])\n                const values = []\n                uniquifyArray(entityTypes[entityType]).sort().map(function(value) {\n                    if (!synonyms[value]) {\n                        if (value && value.trim().length > 0) values.push( {value:value})\n                    }\n                    return null\n                })\n                Object.keys(synonymsIndex).map(function(synonym) {\n                    if (synonym && synonym.trim().length > 0) values.push({value:synonym, synonyms:synonymsIndex[synonym] })\n                    return null\n                })\n                return {name: entityType+\"Type\", values:values}  \n            })\n                    \n            \n            \n            console.log(['inputtypes',jovo.inputTypes])\n            //console.log(['JVO final',jovo])\n            const content = JSON.stringify(jovo)\n             const final =  {folders:[{'name':'models', files:[{name:'en-US.json', content: content}] }]   }\n             //console.log(['JVO final',final])\n             resolve(final)\n              \n        })\n    })\n}\n\n\nasync function exportJOVOZip(skill) {\n    return createZip(await exportJOVO(skill))\n}\n\nexport {exportJOVO, exportJOVOZip}\n","import {  uniquifyArray, replaceEntities } from '../utils';\nimport {createZip} from './createZip'\nimport localforage from 'localforage'\n\n\n\n\nasync function exportMycroft(skill) {\n    return new Promise(function(resolve,reject) {\n        var listsStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"lists\",\n         });\n         var modelFiles=[]\n         listsStorage.getItem('alldata').then(function(lists) {\n            //var usedLists = {}\n            //if (skill.entities) {\n                //Object.keys(skill.entities).map(function(entity,i) {\n                    //if (skill.entities[entity] && Array.isArray(skill.entities[entity].lists)) {\n                        //skill.entities[entity].lists.map(function(list) {\n                           //usedLists[list] = true  \n                        //})\n                    //}\n                    //return null\n                //})\n            //}\n           \n            \n            \n           \n             // intents - \n             // collate examples, one file per intent\n             var intents={}\n             if (skill.intents) {\n                 Object.keys(skill.intents).map(function(intentKey) {\n                     var examples = skill.intents[intentKey]\n                     if (!Array.isArray(intents[intentKey]))  intents[intentKey] = []\n                     if (Array.isArray(examples)) {\n                         examples.map(function(example) {\n                            intents[intentKey].push(replaceEntities(example.example,example.entities))\n                            return null\n                         })\n                     }\n                     intents[intentKey] = uniquifyArray(intents[intentKey]).sort()\n                    return null\n                 }) \n             }\n             // one per file\n             // entities - merge values and lists values , one entity per file\n             var entities={}\n             if (skill.entities) { \n                 Object.keys(skill.entities).map(function(entityKey) {\n                     var combinedEntities = []\n                     var entity = skill.entities[entityKey]\n                     if (entity.values) {\n                         combinedEntities = combinedEntities.concat(entity.values)\n                     } \n                     if (entity.lists) {\n                         //var skillLists = {}\n                         //Object.keys(usedLists).map(function(listKey) {\n                          //skillLists[listKey] = []  \n                          //return null\n                        //})\n                       \n                       console.log(['add from lists',entity.lists])\n                        lists.map(function(item) {\n                            entity.lists.map(function(listKey) {\n                                console.log([listKey,item.tags.indexOf(listKey) !== -1, item.tags])\n                                if (item && item.tags && item.tags.indexOf(listKey) !== -1) {\n                                    console.log('list item used ')\n                                    combinedEntities.push(item.value)\n                                }\n                                return null\n                            })\n                            return null\n                        })\n                     }\n                     entities[entityKey] = uniquifyArray(combinedEntities).sort()\n                     return null\n                 }) \n             }\n             \n             Object.keys(intents).map(function(intent) {\n                 modelFiles.push({name:intent+'.intent',content: intents[intent].join(\"\\n\")})\n                 return null\n             })\n             Object.keys(entities).map(function(entity) {\n                 modelFiles.push({name: entity+'.entity',content: entities[entity].join(\"\\n\")})\n                 return null\n             })\n              resolve( modelFiles)\n        })\n    })\n}\n\n\nasync function exportMycroftZip(skill) {\n    const files = await exportMycroft(skill)\n    return createZip({files:files})\n}\n\nexport {exportMycroft, exportMycroftZip}\n\n","const RASATemplates = {\n    config: `\nlanguage: en\npipeline:\n  - name: WhitespaceTokenizer\n  - name: RegexFeaturizer\n  - name: LexicalSyntacticFeaturizer\n  - name: CountVectorsFeaturizer\n  - name: CountVectorsFeaturizer\n    analyzer: \"char_wb\"\n    min_ngram: 1\n    max_ngram: 4\n  - name: ResponseSelector\n    epochs: 100\n  - name: DIETClassifier\n    epochs: 100\n  - name: EntitySynonymMapper\n\npolicies:\n  - name: FormPolicy\n  - name: MemoizationPolicy\n  - name: TEDPolicy\n    max_history: 5\n    epochs: 100\n  - name: MappingPolicy\n  - name: \"FallbackPolicy\"\n    nlu_threshold: 0.5\n    core_threshold: 0.3\n    fallback_action_name: \"action_default_fallback\"\n    `,\n    credentials: `\n# This file contains the credentials for the voice & chat platforms\n# which your bot is using.\n# https://rasa.com/docs/rasa/user-guide/messaging-and-voice-channels/\n\nrest:\n#  # you don't need to provide anything here - this channel doesn't\n#  # require any credentials\n\n\n#facebook:\n#  verify: \"<verify>\"\n#  secret: \"<your secret>\"\n#  page-access-token: \"<your page access token>\"\n\n#slack:\n#  slack_token: \"<your slack token>\"\n#  slack_channel: \"<the slack channel>\"\n\n#socketio:\n#  user_message_evt: <event name for user message>\n#  bot_message_evt: <event name for but messages>\n#  session_persistence: <true/false>\n\n#mattermost:\n#  url: \"https://<mattermost instance>/api/v4\"\n#  token: \"<bot token>\"\n#  webhook_url: \"<callback URL>\"\n\n#rasa:\n  #url: \"http://localhost:5002/api\"\n \n    `,\n    endpoint: `\n#action_endpoint:\n#  url: http://localhost:5055/webhook\n\n    `,\n    actions:  `\n\"\"\" RASA actions \"\"\"\n \n    `,\n    single_action: function(className, actionName) {\n        return `\n\"\"\" RASA action \"\"\"\nimport sys\nimport logging\nfrom typing import Any, Text, Dict, List\nfrom datetime import datetime\nfrom rasa_sdk import Action, Tracker\nfrom rasa_sdk.executor import CollectingDispatcher\nfrom rasa_sdk.events import SlotSet, FollowupAction\n\nclass `+className+`(Action):\n    def name(self) -> Text:\n        return \"`+actionName+`\"\n    def run(self, dispatcher: CollectingDispatcher,\n            tracker: Tracker,\n            domain: Dict[Text, Any]) -> List[Dict[Text, Any]]:\n        var slotsets = []\n        logger = logging.getLogger(__name__)    \n        logger.debug('Action `+actionName+`')\n        return [SlotSet(\"hermod_force_end\", \"true\"),SlotSet(\"hermod_force_continue\", None)] \n        \n        dispatcher.utter_message(text=\"Action `+actionName+`\")\n        return slotsets\n    \n    `\n    }\n    ,\n    domain: `\nsession_config:\n  carry_over_slots_to_new_session: true\n  session_expiration_time: 5    \n\n`,\n    stories:`\n## greet + location/price + cuisine + num people    <!-- name of the story - just for debugging -->\n* greet\n   - action_ask_howcanhelp\n* inform{\"location\": \"rome\", \"price\": \"cheap\"}  <!-- user utterance, in format intent{entities} -->\n   - action_on_it\n   - action_ask_cuisine\n* inform{\"cuisine\": \"spanish\"}\n   - action_ask_numpeople        <!-- action that the bot should execute -->\n* inform{\"people\": \"six\"}\n   - action_ack_dosearch    \n`,\n    session:`\nsession_config:\n  carry_over_slots_to_new_session: true\n  session_expiration_time: 5\n`\n}\nexport default RASATemplates\n","import { replaceEntitiesWithValues, uniquifyArray, snakeToCamelCase, camelToSnakeCase, toSnakeCase} from '../utils';\nimport {createZip} from './createZip'\nimport localforage from 'localforage'\nimport RASATemplates from './RASATemplates'\n\n\n function generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContent, credentialsContent, endpointsContent, actionFiles, storyData) {\n    var folderTree = {\n        files:[\n            {name:'actions.py',content:actionsContent},\n            {name:'config.yml',content:configContent},\n            {name:'domain.yml',content:domainContent},\n            {name:'credentials.yml',content:credentialsContent},\n            {name:'endpoints.yml',content:endpointsContent}\n        ], \n        folders:[\n            {name:'actions', files:actionFiles}, \n            {name:'data', \n                files:[{name:'nlu.md', content: nluContent}, {name:'stories.md', content: storyData ? storyData : ''}], \n                folders:[{name:'lookups', files:fileLookups}]\n            }\n        ]\n    }\n    console.log(['TREE GEN',folderTree])\n    return folderTree\n}\n\n// just the models subfolder\n// one file per intent\n// one file per entity\nfunction exportRASAMD(skill) {\n     //\"rasa_nlu_data\": {\n        //\"common_examples\": [],\n        //\"regex_features\" : [],\n        //\"lookup_tables\"  : [],\n        //\"entity_synonyms\": []\n    //}\n    //{\"rasa_nlu_data\":{\"regex_features\":[],\"entity_synonyms\":[{\"synonyms\":[\"biggest city\",\"capital city\"],\"value\":\"capital\"}],\"common_examples\":[{\"text\":\"sounds good sounds good thank you\",\"intent\":\"affirmative\",\"entities\":[]},\n      //{\"text\":\"what is the use of a actinometer\",\"intent\":\"ask_attribute\",\"entities\":[{\"end\":15,\"entity\":\"attribute\",\"start\":12,\"value\":\"use\"},{\"end\":32,\"entity\":\"thing\",\"start\":21,\"value\":\"actinometer\"}]}\n    console.log(['EXPPORT RASA',skill])\n    return new Promise(function(resolve,reject) {\n         var listsStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"lists\",\n         });\n         var utterancesStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"utterances\",\n         });\n        \n        //resolve({files:[{name:'nlu.md', content: content}]})\n         \n         // LOAD ENTITY LISTS\n         listsStorage.getItem('alldata').then(function(lists) {\n            \n            console.log(['LISTS',lists])\n            \n            // for each entity, collate entity values and lists values\n            var entityLists = {}\n            if (skill.entities) {\n                Object.keys(skill.entities).map(function(entity,i) {\n                    const entityValue = skill.entities[entity]\n                    // values from examples\n                    if (entityValue && entityValue.values) {\n                        entityLists[entity] = entityValue.values\n                    } \n                    // values from tags\n                    if (skill.entities[entity] && Array.isArray(skill.entities[entity].lists)) {\n                        lists.map(function(listItem,listItemIndex) {\n                            skill.entities[entity].lists.map(function(entityList) {\n                               if (listItem.tags && listItem.tags.indexOf(entityList) !== -1) {\n                                   entityLists[entity].push(listItem.value)\n                               }\n                               return null\n                            })\n                            return null\n                        })\n                    }\n                    return null\n                })\n            }\n             console.log(['LISTS2',entityLists])\n             // lookup lists\n             var fileLookups=[]\n             var lookups = []\n             Object.keys(entityLists).map(function(entity) {\n                 var values = entityLists[entity]\n                 fileLookups.push({name:entity+\".txt\",content:values.join(\"\\n\")})\n                 lookups.push('## lookup:'+entity)\n                 lookups.push(\"data/lookups/\"+entity+\".txt\")\n                 return null\n             })\n             \n            \n            // collate synonyms\n            //var synonyms = {}\n            var synonymsIndex = {}\n            lists.map(function(item) {\n                 if (item.value && item.value.trim().length > 0) {\n                    if (item.synonym) {\n                        if (!Array.isArray(synonymsIndex[item.synonym])) synonymsIndex[item.synonym] = [] \n                        //synonyms[item.value] = item.synonym\n                        synonymsIndex[item.synonym].push(item.value)\n                    }\n                }\n                return null\n            })\n            console.log(['synonyms',synonymsIndex])\n            var synonymsOut = []\n            Object.keys(synonymsIndex).map(function(synonym) {\n                synonymsOut.push('## synonym:'+synonym)\n                uniquifyArray(synonymsIndex[synonym]).sort().map(function(item) {\n                    // TODO CONVERT TO RASA MD EXAMPLE WITH ENTITIES\n                    synonymsOut.push('- '+item)\n                    return null\n                }) \n                synonymsOut.push(\"\\n\")\n                return null\n            })\n            console.log(['synonyms OUT',synonymsOut])\n            \n            // COMMON EXAMPLES  \n            var nluOut=[]\n            if (skill.intents) {\n                console.log(['have intents',skill.intents])\n                Object.keys(skill.intents).map(function(intentKey) {\n                    const intentItem = skill.intents[intentKey]\n                    console.log('have intent ',intentKey,intentItem)\n                    nluOut.push('## intent:'+intentKey)\n                    var examples = []\n                    intentItem.map(function(example) {\n                        // TODO CONVERT TO RASA MD EXAMPLE WITH ENTITIES\n                        console.log(['INTY',example])\n                        if (example && example.example && example.example.trim().length > 0) {  \n                            var key = replaceEntitiesWithValues(example.example, example.entities)\n                            examples[key] = '- '+key\n                        }\n                        return null\n                    }) \n                    nluOut=[...nluOut, ...Object.values(examples)]\n                    nluOut.push(\"\\n\")\n                    return null\n                })\n            }\n            var nluContent = nluOut.join(\"\\n\")+\"\\n\"+synonymsOut.join(\"\\n\")+lookups.join(\"\\n\")\n            console.log(nluContent)\n            // CONSTANTS\n             var configContent = skill.rasaConfig ? skill.rasaConfig : RASATemplates.config\n            //var domainContent = ''\n            var credentialsContent = skill.rasaCredentials ? skill.rasaCredentials : RASATemplates.credentials\n            var endpointsContent = skill.rasaEndpoint ? skill.rasaEndpoint : RASATemplates.endpoint\n            \n            // RASA ACTIONS\n            var actionsContent = RASATemplates.actions\n            var domainActions = []\n            \n            var actionFiles = []\n            if (Array.isArray(skill.rasaActions)) {\n                skill.rasaActions.map(function(action) {\n                    if (action && action.trim().length > 0) {\n                        var string = snakeToCamelCase(toSnakeCase(camelToSnakeCase(action)))\n                        var snake = camelToSnakeCase(string)+'_action'\n                        domainActions.push(snake)\n                        var name = string && string.trim().length > 0 ? string[0].toUpperCase() + string.substring(1) : ''\n                        actionFiles.push({name:name+'Action.py', content:RASATemplates.single_action(name+'Action',snake)})\n                        actionsContent+=\"\\n import \"+name+'Action.py'\n                    }\n                    return null\n                })\n            }\n            var domainEntities = skill.entities ? Object.keys(skill.entities) : []\n            var domainIntents = skill.intents ? Object.keys(skill.intents) : []\n            var domainSlots = skill.slots ?  Object.keys(skill.slots) : (skill.entities ? Object.keys(skill.entities) : [])\n            var domainSlotsMeta = {}\n            domainSlots.map(function(slot) {\n               domainSlotsMeta[slot] = {\n                   type: skill.slots && skill.slots[slot] &&  skill.slots[slot].slotType ? skill.slots[slot].slotType : 'unfeaturized'\n                }\n               return null\n            })\n            console.log(['DOMAIN',domainEntities, domainIntents, domainSlots, domainSlotsMeta])\n            \n            var domainContentParts=[]\n            if (domainIntents.length > 0) {\n                domainContentParts.push(\"intents:\")\n                domainIntents.map(function(intent) {\n                    domainContentParts.push(\"- \"+intent)\n                    // TODO\n                    // TODO +\":\" plus intent entities\n                    // domainContentParts.push(\"  use_entities:\\n\")\n                    // domainContentParts.push(\"  - \"+entityForIntent)\n                    return null\n                })\n                domainContentParts.push(\"\\n\")\n            }\n            \n            if (domainEntities.length > 0) {\n                domainContentParts.push(\"entities:\")\n                domainEntities.map(function(entity) {\n                    domainContentParts.push(\"- \"+entity)\n                    return null\n                })\n                domainContentParts.push(\"\\n\")\n            }\n            if (domainSlots.length > 0) {\n                domainContentParts.push(\"slots:\")\n                domainSlots.map(function(slot,i) {\n                    domainContentParts.push(\"  \"+slot+\":\")\n                    domainContentParts.push(\"    type: \"+domainSlotsMeta[slot].type)\n                    return null\n                })\n                domainContentParts.push(\"\\n\")\n            }\n            // append session config\n            if (skill.rasaSession) skill.rasaSession.trim().split(\"\\n\").map(function(line) {\n                domainContentParts.push(line)\n                return null\n            })\n            \n            // UTTERANCES\n            var utterances = {}\n            if (skill.utterancesLists || skill.utterances) { \n                utterancesStorage.getItem('alldata').then(function(allUtterances) {\n                    if (Array.isArray(allUtterances)) {\n                        allUtterances.map(function(thisUtterance) {\n                            if (skill.utterances) { \n                                skill.utterances.map(function(listKey) {\n                                    if (thisUtterance.value === listKey) utterances[thisUtterance.value] = thisUtterance  \n                                    return null\n                                })\n                            }\n                            if (skill.utterancesLists) { \n                                skill.utterancesLists.map(function(listKey) {\n                                    if (thisUtterance.tags && thisUtterance.tags.indexOf(listKey) !== -1) utterances[thisUtterance.value] = thisUtterance  \n                                    return null\n                                })\n                                \n                            }\n                            return null\n                        })\n                        \n                         //fileLookups.push({name:toSnakeCase(utterance.value)+'.txt',content:''})\n                             \n                        \n                         // generate domainContent\n                         if (Object.keys(utterances).length > 0) {\n                             domainContentParts.push('responses:')\n                             Object.keys(utterances).map(function(utteranceKey) {\n                                    var utterance = utterances[utteranceKey]\n                                    domainContentParts.push('utter_'+toSnakeCase(utterance.value))\n                                    domainContentParts.push('- text: '+utterance.value)\n                                    if (utterance.synonyms && utterance.synonyms.length > 0) {\n                                        utterance.synonyms.map(function(synonym) {\n                                            domainContentParts.push('- text: '+synonym)\n                                            return null\n                                        })\n                                    } \n                                    return null\n                             })\n                         }\n                         resolve(generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContentParts.join(\"\\n\"), credentialsContent, endpointsContent, actionFiles, skill.rasaStories) )\n                    } else {\n                        resolve(generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContentParts.join(\"\\n\"), credentialsContent, endpointsContent, actionFiles, skill.rasaStories) )\n                    }\n                })\n               \n                \n            } else {\n                resolve(generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContentParts.join(\"\\n\"), credentialsContent, endpointsContent, actionFiles, skill.rasaStories) )\n            }\n        })\n        \n    })\n}\n\n\nfunction exportRASAMDZip(skill) {\n    return new Promise(function(resolve,reject) {\n        exportRASAMD(skill).then(function(data) {\n            createZip(data).then(function(res) {\n                resolve(res)\n            })\n        })\n    })\n}\n\nexport {exportRASAMD, exportRASAMDZip}\n","import { replaceEntitiesWithValues, snakeToCamelCase, camelToSnakeCase, toSnakeCase} from '../utils';\nimport {createZip} from './createZip'\nimport localforage from 'localforage'\nimport RASATemplates from './RASATemplates'\n\n function generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContent, credentialsContent, endpointsContent, actionFiles, storyContent) {\n    var folderTree = {\n        files:[\n            {name:'actions.py',content:actionsContent},\n            {name:'config.yml',content:configContent},\n            {name:'domain.yml',content:domainContent},\n            {name:'credentials.yml',content:credentialsContent},\n            {name:'endpoints.yml',content:endpointsContent}\n        ], \n        folders:[\n            {name:'actions', files:actionFiles}, \n            {name:'data', \n                files:[{name:'nlu.json', content: nluContent}, {name:'stories.md', content: storyContent ? storyContent : ''}], \n                folders:[{name:'lookups', files:fileLookups}]\n            }\n        ]\n    }\n    console.log(['TREE GEN',folderTree])\n    return folderTree\n}\n\n// just the models subfolder\n// one file per intent\n// one file per entity\nfunction exportRASAJSON(skill) {\n //\"rasa_nlu_data\": {\n        //\"common_examples\": [],\n        //\"regex_features\" : [],\n        //\"lookup_tables\"  : [],\n        //\"entity_synonyms\": []\n    //}\n    //{\"rasa_nlu_data\":{\"regex_features\":[],\"entity_synonyms\":[{\"synonyms\":[\"biggest city\",\"capital city\"],\"value\":\"capital\"}],\"common_examples\":[{\"text\":\"sounds good sounds good thank you\",\"intent\":\"affirmative\",\"entities\":[]},\n      //{\"text\":\"what is the use of a actinometer\",\"intent\":\"ask_attribute\",\"entities\":[{\"end\":15,\"entity\":\"attribute\",\"start\":12,\"value\":\"use\"},{\"end\":32,\"entity\":\"thing\",\"start\":21,\"value\":\"actinometer\"}]}\n    console.log(['EXPPORT RASA',skill])\n    return new Promise(function(resolve,reject) {\n         var listsStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"lists\",\n         });\n         var utterancesStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"utterances\",\n         });\n        \n        //resolve({files:[{name:'nlu.md', content: content}]})\n         \n         // LOAD ENTITY LISTS\n         listsStorage.getItem('alldata').then(function(lists) {\n            \n            console.log(['LISTS',lists])\n            \n            // for each entity, collate entity values and lists values\n            var entityLists = {}\n            if (skill.entities) {\n                Object.keys(skill.entities).map(function(entity,i) {\n                    const entityValue = skill.entities[entity]\n                    // values from examples\n                    if (entityValue && entityValue.values) {\n                        entityLists[entity] = entityValue.values\n                    } \n                    // values from tags\n                    if (skill.entities[entity] && Array.isArray(skill.entities[entity].lists)) {\n                        lists.map(function(listItem,listItemIndex) {\n                            skill.entities[entity].lists.map(function(entityList) {\n                               if (listItem.tags && listItem.tags.indexOf(entityList) !== -1) {\n                                   entityLists[entity].push(listItem.value)\n                               }\n                               return null\n                            })\n                            return null\n                        })\n                    }\n                    return null\n                })\n            }\n             console.log(['LISTS2',entityLists])\n             // lookup lists\n             var fileLookups=[]\n             var lookups = []\n             Object.keys(entityLists).map(function(entity) {\n                 var values = entityLists[entity]\n                 fileLookups.push({name:entity+\".txt\",content:values.join(\"\\n\")})\n                 lookups.push('## lookup:'+entity)\n                 lookups.push(\"data/lookups/\"+entity+\".txt\")\n                 return null\n             })\n             \n            \n            // collate synonyms\n            //var synonyms = {}\n            var synonymsIndex = {}\n            if (lists) lists.map(function(item) {\n                 if (item.value && item.value.trim().length > 0) {\n                    if (item.synonym) {\n                        if (!Array.isArray(synonymsIndex[item.synonym])) synonymsIndex[item.synonym] = [] \n                        //synonyms[item.value] = item.synonym\n                        synonymsIndex[item.synonym].push(item.value)\n                    }\n                }\n                return null\n            })\n            console.log(['synonyms',synonymsIndex])\n            //var synonymsOut = []\n            //Object.keys(synonymsIndex).map(function(synonym) {\n                //synonymsOut.push('## synonym:'+synonym)\n                //uniquifyArray(synonymsIndex[synonym]).sort().map(function(item) {\n                    //// TODO CONVERT TO RASA MD EXAMPLE WITH ENTITIES\n                    //synonymsOut.push('- '+item)\n                    //return null\n                //}) \n                //synonymsOut.push(\"\\n\")\n                //return null\n            //})\n            //console.log(['synonyms OUT',synonymsOut])\n            \n            // COMMON EXAMPLES  \n            var nluOut={}\n            if (skill.intents) {\n                console.log(['have intents',skill.intents])\n                Object.keys(skill.intents).map(function(intentKey) {\n                    const intentItem = skill.intents[intentKey]\n                    console.log('have intent ',intentKey,intentItem)\n                    //nluOut.push('## intent:'+intentKey)\n                    //var examples = []\n                    intentItem.map(function(example) {\n                        // TODO CONVERT TO RASA MD EXAMPLE WITH ENTITIES\n                        if (example && example.example && example.example.trim().length > 0) {\n                            console.log(['INTY',example])\n                            var key = replaceEntitiesWithValues(example.example, example.entities)\n                            nluOut[key] = {\n                                \"text\":key,\n                                \"intent\":intentKey,\n                                \"entities\":example.entities ? example.entities.map(function(entity) {\n                                    return {\"end\":entity.end,\"entity\":entity.type,\"start\":entity.start,\"value\":entity.value}\n                                }) : []\n                            }\n                        }\n                        //'- '+replaceEntitiesWithValues(example.example, example.entities))\n                        return null\n                    }) \n                    //nluOut=[...nluOut, ...uniquifyArray(examples)]\n                    //nluOut.push(\"\\n\")\n                    return null\n                })\n            }\n            var nluContent=JSON.stringify({\n                \"rasa_nlu_data\":{\n                    \"regex_features\":[],\n                    \"entity_synonyms\":Object.keys(synonymsIndex).map(function(synonym) {\n                       //var synValues =synonymsIndex[synonym]  \n                       return {synonyms:synonymsIndex[synonym]  , value:synonym}\n                    }),\n                    \"common_examples\":Object.values(nluOut)\n                }\n            })\n            \n           \n            //var nluContent = nluOut.join(\"\\n\")+\"\\n\"+synonymsOut.join(\"\\n\")+lookups.join(\"\\n\")\n            \n            \n            console.log(nluContent)\n            // CONSTANTS\n            var configContent = skill.rasaConfig ? skill.rasaConfig : RASATemplates.config\n            //var domainContent = ''\n            var credentialsContent = skill.rasaCredentials ? skill.rasaCredentials : RASATemplates.credentials\n            var endpointsContent = skill.rasaEndpoint ? skill.rasaEndpoint : RASATemplates.endpoint\n            \n            // RASA ACTIONS\n            var actionsContent = RASATemplates.actions\n            var domainActions = []\n            \n            var actionFiles = []\n            if (Array.isArray(skill.rasaActions)) {\n                skill.rasaActions.map(function(action) {\n                    if (action && action.trim().length > 0) {\n                        var string = snakeToCamelCase(toSnakeCase(camelToSnakeCase(action)))\n                        var snake = camelToSnakeCase(string)+'_action'\n                        domainActions.push(snake)\n                        var name = string && string.trim().length > 0 ? string[0].toUpperCase() + string.substring(1) : ''\n                        actionFiles.push({name:name+'Action.py', content:RASATemplates.single_action(name+'Action',snake)})\n                        actionsContent+=\"\\n import \"+name+'Action.py'\n                    }\n                    return null\n                })\n            }\n            var domainEntities = skill.entities ? Object.keys(skill.entities) : []\n            var domainIntents = skill.intents ? Object.keys(skill.intents) : []\n            var domainSlots = skill.slots ?  Object.keys(skill.slots) : (skill.entities ? Object.keys(skill.entities) : [])\n            var domainSlotsMeta = {}\n            domainSlots.map(function(slot) {\n               domainSlotsMeta[slot] = {\n                   type: skill.slots && skill.slots[slot] &&  skill.slots[slot].slotType ? skill.slots[slot].slotType : 'unfeaturized'\n                }\n               return null\n            })\n            console.log(['DOMAIN',domainEntities, domainIntents, domainSlots, domainSlotsMeta])\n            \n            var domainContentParts=[]\n            if (domainIntents.length > 0) {\n                domainContentParts.push(\"intents:\")\n                domainIntents.map(function(intent) {\n                    domainContentParts.push(\"- \"+intent)\n                    // TODO\n                    //+\":\" to intent line\n                    // domainContentParts.push(\"  use_entities:\\n\")\n                    // domainContentParts.push(\"  - \"+entityForIntent)\n                    return null\n                })\n                domainContentParts.push(\"\\n\")\n            }\n            \n            if (domainEntities.length > 0) {\n                domainContentParts.push(\"entities:\")\n                domainEntities.map(function(entity) {\n                    domainContentParts.push(\"- \"+entity)\n                    return null\n                })\n                domainContentParts.push(\"\\n\")\n            }\n            if (domainSlots.length > 0) {\n                domainContentParts.push(\"slots:\")\n                domainSlots.map(function(slot,i) {\n                    domainContentParts.push(\"  \"+slot+\":\")\n                    domainContentParts.push(\"    type: \"+domainSlotsMeta[slot].type)\n                    return null\n                })\n                domainContentParts.push(\"\\n\")\n            }\n            // append session config\n            if (skill.rasaSession) skill.rasaSession.trim().split(\"\\n\").map(function(line) {\n                domainContentParts.push(line)\n                return null\n            })\n            \n            // UTTERANCES\n            var utterances = {}\n            if (skill.utterancesLists || skill.utterances) { \n                utterancesStorage.getItem('alldata').then(function(allUtterances) {\n                    if (Array.isArray(allUtterances)) {\n                        allUtterances.map(function(thisUtterance) {\n                            if (skill.utterances) { \n                                skill.utterances.map(function(listKey) {\n                                    if (thisUtterance.value === listKey) utterances[thisUtterance.value] = thisUtterance  \n                                    return null\n                                })\n                            }\n                            if (skill.utterancesLists) { \n                                skill.utterancesLists.map(function(listKey) {\n                                    if (thisUtterance.tags && thisUtterance.tags.indexOf(listKey) !== -1) utterances[thisUtterance.value] = thisUtterance  \n                                    return null\n                                })\n                                \n                            }\n                            return null\n                        })\n                        \n                         //fileLookups.push({name:toSnakeCase(utterance.value)+'.txt',content:''})\n                             \n                        \n                         // generate domainContent\n                         if (Object.keys(utterances).length > 0) {\n                             domainContentParts.push('responses:')\n                             Object.keys(utterances).map(function(utteranceKey) {\n                                    var utterance = utterances[utteranceKey]\n                                    domainContentParts.push('utter_'+toSnakeCase(utterance.value))\n                                    domainContentParts.push('- text: '+utterance.value)\n                                    if (utterance.synonyms && utterance.synonyms.length > 0) {\n                                        utterance.synonyms.map(function(synonym) {\n                                            domainContentParts.push('- text: '+synonym)\n                                            return null\n                                        })\n                                    } \n                                    return null\n                             })\n                         }\n                         resolve(generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContentParts.join(\"\\n\"), credentialsContent, endpointsContent, actionFiles, skill.rasaStories) )\n                    } else {\n                        resolve(generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContentParts.join(\"\\n\"), credentialsContent, endpointsContent, actionFiles, skill.rasaStories) )\n                    }\n                })\n               \n                \n            } else {\n                resolve(generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContentParts.join(\"\\n\"), credentialsContent, endpointsContent, actionFiles, skill.rasaStories) )\n            }\n        })\n        \n    })\n}\n\n\nfunction exportRASAJSONZip(skill) {\n    return new Promise(function(resolve,reject) {\n        exportRASAJSON(skill).then(function(data) {\n            createZip(data).then(function(res) {\n                resolve(res)\n            })\n        })\n    })\n}\n\nexport {exportRASAJSON, exportRASAJSONZip}\n","import {exportJOVOZip} from './exportJOVO'\nimport {exportJSONZip} from './exportJSON'\nimport {exportMycroftZip} from './exportMycroft'\n//import {exportRASAZip} from './exportRASA'\nimport {exportRASAMDZip} from './exportRASAMD'\nimport {exportRASAJSONZip} from './exportRASAJSON'\n\nvar exportFormats = [\n        {name:'JSON',exportFunction:exportJSONZip},\n        {name:'JOVO',exportFunction:exportJOVOZip},\n        {name:'Mycroft',exportFunction:exportMycroftZip},\n        //{name:'RASA',exportFunction:exportRASAZip},\n        {name:'RASA Markdown',exportFunction:exportRASAMDZip},\n        {name:'RASA JSON',exportFunction:exportRASAJSONZip}\n    ]\n\nexport default exportFormats\n\n","import localforage from 'localforage'\n\nfunction exportJSON(skill) {\n    console.log(['EXPPORT JSON',skill])\n    return new Promise(function(resolve,reject) {\n         var listsStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"lists\",\n         });\n         var utterancesStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"utterances\",\n         });\n         listsStorage.getItem('alldata').then(function(lists) {\n             console.log(['LISTS',lists])\n            var usedLists = {}\n            if (skill.entities) {\n                Object.keys(skill.entities).map(function(entity,i) {\n                    if (skill.entities[entity] && Array.isArray(skill.entities[entity].lists)) {\n                        skill.entities[entity].lists.map(function(list) {\n                           usedLists[list] = true  \n                           return null\n                        })\n                    }\n                    return null\n                })\n            }\n            var skillLists = {}\n            Object.keys(usedLists).map(function(listKey) {\n              skillLists[listKey] = []  \n              return null\n            })\n            lists.map(function(item) {\n                Object.keys(usedLists).map(function(listKey) {\n                    //console.log([listKey,item.tags.indexOf(listKey) !== -1, item.tags])\n                    if (item && item.tags && item.tags.indexOf(listKey) !== -1) {\n                        //console.log('list item used ')\n                        skillLists[listKey].push(item.value)\n                    }\n                    return null\n                })\n                return null\n            })\n            skill.lists = skillLists\n            \n            var utterances = {}\n            \n            console.log(['SHOULD ADD UTTS',skill.utterancesLists, skill.utterances])\n            if (skill.utterancesLists || skill.utterances) { \n                utterancesStorage.getItem('alldata').then(function(allUtterances) {\n                    if (Array.isArray(allUtterances)) {\n                        allUtterances.map(function(thisUtterance) {\n                            if (skill.utterances) { \n                                skill.utterances.map(function(listKey) {\n                                    if (thisUtterance.value === listKey) utterances[thisUtterance.value] = thisUtterance  \n                                    return null\n                                })\n                                \n                            }\n                            if (skill.utterancesLists) { \n                                skill.utterancesLists.map(function(listKey) {\n                                    if (thisUtterance.tags && thisUtterance.tags.indexOf(listKey) !== -1) utterances[thisUtterance.value] = thisUtterance  \n                                    return null\n                                })\n                                \n                            }\n                            return null \n                        })\n                         console.log(['SET UITTER GLOLBA',utterances])\n                         skill.utteranceLookups = utterances\n                         resolve(skill)\n                    } else {\n                         resolve(skill)\n                    }\n                })\n               \n                \n            } else {\n                 resolve(skill)\n            }\n            console.log(['resolve JSON',skill])\n           \n        })\n        \n    })\n}\n\nfunction exportJSONZip(skill) {\n    return new Promise(function(resolve,reject) {\n        exportJSON(skill).then(function(content) {\n            console.log(['content',skill])\n            const blob = new Blob([JSON.stringify(content, null, 2)], {type : 'application/json'});\n            resolve(blob)\n        })\n    })\n    //return createZip({files:[{name:'skill.json', content: await exportJSON(skill)}]})\n}\n\nexport {exportJSON, exportJSONZip}\n","import React, {useState} from 'react';\nimport {Button, Dropdown, ButtonGroup, InputGroup} from 'react-bootstrap'\n\nconst DropDownComponent = function(props) {\n    \n    var [filterValue, setFilterValue] = useState(props.value ? props.value : '')\n    \n    return <Dropdown  as={ButtonGroup}>\n          <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button   size=\"sm\" >{props.value ? props.title + \" - \" + props.value : props.title} </Button>\n          <Dropdown.Menu>\n               <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; }} >\n                <InputGroup>\n                  <input type=\"text\" className=\"form-control\" onChange={function(e) {setFilterValue(e.target.value)}}\n                value={filterValue} />\n                </InputGroup>\n                \n              </form>\n              {Array.isArray(props.options) && props.options.map(function(optionKey,i) {\n                  //console.log([optionKey, filterValue])\n                   //if (filterValue.trim().length == 0 || optionKey.toLowerCase().indexOf(filterValue.toLowerCase()) !== -1) {\n                       return <Dropdown.Item style={{minHeight:'1.4em'}} key={i} value={optionKey} onClick={function(e) {setFilterValue(optionKey); props.selectItem(optionKey)}}  >\n                            {optionKey ? optionKey : <b>None</b>}\n                        </Dropdown.Item>\n                    //} else return null;\n              })}\n          </Dropdown.Menu>\n      </Dropdown>\n\n}\nexport default DropDownComponent\n","import React, {useState, useEffect} from 'react';\nimport './App.css';\nimport {Link} from 'react-router-dom'\nimport {Button, Dropdown, Badge,ButtonGroup, ListGroup , Tabs, Tab} from 'react-bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport useNluEditor from './useNluEditor'\nimport exportFormats from './export/index'\n//import {exportJSON} from './export/exportJSON'\nimport useDB from './useDB'\nimport {generateObjectId, uniquifyArray, RASA, GoogleAssistant, Alexa} from './utils'\nimport ReactTags from 'react-tag-autocomplete'\nimport SuggestionComponent from './components/SuggestionComponent'\nimport DropDownComponent from './components/DropDownComponent'\nimport RASATemplates from './export/RASATemplates'\n//import ExportPage from './ExportPage'\nimport { saveAs } from 'file-saver';\n\n\nimport localforage from 'localforage'\n//const RenderRow = function(props) {\n    //const index = props.index\n    //const style = props.style\n    //const item = props.data.items[index]\n    //return <NluSkillsRow  \n         //item={item}  splitNumber={index} style={style}\n         //saveItem={props.data.saveItem} deleteItem={props.data.deleteItem} saveNlu={props.data.saveNlu}\n         //lookups={props.data.lookups}  setPageMessage={props.setPageMessage} />\n//}\n\n\nexport default  function NluSkillsEditor(props) {\n    const {loadAll, skillFilterValue, setSkillFilterValue, filteredItems} = useNluEditor('nlutool','examples','alldata', props.updateFunctions.updateLookups)\n    const [currentIntent, setCurrentIntent] = useState('')\n    const [invocation, setInvocation] = useState('')\n    const [entitiesForSkill, setEntitiesForSkill] = useState({})\n    const [listsForEntity, setListsForEntity] = useState({})\n    const [currentSkill, setCurrentSkill] = useState({id:generateObjectId(), invocation:'', title:skillFilterValue, entities:{}})\n    //const skillsManager = useDB('nlutool','skills')\n    const listsManager = useDB('nlutool','lists')\n    //const [showExportDialog, setShowExportDialog] = useState(false)\n    const [collatedItems, setCollatedItems] = useState({})\n    const [collatedTags, setCollatedTags] = useState({})\n    const [collatedCounts, setCollatedCounts] = useState({})\n    const [newSlotValue, setNewSlotValue] = useState('')\n    var skillsStorage = localforage.createInstance({\n       name: \"nlutool\",\n       storeName   : \"skills\",\n     });\n    //const params = useParams()\n    //skillFilterValue = params.skillId;\n    //function setSkillFilterValueWrap(value) {\n        //setSkill\n        //props.history.push('/skills/'+value)\n    //}\n    //const {loadAll, saveItem, deleteItem , items, setItems, findKeyBy, filter} = \n    function loadSkill() {\n        return new Promise(function(resolve,reject) { \n            if (skillFilterValue) {\n                //localforage.setItem('key', 'value', function (err) {\n                  //// if err is non-null, we got an error\n                  skillsStorage.getItem(skillFilterValue, function (err, skill) {\n                    // if err is non-null, we got an error. otherwise, value is the value\n                    if (err) throw new Error(err)\n                    if (skill) {\n                        setCurrentSkill(skill)\n                        setInvocation(skill.invocation)\n                    }\n                    resolve(skill)\n                  });\n                //});\n            } \n        })\n    }\n    \n    // load all on init\n    useEffect(() => {\n        loadSkill().then(function() {\n        })\n        loadAll()\n        listsManager.loadAll()\n        props.updateFunctions.updateUtterances()\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n    \n    // load skill on change skillFilterValue\n    useEffect(() => {\n        loadSkill()\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[skillFilterValue])\n \n    // load list lookups\n    useEffect(() => {\n        if (listsManager.items.length > 0) { \n            //console.log(['UPD ITEMS',listsManager.items,listsManager.items[0]])\n            props.updateFunctions.updateLists(listsManager.items[0])\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[listsManager.items])\n    \n    // collate entitiesForSkills from filtered example \n    useEffect(() => {\n        var entities = {}\n        // collate entities from filteredItems\n        if (Array.isArray(filteredItems)) {\n            filteredItems.map(function (item,itemKey) {\n              if (Array.isArray(item.entities)) {\n                  item.entities.map(function(entity,entityKey) {\n                     if (entity && entity.type && entity.type.length > 0) {\n                         if (typeof entities[entity.type] !== \"object\") entities[entity.type] = {} //\n                         //currentSkill.entities && currentSkill.entities[entity.type] ?  currentSkill.entities[entity.type] : {}\n                         if (!Array.isArray(entities[entity.type].values )) entities[entity.type].values = []\n                         if (currentSkill && currentSkill.entities && currentSkill.entities[entity.type]&& currentSkill.entities[entity.type].alexaType) entities[entity.type].alexaType = currentSkill.entities[entity.type].alexaType\n                         if (currentSkill && currentSkill.entities && currentSkill.entities[entity.type]&& currentSkill.entities[entity.type].googleType) entities[entity.type].googleType = currentSkill.entities[entity.type].googleType\n                         if (currentSkill && currentSkill.entities && currentSkill.entities[entity.type]&& currentSkill.entities[entity.type].lists) entities[entity.type].lists = currentSkill.entities[entity.type].lists\n                         entities[entity.type].values.push(entity.value)\n                     }\n                     return null\n                  })\n              }\n              return null\n            })\n        }\n        // sort and uniquify\n        var slots = currentSkill.slots ? currentSkill.slots : {}\n        Object.keys(entities).map(function(entityName,entityKey) {\n           const entity = entities[entityName]\n           entity.values = uniquifyArray(entity.values).sort()\n           \n           if (slots[entityName]) {\n           } else {\n               slots[entityName] = {values:[]}\n           }\n           return null\n        })\n        setEntitiesForSkill(entities)\n        var updatedSkill = currentSkill\n        updatedSkill.entities = entities\n        updatedSkill.slots = slots\n        \n        setCurrentSkill(entities)\n        // collate intents and tags from items\n         var newCollatedItems = collatedItems\n         var newCollatedCounts = collatedCounts\n         var newCollatedTags = {}\n         if (filteredItems) {\n             filteredItems.map(function(item) {\n                if (item.intent) {\n                    if (!newCollatedItems[item.intent]) newCollatedItems[item.intent]=[]\n                    newCollatedCounts[item.intent] =   (newCollatedCounts[item.intent] > 0) ? newCollatedCounts[item.intent] + 1 : 1;\n                    //if (collatedItems[item.intent].length < 300) {\n                        newCollatedItems[item.intent].push({example: item.example, entities: item.entities})\n                    //}\n                    \n                }\n                if (Array.isArray(item.tags)) {\n                    item.tags.map(function(tag) {\n                        newCollatedTags[tag] = true\n                        return null\n                    })\n                } \n               return null;  \n             })\n             setCollatedItems(newCollatedItems)\n             setCollatedCounts(newCollatedCounts)\n             setCollatedTags(newCollatedTags)\n             var newSkill = currentSkill;\n             if (!newSkill.intents) {\n                console.log(['UPDATE INTENTS WITH COLLATED ITEMS',collatedItems])\n                 newSkill.intents = collatedItems\n            }\n             newSkill.tags = Object.keys(collatedTags)\n             setCurrentSkill(newSkill)\n         }   \n    // eslint-disable-next-line react-hooks/exhaustive-deps   \n    },[filteredItems])\n    \n    useEffect(() => {\n        \n        //console.log(['UDPATE SKILL WITH INTENTS',JSON.parse(JSON.stringify(newSkill))])  \n    },[collatedItems,collatedTags])\n    \n     // load invocation into skill\n    useEffect(() => {\n        if (currentSkill) {\n          //console.log(['SET INVOCK HAVE CURRENT SKILL',currentSkill,invocation])\n          var skill = currentSkill\n          skill.invocation = invocation\n          setCurrentSkill(skill)\n          //skillsManager.saveItem(currentSkill,null)\n      }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[invocation])\n    \n    useEffect(() => {\n        //console.log('change cs or inv',currentSkill)\n        var skill = currentSkill\n        if (skill && skill.title && skill.title.length > 0) {\n            console.log('change cs or inv real')\n            \n            //var index = skillsManager.findKeyBy('id',newCurrentSkill.id)\n            //if (index != null) {\n            // merge in entity values\n            if (entitiesForSkill) {\n                Object.keys(entitiesForSkill).map(function(entity) {\n                   if (skill.entities && skill.entities[entity]) {\n                       skill.entities[entity].values = entitiesForSkill[entity].values;\n                   }  \n                   return null\n                })\n            }\n            // merge in intents\n            skill.invocation = invocation;\n            skill.intents = collatedItems\n            console.log(['save skill ',skillFilterValue,currentSkill])\n            skillsStorage.setItem(skillFilterValue, currentSkill, function (err) {\n                console.log(['saved skill '])\n                if (err)  {\n                    console.log(err)\n                    throw new Error(err)\n                }\n            })\n              //// if err is non-null, we got an error\n            \n            //skillsManager.saveItem(newCurrentSkill,index)\n            //}\n            //\n            //currentSkill.entities = entitiesForSkill\n            //newCurrentSkill.invocation = invocation;\n            //newCurrentSkill.title = skillFilterValue;\n            //console.log(['save now ',index,newCurrentSkill])\n            //setCurrentSkill(newCurrentSkill)\n            \n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[currentSkill,listsForEntity, invocation])\n    \n  \n  \n  //function setInvocation(val) {\n      //console.log('SET INVOCK')\n      ////if (currentSkill) {\n          ////console.log(['SET INVOCK HAVE CURRENT SKILL',currentSkill,val])\n          ////var skill = currentSkill\n          ////skill.invocation = val \n          ////setCurrentSkill(skill)\n      ////}\n  //}\n\n    function forceReload() {\n        setListsForEntity(JSON.stringify([currentSkill.rasaSession, currentSkill.rasaEndpoint,currentSkill.rasaCredentials,currentSkill.rasaStories,currentSkill.rasaConfig,currentSkill.rasaActions,currentSkill.rasaExtraSlots,currentSkill.entities,currentSkill.utterances,currentSkill.utterancesLists, currentSkill.slots]))  \n    }\n\n    function addListToSkillEntity(entity,list) {\n      //console.log(['ADSKOI',currentSkill,currentSkill.entities,entity,list])\n      if (entity && list && list.name) {\n            var skill = currentSkill;\n            if (!skill.entities) skill.entities={}\n            if (!skill.entities[entity]) skill.entities[entity] = {lists:[]}\n            if (!Array.isArray(skill.entities[entity].lists)) skill.entities[entity].lists = []\n            //var newListsForEntity = listsForEntity\n            //console.log(['ADSKOI1.5',skill])\n            skill.entities[entity].lists.push(list.name)\n            skill.entities[entity].lists = uniquifyArray(skill.entities[entity].lists).sort()\n           //newListsForEntity[entity] = uniquifyArray(newListsForEntity).sort()\n            setCurrentSkill(skill)  \n            // force render\n            forceReload()  \n            //} else {\n                //console.log(['ADSKOI new'])\n               //newListsForEntity[entity] = [list.name]\n            //}\n             //console.log(['ADSKOI2 final',newListsForEntity])\n            //setListsForEntity(newListsForEntity)\n       } else {\n           console.log([' missing data'])\n       }\n    }\n  \n    function removeListFromSkillEntity(entity, listIndex) {\n      var skill = currentSkill\n      //console.log(['REMOVESKILLFROMLIST',entity,listIndex])\n      if (skill && skill.entities && entity && skill.entities[entity] && skill.entities[entity].lists) {\n          var lists = skill.entities[entity].lists\n          //lists = uniquifyArray([lists.slice(0, listIndex),lists.slice(listIndex + 1)]).sort()\n          lists = lists.slice(0, listIndex).concat(lists.slice(listIndex + 1))\n          \n          skill.entities[entity].lists = lists\n          setCurrentSkill(skill)  \n          forceReload()  \n          //console.log(['REMOVESKILLFROMLIST ddd',lists])\n      } \n       //var newEntitiesForSkill = entitiesForSkill\n       //if (newEntitiesForSkill[entity]) {\n           //var lists = newEntitiesForSkill[entity].lists && Array.isArray(newEntitiesForSkill[entity].lists) ? newEntitiesForSkill[entity].lists : [];\n           //newEntitiesForSkill[entity].lists = uniquifyArray([lists.slice(0, listIndex),lists.slice(listIndex + 1)]).sort()\n           //setEntitiesForSkill(newEntitiesForSkill)\n       //}\n    }\n  \n    function setGoogleAssistantEntityType(entity, type) {\n        if (currentSkill && entity) {\n            var skill = currentSkill;\n            if (!skill.entities) skill.entities={}\n            if (!skill.entities[entity]) skill.entities[entity] = {}\n            skill.entities[entity].googleType = type\n            setCurrentSkill(skill)  \n           forceReload()  \n       } \n    }\n    \n    function setAlexaEntityType(entity, type) {\n        if (currentSkill && entity) {\n            var skill = currentSkill;\n            if (!skill.entities) skill.entities={}\n            if (!skill.entities[entity]) skill.entities[entity] = {}\n            skill.entities[entity].alexaType = type\n            setCurrentSkill(skill)  \n            console.log('ALEXA')\n            console.log(skill)\n            forceReload()  \n       } \n    }\n    \n    function setRASASlotType(entity, type, slots) {\n        if (currentSkill && entity && type) {\n            var skill = currentSkill;\n            slots[entity].slotType = type\n            skill.slots = slots\n            setCurrentSkill(skill)  \n            console.log('RASA')\n            console.log(skill)\n            forceReload()  \n       } \n    }\n       \n    function setRASASlotAutofill(entity, type, slots) {\n        \n            \n        if (currentSkill && entity && type) {\n            var skill = currentSkill;\n            slots[entity].slotAutofill = type\n            skill.slots = slots\n            console.log(['RASA autofill',currentSkill ,entity,type, slots])\n            setCurrentSkill(skill)  \n            console.log(skill)\n            forceReload()  \n       } \n    }\n    \n    function newSlot(name,slots) {\n        if (name && name.trim().length > 0) {\n            if (!slots) slots = {}\n            slots[name] = {}\n            var skill = currentSkill;\n            skill.slots = slots\n            setCurrentSkill(skill)  \n            setNewSlotValue('')\n            console.log('new slot')\n            console.log(skill)\n            forceReload()  \n        }\n    }\n    \n    function deleteSlot(slot, slots) {\n        if (currentSkill && slot && slots ) {\n            var skill = currentSkill;\n            delete slots[slot]\n            skill.slots = slots\n            setCurrentSkill(skill)  \n            console.log('del slot')\n            console.log(skill)\n            forceReload()  \n        }\n    }\n\n    function setRASAActions(data) {\n          if (currentSkill && data) {\n            var skill = currentSkill;\n            skill.rasaActions = data\n            setCurrentSkill(skill)  \n            forceReload()  \n       }\n    }\n    \n    function setRASAConfig(data) {\n          if (currentSkill) {\n            var skill = currentSkill;\n            skill.rasaConfig = data\n            setCurrentSkill(skill)  \n            forceReload()  \n       }\n    }\n    \n    function setRASAStories(data) {\n          if (currentSkill) {\n            var skill = currentSkill;\n            skill.rasaStories = data\n            setCurrentSkill(skill)  \n            forceReload()  \n       }\n    }\n    function setRASAEndpoint(data) {\n          if (currentSkill) {\n            var skill = currentSkill;\n            skill.rasaEndpoint = data\n            setCurrentSkill(skill)  \n            forceReload()  \n       }\n    }\n    function setRASACredentials(data) {\n          if (currentSkill) {\n            var skill = currentSkill;\n            skill.rasaCredentials = data\n            setCurrentSkill(skill)  \n            forceReload()  \n       }\n    }  \n    \n    function setRASASession(data) {\n       if (currentSkill) {\n            var skill = currentSkill;\n            skill.rasaSession = data\n            setCurrentSkill(skill)  \n            forceReload()  \n       }\n    }  \n        \n    function addUtterance(utterance) {\n       \n        if (currentSkill && utterance) {\n            var skill = currentSkill;\n            if (!Array.isArray(skill.utterances)) skill.utterances=[]\n            skill.utterances.push(utterance.name)\n            skill.utterances = uniquifyArray(skill.utterances)\n            setCurrentSkill(skill)  \n            console.log('RASA')\n            console.log(skill)\n            // if this is a new utterance, add it to the main database\n            if (!props.lookups.utteranceListsLookups[utterance.name] && !props.lookups.utterancesLookups[utterance.name]) {\n                var utteranceStorage = localforage.createInstance({\n                   name: \"nlutool\",\n                   storeName   : \"utterances\",\n                 });\n                 utteranceStorage.getItem('alldata', function (err,utterances) {\n                     if (err) throw new Error(err)\n                     if (Array.isArray(utterances)) {\n                         utterances.unshift({id:generateObjectId(), value:utterance.name, synonyms:'', tags:[]})\n                         utteranceStorage.setItem('alldata',utterances)\n                     }\n                 })\n            }\n            forceReload()\n       } \n    }\n    \n    function removeUtterance(index) {\n        console.log(['RE UTTERANCE',index])\n        if (typeof index === \"number\" && currentSkill && currentSkill.utterances && currentSkill.utterances.length > index) {\n            var skill = currentSkill;\n            skill.utterances = [...skill.utterances.slice(0,index),...skill.utterances.slice(index+1)]\n            setCurrentSkill(skill)  \n            console.log('RASA')\n            console.log(skill)\n            forceReload()\n        }\n    }\n    function addUtteranceList(utterance) {\n          console.log(['ADD UTTERANCE LIST',utterance, currentSkill])\n          if (currentSkill && utterance) {\n            var skill = currentSkill;\n            if (!Array.isArray(skill.utterancesLists)) skill.utterancesLists=[]\n            skill.utterancesLists.push(utterance.name)\n            skill.utterancesLists = uniquifyArray(skill.utterancesLists)\n            setCurrentSkill(skill)  \n            console.log('add ut list')\n            console.log(skill.utterancesLists)\n            forceReload()\n       } \n    }\n     \n    function removeUtteranceList(index) {\n        if (typeof index === \"number\" && currentSkill && currentSkill.utterancesLists) {\n            var skill = currentSkill;\n            skill.utterancesLists = [...skill.utterancesLists.slice(0,index),...skill.utterancesLists.slice(index+1)]\n            setCurrentSkill(skill)  \n            console.log('RASA')\n            console.log(skill)\n            forceReload()\n        }\n    }    \n    \n    function renderEditor(props) {\n       \n        if (skillFilterValue && skillFilterValue.length > 0) {\n               \n                \n            if (filteredItems && filteredItems.length > 0) {\n               \n                   const utteranceTags = currentSkill && currentSkill.utterances ? currentSkill.utterances.map(function(listItem,listItemKey) {return {id:listItemKey, name:listItem} }) : []\n                const utteranceListTags = currentSkill && currentSkill.utterancesLists ? currentSkill.utterancesLists.map(function(listItem,listItemKey) {return {id:listItemKey, name:listItem} }) : []\n                const slots = currentSkill.slots ? currentSkill.slots : entitiesForSkill;\n                return <div>\n                     <div><h3>{skillFilterValue} </h3></div>\n                        <div>\n                       \n                        <label style={{fontWeight:'bold', marginLeft:'0.5em'}} > Invocation <input type='text' value={invocation} onChange={function(e) {setInvocation(e.target.value)}} /></label>\n                        </div>\n                        <div style={{marginTop:'0.7em', marginBottom:'0.7em'}} >\n                            <b style={{marginRight:'1em', marginLeft:'0.5em'}} >Tags</b>\n                            <span>{currentSkill.tags.join(\", \")}</span>\n                        </div>\n                        <div style={{marginTop:'0.7em', marginBottom:'0.7em', borderTop: '2px solid black'}} >\n                            <b style={{marginRight:'1em', marginLeft:'0.5em'}} >Intents</b>\n                            <span>{Object.keys(collatedItems).sort().map(function(collatedIntent, i) {\n                                    var useCurrentIntent = currentIntent ? currentIntent : Object.keys(collatedItems)[0]\n                                    var completionVariant = 'danger'\n                                    if (collatedItems[collatedIntent].length > 300) {\n                                        completionVariant = 'success'\n                                    } else if (collatedItems[collatedIntent].length > 100) {\n                                        completionVariant = 'primary'\n                                    } else if (collatedItems[collatedIntent].length > 10) {\n                                        completionVariant = 'warning'\n                                    } \n                                    \n                                    \n                                    if (collatedItems[collatedIntent].length  === collatedCounts[collatedIntent]) {\n                                            return <Link key={collatedIntent} to={\"/examples/skill/\"+skillFilterValue+\"/intent/\"+collatedIntent} ><Button key={collatedIntent} variant={collatedIntent === useCurrentIntent ? \"primary\" : \"outline-primary\"} onClick={function() {setCurrentIntent(collatedIntent)}}>\n                                                <Badge variant={completionVariant} > {collatedItems[collatedIntent].length} </Badge>\n                                                &nbsp;{collatedIntent}\n                                            </Button></Link>\n                                    } else {\n                                        return <Link key={collatedIntent} to={\"/examples/skill/\"+skillFilterValue+\"/intent/\"+collatedIntent} ><Button variant={collatedIntent === useCurrentIntent ? \"primary\" : \"outline-primary\"} onClick={function() {setCurrentIntent(collatedIntent)}}>\n                                                <Badge variant=\"danger\" > {collatedItems[collatedIntent].length}/{collatedCounts[collatedIntent]} </Badge>\n                                                &nbsp;{collatedIntent}\n                                            </Button></Link>\n                                    }\n                                    \n                            })}</span>\n                        </div>\n                        <div style={{marginTop:'0.7em', borderTop: '2px solid black'}} >\n                      <b style={{marginRight:'1em', marginLeft:'0.5em'}} >Entities</b><ListGroup>{Object.keys(entitiesForSkill).map(function(collatedEntity, i) {\n                                \n                               \n                                const listTags = currentSkill && currentSkill.entities && currentSkill.entities[collatedEntity] && currentSkill.entities[collatedEntity].lists ? currentSkill.entities[collatedEntity].lists.map(function(listItem,listItemKey) {return {id:listItemKey, name:listItem} }) : []\n                                //console.log(listTags)\n                                    return <ListGroup.Item key={collatedEntity} >\n                                            \n                                             <span style={{marginLeft:'1em', float:'left', fontWeight:'bold'}}>&nbsp;{collatedEntity}</span>\n                                          \n                                            <span style={{marginLeft:'1em', float:'left'}}>&nbsp;{entitiesForSkill[collatedEntity] && entitiesForSkill[collatedEntity].values && entitiesForSkill[collatedEntity].values.slice(0,5).join(\", \")}{entitiesForSkill[collatedEntity] && entitiesForSkill[collatedEntity].values && entitiesForSkill[collatedEntity].values.length > 5 ? <Badge>... {entitiesForSkill[collatedEntity] && entitiesForSkill[collatedEntity].values && entitiesForSkill[collatedEntity].values.length - 5} more </Badge> : ''}</span>\n                                            <span style={{marginLeft:'1em', float:'left'}}>\n                                           <label><i></i> <ReactTags\n                                            placeholderText=\"Also use values from \"\n                                            minQueryLength={0}\n                                            maxSuggestionsLength={50}\n                                            autoresize={true}\n                                            allowNew={false}\n                                            tags={listTags}\n                                            suggestionComponent={SuggestionComponent}\n                                            suggestions={props.lookups.listsLookups.map(function(tag,i) {return {id: i, name: tag}})}\n                                            onDelete={function(index) {removeListFromSkillEntity(collatedEntity, index)}}\n                                            onAddition={function(tag) {addListToSkillEntity(collatedEntity, tag)}} /> </label>\n                                            </span>\n                                            \n                                            <div style={{float:'right'}} >\n                                                <DropDownComponent options={[\"\",...Alexa.entityTypes]} title=\"Alexa\" value={currentSkill.entities && currentSkill.entities[collatedEntity] && currentSkill.entities[collatedEntity].alexaType ? currentSkill.entities[collatedEntity].alexaType : ''} selectItem={function(entityType) {\n                                                    setAlexaEntityType(collatedEntity,entityType)\n                                                }} />\n                                                &nbsp;&nbsp;<DropDownComponent options={[\"\",...GoogleAssistant.entityTypes]} title=\"Google\" value={currentSkill.entities && currentSkill.entities[collatedEntity] &&  currentSkill.entities[collatedEntity].googleType ? currentSkill.entities[collatedEntity].googleType : ''}  selectItem={function(entityType) {\n                                                    setGoogleAssistantEntityType(collatedEntity,entityType)\n                                                }} />\n                                            </div>\n                                        </ListGroup.Item>\n                                //}\n                                \n                        })}</ListGroup>\n                        </div>\n               \n                        <div style={{marginTop:'0.7em', marginLeft:'0.4em', borderTop: '2px solid black'}} >\n                            <div ><b>Utterances</b></div>\n                          <div style={{clear:'both'}}>\n                                 <div style={{marginLeft:'1em'}}>\n                                <label>Utterances\n                                <ReactTags\n                                placeholderText=\"Use utterance \"\n                                minQueryLength={0}\n                                maxSuggestionsLength={50}\n                                autoresize={true}\n                                allowNew={true}\n                                tags={utteranceTags}\n                                suggestionComponent={SuggestionComponent}\n                                suggestions={props.lookups.utterancesLookups ? props.lookups.utterancesLookups.map(function(tag,i) {return {id: i, name: tag}}):[]}\n                                onDelete={function(index) {removeUtterance(index)}}\n                                onAddition={function(tag) {addUtterance(tag)}} /> </label>\n                                </div>\n                                \n                                 <div style={{marginLeft:'1em'}}>\n                                <label>Utterance Lists\n                                <ReactTags\n                                placeholderText=\"Use utterances from \"\n                                minQueryLength={0}\n                                maxSuggestionsLength={50}\n                                autoresize={true}\n                                allowNew={false}\n                                tags={utteranceListTags}\n                                suggestionComponent={SuggestionComponent}\n                                suggestions={props.lookups.utteranceTagsLookups ? props.lookups.utteranceTagsLookups.map(function(tag,i) {return {id: i, name: tag}}) : []}\n                                onDelete={function(index) {removeUtteranceList(index)}}\n                                onAddition={function(tag) {addUtteranceList(tag)}} /> </label>\n                                </div>\n                                \n                                \n                            </div>\n                    </div>\n                   \n                      <div style={{marginTop:'0.7em', borderTop: '2px solid black'}} >\n                        <div><b>Platform</b></div>\n                        <Tabs defaultActiveKey=\"rasa\" id=\"platform-tabs\">\n                          <Tab eventKey=\"rasa\" title=\"RASA\">\n                                <div style={{marginTop:'0.7em', marginLeft:'1.4em'}} >\n                                    <Tabs defaultActiveKey=\"slots\" id=\"platform-rasa\">\n                                        <Tab eventKey=\"slots\" title=\"Slots\">\n                                             <div style={{marginLeft:'1.4em', marginTop:'0.7em', borderTop: '2px solid black'}} >\n                                                 <form onSubmit={function(e) {e.preventDefault(); newSlot(newSlotValue,slots)}} ><input value={newSlotValue} onChange={function(e) {setNewSlotValue(e.target.value)}} /><Button size=\"sm\" onClick={function() {newSlot(newSlotValue,slots)}}>New Slot</Button>\n                                                 </form>\n                                                  <ListGroup>{Object.keys(slots).map(function(collatedEntity, i) { \n                                                        return <ListGroup.Item key={collatedEntity} >\n                                                                         <span style={{marginLeft:'1em', float:'left', fontWeight:'bold'}}>&nbsp;{collatedEntity}</span>\n                                                                        \n                                                                        <div style={{float:'right'}} >\n                                                                             {entitiesForSkill[collatedEntity] &&  <DropDownComponent options={RASA.autofillOptions} title=\"Autofill\" value={currentSkill.slots && currentSkill.entities[collatedEntity] && currentSkill.slots[collatedEntity].slotAutofill && currentSkill.slots[collatedEntity].slotAutofill.trim().length > 0 ? currentSkill.slots[collatedEntity].slotAutofill : 'Yes'} selectItem={function(entityType) {\n                                                                                setRASASlotAutofill(collatedEntity,entityType,slots)\n                                                                            }} />}\n                                                                            &nbsp;&nbsp;\n                                                                            <DropDownComponent options={Object.keys(RASA.slotTypes)} title=\"Slot\" value={currentSkill.slots && currentSkill.slots[collatedEntity] && currentSkill.slots[collatedEntity].slotType ? currentSkill.slots[collatedEntity].slotType : 'unfeaturized'} selectItem={function(entityType) {\n                                                                                setRASASlotType(collatedEntity,entityType,slots)\n                                                                            }} />\n                                                                            <Button variant=\"danger\"  size=\"sm\" style={{marginLeft:'0.5em', float:'right', fontWeight:'bold', borderRadius:'15px', marginTop:'0.2em'}} onClick={function(e) {deleteSlot(collatedEntity,slots)}}>X</Button>\n                                                                        </div>\n                                                                    </ListGroup.Item>\n                                                            //}\n                                                            \n                                                    })}</ListGroup>\n                                            </div>\n                                   \n                              \n                                     </Tab>\n                                      <Tab eventKey=\"actions\" title=\"Actions\">\n                                        <div style={{marginTop:'0.7em', marginLeft:'1.4em', borderTop: '2px solid black'}} >\n                                          <label>\n                                          \n                                            <div style={{fontStyle:'italic'}}>One per line, _action will be appended to each line</div>\n                                            <textarea style={{width:'40em', height:'10em'}}  value={Array.isArray(currentSkill.rasaActions) ? currentSkill.rasaActions.join(\"\\n\") : ''} onChange={function(e) {setRASAActions(e.target.value ? e.target.value.split(\"\\n\") : [])}} placeholder={`fred\n    findSname\n    is_whatsi\n    blah name`} ></textarea>\n                                          </label>\n                                    </div>\n                                      </Tab>\n                                       <Tab eventKey=\"config\" title=\"Config\">\n                                        <div style={{marginTop:'0.7em', marginLeft:'1.4em', borderTop: '2px solid black'}} >\n                                          <label>\n                                        \n                                            <textarea style={{width:'60em', height:'30em'}}  value={currentSkill.rasaConfig ? currentSkill.rasaConfig : ''} onChange={function(e) {setRASAConfig(e.target.value)}} placeholder={RASATemplates.config} ></textarea>\n                                          </label>\n                                    </div>\n                                      </Tab>\n                                     <Tab eventKey=\"stories\" title=\"Stories\">\n                                        <div style={{marginTop:'0.7em', marginLeft:'1.4em', borderTop: '2px solid black'}} >\n                                          <label>\n                                        \n                                            <textarea style={{width:'60em', height:'30em'}}  value={currentSkill.rasaStories ? currentSkill.rasaStories : ''} onChange={function(e) {setRASAStories(e.target.value)}} placeholder={RASATemplates.stories} ></textarea>\n                                          </label>\n                                    </div>\n                                      </Tab> \n                                     <Tab eventKey=\"credentials\" title=\"Credentials\">\n                                        <div style={{marginTop:'0.7em', marginLeft:'1.4em', borderTop: '2px solid black'}} >\n                                          <label>\n                                        \n                                            <textarea style={{width:'60em', height:'30em'}}  value={currentSkill.rasaCredentials ? currentSkill.rasaCredentials : RASATemplates.credentials} onChange={function(e) {setRASACredentials(e.target.value)}}  ></textarea>\n                                          </label>\n                                    </div>\n                                      </Tab> \n                                                            \n                                    <Tab eventKey=\"endpoints\" title=\"Endpoints\">\n                                        <div style={{marginTop:'0.7em', marginLeft:'1.4em', borderTop: '2px solid black'}} >\n                                          <label>\n                                        \n                                            <textarea style={{width:'60em', height:'30em'}}  value={currentSkill.rasaEndpoint ? currentSkill.rasaEndpoint : RASATemplates.endpoint} onChange={function(e) {setRASAEndpoint(e.target.value)}}  ></textarea>\n                                          </label>\n                                    </div>\n                                      </Tab> \n                                  \n                                   <Tab eventKey=\"session\" title=\"Session Config\">\n                                        <div style={{marginTop:'0.7em', marginLeft:'1.4em', borderTop: '2px solid black'}} >\n                                          <label>\n                                        \n                                            <textarea style={{width:'60em', height:'30em'}}  value={currentSkill.rasaSession ? currentSkill.rasaSession : RASATemplates.session} onChange={function(e) {setRASASession(e.target.value)}}  ></textarea>\n                                          </label>\n                                    </div>\n                                      </Tab> \n                                  \n                                </Tabs>\n                                      \n                              </div>  \n                          </Tab>\n                          \n                          <Tab eventKey=\"mycroft\" title=\"Mycroft\">\n                            <div style={{marginTop:'0.7em', marginLeft:'1.4em'}} >\n                                <b>not yet</b>\n                            </div>\n                          </Tab>\n                           <Tab eventKey=\"jovo\" title=\"JOVO\">\n                            <div style={{marginTop:'0.7em', marginLeft:'1.4em'}} >\n                                <b>not yet</b>\n                            </div>\n                          </Tab>\n                          <Tab eventKey=\"alex\" title=\"Alexa\">\n                            <div style={{marginTop:'0.7em', marginLeft:'1.4em'}} >\n                                <b>not yet</b>\n                            </div>\n                          </Tab>\n                          <Tab eventKey=\"google_assistant\" title=\"Google Assistant\">\n                            <div style={{marginTop:'0.7em', marginLeft:'1.4em'}} >\n                                <b>not yet</b>\n                            </div>\n                          </Tab>\n                        </Tabs>\n                     </div>\n                     \n                </div>\n            }\n            \n        } else {\n            const skillsList = props.lookups.skillLookups ? props.lookups.skillLookups.map(function(skill,i) {return <Button key={i}  onClick={function(e) {setSkillFilterValue(skill)}}  style={{marginLeft:'1em'}} >{skill}</Button>} )   : []\n            return <div>\n                <h1>Skills</h1>\n                {skillsList.length > 0 && skillsList}\n                {skillsList.length <= 0 && <div>\n                    You dont have any skills yet. Import some <Link to='/sources'><Button>Sources</Button></Link> \n                </div>}\n            </div>\n        }\n    }\n    \n    \n     var skillOptions = props.lookups.skillLookups && props.lookups.skillLookups.sort().map(function(skillKey,i) {\n          return <Dropdown.Item key={i} value={skillKey} onClick={function(e) {setSkillFilterValue(skillKey)}}  >{skillKey}</Dropdown.Item>\n       })\n       skillOptions.unshift(<Dropdown.Item key={'empty_key_value_empty'} value={''} onClick={function(e) {setSkillFilterValue('')}}  >&nbsp;</Dropdown.Item>)\n   \n        //<Button style={{float:'right',marginLeft:'0.5em'}}  variant=\"success\" onClick={function() {setShowExportDialog(true)}} >Publish</Button>\n         \n    return <div>\n         {!props.publish && skillFilterValue && skillFilterValue.length > 0 && <Dropdown style={{float:'right',marginLeft:'0.5em'}}  as={ButtonGroup}>\n          <Dropdown.Toggle split variant=\"success\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button  variant=\"success\">Export</Button>\n          <Dropdown.Menu variant=\"success\" >\n              {exportFormats.map(function(exportFormat,i) {\n                  var title = 'opennludata_'+exportFormat.name+'_'+Date.now()\n                return <Dropdown.Item variant=\"success\" key={i} value={exportFormat.name} \n                onClick={function(e) {\n                    //var skill = currentSkill\n                    //skill.intents = \n                    //skill.entities = \n                    exportFormat.exportFunction(currentSkill).then(function(zipBody) {\n                        console.log(['TRIGGER DL',title,zipBody])\n                        if (exportFormat.name==='JSON') {\n                            saveAs(zipBody, title+'.json')\n                        } else {\n                            saveAs(zipBody, title+'.zip')\n                        }\n                })}}  >{exportFormat.name}</Dropdown.Item>\n           })}\n          </Dropdown.Menu>\n        </Dropdown>}\n        {!props.publish && <Link to={\"/skills/skill/\"+currentSkill.title+\"/publish\"} ><Button variant=\"success\" style={{float:'right'}} >Publish</Button></Link>}\n         {!props.publish && renderEditor(props)}\n         \n         {props.publish && <div>\n             <Link to={\"/skills/skill/\"+currentSkill.title} ><Button variant=\"success\" style={{float:'right'}} >Back to Skill</Button></Link>\n             <h1>Publish</h1>\n             <textarea style={{height: '20em', width:'60em'}}  value={JSON.stringify(currentSkill)}></textarea>\n             \n        </div>}\n         \n    </div>\n            \n}\n      \n","import React from 'react';\n//import {CopyToClipboard} from 'react-copy-to-clipboard';\nimport {Button} from 'react-bootstrap'\n//import { Link  } from 'react-router-dom'\n\nfunction SearchPage(props) {\n    //const [copied, setCopied] = useState(false)\n    \n    \n    return <div>\n    <h3>Search</h3>\n    <a target=\"_new\" href=\"https://github.com/syntithenai/opennludata/wiki\" ><Button>Search the WIKI</Button></a>\n    \n    \n    </div>\n    \n    \n}\n\nexport default SearchPage\n","import React from 'react';\nimport {useState} from 'react';\nimport {BrowserRouter as  Router, Route, Link  } from 'react-router-dom'\nimport LocalStorageUploadManager from './LocalStorageUploadManager'\nimport ListsManager from './ListsManager'\nimport UtterancesManager from './UtterancesManager'\nimport NluExampleEditor from './NluExampleEditor'\nimport NavbarComponent from './components/NavbarComponent'\nimport {HelpText, HelpTextImport, HelpTextExport, HelpTextAbout} from './components/Components'\nimport NluImportEditor from './NluImportEditor'\nimport NluSkillsEditor from './NluSkillsEditor'\nimport SearchPage from './SearchPage'\nimport {Button} from 'react-bootstrap'\nimport localforage from 'localforage'\n//const gaTrackingCode = 'UA-3712973-4'\n\n\n\n//import images from './images'\n//console.log(images)\n//const axios = require('axios');\n  //axios.get('https://github.com/syntithenai/opennludata/wiki/test-skill')\n  //.then(function (response) {\n    //// handle success\n    //console.log(response);\n  //})\n  //.catch(function (error) {\n    //// handle error\n    //console.log(error);\n  //})\n//\n\nfunction SiteMenu(props) {\n    var astyle={paddingLeft:'0.3em'}\n    return <div style={{marginLeft:'0.5em'}}>\n            <h1>Menu</h1>\n            \n                <Link style={astyle} to=\"/sources\" ><Button>Sources</Button></Link>\n                <Link style={astyle} to=\"/import\" ><Button>Import</Button></Link>\n                <Link style={astyle} to=\"/examples\" ><Button>Organise</Button></Link>\n                <Link style={astyle} to=\"/skills\" ><Button>Skills </Button></Link>\n                <Link style={astyle} to=\"/search\" ><Button>Search Community </Button></Link>\n        </div>\n}\n\nfunction App() {\n    \n    const [waiting, setWaiting] = useState(false)\n    const [pageMessage, setPageMessage] = useState('')  \n    \n    //const [importFrom, setImportFrom] = useState(null)\n    // example summaries\n    const [intentLookups, setIntentLookups] = useState([])\n    const [entityLookups, setEntityLookups] = useState([])\n    const [tagLookups, setTagLookups] = useState([])\n    const [skillLookups, setSkillLookups] = useState([])\n    const [listsLookups, setListsLookups]= useState([])\n    const [selectedTally, setSelectedTally] = useState(0)\n    const [utterancesLookups, setUtterancesLookups] = useState([])\n    const [utteranceListsLookups, setUtteranceListsLookups] = useState([])\n    const [utteranceTagsLookups, setUtteranceTagsLookups] = useState([])\n    \n    // list summaries\n    const [listTally, setListTally] = useState(0)\n    const [selectedListTally, setSelectedListTally] = useState(0)\n    const [listTallyByList, setListTallyByList] = useState({})\n    const [selectedListTallyByList, setSelectedListTallyByList] = useState({})\n    \n    // search bar\n    //https://github.com/search?q=repo:syntithenai/opennludata&type=Wikis\n    const [skillFilterValue, setSkillFilterValue] = useState('')\n  \n\n    \n    function startWaiting() {\n        setWaiting(true)\n    }\n    \n    function stopWaiting() {\n        setTimeout(function() {\n            setWaiting(false)\n        },300)\n    }\n\n    function updateUtterances() {\n        console.log('UPDATE UTTERANCES')\n        var utteranceStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"utterances\",\n         });\n         utteranceStorage.getItem('alldata', function (err,utterances) {\n                var utteranceLists={}\n                var utteranceIndex={}\n                var utteranceTags={}\n                //console.log(['UPDATE UTTERANCES',err,utterances])\n                if (Array.isArray(utterances)) {\n                    utterances.map(function(utterance,i) {\n                        console.log(['UPDATE UTTERANCE',utterance])\n                         if (utterance.value) {\n                             utteranceIndex[utterance.value]=true\n                         }\n                         if (utterance.synonym) {\n                             utterance.synonym.split(\"\\n\").map(function(synonym) {\n                                 utteranceLists[synonym] = true\n                                 return null\n                             })\n                         } \n                         if (utterance.tags && utterance.tags.length > 0) {\n                               utterance.tags.map(function(tag) {\n                                  utteranceTags[tag] = true  \n                                  return null\n                               })\n                         }\n                         return null\n                    })\n                    setUtterancesLookups(Object.keys(utteranceIndex))\n                    setUtteranceTagsLookups(Object.keys(utteranceTags))\n                    setUtteranceListsLookups(Object.keys(utteranceLists))\n                }\n                console.log(['UPDATE UTTERANCES',utteranceIndex,utteranceLists])\n                    \n              });\n            //});\n  \n    }\n\n    function updateLists(lists) {\n        if (lists) {\n            var newSelectedLists = {}\n            var newLists = {}\n            var tally = 0;\n             var selectedTally = 0;\n            lists.map(function(listItem) {\n                if (listItem && listItem.tags && listItem.tags.length > 0) {\n                    if (listItem.isSelected) {\n                             selectedTally += 1\n                    }\n                    listItem.tags.map(function(tag) {\n                        if (tag && tag.trim().length > 0) {\n                            if (listItem.isSelected) {\n                                 newLists[tag] = (newLists[tag] > 0) ? newLists[tag] + 1 : 1\n                                 newSelectedLists[tag] = (newSelectedLists[tag] > 0) ? newSelectedLists[tag] + 1 : 1\n                            } else {\n                                newLists[tag] = (newLists[tag] >0) ? newLists[tag] + 1 : 1\n                            }\n                        }\n                        return null\n                    })\n                    tally += 1;\n                }\n                return null\n            })\n            setListTally(tally)\n            setSelectedListTally(selectedTally)\n            setSelectedListTallyByList(newSelectedLists)\n            setListTallyByList(newLists)\n            setListsLookups(Object.keys(newLists))\n            //console.log('updated lists', newLists)\n        }\n    }\n\n    function updateLookups(items) {\n        //console.log(['UPDATELOOKUPS',items])\n        if (items && items.length > 0) {\n            var tags = {}\n            var intents = {}\n            var entities = {}\n            var skills = {}\n            var selected = 0;\n            items.map(function(item) {\n                if (item) {\n                    if (item.isSelected) selected = selected + 1;\n                   intents[item.intent] = true\n                   if (item.tags && item.tags.length > 0) {\n                       item.tags.map(function(tag) {\n                          tags[tag] = true  \n                          return null\n                       })\n                   }\n                   if (item.skills && item.skills.length > 0) {\n                       item.skills.map(function(skill) {\n                          skills[skill] = true  \n                          return null\n                       })\n                   }\n                   if (item.entities && item.entities.length > 0) {\n                       item.entities.map(function(entity) {\n                          if (entity.type) {\n                              entities[entity.type] = true  \n                          }\n                          return null\n                       })\n                   }\n                }\n               return null\n            })\n            const distinct = function(value,index,self) {\n                return self.indexOf(value) === index;\n            }\n            setIntentLookups([].concat(Object.keys(intents),intentLookups).filter(distinct))\n            setEntityLookups([].concat(Object.keys(entities),entityLookups).filter(distinct))\n            setTagLookups([].concat(Object.keys(tags),tagLookups).filter(distinct))\n            setSkillLookups([].concat(Object.keys(skills),skillLookups).filter(distinct))\n            setSelectedTally(selected)\n        }\n    }\n    const lookups = {utteranceTagsLookups:utteranceTagsLookups,utterancesLookups:utterancesLookups,utteranceListsLookups:utteranceListsLookups,intentLookups,entityLookups,tagLookups,skillLookups, selectedTally, listsLookups, listTally, selectedListTally, listTallyByList, selectedListTallyByList}\n    const updateFunctions = {updateLookups, updateLists, updateUtterances}\n  return (\n    <div className=\"OpenNluDataApp\">\n           \n        <Router>\n                <Route exact path='*' render={\n                    (props) => {\n                        return <NavbarComponent waiting={waiting} history={props.history} message={pageMessage} setPageMessage={setPageMessage}    />\n                    }}\n                />\n                \n                <Route exact path='/menu' component={SiteMenu} />\n                <Route path='/sources' render={\n                    (props) => <LocalStorageUploadManager {...props}  startWaiting={startWaiting} stopWaiting={stopWaiting}   setPageMessage={setPageMessage}  updateFunctions={updateFunctions} lookups={lookups}  />\n                }/>\n                <Route exact path='/import' render={\n                    (props) => <NluImportEditor {...props}        lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}  updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />}\n                          \n                />\n                \n                <Route exact path='/import/skill/:skillId' render={\n                    (props) => <NluImportEditor {...props}        lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}  updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />}\n                          \n                />\n                \n                <Route exact path='/import/intent/:intentId' render={\n                    (props) => <NluImportEditor {...props}        lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}  updateFunctions={updateFunctions} setPageMessage={setPageMessage}    />}\n                          \n                />\n                \n                <Route path='/import/skill/:skillId/intent/:intentId' render={\n                    (props) => <NluImportEditor {...props}        lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}  updateFunctions={updateFunctions} setPageMessage={setPageMessage}    />}\n                          \n                />\n                \n                \n                <Route exact  path='/examples' render={(props) => <NluExampleEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                />\n                \n                <Route exact path='/examples/skill/:skillId' render={(props) => <NluExampleEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                />\n                \n                <Route path='/examples/intent/:intentId' render={(props) => <NluExampleEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                />\n                \n                <Route exact path='/examples/skill/:skillId/intent/:intentId' render={(props) => <NluExampleEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                />\n                \n                <Route exact path='/skills/:skillId' render={(props) => <NluSkillsEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                />\n                \n                <Route exact path='/skills/skill/:skillId' render={(props) => <NluSkillsEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                />\n                \n                <Route exact path='/skills/:skillId/publish' render={(props) => <NluSkillsEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}  publish={true}  />} \n                />\n                \n                <Route exact path='/skills/skill/:skillId/publish' render={(props) => <NluSkillsEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}   publish={true} />} \n                />\n\n                 <Route exact path='/skills' render={(props) => <NluSkillsEditor {...props} skillFilterValue={skillFilterValue} setSkillFilterValue={setSkillFilterValue}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                />\n                \n               \n                <Route exact path='/lists' render={\n                    (props) => <ListsManager {...props}   lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}  updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />}\n                          \n                />\n                <Route exact path='/lists/:listId' render={\n                    (props) => <ListsManager {...props}   lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}  updateFunctions={updateFunctions}  setPageMessage={setPageMessage}   />}\n                          \n                />\n                \n                \n                <Route exact path='/utterances' render={\n                    (props) => <UtterancesManager {...props}   lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}   setPageMessage={setPageMessage}  updateFunctions={updateFunctions}   />}\n                          \n                />\n                <Route exact path='/utterances/:listId' render={\n                    (props) => <UtterancesManager {...props}   lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}   setPageMessage={setPageMessage}  updateFunctions={updateFunctions}  />}\n                          \n                />\n                \n                \n                <Route exact path='/help' component={HelpText}     />\n                <Route exact path='/helpimport' component={HelpTextImport}     />\n                <Route exact path='/helpexport' component={HelpTextExport}     />\n                <Route exact path='/helpabout' component={HelpTextAbout}     />\n                \n                 <Route exact path='/search' component={SearchPage}     />\n                <Route exact path='/' component={HelpText} />\n        </Router>\n        <br/>\n        <br/>\n        <br/>\n    </div>\n  );\n}\n                \nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n","module.exports = __webpack_public_path__ + \"static/media/check.8ab01baf.svg\";","module.exports = __webpack_public_path__ + \"static/media/thumb-up.f18de183.svg\";","module.exports = __webpack_public_path__ + \"static/media/helpoverview.646ef0b8.svg\";","module.exports = __webpack_public_path__ + \"static/media/singingman.5d08cb4f.svg\";","module.exports = __webpack_public_path__ + \"static/media/waiting.d362cb3f.gif\";","module.exports = __webpack_public_path__ + \"static/media/thumb-down.73b0ce24.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow-thick-left.f29ee705.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow-thick-right.9ba7683e.svg\";"],"sourceRoot":""}