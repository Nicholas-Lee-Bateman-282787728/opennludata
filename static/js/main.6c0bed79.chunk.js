(this.webpackJsonpopennludata=this.webpackJsonpopennludata||[]).push([[0],{110:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),i=n(26),s=n.n(i),r=(n(90),n(3)),o=n(7),c=n(13),u=(n(20),n(21),n(9)),m={slotTypes:{unfeaturized:{},text:{},bool:{},list:{},float:{min_value:"int",max_value:"int"},categorical:{values:"list"}},autofillOptions:["Yes","No"]},p=["@sys.date-time","@sys.date","@sys.date-period","@sys.time","@sys.time-period","@sys.number","@sys.cardinal","@sys.ordinal","@sys.number-integer","@sys.number-sequence","@sys.flight-number","@sys.unit-area","@sys.unit-currency","@sys.unit-length","@sys.unit-speed","@sys.unit-volume","@sys.unit-weight","@sys.unit-information","@sys.percentage","@sys.temperature","@sys.duration","@sys.age","@sys.currency-name","@sys.unit-area-name","@sys.unit-length-name","@sys.unit-speed-name","@sys.unit-volume-name","@sys.unit-weight-name","@sys.unit-information-name","@sys.address","@sys.zip-code","@sys.geo-capital","@sys.geo-country","@sys.geo-country-code","@sys.geo-city","@sys.geo-state","@sys.place-attraction","@sys.airport","@sys.location","@sys.email","@sys.phone-number","@sys.person","@sys.music-artist","@sys.music-genre","@sys.color","@sys.language","@sys.any","@sys.url"],f=["AMAZON.DATE","AMAZON.DURATION","AMAZON.FOUR_DIGIT_NUMBER","AMAZON.NUMBER","AMAZON.Ordinal","AMAZON.PhoneNumber","AMAZON.TIME","AMAZON.SearchQuery","AMAZON.Actor","AMAZON.Airline","AMAZON.Airport","AMAZON.Anaphor","AMAZON.Animal","AMAZON.Artist","AMAZON.Author","AMAZON.Book","AMAZON.City","AMAZON.Color","AMAZON.Corporation","AMAZON.Country","AMAZON.CreativeWorkType","AMAZON.DayOfWeek","AMAZON.FictionalCharacter","AMAZON.FirstName","AMAZON.Food","AMAZON.Genre","AMAZON.Language","AMAZON.Month","AMAZON.Movie","AMAZON.MusicAlbum","AMAZON.MusicGroup","AMAZON.Musician","AMAZON.MusicRecording","AMAZON.Person","AMAZON.RadioChannel","AMAZON.Region","AMAZON.RelativePosition","AMAZON.Room","AMAZON.Sport","AMAZON.StreetName","AMAZON.TVSeries","AMAZON.VideoGame","AMAZON.VisualModeTrigger"];function g(e){return e.toLowerCase().replace(/[^a-z]/g,"_").replace("__","_")}var d=function(e){return e.replace(/([-_][a-z])/g,(function(e){return e.toUpperCase().replace("-","").replace("_","")}))},y=function(e){return e.replace(/[A-Z]/g,(function(e){return"_".concat(e.toLowerCase())}))};function v(){return((new Date).getTime()/1e3|0).toString(16)+"xxxxxxxxxxxxxxxx".replace(/[x]/g,(function(){return(16*Math.random()|0).toString(16)})).toLowerCase()}function h(e){return e.split("/").slice(0,-1).join("/")}function E(e){var t=[];if(e){var n=e.split("\n").join("::::").split(".").join("::::").split("::::");for(var a in n)a.trim().length>0&&t.push(n[a])}return t}function k(e){if(Array.isArray(e)){var t={};return e.map((function(e){return t[e]=!0,null})),Object.keys(t)}return[]}function b(e,t){if(Array.isArray(e)){var n={},a=null;return e.map((function(e){return e&&(e[t]?n[e[t]]=e:a=e),null})),a?[a].concat(Object.values(n)):Object.values(n)}return[]}function A(e,t){t=t.sort((function(e,t){return e.start<t.start?-1:1}));var n=0,a=e;return t.map((function(e){a=a.slice(0,e.start+n)+"{"+e.type+"}"+a.slice(e.end+n);var t=e.end-e.start-(e.type.length+2);return n-=t,null})),a}function S(e,t){if(e&&Array.isArray(t)){t=t.sort((function(e,t){return e.start<t.start?-1:1}));var n=0,a=e;return t.map((function(e){var t="["+e.value+"]("+e.type+")";a=a.slice(0,e.start+n)+t+a.slice(e.end+n);var l=e.end-e.start-t.length;return n-=l,null})),a}return e}var O=n(8),x=n.n(O);function I(e,t){var n=parseInt(t.index);switch(t.type){case"append":return t.item?[].concat(Object(u.a)(e),[t.item]):e;case"insert":return t.item&&"number"===typeof n&&e.length>0?[].concat(Object(u.a)(e.slice(0,n)),[t.item],Object(u.a)(e.slice(n))):e;case"remove":return"number"===typeof n?[].concat(Object(u.a)(e.slice(0,n)),Object(u.a)(e.slice(n+1))):e;case"update":return t.item&&"number"===typeof n?[].concat(Object(u.a)(e.slice(0,n)),[t.item],Object(u.a)(e.slice(n+1))):e;case"replaceall":return"object"===typeof t.items?t.items:e;default:throw new Error("Invalid reduction in useDB")}}function j(e,t){var n=Object(a.useReducer)(I,[]),l=Object(r.a)(n,2),i=l[0],s=l[1],o=x.a.createInstance({name:e||"localstoragemanager",storeName:t||"data"});function c(e){if(e&&e.id)return e.id;throw new Error("Missing ID value in getId")}function u(e,t){for(var n in i)if(i[n]&&i[n][e]===t)return n;return null}return{getId:c,loadAll:function(){o.keys().then((function(e){var t=[];e.map((function(e){return t.push(new Promise((function(t,n){o.getItem(e).then((function(e){t(e)}))}))),null})),Promise.all(t).then((function(e){s({type:"replaceall",items:e})}))}))},saveItem:function(e,t){if(e){console.log(["SAVEDB",e,t]);var n=!1;e.id||(n=!0,e.id=v()),o.setItem(e.id,e),0===i.length?(console.log(["SAVEDB len0",e,t]),s({type:"append",item:e})):null===t||void 0===t||n?(console.log(["SAVEDB append",e,t]),s({type:"append",item:e})):(console.log(["SAVEDB update",e,t]),s({type:"update",item:e,index:t}))}},deleteItem:function(e){var t=function(e){if(i&&i[e]&&i[e].id)return i[e].id;throw new Error("Missing ID value in getIdForIndex")}(e);t&&o.removeItem(t).then((function(){s({type:"remove",index:e})}))},items:i,setItems:function(e){o.clear().then((function(){s({type:"replaceall",items:e}),e&&e.map((function(e){return o.setItem(c(e),e),null}))}))},findKeyBy:u,findBy:function(e,t){var n=u(e,t);return n?i[n]:null},filter:function(e){var t=[];return e&&i.map((function(n,a){return e(n)&&t.push(n),null})),t}}}function L(e){return e?e.replace(/[^0-9a-z ,]/gi,""):""}function T(e){if(e){var t=e.split(":");return t.length>1?[t[0],t.slice(1).join(":")]:["",e]}return["",""]}function w(e,t){return e.value<t.value?-1:1}function N(e,t){return e.example<t.example?-1:1}var C=n(71),F=n(122),V=n(66),_=n.n(V),M=n(119),z=n(115),D=n(116),R=function(e){return l.a.createElement(M.a,{as:z.a},l.a.createElement(M.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(C.a,{size:"sm"},"Tag"," "),l.a.createElement(M.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(t){t.preventDefault(),e.tagAll(t.target.value)}},l.a.createElement(D.a,null,l.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){e.setTagAllValue(t.target.value)},value:e.tagAllValue}),l.a.createElement(C.a,{variant:"success",onClick:function(t){e.tagAll(e.tagAllValue)}},"Add"))),e.lookups.tagLookups&&e.lookups.tagLookups.sort().map((function(t,n){return l.a.createElement(M.a.Item,{key:n,value:t},l.a.createElement(C.a,{variant:"success",onClick:function(n){e.setTagAllValue(t),e.tagAll(t)}},"Add ",t),l.a.createElement(C.a,{variant:"danger",onClick:function(n){e.untagAll(t)},style:{marginLeft:"0.5em"}},"Remove"))}))))},W=function(e){return l.a.createElement(M.a,{as:z.a},l.a.createElement(M.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(C.a,{size:"sm"},"Intent"," "),l.a.createElement(M.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(t){t.preventDefault(),e.intentAll(t.target.value)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){e.setIntentAllValue(t.target.value)},value:e.intentAllValue}))),e.lookups.intentLookups&&e.lookups.intentLookups.sort().map((function(t,n){return l.a.createElement(M.a.Item,{key:n,value:t,onClick:function(n){e.setIntentAllValue(t),e.intentAll(t)}},t)}))))},P=function(e){return l.a.createElement(M.a,{as:z.a},l.a.createElement(M.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(C.a,{size:"sm"},"Skill"," "),l.a.createElement(M.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(t){t.preventDefault(),e.skillSetAll(t.target.value)}},l.a.createElement(D.a,null,l.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){e.setSkillAllValue(t.target.value)},value:e.skillAllValue}),l.a.createElement(C.a,{variant:"success",onClick:function(t){e.skillSetAll(e.tagAllValue)}},"Add"))),e.lookups.skillLookups&&e.lookups.skillLookups.sort().map((function(t,n){return l.a.createElement(M.a.Item,{key:n,value:t},l.a.createElement(C.a,{variant:"success",onClick:function(n){e.setSkillAllValue(t),e.skillSetAll(t)}},"Add to ",t),l.a.createElement(C.a,{variant:"danger",onClick:function(n){e.unskillAll(t)},style:{marginLeft:"0.5em"}},"Remove"))}))))},Z=function(e){var t=Object(a.useState)(e.importTo?e.importTo:""),n=Object(r.a)(t,2),i=n[0],s=n[1];return l.a.createElement(M.a,{style:{float:"right",marginLeft:"0.5em"},variant:"success",as:z.a},l.a.createElement(M.a.Toggle,{split:!0,size:"md",variant:"success",id:"dropdown-split-basic"}),l.a.createElement(C.a,{variant:"success",size:"md"},"Import Entities as"," "),l.a.createElement(M.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(t){t.preventDefault(),e.importListTo(i)}},l.a.createElement("div",{className:"form-group"},l.a.createElement(D.a,null,l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){s(e.target.value)},value:i}),l.a.createElement(C.a,{size:"sm",onClick:function(t){e.importListTo(i)}},"Import")))),e&&e.lookups&&e.lookups.listsLookups&&e.lookups.listsLookups.sort().map((function(t,n){return l.a.createElement(M.a.Item,{key:n,value:t,onClick:function(n){s(t),e.importListTo(t)}},t)}))))},U=n(72),B=n.n(U);function K(e){return l.a.createElement("span",{style:{float:"left",fontWeight:"bold"}},"\xa0",e.filteredItems.length,"/",e.items.length," matches ")}function J(e){return l.a.createElement("div",null,l.a.createElement(o.b,{style:{marginRight:"1em"},to:"/help"},l.a.createElement(C.a,null,"Home")),l.a.createElement(o.b,{style:{marginRight:"1em"},to:"/helpimport"},l.a.createElement(C.a,null,"Import")),l.a.createElement(o.b,{style:{marginRight:"1em"},to:"/helpexport"},l.a.createElement(C.a,null,"Export")),l.a.createElement(o.b,{style:{marginRight:"1em"},to:"/helpabout"},l.a.createElement(C.a,null,"About")))}function G(e){return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement(J,null),l.a.createElement("h1",null,"NLU tool"),l.a.createElement("img",{src:B.a,style:{width:"80%",height:"15em"},alt:"Help Overview"}),l.a.createElement("div",null,"This tool is intended to help collect open licensed NLU data. Specifically, it captures sentences with related intent and entity maps."),l.a.createElement("div",null,"Examples can be tagged for organisation and collected into your own skills for export into various NLU training data formats including RASA, JOVO (Alexa, Google), Mycroft and native JSON."),l.a.createElement("hr",null),l.a.createElement("div",null,"This tool is a Progressive Web Application. It works without the Internet. All data is stored locally in your web browser. Source Code at ",l.a.createElement("a",{target:"_new",href:"https://github.com/syntithenai/opennludata"},"Github")),l.a.createElement("div",null,"When the Internet is available, ",l.a.createElement("b",null,"this site uses Google Analytics to measure engagement and improve future versions.")),l.a.createElement("hr",null),l.a.createElement("p",null,"Create ",l.a.createElement(o.b,{to:"/sources"},l.a.createElement(C.a,null,"Sources"))," from pasted text or uploaded files."),l.a.createElement("p",null,"Use the ",l.a.createElement(o.b,{to:"/import"},l.a.createElement(C.a,null,"Import"))," page to break text into sentences and create NLU example records."),l.a.createElement("p",null,l.a.createElement(o.b,{to:"/examples"},l.a.createElement(C.a,null,"Organise"))," your examples using tags and cleanup untagged examples."),l.a.createElement("p",null,l.a.createElement(o.b,{to:"/search"},l.a.createElement(C.a,null,"Search "))," the community database of NLU example records."),l.a.createElement("p",null,l.a.createElement(o.b,{to:"/skills"},l.a.createElement(C.a,null,"Collect "))," examples into a skill for export in various training formats."))}function H(e){return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement(J,null),l.a.createElement("h1",null,"Importing Data"),l.a.createElement("div",null,"This tool can import files two types of data, entities and intents.",l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("h3",null,"Entity Values")),l.a.createElement("li",null,l.a.createElement("h3",null,"Intent Examples")))),l.a.createElement("hr",null))}function X(e){return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement(J,null),l.a.createElement("h1",null,"About"),l.a.createElement("br",null),l.a.createElement("div",null,l.a.createElement("h3",null,"Bugs/Feedback"),"Please share any feedback on the ",l.a.createElement("a",{target:"_new",href:"https://github.com/syntithenai/opennludata/issues"},"Github Issues Page")),l.a.createElement("br",null),l.a.createElement("div",null,"The source code for this tools is available under an MIT Open Source Licence. It is built using create-react-app with localForage for cross platform local persistence."),l.a.createElement("hr",null),l.a.createElement("div",null,"MIT Licenced Open Source Licence  - CopyLeft Steve Ryan (syntithenai@gmail.com)"),l.a.createElement("div",null,"Icons from  The Noun Project and others."),l.a.createElement("ul",null,l.a.createElement("li",null,"Man Singing by Gan Khoon Lay from  ",l.a.createElement("a",{href:"https://thenounproject.com/term/man-singing/642288/",target:"_new"},"The Noun Project")),l.a.createElement("li",null,"Head by hunotika from ",l.a.createElement("a",{href:"https://thenounproject.com/term/head/184237/",target:"_new"},"The Noun Project"))),l.a.createElement("hr",null))}function Q(e){return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement(J,null),l.a.createElement("h1",null,"Exporting"),l.a.createElement("div",null,"This tool can currently export to a number of formats including",l.a.createElement("ul",null,l.a.createElement("li",null,"Native JSON format"),l.a.createElement("li",null,"Mycroft intents and entities for Padatious NLU"),l.a.createElement("li",null,"RASA training data"),l.a.createElement("li",null,"JOVO model files"))))}function Y(e){return l.a.createElement("span",null,l.a.createElement(o.b,{to:e.match.url+"/text",style:{float:"right"}},l.a.createElement(C.a,null,"Paste Text")),l.a.createElement($,e))}function q(e){var t=e.items;if(t){var n=Object.values(t).map((function(n,a){return l.a.createElement(F.a.Item,{key:a},l.a.createElement(C.a,{style:{float:"right",marginLeft:"0.5em"},variant:"danger",onClick:function(n){window.confirm("Really delete source "+t[a].title)&&e.deleteItem(a)}},"Delete"),l.a.createElement(o.b,{to:e.match.url+"/text/"+n.id},l.a.createElement(C.a,{style:{float:"right",marginLeft:"0.5em"}},"Edit")),l.a.createElement(C.a,{style:{float:"right",marginLeft:"0.5em"},variant:"success",onClick:function(n){e.importExamples(t[a])}},"Import Intents"),l.a.createElement(Z,{lookups:e.lookups,importListTo:function(n){e.importLists(t[a],n)},importTo:t[a].title}),l.a.createElement("span",{style:{width:"90%"}},n.title))}));return l.a.createElement(F.a,null,n)}return null}function $(e){return l.a.createElement("form",{onSubmit:function(e){e.preventDefault()},style:{float:"right"}},l.a.createElement(_.a,{multiple:!0,as:"binary",id:"my-file-input",onChange:e.handleFileSelection},l.a.createElement(C.a,{style:{marginRight:"0.5em"}},"Select files")))}function ee(e){return l.a.createElement(a.Fragment,null,l.a.createElement("span",null,"With ",e.lookups.selectedTally," selected\xa0"),l.a.createElement(P,{skillSetAll:e.skillSetAll,skillAllValue:e.skillAllValue,setSkillAllValue:e.setSkillAllValue,lookups:e.lookups,untagAll:e.untagAll,unskillAll:e.unskillAll}),l.a.createElement(W,{intentAll:e.intentAll,intentAllValue:e.intentAllValue,setIntentAllValue:e.setIntentAllValue,lookups:e.lookups,untagAll:e.untagAll,unskillAll:e.unskillAll}),l.a.createElement(R,{tagAll:e.tagAll,tagAllValue:e.tagAllValue,setTagAllValue:e.setTagAllValue,lookups:e.lookups,untagAll:e.untagAll,unskillAll:e.unskillAll}))}var te=n(74),ne=(n(96),n(76)),ae=n.n(ne);n(97),n(99);function le(e){var t=Object(a.useState)(e.item&&e.item.title?e.item.title:""),n=Object(r.a)(t,2),i=n[0],s=n[1],c=Object(a.useState)(e.item&&e.item.data?e.item.data:""),u=Object(r.a)(c,2),m=u[0],p=u[1],f=Object(a.useState)(!1),g=Object(r.a)(f,2),d=g[0],y=g[1],E=Object(a.useState)([]),k=Object(r.a)(E,2),b=k[0],A=k[1],S=Object(a.useState)("json"),O=Object(r.a)(S,2),x=O[0],I=O[1],j=Object(a.useState)(["json","text"]),L=Object(r.a)(j,2),T=L[0],w=L[1],N=e.match.params.itemId?e.match.params.itemId:v(),F=(0,e.findKeyBy)("id",N);Object(a.useEffect)((function(){try{if("["===m[0]&&"]"===m[m.length-1]||"{"===m[0]&&"}"===m[m.length-1]){var e=JSON.parse(m);A(e),y(!0),w(["json","text"]),I("json")}else y(!1),w(["text"]),I("text")}catch(t){y(!1),w(["text"]),I("text")}}),[m]);var V=h(e.match.url),_=e.match.url.split("/");"text"!==_[_.length-1]&&(V=h(h(e.match.url)));var D=T.map((function(e,t){return l.a.createElement(M.a.Item,{key:t,value:e,onClick:function(t){I(e)}},e)}));return l.a.createElement("div",{style:{minHeight:"60em"}},l.a.createElement(M.a,{variant:"info",as:z.a},l.a.createElement(M.a.Toggle,{variant:"info",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(C.a,{variant:"info",size:"sm"},l.a.createElement("b",null,x)),l.a.createElement(M.a.Menu,null,D)),l.a.createElement("span",{style:{float:"right"}},m&&i&&l.a.createElement(o.b,{to:V},l.a.createElement(C.a,{onClick:function(t){e.saveItem({id:N,title:i,data:m},F)},variant:"success"},"Save")),!(m&&i)&&l.a.createElement(C.a,{variant:"secondary"},"Save"),l.a.createElement(o.b,{to:V},l.a.createElement(C.a,{variant:"danger"},"Cancel"))),l.a.createElement("label",null,"\xa0Title ",l.a.createElement("input",{size:60,type:"text",onChange:function(e){s(e.target.value)},value:i})),(!d||"text"===x)&&l.a.createElement("textarea",{style:{marginLeft:"0.2em",height:"100%",minHeight:"60em",width:"98%"},onChange:function(e){p(e.target.value)},value:m}),d&&"json"===x&&l.a.createElement("div",{style:{marginLeft:"0.2em",height:"100%",minHeight:"60em",width:"98%"}},l.a.createElement(te.a,{value:b,theme:"ace/theme/github",ace:ae.a,history:!0,mode:"code",allowedModes:["tree","code"],onChange:function(e){p(JSON.stringify(e))}})))}function ie(e){return l.a.createElement("div",null,l.a.createElement(Y,e),l.a.createElement("h1",null,"Sources"),l.a.createElement(q,e))}function se(e){var t=x.a.createInstance({name:"nlutool",storeName:"import"}),n=x.a.createInstance({name:"nlutool",storeName:"lists"}),i=j("nlutool","sources"),s=i.loadAll,o=i.saveItem,u=i.deleteItem,m=i.items,p=i.findKeyBy,f=i.findBy;function g(e,t){e.preventDefault(),t&&t.forEach((function(e){var t=Object(r.a)(e,2),n=t[0],a=t[1],l={id:null,data:n.target.result,title:a.name};o(l)}))}function d(n){if(!(n&&n.id&&n.data))throw new Error("Missing import data");var a=function(e){var t=[];function n(){var t=E(e),n=[];return t.map((function(e,t){return e&&e.trim().length>0&&n.push({id:v(),example:e,intent:"",entities:[],tags:[]}),null})),n.sort(N)}try{var a=JSON.parse(e);if(a&&a.rasa_nlu_data&&a.rasa_nlu_data.common_examples){for(var l in a.rasa_nlu_data.common_examples){var i=a.rasa_nlu_data.common_examples[l],s=i.entities&&i.entities.map((function(e,t){return{type:e.entity,value:e.value,start:e.start,end:e.end}}));i.text&&i.text.trim().length>0&&t.push({id:v(),example:i.text,intent:i.intent,entities:s,tags:[]})}return t.sort(N)}if(a&&a.invocation&&a.intents){for(var r in a.intents)if(a.intents[r]&&a.intents[r].phrases)for(var o in a.intents[r].phrases)if(a.intents[r].phrases[o]&&a.intents[r].phrases[o].trim().length>0){var c=a.intents[r].phrases[o],u=[];if(a.intents[r].inputs)for(var m in a.intents[r].inputs){var p=a.intents[r].inputs[m],f=c.indexOf("{"+p.name+"}");-1!==f&&(c=c.replace("{"+p.name+"}",p.name));var g={type:p.name,value:p.name,start:f,end:f+p.name.length};return u.push(g),null}t.push({id:v(),example:c.trim(),intent:a.intents[r].name,entities:u,tags:[]})}return t.sort(N)}if(a&&a.length>0&&a[0].example&&a[0].example.trim().length>0){for(var d in a){var y=a[d];y&&y.example&&y.example.trim().length>0&&t.push({id:v(),example:y.example,intent:y.intent,entities:y.entities&&y.entities.length>0&&y.entities[0].value?y.entities:[],tags:y.tags?y.tags:[]})}return t.sort(N)}return n()}catch(h){return console.log(h),n()}}(n.data);t.getItem("alldata").then((function(n){t.setItem("alldata",[].concat(a,n)),e.history.push("/import")}))}function y(t,a){if(!(t&&t.id&&t.data))throw new Error("Missing import data");var l=function(e,t){var n=t||"___";function a(){var t=[];return E(e).map((function(e,n){var a=T(e),l=Object(r.a)(a,2),i=l[0],s=l[1];return(s=s.trim().replace(/[^0-9a-z ]/gi,""))&&s.length>0&&t.push({id:v(),value:s,synonym:i}),null})),t.sort(w)}try{var l=JSON.parse(e);if(Array.isArray(l)){var i={};if(l.length>0&&l[0].value&&l[0].value.trim().length>0){for(var s in l){var o=l[s];if(o.value&&o.value.trim().length>0){var c=o.list?o.list:n;i[c]||(i[c]=[]),i[c].push({id:v(),value:L(o.value),synonym:o.synonym})}}Object.keys(i).map((function(e){var t=i[e],n={};return t.map((function(e){return n[e.value+":"+e.synonym]=e,null})),i[e]=Object.values(n).sort(w),null}))}else{var u=[];for(var m in l){var p=l[m].trim().replace(/[^0-9a-z]/gi,"");if(p&&p.length>0){var f=T(p),g=Object(r.a)(f,2),d=g[0],y=g[1];u.push({id:v(),value:y,synonym:d,list:t})}}i[n]=u.sort(w)}return i}return(i={})[n]=a(),i}catch(h){return console.log(h),(i={})[n]=a(),i}}(t.data);if(!l)throw new Error("Failed import");n.getItem("alldata").then((function(t){var i={};t||(t=[]),t.map((function(e){return e&&e.value&&e.value.trim().length>0&&(i[e.value]=e),null})),Object.keys(l).map((function(e,t){var n=l[e];return n&&n.map((function(t,n){var l=t;return i[t.value]?("___"!==e?t.tags?l.tags.push(e):l.tags=[e]:l.tags=[],a&&a.trim().length>0&&l.tags.push(a.trim()),l.tags=k(l.tags).sort(),i[l.value]=l):(l={id:v(),value:l.value,synonym:l.synonym?l.synonym:"",tags:[]},"___"!==e&&(t.tags?l.tags.push(e):l.tags=[e]),a&&a.trim().length>0&&l.tags.push(a.trim()),l.tags=k(l.tags).sort(),i[l.value]=l),null})),null})),n.setItem("alldata",Object.values(i)),e.history.push("/lists"),e.setPageMessage("Imported "+Object.keys(i).length+" entities into the list "+a),setTimeout((function(){e.setPageMessage("")}),2e3)}))}return Object(a.useEffect)((function(){s()}),[]),l.a.createElement("div",{className:"LocalStorageUploadManager"},l.a.createElement(c.a,{path:["".concat(e.match.path,"/text/:itemId?"),"".concat(e.match.path,"/text")],render:function(e){return l.a.createElement(le,Object.assign({},e,{item:f("id",e.match.params.itemId),saveItem:o,deleteItem:u,findKeyBy:p}))}}),l.a.createElement(c.a,Object.assign({},e,{exact:!0,path:e.match.path,render:function(t){return l.a.createElement(ie,Object.assign({},e,{items:m,deleteItem:u,saveItem:o,importExamples:d,importLists:y,handleFileSelection:g}))}})))}var re=n(28),oe=function(e){return l.a.createElement(M.a,{as:z.a},l.a.createElement(M.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(C.a,{size:"sm"},"Set List"," "),l.a.createElement(M.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(t){t.preventDefault(),e.tagAll(t.target.value)}},l.a.createElement(D.a,null,l.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){e.setTagAllValue(t.target.value)},value:e.tagAllValue}),l.a.createElement(C.a,{variant:"success",onClick:function(t){e.tagAll(e.tagAllValue)}},"Add"))),e.lookups.listsLookups&&e.lookups.listsLookups.sort().map((function(t,n){return l.a.createElement(M.a.Item,{key:n,value:t},l.a.createElement(C.a,{variant:"success",onClick:function(n){e.setTagAllValue(t),e.tagAll(t)}},"Add to ",t),l.a.createElement(C.a,{variant:"danger",onClick:function(n){e.untagAll(t)},style:{marginLeft:"0.5em"}},"Remove"))}))))},ce=function(e){var t=e.searchFilter,n=e.setSearchFilter;return l.a.createElement("input",{style:{marginLeft:"0.5em"},type:"text",value:t,onChange:function(e){var t=e.target.value;n(t)},placeholder:"Search"})},ue=n(14),me=n.n(ue),pe=function(e){var t=Object(a.useState)([]),n=Object(r.a)(t,2),i=n[0],s=n[1];return Object(a.useEffect)((function(){var t=e.lookups.listsLookups&&e.lookups.listsLookups.sort().map((function(t,n){return l.a.createElement(M.a.Item,{key:n,value:t,onClick:function(n){e.setListFilterValue(t)}},t)}));t.unshift(l.a.createElement(M.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(t){e.setListFilterValue("")}},"\xa0")),t.push(l.a.createElement(M.a.Item,{key:"Not In A List",value:"Not In A List",onClick:function(t){e.setListFilterValue("Not In A List")}},l.a.createElement("b",null,"Not In A List"))),s(t)}),[e.lookups]),l.a.createElement("div",null,l.a.createElement("span",null,e.lookups.selectedListTally>0&&l.a.createElement(C.a,{size:"lg",onClick:function(t){e.resetSelection(t)},variant:"success"},l.a.createElement("img",{style:{height:"1em"},src:me.a,alt:"Deselect"})),e.lookups.selectedListTally<=0&&l.a.createElement(C.a,{size:"lg",onClick:function(t){e.selectAll(t)},variant:"secondary"},l.a.createElement("img",{style:{height:"1em"},src:me.a,alt:"Select"}))),l.a.createElement("span",{style:{marginLeft:"0.4em"}},l.a.createElement(ce,{searchFilter:e.searchFilter,setSearchFilter:e.setSearchFilter})),l.a.createElement(M.a,{style:{marginLeft:"0.5em"},as:z.a},l.a.createElement(M.a.Toggle,{split:!0,id:"dropdown-split-basic"}),l.a.createElement(C.a,null,"List"+(e.listFilterValue?" - "+e.listFilterValue:"")," "),l.a.createElement(M.a.Menu,null,i)),l.a.createElement(C.a,{style:{marginLeft:"1em"},variant:"success",onClick:function(t){e.createEmptyItem(e.listFilterValue)}},"New Entity"))},fe=n(17),ge=n.n(fe);var de=function(e,t,n,i){var s=Object(a.useState)({}),o=Object(r.a)(s,2),c=o[0],u=o[1],m=Object(a.useState)([]),p=Object(r.a)(m,2),f=p[0],g=p[1],d=l.a.createRef();return Object(a.useEffect)((function(){e.tags&&g(e.tags.map((function(e,t){return{id:t,name:e}})))}),[e]),{selectionState:c,setSelectionState:u,tags:f,setTags:g,reactTags:d,onTagDelete:function(a){var l=f.slice(0);l.splice(a,1),g(l);var i=e;i.tags=l.map((function(e){return e.name})),t(i,n)},onTagAddition:function(a){if(a&&a.name.trim().length>0){var l=[].concat(f,a);g(b(l,"name").sort((function(e,t){return e.name>t.name?1:-1})));var i=e;i.tags=k(l.map((function(e){return e.name}))).sort(),t(i,n)}},updateExampleContent:function(a){if(e&&"string"===typeof a){var l=e;l.value=a,t(l,n)}},updateExampleSynonym:function(a){if(e&&"string"===typeof a){var l=e;l.synonym=a,t(l,n)}},selectItem:function(n){var a=e;e.isSelected=!0,t(a,n)},deselectItem:function(n){var a=e;e.isSelected=!1,t(a,n)}}};function ye(e){var t=e.item,n=e.query;return l.a.createElement("span",{id:t.id,className:t.name===n?"match":"no-match"},t.name)}function ve(e){var t=e.item,n=e.splitNumber,a=e.style,i=de(e.item,e.saveItem,e.splitNumber,e.style),s=i.tags,r=i.reactTags,o=i.onTagDelete,c=i.onTagAddition,u=i.updateExampleContent,m=i.updateExampleSynonym,p=i.selectItem,f=i.deselectItem;return t&&l.a.createElement("div",{style:a,className:n%2?"ListItemOdd":"ListItemEven"},l.a.createElement("div",{style:{position:"relative",width:"100%",textAlign:"left",borderTop:"2px solid black"}},l.a.createElement("div",{style:{float:"right"}},l.a.createElement(C.a,{variant:"danger",size:"sm",style:{float:"right",fontWeight:"bold",borderRadius:"15px",marginTop:"0.2em"},onClick:function(a){window.confirm("Really delete")&&e.deleteItem(n,t.id?t.id:"")}},"X")),l.a.createElement("div",{style:{float:"left"}},!t.isSelected&&l.a.createElement(C.a,{style:{float:"left"},size:"lg",variant:"secondary",onClick:function(){p(n)}},l.a.createElement("img",{style:{height:"1em"},src:me.a,alt:"Select"})),t.isSelected&&l.a.createElement(C.a,{style:{float:"left"},size:"lg",variant:"success",onClick:function(){f(n)}},l.a.createElement("img",{style:{height:"1em"},src:me.a,alt:"Deselect"}))),l.a.createElement("input",{style:{float:"left"},size:"25",type:"text",value:t.value,onChange:function(e){u(e.target.value)}}),l.a.createElement("label",{style:{float:"left",marginLeft:"0.5em"}},"Synonym ",l.a.createElement("input",{size:"15",type:"text",value:t.synonym,onChange:function(e){m(e.target.value)}})),l.a.createElement("label",{style:{float:"left",marginLeft:"0.5em"}},l.a.createElement("span",{style:{float:"left",marginRight:"0.5em"}},"Lists "),l.a.createElement("span",{style:{float:"left"}},l.a.createElement(ge.a,{placeholderText:"Add to list",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:r,tags:s,suggestionComponent:ye,suggestions:e.lookups.listsLookups.map((function(e,t){return{id:t,name:e}})),onDelete:o,onAddition:c})))))}function he(e,t){var n=parseInt(t.index);switch(t.type){case"append":return t.item?[].concat(Object(u.a)(e),[t.item]):e;case"prepend":return t.item?[t.item].concat(Object(u.a)(e)):e;case"insert":return t.item&&"number"===typeof n&&e.length>0?[].concat(Object(u.a)(e.slice(0,n)),[t.item],Object(u.a)(e.slice(n))):e;case"remove":return"number"===typeof n?[].concat(Object(u.a)(e.slice(0,n)),Object(u.a)(e.slice(n+1))):e;case"update":return t.item&&"number"===typeof n?[].concat(Object(u.a)(e.slice(0,n)),[t.item],Object(u.a)(e.slice(n+1))):e;case"replaceall":return"object"===typeof t.items?t.items:e;default:throw new Error("Invalid reduction in useDBSingleKey")}}function Ee(e,t,n){n||(n="data");var l=Object(a.useReducer)(he,[]),i=Object(r.a)(l,2),s=i[0],o=i[1],c=x.a.createInstance({name:e||"localstoragemanager",storeName:t||"single_key_data"});function u(e,t){for(var n in s)if(s[n]&&s[n][e]===t)return n}return Object(a.useEffect)((function(){c.setItem(n,s)}),[s]),{getId:function(e){if(e&&e.id)return e.id;throw new Error("Missing ID value in getId")},loadAll:function(){c.getItem(n).then((function(e){o({type:"replaceall",items:e||[]})}))},saveItem:function(e,t){if(e){var n=!1;e.id||(n=!0,e.id=v()),0===s.length?o({type:"append",item:e}):o(null===t||void 0===t||n?{type:"prepend",item:e}:{type:"update",item:e,index:t})}},deleteItem:function(e){o({type:"remove",index:e})},items:s,setItems:function(e){c.clear().then((function(){o({type:"replaceall",items:e})}))},findKeyBy:u,findBy:function(e,t){var n=u(e,t);return s[n]},filter:function(e){var t=[];return e&&s.map((function(n,a){return n&&e(n)&&t.push(n),null})),t}}}var ke=function(e,t,n,i){var s=Ee(e,t,n),o=s.loadAll,u=s.saveItem,m=s.deleteItem,p=s.items,f=s.setItems,g=s.findKeyBy,d=s.filter,y=Object(a.useState)([]),v=Object(r.a)(y,2),h=v[0],E=v[1],k=Object(a.useState)([]),b=Object(r.a)(k,2),A=b[0],S=b[1],O=Object(a.useState)(""),x=Object(r.a)(O,2),I=x[0],j=x[1],L=Object(a.useState)(""),T=Object(r.a)(L,2),w=T[0],N=T[1],C=l.a.createRef(),F=Object(c.f)(),V=F.listId?F.listId:"",_=Object(c.e)();return Object(a.useEffect)((function(){var e=d((function(e){var t=!0;I&&I.trim().length>0&&(t=-1!==e.value.indexOf(I));var n=!0;return"Not In A List"===V?n=!(e.tags&&(!e.tags||0!==e.tags.length)):V&&V.trim().length>0&&(n=!(!e.tags||-1===e.tags.indexOf(V))),t&&n})),t={};e.map((function(e){return e.id&&(t[e.id]=!0),null})),e.sort((function(e,t){return e.value<t.value})),E(e),S(t),i(p)}),[p,I,V]),{loadAll:o,saveItem:u,deleteItem:m,items:p,setItems:f,findKeyBy:g,filter:d,filteredItems:h,setFilteredItems:E,searchFilter:I,setSearchFilter:j,tagAllValue:w,setTagAllValue:N,listRef:C,listFilterValue:V,setListFilterValue:function(e){var t=["/"+_.location.pathname.split("/")[1]];t.push("/"+e),_.push(t.join(""))},tagAll:function(e){console.log(["tagall",w,e]);var t=e||w;if(p){var n=[];p.map((function(e,a){if(e.isSelected&&e.id&&A[e.id]){var l=JSON.parse(JSON.stringify(e));l.tags||(l.tags=[]),-1===l.tags.indexOf(t)&&l.tags.push(t),n.push(l)}else n.push(e);return null})),f(n)}},untagAll:function(e){if(console.log(["untagall",w,e]),p){var t=[];p.map((function(n,a){if(n.isSelected&&n.id&&A[n.id]){var l=JSON.parse(JSON.stringify(n));l.tags||(l.tags=[]);var i=[];l.tags.map((function(t){return t!==e&&i.push(t),null})),l.tags=i,t.push(l)}else t.push(n);return null})),f(t)}},resetSelection:function(){if(p){var e=[];p.map((function(t,n){var a=t;return a.isSelected=!1,e.push(a),null})),f(e)}},selectAll:function(){if(p){var e=[];p.map((function(t,n){if(t)if(t.id&&A[t.id]){var a=t;a.isSelected=!0,e.push(a)}else a.isSelected=!1,e.push(a);return null})),f(e)}},saveItemWrap:function(e,t){u(e,t),C.current.resetAfterIndex(t),i(p)},getItemSize:function(e){var t=40;return window.innerWidth<430?t=120:window.innerWidth<=768&&(t=70),t},deleteAll:function(e){if(window.confirm("Really delete all selected")&&p){var t=[];p.map((function(e,n){return e.id&&A[e.id]&&e.isSelected||t.push(e),null})),f(t),C.current.resetAfterIndex(0)}},createEmptyItem:function(e){var t=[];e&&"Not In A List"!==e&&e.trim().length>0&&t.push(e),j(""),u({id:null,value:"",synonym:"",tags:t})}}},be=function(e){var t=e.index,n=e.style,a=e.data.items[t];return l.a.createElement(ve,{item:a,splitNumber:t,style:n,saveItem:e.data.saveItem,deleteItem:e.data.deleteItem,saveNlu:e.data.saveNlu,lookups:e.data.lookups})};function Ae(e){var t=ke("nlutool","lists","alldata",e.updateFunctions.updateLists),n=t.listFilterValue,i=t.setListFilterValue,s=t.loadAll,r=t.deleteItem,o=t.items,c=t.findKeyBy,u=t.searchFilter,m=t.setSearchFilter,p=t.tagAllValue,f=t.setTagAllValue,g=t.listRef,d=t.tagAll,y=t.untagAll,v=t.resetSelection,h=t.selectAll,E=t.saveItemWrap,k=t.getItemSize,b=t.filteredItems,A=t.deleteAll,S=t.createEmptyItem;return Object(a.useEffect)((function(){s(),e.updateFunctions.updateLists(o)}),[]),l.a.createElement("div",null,l.a.createElement(pe,Object.assign({},e,{searchFilter:u,setSearchFilter:m,listFilterValue:n,setListFilterValue:i,resetSelection:v,selectAll:h,createEmptyItem:S})),function(e){if(b&&b.length>0)return l.a.createElement("div",null,l.a.createElement("span",{style:{float:"left",fontWeight:"bold"}},"\xa0",b.length," matches "),e.lookups.selectedListTally>0&&l.a.createElement("span",{style:{float:"right"}},l.a.createElement("span",null,"With ",e.lookups.selectedListTally," selected\xa0"),l.a.createElement(oe,{tagAll:d,tagAllValue:p,setTagAllValue:f,untagAll:y,lookups:e.lookups}),l.a.createElement(C.a,{style:{marginLeft:"1em"},onClick:A,variant:"danger"},"Delete Selected")),l.a.createElement("div",{style:{clear:"both"}},l.a.createElement("div",{style:{clear:"both"}},l.a.createElement(re.a,{key:"list",ref:g,itemData:{items:b,saveItem:E,deleteItem:r,findKeyBy:c,lookups:e.lookups},itemKey:function(e){return e},className:"List",height:700,itemCount:b.length,itemSize:k,width:"100%"},be))))}(e))}var Se=function(e){var t=Object(a.useState)([]),n=Object(r.a)(t,2),i=n[0],s=n[1];return Object(a.useEffect)((function(){var t=e.lookups.utteranceTagsLookups&&e.lookups.utteranceTagsLookups.sort().map((function(t,n){return l.a.createElement(M.a.Item,{key:n,value:t,onClick:function(n){e.setListFilterValue(t)}},t)}));t.unshift(l.a.createElement(M.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(t){e.setListFilterValue("")}},"\xa0")),t.push(l.a.createElement(M.a.Item,{key:"Not In A List",value:"Not In A List",onClick:function(t){e.setListFilterValue("Not In A List")}},l.a.createElement("b",null,"Not In A List"))),s(t)}),[e.lookups]),l.a.createElement("div",null,l.a.createElement("span",null,e.lookups.selectedListTally>0&&l.a.createElement(C.a,{size:"lg",onClick:function(t){e.resetSelection(t)},variant:"success"},l.a.createElement("img",{style:{height:"1em"},src:me.a,alt:"Deselect"})),e.lookups.selectedListTally<=0&&l.a.createElement(C.a,{size:"lg",onClick:function(t){e.selectAll(t)},variant:"secondary"},l.a.createElement("img",{style:{height:"1em"},src:me.a,alt:"Select"}))),l.a.createElement("span",{style:{marginLeft:"0.4em"}},l.a.createElement(ce,{searchFilter:e.searchFilter,setSearchFilter:e.setSearchFilter})),l.a.createElement(M.a,{style:{marginLeft:"0.5em"},as:z.a},l.a.createElement(M.a.Toggle,{split:!0,id:"dropdown-split-basic"}),l.a.createElement(C.a,null,"List"+(e.listFilterValue?" - "+e.listFilterValue:"")," "),l.a.createElement(M.a.Menu,null,i)),l.a.createElement(C.a,{style:{marginLeft:"1em"},variant:"success",onClick:function(t){e.createEmptyItem(e.listFilterValue)}},"New Utterance"))};function Oe(e){var t=e.item,n=e.splitNumber,a=e.style,i=de(e.item,e.saveItem,e.splitNumber,e.style),s=i.tags,r=i.reactTags,o=i.onTagDelete,c=i.onTagAddition,u=i.updateExampleContent,m=i.updateExampleSynonym,p=i.selectItem,f=i.deselectItem;return t&&l.a.createElement("div",{style:a,className:n%2?"ListItemOdd":"ListItemEven"},l.a.createElement("div",{style:{position:"relative",width:"100%",textAlign:"left",borderTop:"2px solid black"}},l.a.createElement("div",{style:{float:"right"}},l.a.createElement(C.a,{variant:"danger",size:"sm",style:{float:"right",fontWeight:"bold",borderRadius:"15px",marginTop:"0.2em"},onClick:function(a){window.confirm("Really delete")&&e.deleteItem(n,t.id?t.id:"")}},"X")),l.a.createElement("div",{style:{float:"left"}},!t.isSelected&&l.a.createElement(C.a,{style:{float:"left"},size:"lg",variant:"secondary",onClick:function(){p(n)}},l.a.createElement("img",{style:{height:"1em"},src:me.a,alt:"Select"})),t.isSelected&&l.a.createElement(C.a,{style:{float:"left"},size:"lg",variant:"success",onClick:function(){f(n)}},l.a.createElement("img",{style:{height:"1em"},src:me.a,alt:"Deselect"}))),l.a.createElement("input",{style:{float:"left"},size:"25",type:"text",value:t.value,onChange:function(e){u(e.target.value)}}),l.a.createElement("label",{style:{float:"left",marginLeft:"0.5em"}},l.a.createElement("span",{style:{float:"left",marginRight:"0.5em"}},"Lists "),l.a.createElement("span",{style:{float:"left"}},l.a.createElement(ge.a,{placeholderText:"Add to list",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:r,tags:s,suggestionComponent:ye,suggestions:e.lookups.utteranceTagsLookups.map((function(e,t){return{id:t,name:e}})),onDelete:o,onAddition:c}))),l.a.createElement("label",{style:{float:"left",marginLeft:"0.5em"}},l.a.createElement("span",{style:{float:"left",marginRight:"0.5em"}},"Alternatives"),l.a.createElement("textarea",{style:{width:"34em",height:"5em"},type:"text",value:t.synonym,onChange:function(e){m(e.target.value)}}))))}var xe=function(e){var t=e.index,n=e.style,a=e.data.items[t];return l.a.createElement(Oe,{item:a,splitNumber:t,style:n,saveItem:e.data.saveItem,deleteItem:e.data.deleteItem,saveNlu:e.data.saveNlu,lookups:e.data.lookups})};function Ie(e){var t=ke("nlutool","utterances","alldata",e.updateFunctions.updateUtterances),n=t.listFilterValue,i=t.setListFilterValue,s=t.loadAll,r=t.deleteItem,o=t.findKeyBy,c=t.searchFilter,u=t.setSearchFilter,m=t.tagAllValue,p=t.setTagAllValue,f=t.listRef,g=t.tagAll,d=t.untagAll,y=t.resetSelection,v=t.selectAll,h=t.saveItemWrap,E=t.filteredItems,k=t.deleteAll,b=t.createEmptyItem;function A(){return window.innerWidth<430?220:window.innerWidth<=768?160:130}return Object(a.useEffect)((function(){s()}),[]),l.a.createElement("div",null,l.a.createElement(Se,Object.assign({},e,{searchFilter:c,setSearchFilter:u,listFilterValue:n,setListFilterValue:i,resetSelection:y,selectAll:v,createEmptyItem:b})),function(e){if(E&&E.length>0)return l.a.createElement("div",null,l.a.createElement("span",{style:{float:"left",fontWeight:"bold"}},"\xa0",E.length," matches "),e.lookups.selectedListTally>0&&l.a.createElement("span",{style:{float:"right"}},l.a.createElement("span",null,"With ",e.lookups.selectedListTally," selected\xa0"),l.a.createElement(oe,{tagAll:g,tagAllValue:m,setTagAllValue:p,untagAll:d,lookups:e.lookups}),l.a.createElement(C.a,{style:{marginLeft:"1em"},onClick:k,variant:"danger"},"Delete Selected")),l.a.createElement("div",{style:{clear:"both"}},l.a.createElement("div",{style:{clear:"both"}},l.a.createElement(re.a,{key:"list",ref:f,itemData:{items:E,saveItem:h,deleteItem:r,findKeyBy:o,lookups:e.lookups},itemKey:function(e){return e},className:"List",height:700,itemCount:E.length,itemSize:A,width:"100%"},xe))))}(e))}var je=n(58);var Le=function(e,t,n,i,s){var o=Object(a.useState)({}),c=Object(r.a)(o,2),u=c[0],m=c[1],p=Object(a.useState)(""),f=Object(r.a)(p,2),g=f[0],d=f[1],y=Object(a.useState)(e&&e.intent?e.intent:""),v=Object(r.a)(y,2),h=v[0],E=v[1],A=Object(a.useState)([]),S=Object(r.a)(A,2),O=S[0],x=S[1],I=Object(a.useState)([]),j=Object(r.a)(I,2),L=j[0],T=j[1],w=l.a.createRef(),N=l.a.createRef();function C(e,t,n){if(e){if(e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveStart("character",t),a.moveEnd("character",n-t),a.select()}else e.setSelectionRange?e.setSelectionRange(t,n):e.selectionStart&&(e.selectionStart=t,e.selectionEnd=n);e.focus()}}function F(a,l){console.log(["ENTY TYPE CHANGE",a,l]);var i=e;Array.isArray(e.entities)||(e.entities=[]),console.log(["ENTY TYPE CHANGE ITEM ENT",e.entities]);var s=e.entities,r=s[a]?s[a]:{};if(r.type=l,u&&u.textSelection){console.log(["HAVE SLE",u.textSelection]);r.value=u.textSelection,r.start=u.startTextSelection,r.end=u.endTextSelection,s[a]?s[a]=r:s.push(r),i.entities=s,m(null),t(i,n)}else s[a]?s[a]=r:s.push(r),i.entities=s,m(null),t(i,n)}return Object(a.useEffect)((function(){e.tags&&x(e.tags.map((function(e,t){return{id:t,name:e}}))),e.skills&&T(e.skills.map((function(e,t){return{id:t,name:e}})))}),[e]),{intentTitle:h,setIntentTitle:E,selectionState:u,setSelectionState:m,newEntity:g,setNewEntity:d,tags:O,setTags:x,skills:L,setSkills:T,reactTags:w,reactSkills:N,onTagDelete:function(a){var l=O.slice(0);l.splice(a,1),x(l);var i=e;i.tags=l.map((function(e){return e.name})),t(i,n)},onTagAddition:function(a){if(a&&a.name.trim().length>0){var l=[].concat(O,a);x(b(l,"name").sort((function(e,t){return e.name>t.name?1:-1})));var i=e;i.tags=k(l.map((function(e){return e.name}))).sort(),t(i,n)}},onSkillDelete:function(a){var l=L.slice(0);l.splice(a,1),T(l);var i=e;i.skills=l.map((function(e){return e.name})),t(i,n)},onSkillAddition:function(a){if(a&&a.name.trim().length>0){var l=[].concat(L,a);T(b(l,"name").sort((function(e,t){return e.name>t.name?1:-1})));var i=e;i.skills=k(l.map((function(e){return e.name}))).sort(),t(i,n)}},createSelection:C,updateExampleContent:function(a){if(e&&"string"===typeof e.example&&"string"===typeof a){var l=JSON.parse(JSON.stringify(e));if(e.entities&&e.entities.length>0){var i=e.entities,s=function(e,t){if(e===t)return-1;for(var n=0;e[n]===t[n];n++);return n}(a,e.example);if(a.length-e.example.length>0){var r=a.length-e.example.length;l.entities=i.map((function(e,t){return s<e.start?(e.start+=r,e.end+=r):s<e.end&&(e.end+=r,e.value=a.slice(e.start,e.end)),e}))}else if(a.length===e.example.length)l.entities=i.map((function(e,t){return s>=e.start&&s<e.end&&(e.value=a.slice(e.start,e.end)),e}));else{var o=a.length-e.example.length;l.entities=i.map((function(e,t){return s<e.start?(e.start+=o,e.end+=o):s<e.end&&(e.end+=o,e.value=a.slice(e.start,e.end)),e}))}}l.example=a,t(l,n)}},entityClicked:function(t,a){if(e.entities){var l=e.entities;u&&u.textSelection&&0!==u.textSelection.length?F(t,a):l[t]&&C(document.getElementById("example_input_"+n),l[t].start,l[t].end)}},entityTypeChanged:F,intentChanged:function(a){var l=e;l.intent=a,t(l,n)},entityDelete:function(a){if(e.entities){var l=e,i=e.entities.slice(0,a).concat(e.entities.slice(a+1));l.entities=i,t(l,n)}},selectItem:function(n){var a=e;e.isSelected=!0,t(a,n)},setSkill:function(e,t){},deselectItem:function(n){var a=e;e.isSelected=!1,t(a,n)}}},Te=n(55),we=n.n(Te);function Ne(e){var t,n=e.item,i=e.splitNumber,s=e.style,o=Le(e.item,e.saveItem,e.splitNumber,e.style),c=o.intentTitle,u=o.setIntentTitle,m=o.selectionState,p=o.setSelectionState,f=o.newEntity,g=o.setNewEntity,d=o.tags,y=o.skills,v=o.reactTags,h=o.reactSkills,E=o.onTagDelete,k=o.onTagAddition,b=o.onSkillDelete,A=o.onSkillAddition,S=o.updateExampleContent,O=o.entityClicked,x=o.entityTypeChanged,I=o.intentChanged,j=o.entityDelete,L=o.selectItem,T=o.deselectItem,w=Object(a.useState)(e.item&&e.item.example?e.item.example:""),N=Object(r.a)(w,2),F=N[0],V=N[1],_=e.lookups.intentLookups&&e.lookups.intentLookups.sort().map((function(e,t){return l.a.createElement(M.a.Item,{key:t,value:e,onClick:function(t){I(e)}},e)})),D=n&&n.entities?n.entities.map((function(t,n){var a=e.lookups.entityLookups.sort().map((function(e,t){return l.a.createElement(M.a.Item,{key:t,value:e,onClick:function(t){x(n,e)}},e)}));return l.a.createElement(M.a,{style:{marginLeft:"0.2em"},variant:"info",key:n,as:z.a},l.a.createElement(M.a.Toggle,{variant:"info",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(C.a,{variant:"info",size:"sm",onClick:function(e){O(n,t.type)}},l.a.createElement("b",null,t.type),"-",t.value?t.value:"Select Entity Type"),l.a.createElement(C.a,{variant:"info",size:"sm",onClick:function(e){j(n,"")}},"X"),l.a.createElement(M.a.Menu,null,l.a.createElement("form",{style:{display:"inline"}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){x(n,e.target.value)},value:t.type}))),a))})):[];if(m&&m.textSelection&&m.textSelection.length>0&&m.textSelectionFrom===i){var R=e.lookups.entityLookups&&e.lookups.entityLookups.sort().map((function(e,t){return l.a.createElement(M.a.Item,{key:t,value:e,onClick:function(t){x(-1,e)}},e)}));D.push(l.a.createElement(M.a,{key:"new",variant:"success",as:z.a},l.a.createElement(M.a.Toggle,{variant:"success",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(C.a,{variant:"success",size:"sm"},"New Entity"),l.a.createElement(M.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(e){e.preventDefault(),x(-1,f)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){g(e.target.value)},value:f}))),R)))}return n&&l.a.createElement("div",{style:s,className:i%2?"ListItemOdd":"ListItemEven"},l.a.createElement("div",{style:{position:"relative",width:"100%",textAlign:"left",borderTop:"2px solid black"}},!n.isSelected&&l.a.createElement(C.a,{style:{float:"left"},size:"lg",variant:"secondary",onClick:function(){L(i)}},l.a.createElement("img",{style:{height:"1em"},src:me.a,alt:"Select"})),n.isSelected&&l.a.createElement(C.a,{style:{float:"left"},size:"lg",variant:"success",onClick:function(){T(i)}},l.a.createElement("img",{style:{height:"1em"},src:me.a,alt:"Deselect"})),l.a.createElement(C.a,(t={variant:"danger",style:{float:"right"},size:"sm"},Object(je.a)(t,"style",{float:"right",fontWeight:"bold",borderRadius:"15px",marginTop:"0.2em"}),Object(je.a)(t,"onClick",(function(t){window.confirm("Really delete")&&e.deleteItem(i,n.id?n.id:"")})),t),"X"),l.a.createElement(M.a,{style:{float:"left"},as:z.a},l.a.createElement(M.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(C.a,{size:"sm"},n.intent?n.intent.toString():"Select Intent"," "),l.a.createElement(M.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(e){e.preventDefault(),I(c)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",value:c,onChange:function(e){u(e.target.value)}}))),_)),l.a.createElement("span",{style:{float:"left"}},D),l.a.createElement("div",{style:{float:"left"}},l.a.createElement(ge.a,{placeholderText:"Add to skill",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:h,tags:y,suggestionComponent:ye,suggestions:e.lookups.skillLookups.map((function(e,t){return{id:t,name:e}})),onDelete:b,onAddition:A})),l.a.createElement("div",{style:{float:"left"}},l.a.createElement(ge.a,{placeholderText:"Add new tag",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:v,tags:d,suggestionComponent:ye,suggestions:e.lookups.tagLookups.map((function(e,t){return{id:t,name:e}})),onDelete:E,onAddition:k})),l.a.createElement("input",{onFocus:function(e){p(null)},onSelect:function(e){var t=window.getSelection().toString();p({textSelection:t,textSelectionFrom:i,startTextSelection:e.target.selectionStart,endTextSelection:e.target.selectionEnd})},type:"text",style:{width:"80%"},value:F,id:"example_input_"+i,onChange:function(e){V(e.target.value),S(e.target.value)}})))}var Ce=function(e){var t=e.lookups.skillLookups&&e.lookups.skillLookups.sort().map((function(t,n){return l.a.createElement(M.a.Item,{key:n,value:t,onClick:function(n){e.setSkillFilterValue(t)}},t)}));t.unshift(l.a.createElement(M.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(t){e.setSkillFilterValue("")}},"\xa0"));var n=e.lookups.intentLookups&&e.lookups.intentLookups.sort().map((function(t,n){return l.a.createElement(M.a.Item,{key:n,value:t,onClick:function(n){e.setIntentFilterValue(t)}},t)}));return n.unshift(l.a.createElement(M.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(t){e.setIntentFilterValue("")}},"\xa0")),l.a.createElement("div",null,l.a.createElement("span",null,e.lookups.selectedTally>0&&l.a.createElement(C.a,{size:"lg",onClick:function(t){e.resetSelection(t)},variant:"success"},l.a.createElement("img",{style:{height:"1em"},src:me.a,alt:"Deselect"})),e.lookups.selectedTally<=0&&l.a.createElement(C.a,{size:"lg",onClick:function(t){e.selectAll(t)},variant:"secondary"},l.a.createElement("img",{style:{height:"1em"},src:me.a,alt:"Select"}))),l.a.createElement("span",{style:{marginLeft:"0.4em"}},l.a.createElement(ce,{searchFilter:e.searchFilter,setSearchFilter:e.setSearchFilter})),l.a.createElement(M.a,{style:{marginLeft:"0.5em"},as:z.a},l.a.createElement(M.a.Toggle,{split:!0,id:"dropdown-split-basic"}),l.a.createElement(C.a,null,"Intent "+(e.intentFilterValue?" - "+e.intentFilterValue:"")," "),l.a.createElement(M.a.Menu,null,n)),l.a.createElement(M.a,{style:{marginLeft:"0.5em"},as:z.a},l.a.createElement(M.a.Toggle,{split:!0,id:"dropdown-split-basic"}),l.a.createElement(C.a,null,"Skill "+(e.skillFilterValue?" - "+e.skillFilterValue:"")," "),l.a.createElement(M.a.Menu,null,t)),l.a.createElement(C.a,{style:{marginLeft:"1em"},variant:"success",onClick:function(t){e.createEmptyItem(e.skillFilterValue,e.intentFilterValue)}},"New Intent"))};var Fe=function(e,t,n,i){var s=Ee(e,t,n),o=s.loadAll,u=s.saveItem,m=s.deleteItem,p=s.items,f=s.setItems,g=s.findKeyBy,d=s.filter,y=Object(a.useState)([]),v=Object(r.a)(y,2),h=v[0],E=v[1],b=Object(a.useState)([]),A=Object(r.a)(b,2),S=A[0],O=A[1],I=Object(a.useState)(""),j=Object(r.a)(I,2),L=j[0],T=j[1],w=Object(a.useState)(""),N=Object(r.a)(w,2),C=N[0],F=N[1],V=Object(a.useState)(""),_=Object(r.a)(V,2),M=_[0],z=_[1],D=Object(a.useState)(""),R=Object(r.a)(D,2),W=R[0],P=R[1],Z=l.a.createRef(),U=Object(c.f)(),B=Object(c.e)(),K=U.skillId?U.skillId:"",J=U.intentId?U.intentId:"";return Object(a.useEffect)((function(){var e=d((function(e){if((!L||L.trim().length<=0)&&(!K||K.trim().length<=0)&&(!J||J.trim().length<=0))return!0;var t=!0;J&&J.length>0&&(t=e.intent===J);var n=!0;K&&K.length>0&&(n=!(!e.skills||-1===e.skills.indexOf(K)));var a=!0;return L&&L.length>0&&(a=!(!e.example||-1===e.example.indexOf(L))),a&&n&&t})),t={};e.map((function(e){return e.id&&(t[e.id]=!0),null})),e.sort((function(e,t){return e.example<t.example})),E(e),O(t),i(e)}),[p,L,K,J]),{loadAll:o,saveItem:u,deleteItem:m,items:p,setItems:f,findKeyBy:g,filter:d,filteredItems:h,setFilteredItems:E,createEmptyItem:function(e,t){T("");var n=[];e&&e.trim().length>0&&n.push(e);var a="";t&&t.trim().length>0&&(a=t),u({id:null,example:"",intent:a,skills:n,tags:[]})},searchFilter:L,setSearchFilter:T,tagAllValue:C,setTagAllValue:F,skillAllValue:M,setSkillAllValue:z,skillFilterValue:K,setSkillFilterValue:function(e){var t=["/"+B.location.pathname.split("/")[1]];(K=e).length>0&&t.push("/skill/"+K),J.length>0&&t.push("/intent/"+J),B.push(t.join(""))},intentFilterValue:J,setIntentFilterValue:function(e){var t=["/"+B.location.pathname.split("/")[1]];J=e,K.length>0&&t.push("/skill/"+K),J.length>0&&t.push("/intent/"+J),B.push(t.join(""))},intentAllValue:W,setIntentAllValue:P,listRef:Z,tagAll:function(e){var t=e||C;if(p){var n=[];p.map((function(e,a){if(e.isSelected&&e.id&&S[e.id]){var l=JSON.parse(JSON.stringify(e));l.tags||(l.tags=[]),-1===l.tags.indexOf(t)&&l.tags.push(t),l.tags=k(l.tags),n.push(l)}else n.push(e);return null})),f(n)}},untagAll:function(e){if(p){var t=[];p.map((function(n,a){if(n.isSelected&&n.id&&S[n.id]){var l=JSON.parse(JSON.stringify(n));l.tags||(l.tags=[]);var i=[];l.tags.map((function(t){return t!==e&&i.push(t),null})),l.tags=i,t.push(l)}else t.push(n);return null})),f(t)}},unskillAll:function(e){if(p){var t=[];p.map((function(n,a){if(n.isSelected&&n.id&&S[n.id]){var l=JSON.parse(JSON.stringify(n));l.skills||(l.skills=[]);var i=[];l.skills.map((function(t){return t!==e&&i.push(t),null})),l.skills=i,t.push(l)}else t.push(n);return null})),f(t)}},intentAll:function(e){var t=e||W;if(p){var n=[];p.map((function(e,a){if(e.isSelected&&e.id&&S[e.id]){var l=e;l.intent=t,n.push(l)}else n.push(e);return null})),f(n)}},resetSelection:function(){if(p){var e=[];p.map((function(t,n){var a=t;return a.isSelected=!1,e.push(a),null})),f(e)}},selectAll:function(){if(p){var e=[];p.map((function(t,n){if(t){var a=t;t.id&&S[t.id]?(a.isSelected=!0,e.push(a)):(a.isSelected=!1,e.push(a))}return null})),f(e)}},skillSetAll:function(e){var t=e||M;if(p){var n=[];p.map((function(e,a){if(e.isSelected&&e.id&&S[e.id]){var l=JSON.parse(JSON.stringify(e));l.skills||(l.skills=[]),-1===l.skills.indexOf(t)&&l.skills.push(t),l.skills=k(l.skills),n.push(l)}else n.push(e);return null})),f(n)}},saveItemWrap:function(e,t){u(e,t),Z.current.resetAfterIndex(t),i(p)},getItemSize:function(e){var t=100,n=70,a=10,l=8,i=6;window.innerWidth<430?(t=140,n=50,a=4,l=1,i=1):window.innerWidth<=768&&(t=120,n=30,a=2,l=1,i=2);var s=0,r=p[e];return r&&r.entities&&(s+=r.entities.length/l),r&&r.tags&&(s+=r.tags.length/a),r&&r.skills&&(s+=r.skills.length/i),t+Math.round(s)*n},deleteAll:function(e){if(window.confirm("Really delete all selected examples")&&p){var t=[];p.map((function(e,n){return e.id&&S[e.id]&&e.isSelected||t.push(e),null})),f(t),Z.current.resetAfterIndex(0)}},saveAll:function(e){if(p){var t=[],n=[];h.map((function(e,a){return e.intent&&e.intent.length>0&&e.id&&S[e.id]&&e.isSelected?n.push(e):t.push(e),null})),function(e){if(e){var t=x.a.createInstance({name:"nlutool",storeName:"examples"});t.getItem("alldata").then((function(n){n&&(e.map((function(e){return n.push(e),null})),t.setItem("alldata",n))}))}}(n),f(t),Z.current.resetAfterIndex(0)}},saveNlu:function(e){p&&p[e]&&(!function(e){var t=x.a.createInstance({name:"nlutool",storeName:"examples"});t.getItem("alldata").then((function(n){n.push(e),t.setItem("alldata",n)}))}(p[e]),m(e))}}},Ve=function(e){var t=e.index,n=e.style,a=e.data.items[t];return l.a.createElement(Ne,{item:a,splitNumber:t,style:n,saveItem:e.data.saveItem,deleteItem:e.data.deleteItem,lookups:e.data.lookups,setPageMessage:e.data.setPageMessage})};function _e(e){var t=Fe("nlutool","examples","alldata",e.updateFunctions.updateLookups),n=t.loadAll,i=t.deleteItem,s=t.items,r=t.findKeyBy,c=t.searchFilter,u=t.setSearchFilter,m=t.skillFilterValue,p=t.setSkillFilterValue,f=t.intentFilterValue,g=t.setIntentFilterValue,d=t.tagAllValue,y=t.setTagAllValue,v=t.skillAllValue,h=t.setSkillAllValue,E=t.intentAllValue,k=t.setIntentAllValue,b=t.listRef,A=t.tagAll,S=t.untagAll,O=t.unskillAll,x=t.intentAll,I=t.resetSelection,j=t.selectAll,L=t.skillSetAll,T=t.saveItemWrap,w=t.getItemSize,N=t.deleteAll,F=t.filteredItems,V=t.createEmptyItem;return Object(a.useEffect)((function(){n()}),[]),l.a.createElement("div",null,l.a.createElement(Ce,Object.assign({},e,{searchFilter:c,setSearchFilter:u,skillFilterValue:m,setSkillFilterValue:p,resetSelection:I,selectAll:j,createEmptyItem:V,intentFilterValue:f,setIntentFilterValue:g,untagAll:S,unskillAll:O})),function(e){return F&&F.length>0?l.a.createElement("div",null,l.a.createElement(K,{items:s,filteredItems:F}),e.lookups.selectedTally>0&&l.a.createElement("span",{style:{float:"right"}},l.a.createElement(ee,{skillSetAll:L,skillAllValue:v,setSkillAllValue:h,untagAll:S,unskillAll:O,intentAll:x,intentAllValue:E,setIntentAllValue:k,tagAll:A,tagAllValue:d,setTagAllValue:y,lookups:e.lookups}),l.a.createElement(C.a,{style:{marginLeft:"1em"},onClick:N,variant:"danger"},"Delete Selected")),l.a.createElement(re.a,{ref:b,itemData:{items:F,saveItem:T,deleteItem:i,findKeyBy:r,lookups:e.lookups,setPageMessage:e.setPageMessage},itemKey:function(e){return e},className:"List",height:700,itemCount:F.length,itemSize:w,width:"100%"},Ve)):l.a.createElement("div",null,l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("br",null),l.a.createElement("b",null,"No items"),l.a.createElement("br",null),l.a.createElement("br",null),"Upload ",l.a.createElement(o.b,{to:"/sources"},l.a.createElement(C.a,null,"Sources"))," then ",l.a.createElement(o.b,{to:"/import"},l.a.createElement(C.a,null,"Import")),"."))}(e))}var Me=n(121),ze=n(77),De=n.n(ze),Re=n(78),We=n.n(Re),Pe=n(61);function Ze(e){Pe.a.pageview(e.history.location.pathname);var t={paddingLeft:"0.3em"},n=e.history&&e.history.location&&e.history.location.pathname?e.history.location.pathname:"/",a={"/":{name:"NLU Tool",show:!1},"/search":{name:"Search",show:!0},"/sources":{name:"Sources",show:!0},"/import":{name:"Import",show:!0},"/lists":{name:"Entities",show:!0},"/utterances":{name:"Utterances",show:!0},"/examples":{name:"Intents",show:!0},"/skills":{name:"Skills",show:!0},"/help":{name:"Help",show:!1}},i=Object.keys(a).map((function(e,i){var s=a[e];return s.show?s.link?l.a.createElement("a",{key:i,style:t,href:s.link},l.a.createElement(C.a,{variant:"primary"},s.name)):l.a.createElement(o.b,{key:i,style:t,to:e},l.a.createElement(C.a,{variant:-1!==n.indexOf(e)?"success":"primary"},s.name)):null})),s=a[n]&&a[n].helpComponent?a[n].helpComponent:l.a.createElement(o.b,{to:"/help"},l.a.createElement(C.a,null,"Help"));return l.a.createElement(Me.a,{bg:"dark",variant:"dark"},e.message&&l.a.createElement("div",{style:{position:"fixed",top:5,left:window.innerWidth?window.innerWidth/2-40:100,border:"2px solid red",background:"pink",padding:"0.5em",minWidth:"400px",borderRadius:"5px"}},l.a.createElement(C.a,{variant:"danger",size:"sm",style:{float:"right",fontWeight:"bold",borderRadius:"20px",marginLeft:"1em"},onClick:function(t){e.setPageMessage("")}},"X"),e.message),l.a.createElement("img",{src:De.a,style:{height:"5em",marginRight:"0.4em"},alt:"logo"}),l.a.createElement("div",{style:{width:"100%"}},i),e.message,l.a.createElement(Me.a.Text,{style:{position:"fixed",top:"2px",right:"2px"},className:"justify-content-end"},s),l.a.createElement("img",{src:We.a,alt:"waiting",style:{position:"fixed",top:5,right:5,zIndex:99,display:e.waiting?"block":"none"}}))}Pe.a.initialize("UA-3712973-4");var Ue=n(59),Be=n.n(Ue);function Ke(e){var t=e.item,n=e.splitNumber,a=e.style,i=Le(e.item,e.saveItem,e.splitNumber,e.style,e.setPageMessage),s=i.intentTitle,r=i.setIntentTitle,o=i.selectionState,c=i.setSelectionState,u=i.newEntity,m=i.setNewEntity,p=i.tags,f=i.skills,g=i.reactTags,d=i.reactSkills,y=i.onTagDelete,v=i.onTagAddition,h=i.onSkillDelete,E=i.onSkillAddition,k=i.updateExampleContent,b=i.entityClicked,A=i.entityTypeChanged,S=i.intentChanged,O=i.entityDelete,x=i.selectItem,I=i.deselectItem,j=e.lookups.intentLookups&&e.lookups.intentLookups.sort().map((function(e,t){return l.a.createElement(M.a.Item,{key:t,value:e,onClick:function(t){S(e)}},e)})),L=t&&t.entities?t.entities.map((function(t,n){var a=e.lookups.entityLookups.sort().map((function(e,t){return l.a.createElement(M.a.Item,{key:t,value:e,onClick:function(t){A(n,e)}},e)}));return l.a.createElement(M.a,{style:{marginLeft:"0.2em"},variant:"info",key:n,as:z.a},l.a.createElement(M.a.Toggle,{variant:"info",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(C.a,{variant:"info",size:"sm",onClick:function(e){b(n,t.type)}},l.a.createElement("b",null,t.type),"-",t.value?t.value:"Select Entity Type"),l.a.createElement(C.a,{variant:"info",size:"sm",onClick:function(e){O(n,"")}},"X"),l.a.createElement(M.a.Menu,null,l.a.createElement("form",{style:{display:"inline"}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){A(n,e.target.value)},value:t.type}))),a))})):[];if(o&&o.textSelection&&o.textSelection.length>0&&o.textSelectionFrom===n){var T=e.lookups.entityLookups&&e.lookups.entityLookups.sort().map((function(e,t){return l.a.createElement(M.a.Item,{key:t,value:e,onClick:function(t){A(-1,e)}},e)}));L.push(l.a.createElement(M.a,{key:"new",variant:"success",as:z.a},l.a.createElement(M.a.Toggle,{variant:"success",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(C.a,{variant:"success",size:"sm"},"New Entity"),l.a.createElement(M.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(e){e.preventDefault(),A(-1,u)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){m(e.target.value)},value:u}))),T)))}return t&&l.a.createElement("div",{style:a,className:n%2?"ListItemOdd":"ListItemEven"},l.a.createElement("div",{style:{position:"relative",width:"100%",textAlign:"left",borderTop:"2px solid black"}},!t.isSelected&&l.a.createElement(C.a,{style:{float:"left"},size:"lg",variant:"secondary",onClick:function(){x(n)}},l.a.createElement("img",{style:{height:"1em"},src:me.a,alt:"Select"})),t.isSelected&&l.a.createElement(C.a,{style:{float:"left"},size:"lg",variant:"success",onClick:function(){I(n)}},l.a.createElement("img",{style:{height:"1em"},src:me.a,alt:"Deselect"})),t.intent&&l.a.createElement(C.a,{style:{float:"right",marginLeft:"0.2em"},variant:"success",onClick:function(){e.saveNlu(n)}},l.a.createElement("img",{src:Be.a,alt:"Save"})," Save"),!t&&l.a.createElement(C.a,{style:{float:"right",marginLeft:"0.2em"},variant:"secondary"},l.a.createElement("img",{src:Be.a,alt:"Save"})," Import"),l.a.createElement(C.a,{variant:"danger",style:{float:"right"},onClick:function(a){e.deleteItem(n,t.id?t.id:"")}},l.a.createElement("img",{src:we.a,alt:"Delete"})," Delete"),l.a.createElement(M.a,{style:{float:"left"},as:z.a},l.a.createElement(M.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(C.a,{size:"sm"},t.intent?t.intent.toString():"Select Intent"," "),l.a.createElement(M.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(e){e.preventDefault(),S(s)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",value:s,onChange:function(e){r(e.target.value)}}))),j)),l.a.createElement("span",{style:{float:"left"}},L),l.a.createElement("div",{style:{float:"left"}},l.a.createElement(ge.a,{placeholderText:"Add to skill",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:d,tags:f,suggestionComponent:ye,suggestions:e.lookups.skillLookups.map((function(e,t){return{id:t,name:e}})),onDelete:h,onAddition:E})),l.a.createElement("div",{style:{float:"left"}},l.a.createElement(ge.a,{placeholderText:"Add new tag",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:g,tags:p,suggestionComponent:ye,suggestions:e.lookups.tagLookups.map((function(e,t){return{id:t,name:e}})),onDelete:y,onAddition:v})),l.a.createElement("input",{onFocus:function(e){c(null)},onSelect:function(e){var t=window.getSelection().toString();c({textSelection:t,textSelectionFrom:n,startTextSelection:e.target.selectionStart,endTextSelection:e.target.selectionEnd})},type:"text",style:{clear:"both",width:"80%"},value:t.example,id:"example_input_"+n,onChange:function(e){k(e.target.value)}})))}var Je=n(79),Ge=n.n(Je),He=n(80),Xe=n.n(He),Qe=function(e){var t=e.index,n=e.style,a=e.data.items[t];return l.a.createElement(Ke,{item:a,splitNumber:t,style:n,saveItem:e.data.saveItem,deleteItem:e.data.deleteItem,saveNlu:e.data.saveNlu,lookups:e.data.lookups,setPageMessage:e.data.setPageMessage})};function Ye(e){var t=Fe("nlutool","import","alldata",e.updateFunctions.updateLookups),n=t.loadAll,i=t.deleteItem,s=t.items,r=t.findKeyBy,c=t.searchFilter,u=t.setSearchFilter,m=t.tagAllValue,p=t.setTagAllValue,f=t.skillAllValue,g=t.setSkillAllValue,d=t.skillFilterValue,y=t.setSkillFilterValue,v=t.intentFilterValue,h=t.setIntentFilterValue,E=t.intentAllValue,k=t.setIntentAllValue,b=t.listRef,A=t.tagAll,S=t.untagAll,O=t.unskillAll,x=t.intentAll,I=t.resetSelection,j=t.selectAll,L=t.skillSetAll,T=t.saveItemWrap,w=t.getItemSize,N=t.deleteAll,F=t.saveAll,V=t.saveNlu,_=t.filteredItems,M=t.createEmptyItem;return Object(a.useEffect)((function(){n()}),[]),l.a.createElement("div",null,l.a.createElement(Ce,Object.assign({},e,{searchFilter:c,setSearchFilter:u,skillFilterValue:d,setSkillFilterValue:y,resetSelection:I,selectAll:j,createEmptyItem:M,untagAll:S,unskillAll:O,intentFilterValue:v,setIntentFilterValue:h})),function(e){return _&&_.length>0?l.a.createElement("div",null,l.a.createElement("span",{style:{float:"left",fontWeight:"bold"}},"\xa0",_.length,"/",s.length," matches "),e.lookups.selectedTally>0&&l.a.createElement("span",{style:{float:"right"}},l.a.createElement("span",null,"With ",e.lookups.selectedTally," selected\xa0",l.a.createElement(P,{skillSetAll:L,skillAllValue:f,setSkillAllValue:g,lookups:e.lookups,untagAll:S,unskillAll:O}),l.a.createElement(W,{intentAll:x,intentAllValue:E,setIntentAllValue:k,lookups:e.lookups,untagAll:S,unskillAll:O}),l.a.createElement(R,{tagAll:A,tagAllValue:m,setTagAllValue:p,lookups:e.lookups,untagAll:S,unskillAll:O})),l.a.createElement(C.a,{style:{marginLeft:"1em"},onClick:F,variant:"success"},"Save Selected"),l.a.createElement(C.a,{style:{marginLeft:"1em"},onClick:N,variant:"danger"},"Delete Selected")),l.a.createElement(re.a,{ref:b,itemData:{items:_,saveItem:T,saveNlu:V,deleteItem:i,findKeyBy:r,lookups:e.lookups,setPageMessage:e.setPageMessage},itemKey:function(e){return e},className:"List",height:700,itemCount:_.length,itemSize:w,width:"100%"},Qe)):l.a.createElement("div",null,l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("br",null),l.a.createElement("b",null,"No more items to import"),l.a.createElement("br",null),l.a.createElement("br",null),"Open ",l.a.createElement(o.b,{to:"/sources"},l.a.createElement(C.a,null,l.a.createElement("img",{style:{height:"1em",paddingRight:"1em"},src:Ge.a,alt:"Sources"}),"Sources"))," to create more or ",l.a.createElement(o.b,{to:"/examples"},l.a.createElement(C.a,null,"Organise",l.a.createElement("img",{src:Xe.a,alt:"Intents",style:{height:"1em",paddingLeft:"1em"}})))," what you have imported into skills."))}(e))}var qe=n(117),$e=n(120),et=n(118),tt=n(24),nt=n.n(tt),at=n(35),lt=n(81),it=n.n(lt);function st(e){var t=new it.a;return console.log(["ZIP",e]),function e(n,a){Array.isArray(n.files)&&n.files.map((function(e){console.log(["ZIP file",e]);var n=e.base64&&e.base64.length>0?{base64:!0}:{};return e.name&&e.name.length>0&&e.content&&t.file(a+"/"+e.name,e.content,n),null})),Array.isArray(n.folders)&&n.folders.map((function(n){return console.log(["ZIP folder",n]),n.name&&n.name.length>0&&t.folder(n.name),(n.files&&n.files.length>0||n.folders&&n.folders.length>0)&&e(n,a+"/"+n.name),null}))}(e,""),new Promise((function(e,n){t.generateAsync({type:"blob"}).then((function(t){e(t)}))}))}function rt(e){return ot.apply(this,arguments)}function ot(){return(ot=Object(at.a)(nt.a.mark((function e(t){return nt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){x.a.createInstance({name:"nlutool",storeName:"lists"}).getItem("alldata").then((function(n){var a={invocation:t.invocation},l={},i={};t.intents&&Object.keys(t.intents).map((function(e){var n=t.intents[e];l[e]||(l[e]={name:e,phrases:[],inputs:[]});var a={};return Array.isArray(n)&&n.map((function(t){return l[e].phrases.push(A(t.example,t.entities)),Array.isArray(t.entities)&&t.entities.map((function(e){return a[e.type]=!0,Array.isArray(i[e.type])||(i[e.type]=[]),i[e.type].push(e.value),null})),null})),l[e].phrases=k(l[e].phrases).sort(),l[e].inputs=Object.keys(a).map((function(e){var n=e+"Type";return t.entities&&t.entities[e]&&(t.entities[e].googleType||t.entities[e].alexaType)&&(n={},t.entities[e].googleType&&(n.dialogflow=t.entities[e].googleType),t.entities[e].alexaType&&(n.alexa=t.entities[e].alexaType)),{name:e,type:n}})),null})),a.intents=Object.values(l);var s={},r={};n.map((function(e){return e.value&&e.value.trim().length>0&&(e.synonym&&(Array.isArray(r[e.synonym])||(r[e.synonym]=[]),s[e.value]=e.synonym,r[e.synonym].push(e.value)),Object.keys(i).map((function(n){return t.entities&&t.entities[n]&&t.entities[n].lists&&t.entities[n].lists.map((function(t){return e&&e.tags&&-1!==e.tags.indexOf(t)&&i[n].push(e.value),null})),null}))),null})),console.log(["synonyms",s,r]),a.inputTypes=Object.keys(i).map((function(e){var t=[];return k(i[e]).sort().map((function(e){return s[e]||e&&e.trim().length>0&&t.push({value:e}),null})),Object.keys(r).map((function(e){return e&&e.trim().length>0&&t.push({value:e,synonyms:r[e]}),null})),{name:e+"Type",values:t}})),console.log(["inputtypes",a.inputTypes]);var o=JSON.stringify(a);e({folders:[{name:"models",files:[{name:"en-US.json",content:o}]}]})}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(){return(ct=Object(at.a)(nt.a.mark((function e(t){return nt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=st,e.next=3,rt(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ut(e){return mt.apply(this,arguments)}function mt(){return(mt=Object(at.a)(nt.a.mark((function e(t){return nt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=x.a.createInstance({name:"nlutool",storeName:"lists"}),l=[];a.getItem("alldata").then((function(n){var a={};t.intents&&Object.keys(t.intents).map((function(e){var n=t.intents[e];return Array.isArray(a[e])||(a[e]=[]),Array.isArray(n)&&n.map((function(t){return a[e].push(A(t.example,t.entities)),null})),a[e]=k(a[e]).sort(),null}));var i={};t.entities&&Object.keys(t.entities).map((function(e){var a=[],l=t.entities[e];return l.values&&(a=a.concat(l.values)),l.lists&&(console.log(["add from lists",l.lists]),n.map((function(e){return l.lists.map((function(t){return console.log([t,-1!==e.tags.indexOf(t),e.tags]),e&&e.tags&&-1!==e.tags.indexOf(t)&&(console.log("list item used "),a.push(e.value)),null})),null}))),i[e]=k(a).sort(),null})),Object.keys(a).map((function(e){return l.push({name:e+".intent",content:a[e].join("\n")}),null})),Object.keys(i).map((function(e){return l.push({name:e+".entity",content:i[e].join("\n")}),null})),e(l)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pt(){return(pt=Object(at.a)(nt.a.mark((function e(t){var n;return nt.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ut(t);case 2:return n=e.sent,e.abrupt("return",st({files:n}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ft={config:'\nlanguage: en\npipeline:\n  - name: WhitespaceTokenizer\n  - name: RegexFeaturizer\n  - name: LexicalSyntacticFeaturizer\n  - name: CountVectorsFeaturizer\n  - name: CountVectorsFeaturizer\n    analyzer: "char_wb"\n    min_ngram: 1\n    max_ngram: 4\n  - name: ResponseSelector\n    epochs: 100\n  - name: DIETClassifier\n    epochs: 100\n  - name: EntitySynonymMapper\n\npolicies:\n  - name: FormPolicy\n  - name: MemoizationPolicy\n  - name: TEDPolicy\n    max_history: 5\n    epochs: 100\n  - name: MappingPolicy\n  - name: "FallbackPolicy"\n    nlu_threshold: 0.5\n    core_threshold: 0.3\n    fallback_action_name: "action_default_fallback"\n    ',credentials:'\n# This file contains the credentials for the voice & chat platforms\n# which your bot is using.\n# https://rasa.com/docs/rasa/user-guide/messaging-and-voice-channels/\n\nrest:\n#  # you don\'t need to provide anything here - this channel doesn\'t\n#  # require any credentials\n\n\n#facebook:\n#  verify: "<verify>"\n#  secret: "<your secret>"\n#  page-access-token: "<your page access token>"\n\n#slack:\n#  slack_token: "<your slack token>"\n#  slack_channel: "<the slack channel>"\n\n#socketio:\n#  user_message_evt: <event name for user message>\n#  bot_message_evt: <event name for but messages>\n#  session_persistence: <true/false>\n\n#mattermost:\n#  url: "https://<mattermost instance>/api/v4"\n#  token: "<bot token>"\n#  webhook_url: "<callback URL>"\n\n#rasa:\n  #url: "http://localhost:5002/api"\n \n    ',endpoint:"\n#action_endpoint:\n#  url: http://localhost:5055/webhook\n\n    ",actions:'\n""" RASA actions """\n \n    ',single_action:function(e,t){return'\n""" RASA action """\nimport sys\nimport logging\nfrom typing import Any, Text, Dict, List\nfrom datetime import datetime\nfrom rasa_sdk import Action, Tracker\nfrom rasa_sdk.executor import CollectingDispatcher\nfrom rasa_sdk.events import SlotSet, FollowupAction\n\nclass '+e+'(Action):\n    def name(self) -> Text:\n        return "'+t+"\"\n    def run(self, dispatcher: CollectingDispatcher,\n            tracker: Tracker,\n            domain: Dict[Text, Any]) -> List[Dict[Text, Any]]:\n        var slotsets = []\n        logger = logging.getLogger(__name__)    \n        logger.debug('Action "+t+'\')\n        return [SlotSet("hermod_force_end", "true"),SlotSet("hermod_force_continue", None)] \n        \n        dispatcher.utter_message(text="Action '+t+'")\n        return slotsets\n    \n    '},domain:"\nsession_config:\n  carry_over_slots_to_new_session: true\n  session_expiration_time: 5    \n\n",stories:'\n## greet + location/price + cuisine + num people    \x3c!-- name of the story - just for debugging --\x3e\n* greet\n   - action_ask_howcanhelp\n* inform{"location": "rome", "price": "cheap"}  \x3c!-- user utterance, in format intent{entities} --\x3e\n   - action_on_it\n   - action_ask_cuisine\n* inform{"cuisine": "spanish"}\n   - action_ask_numpeople        \x3c!-- action that the bot should execute --\x3e\n* inform{"people": "six"}\n   - action_ack_dosearch    \n',session:"\nsession_config:\n  carry_over_slots_to_new_session: true\n  session_expiration_time: 5\n"};function gt(e,t,n,a,l,i,s,r,o){var c={files:[{name:"actions.py",content:n},{name:"config.yml",content:a},{name:"domain.yml",content:l},{name:"credentials.yml",content:i},{name:"endpoints.yml",content:s}],folders:[{name:"actions",files:r},{name:"data",files:[{name:"nlu.md",content:e},{name:"stories.md",content:o||""}],folders:[{name:"lookups",files:t}]}]};return console.log(["TREE GEN",c]),c}function dt(e,t,n,a,l,i,s,r,o){var c={files:[{name:"actions.py",content:n},{name:"config.yml",content:a},{name:"domain.yml",content:l},{name:"credentials.yml",content:i},{name:"endpoints.yml",content:s}],folders:[{name:"actions",files:r},{name:"data",files:[{name:"nlu.json",content:e},{name:"stories.md",content:o||""}],folders:[{name:"lookups",files:t}]}]};return console.log(["TREE GEN",c]),c}var yt=[{name:"JSON",exportFunction:function(e){return new Promise((function(t,n){(function(e){return console.log(["EXPPORT JSON",e]),new Promise((function(t,n){var a=x.a.createInstance({name:"nlutool",storeName:"lists"}),l=x.a.createInstance({name:"nlutool",storeName:"utterances"});a.getItem("alldata").then((function(n){console.log(["LISTS",n]);var a={};e.entities&&Object.keys(e.entities).map((function(t,n){return e.entities[t]&&Array.isArray(e.entities[t].lists)&&e.entities[t].lists.map((function(e){return a[e]=!0,null})),null}));var i={};Object.keys(a).map((function(e){return i[e]=[],null})),n.map((function(e){return Object.keys(a).map((function(t){return e&&e.tags&&-1!==e.tags.indexOf(t)&&i[t].push(e.value),null})),null})),e.lists=i;var s={};console.log(["SHOULD ADD UTTS",e.utterancesLists,e.utterances]),e.utterancesLists||e.utterances?l.getItem("alldata").then((function(n){Array.isArray(n)?(n.map((function(t){return e.utterances&&e.utterances.map((function(e){return t.value===e&&(s[t.value]=t),null})),e.utterancesLists&&e.utterancesLists.map((function(e){return t.tags&&-1!==t.tags.indexOf(e)&&(s[t.value]=t),null})),null})),console.log(["SET UITTER GLOLBA",s]),e.utteranceLookups=s,t(e)):t(e)})):t(e),console.log(["resolve JSON",e])}))}))})(e).then((function(n){console.log(["content",e]);var a=new Blob([JSON.stringify(n,null,2)],{type:"application/json"});t(a)}))}))}},{name:"JOVO",exportFunction:function(e){return ct.apply(this,arguments)}},{name:"Mycroft",exportFunction:function(e){return pt.apply(this,arguments)}},{name:"RASA Markdown",exportFunction:function(e){return new Promise((function(t,n){(function(e){return console.log(["EXPPORT RASA",e]),new Promise((function(t,n){var a=x.a.createInstance({name:"nlutool",storeName:"lists"}),l=x.a.createInstance({name:"nlutool",storeName:"utterances"});a.getItem("alldata").then((function(n){console.log(["LISTS",n]);var a={};e.entities&&Object.keys(e.entities).map((function(t,l){var i=e.entities[t];return i&&i.values&&(a[t]=i.values),e.entities[t]&&Array.isArray(e.entities[t].lists)&&n.map((function(n,l){return e.entities[t].lists.map((function(e){return n.tags&&-1!==n.tags.indexOf(e)&&a[t].push(n.value),null})),null})),null})),console.log(["LISTS2",a]);var i=[],s=[];Object.keys(a).map((function(e){var t=a[e];return i.push({name:e+".txt",content:t.join("\n")}),s.push("## lookup:"+e),s.push("data/lookups/"+e+".txt"),null}));var r={};n.map((function(e){return e.value&&e.value.trim().length>0&&e.synonym&&(Array.isArray(r[e.synonym])||(r[e.synonym]=[]),r[e.synonym].push(e.value)),null})),console.log(["synonyms",r]);var o=[];Object.keys(r).map((function(e){return o.push("## synonym:"+e),k(r[e]).sort().map((function(e){return o.push("- "+e),null})),o.push("\n"),null})),console.log(["synonyms OUT",o]);var c=[];e.intents&&(console.log(["have intents",e.intents]),Object.keys(e.intents).map((function(t){var n=e.intents[t];console.log("have intent ",t,n),c.push("## intent:"+t);var a=[];return n.map((function(e){if(console.log(["INTY",e]),e&&e.example&&e.example.trim().length>0){var t=S(e.example,e.entities);a[t]="- "+t}return null})),(c=[].concat(Object(u.a)(c),Object(u.a)(Object.values(a)))).push("\n"),null})));var m=c.join("\n")+"\n"+o.join("\n")+s.join("\n");console.log(m);var p=e.rasaConfig?e.rasaConfig:ft.config,f=e.rasaCredentials?e.rasaCredentials:ft.credentials,v=e.rasaEndpoint?e.rasaEndpoint:ft.endpoint,h=ft.actions,E=[],b=[];Array.isArray(e.rasaActions)&&e.rasaActions.map((function(e){if(e&&e.trim().length>0){var t=d(g(y(e))),n=y(t)+"_action";E.push(n);var a=t&&t.trim().length>0?t[0].toUpperCase()+t.substring(1):"";b.push({name:a+"Action.py",content:ft.single_action(a+"Action",n)}),h+="\n import "+a+"Action.py"}return null}));var A=e.entities?Object.keys(e.entities):[],O=e.intents?Object.keys(e.intents):[],x=e.slots?Object.keys(e.slots):e.entities?Object.keys(e.entities):[],I={};x.map((function(t){return I[t]={type:e.slots&&e.slots[t]&&e.slots[t].slotType?e.slots[t].slotType:"unfeaturized"},null})),console.log(["DOMAIN",A,O,x,I]);var j=[];O.length>0&&(j.push("intents:"),O.map((function(e){return j.push("- "+e),null})),j.push("\n")),A.length>0&&(j.push("entities:"),A.map((function(e){return j.push("- "+e),null})),j.push("\n")),x.length>0&&(j.push("slots:"),x.map((function(e,t){return j.push("  "+e+":"),j.push("    type: "+I[e].type),null})),j.push("\n")),e.rasaSession&&e.rasaSession.trim().split("\n").map((function(e){j.push(e)}));var L={};e.utterancesLists||e.utterances?l.getItem("alldata").then((function(n){Array.isArray(n)?(n.map((function(t){return e.utterances&&e.utterances.map((function(e){return t.value===e&&(L[t.value]=t),null})),e.utterancesLists&&e.utterancesLists.map((function(e){return t.tags&&-1!==t.tags.indexOf(e)&&(L[t.value]=t),null})),null})),Object.keys(L).length>0&&(j.push("responses:"),Object.keys(L).map((function(e){var t=L[e];return j.push("utter_"+g(t.value)),j.push("- text: "+t.value),t.synonyms&&t.synonyms.length>0&&t.synonyms.map((function(e){return j.push("- text: "+e),null})),null}))),t(gt(m,i,h,p,j.join("\n"),f,v,b,e.rasaStories))):t(gt(m,i,h,p,j.join("\n"),f,v,b,e.rasaStories))})):t(gt(m,i,h,p,j.join("\n"),f,v,b,e.rasaStories))}))}))})(e).then((function(e){st(e).then((function(e){t(e)}))}))}))}},{name:"RASA JSON",exportFunction:function(e){return new Promise((function(t,n){(function(e){return console.log(["EXPPORT RASA",e]),new Promise((function(t,n){var a=x.a.createInstance({name:"nlutool",storeName:"lists"}),l=x.a.createInstance({name:"nlutool",storeName:"utterances"});a.getItem("alldata").then((function(n){console.log(["LISTS",n]);var a={};e.entities&&Object.keys(e.entities).map((function(t,l){var i=e.entities[t];return i&&i.values&&(a[t]=i.values),e.entities[t]&&Array.isArray(e.entities[t].lists)&&n.map((function(n,l){return e.entities[t].lists.map((function(e){return n.tags&&-1!==n.tags.indexOf(e)&&a[t].push(n.value),null})),null})),null})),console.log(["LISTS2",a]);var i=[],s=[];Object.keys(a).map((function(e){var t=a[e];return i.push({name:e+".txt",content:t.join("\n")}),s.push("## lookup:"+e),s.push("data/lookups/"+e+".txt"),null}));var r={};n&&n.map((function(e){return e.value&&e.value.trim().length>0&&e.synonym&&(Array.isArray(r[e.synonym])||(r[e.synonym]=[]),r[e.synonym].push(e.value)),null})),console.log(["synonyms",r]);var o={};e.intents&&(console.log(["have intents",e.intents]),Object.keys(e.intents).map((function(t){var n=e.intents[t];console.log("have intent ",t,n);return n.map((function(e){if(e&&e.example&&e.example.trim().length>0){console.log(["INTY",e]);var n=S(e.example,e.entities);o[n]={text:n,intent:t,entities:e.entities?e.entities.map((function(e){return{end:e.end,entity:e.type,start:e.start,value:e.value}})):[]}}return null})),null})));var c=JSON.stringify({rasa_nlu_data:{regex_features:[],entity_synonyms:Object.keys(r).map((function(e){return{synonyms:r[e],value:e}})),common_examples:Object.values(o)}});console.log(c);var u=e.rasaConfig?e.rasaConfig:ft.config,m=e.rasaCredentials?e.rasaCredentials:ft.credentials,p=e.rasaEndpoint?e.rasaEndpoint:ft.endpoint,f=ft.actions,v=[],h=[];Array.isArray(e.rasaActions)&&e.rasaActions.map((function(e){if(e&&e.trim().length>0){var t=d(g(y(e))),n=y(t)+"_action";v.push(n);var a=t&&t.trim().length>0?t[0].toUpperCase()+t.substring(1):"";h.push({name:a+"Action.py",content:ft.single_action(a+"Action",n)}),f+="\n import "+a+"Action.py"}return null}));var E=e.entities?Object.keys(e.entities):[],k=e.intents?Object.keys(e.intents):[],b=e.slots?Object.keys(e.slots):e.entities?Object.keys(e.entities):[],A={};b.map((function(t){return A[t]={type:e.slots&&e.slots[t]&&e.slots[t].slotType?e.slots[t].slotType:"unfeaturized"},null})),console.log(["DOMAIN",E,k,b,A]);var O=[];k.length>0&&(O.push("intents:"),k.map((function(e){return O.push("- "+e),null})),O.push("\n")),E.length>0&&(O.push("entities:"),E.map((function(e){return O.push("- "+e),null})),O.push("\n")),b.length>0&&(O.push("slots:"),b.map((function(e,t){return O.push("  "+e+":"),O.push("    type: "+A[e].type),null})),O.push("\n")),e.rasaSession&&e.rasaSession.trim().split("\n").map((function(e){O.push(e)}));var x={};e.utterancesLists||e.utterances?l.getItem("alldata").then((function(n){Array.isArray(n)?(n.map((function(t){return e.utterances&&e.utterances.map((function(e){return t.value===e&&(x[t.value]=t),null})),e.utterancesLists&&e.utterancesLists.map((function(e){return t.tags&&-1!==t.tags.indexOf(e)&&(x[t.value]=t),null})),null})),Object.keys(x).length>0&&(O.push("responses:"),Object.keys(x).map((function(e){var t=x[e];return O.push("utter_"+g(t.value)),O.push("- text: "+t.value),t.synonyms&&t.synonyms.length>0&&t.synonyms.map((function(e){return O.push("- text: "+e),null})),null}))),t(dt(c,i,f,u,O.join("\n"),m,p,h,e.rasaStories))):t(dt(c,i,f,u,O.join("\n"),m,p,h,e.rasaStories))})):t(dt(c,i,f,u,O.join("\n"),m,p,h,e.rasaStories))}))}))})(e).then((function(e){st(e).then((function(e){t(e)}))}))}))}}],vt=function(e){var t=Object(a.useState)(e.value?e.value:""),n=Object(r.a)(t,2),i=n[0],s=n[1];return l.a.createElement(M.a,{as:z.a},l.a.createElement(M.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(C.a,{size:"sm"},e.value?e.title+" - "+e.value:e.title," "),l.a.createElement(M.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(e){e.preventDefault()}},l.a.createElement(D.a,null,l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){s(e.target.value)},value:i}))),Array.isArray(e.options)&&e.options.map((function(t,n){return l.a.createElement(M.a.Item,{style:{minHeight:"1.4em"},key:n,value:t,onClick:function(n){s(t),e.selectItem(t)}},t||l.a.createElement("b",null,"None"))}))))},ht=n(60);function Et(e){var t=Fe("nlutool","examples","alldata",e.updateFunctions.updateLookups),n=t.loadAll,i=t.skillFilterValue,s=t.setSkillFilterValue,c=t.filteredItems,g=Object(a.useState)(""),d=Object(r.a)(g,2),y=d[0],h=d[1],E=Object(a.useState)(""),b=Object(r.a)(E,2),A=b[0],S=b[1],O=Object(a.useState)({}),I=Object(r.a)(O,2),L=I[0],T=I[1],w=Object(a.useState)({}),N=Object(r.a)(w,2),V=N[0],_=N[1],D=Object(a.useState)({id:v(),invocation:"",title:i,entities:{}}),R=Object(r.a)(D,2),W=R[0],P=R[1],Z=j("nlutool","lists"),U=Object(a.useState)({}),B=Object(r.a)(U,2),K=B[0],J=B[1],G=Object(a.useState)({}),H=Object(r.a)(G,2),X=H[0],Q=H[1],Y=Object(a.useState)({}),q=Object(r.a)(Y,2),$=q[0],ee=q[1],te=Object(a.useState)(""),ne=Object(r.a)(te,2),ae=ne[0],le=ne[1],ie=x.a.createInstance({name:"nlutool",storeName:"skills"});function se(){return new Promise((function(e,t){i&&ie.getItem(i,(function(t,n){if(t)throw new Error(t);n&&(P(n),S(n.invocation)),e(n)}))}))}function re(){_(JSON.stringify([W.rasaSession,W.rasaEndpoint,W.rasaCredentials,W.rasaStories,W.rasaConfig,W.rasaActions,W.rasaExtraSlots,W.entities,W.utterances,W.utterancesLists,W.slots]))}function oe(e,t){if(e&&e.trim().length>0){t||(t={}),t[e]={};var n=W;n.slots=t,P(n),le(""),console.log("new slot"),console.log(n),re()}}function ce(t){if(W&&t){var n=W;if(Array.isArray(n.utterances)||(n.utterances=[]),n.utterances.push(t.name),n.utterances=k(n.utterances),P(n),console.log("RASA"),console.log(n),!e.lookups.utteranceListsLookups[t.name]&&!e.lookups.utterancesLookups[t.name]){var a=x.a.createInstance({name:"nlutool",storeName:"utterances"});a.getItem("alldata",(function(e,n){if(e)throw new Error(e);Array.isArray(n)&&(n.unshift({id:v(),value:t.name,synonyms:"",tags:[]}),a.setItem("alldata",n))}))}re()}}return Object(a.useEffect)((function(){se().then((function(){})),n(),Z.loadAll(),e.updateFunctions.updateUtterances()}),[]),Object(a.useEffect)((function(){se()}),[i]),Object(a.useEffect)((function(){Z.items.length>0&&e.updateFunctions.updateLists(Z.items[0])}),[Z.items]),Object(a.useEffect)((function(){var e={};Array.isArray(c)&&c.map((function(t,n){return Array.isArray(t.entities)&&t.entities.map((function(t,n){return t&&t.type&&t.type.length>0&&("object"!==typeof e[t.type]&&(e[t.type]={}),Array.isArray(e[t.type].values)||(e[t.type].values=[]),W&&W.entities&&W.entities[t.type]&&W.entities[t.type].alexaType&&(e[t.type].alexaType=W.entities[t.type].alexaType),W&&W.entities&&W.entities[t.type]&&W.entities[t.type].googleType&&(e[t.type].googleType=W.entities[t.type].googleType),W&&W.entities&&W.entities[t.type]&&W.entities[t.type].lists&&(e[t.type].lists=W.entities[t.type].lists),e[t.type].values.push(t.value)),null})),null}));var t=W.slots?W.slots:{};Object.keys(e).map((function(n,a){var l=e[n];return l.values=k(l.values).sort(),t[n]||(t[n]={values:[]}),null})),T(e);var n=W;n.entities=e,n.slots=t,P(e);var a=K,l=$,i={};if(c){c.map((function(e){return e.intent&&(a[e.intent]||(a[e.intent]=[]),l[e.intent]=l[e.intent]>0?l[e.intent]+1:1,a[e.intent].push({example:e.example,entities:e.entities})),Array.isArray(e.tags)&&e.tags.map((function(e){return i[e]=!0,null})),null})),J(a),ee(l),Q(i);var s=W;s.intents||(console.log(["UPDATE INTENTS WITH COLLATED ITEMS",K]),s.intents=K),s.tags=Object.keys(X),P(s)}}),[c]),Object(a.useEffect)((function(){}),[K,X]),Object(a.useEffect)((function(){if(W){var e=W;e.invocation=A,P(e)}}),[A]),Object(a.useEffect)((function(){var e=W;e&&e.title&&e.title.length>0&&(console.log("change cs or inv real"),L&&Object.keys(L).map((function(t){return e.entities&&e.entities[t]&&(e.entities[t].values=L[t].values),null})),e.invocation=A,e.intents=K,console.log(["save skill ",i,W]),ie.setItem(i,W,(function(e){if(console.log(["saved skill "]),e)throw console.log(e),new Error(e)})))}),[W,V,A]),(e.lookups.skillLookups&&e.lookups.skillLookups.sort().map((function(e,t){return l.a.createElement(M.a.Item,{key:t,value:e,onClick:function(t){s(e)}},e)}))).unshift(l.a.createElement(M.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(e){s("")}},"\xa0")),l.a.createElement("div",null,i&&i.length>0&&l.a.createElement(M.a,{style:{float:"right",marginLeft:"0.5em"},as:z.a},l.a.createElement(M.a.Toggle,{split:!0,variant:"success",id:"dropdown-split-basic"}),l.a.createElement(C.a,{variant:"success"},"Export"),l.a.createElement(M.a.Menu,{variant:"success"},yt.map((function(e,t){var n="opennludata_"+e.name+"_"+Date.now();return l.a.createElement(M.a.Item,{variant:"success",key:t,value:e.name,onClick:function(t){e.exportFunction(W).then((function(t){console.log(["TRIGGER DL",n,t]),"JSON"===e.name?Object(ht.saveAs)(t,n+".json"):Object(ht.saveAs)(t,n+".zip")}))}},e.name)})))),function(e){if(!(i&&i.length>0)){var t=e.lookups.skillLookups?e.lookups.skillLookups.map((function(e,t){return l.a.createElement(C.a,{key:t,onClick:function(t){s(e)},style:{marginLeft:"1em"}},e)})):[];return l.a.createElement("div",null,l.a.createElement("h1",null,"Skills"),t.length>0&&t,t.length<=0&&l.a.createElement("div",null,"You dont have any skills yet. Import some ",l.a.createElement(o.b,{to:"/sources"},l.a.createElement(C.a,null,"Sources"))))}if(c&&c.length>0){var n=W&&W.utterances?W.utterances.map((function(e,t){return{id:t,name:e}})):[],a=W&&W.utterancesLists?W.utterancesLists.map((function(e,t){return{id:t,name:e}})):[],r=W.slots?W.slots:L;return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("h3",null,i," ")),l.a.createElement("div",null,l.a.createElement("label",{style:{fontWeight:"bold",marginLeft:"0.5em"}}," Invocation ",l.a.createElement("input",{type:"text",value:A,onChange:function(e){S(e.target.value)}}))),l.a.createElement("div",{style:{marginTop:"0.7em",marginBottom:"0.7em"}},l.a.createElement("b",{style:{marginRight:"1em",marginLeft:"0.5em"}},"Tags"),l.a.createElement("span",null,W.tags.join(", "))),l.a.createElement("div",{style:{marginTop:"0.7em",marginBottom:"0.7em",borderTop:"2px solid black"}},l.a.createElement("b",{style:{marginRight:"1em",marginLeft:"0.5em"}},"Intents"),l.a.createElement("span",null,Object.keys(K).sort().map((function(e,t){var n=y||Object.keys(K)[0],a="danger";return K[e].length>300?a="success":K[e].length>100?a="primary":K[e].length>10&&(a="warning"),K[e].length===$[e]?l.a.createElement(o.b,{key:e,to:"/examples/skill/"+i+"/intent/"+e},l.a.createElement(C.a,{key:e,variant:e===n?"primary":"outline-primary",onClick:function(){h(e)}},l.a.createElement(qe.a,{variant:a}," ",K[e].length," "),"\xa0",e)):l.a.createElement(o.b,{key:e,to:"/examples/skill/"+i+"/intent/"+e},l.a.createElement(C.a,{variant:e===n?"primary":"outline-primary",onClick:function(){h(e)}},l.a.createElement(qe.a,{variant:"danger"}," ",K[e].length,"/",$[e]," "),"\xa0",e))})))),l.a.createElement("div",{style:{marginTop:"0.7em",borderTop:"2px solid black"}},l.a.createElement("b",{style:{marginRight:"1em",marginLeft:"0.5em"}},"Entities"),l.a.createElement(F.a,null,Object.keys(L).map((function(t,n){var a=W&&W.entities&&W.entities[t]&&W.entities[t].lists?W.entities[t].lists.map((function(e,t){return{id:t,name:e}})):[];return l.a.createElement(F.a.Item,{key:t},l.a.createElement("span",{style:{marginLeft:"1em",float:"left",fontWeight:"bold"}},"\xa0",t),l.a.createElement("span",{style:{marginLeft:"1em",float:"left"}},"\xa0",L[t]&&L[t].values&&L[t].values.slice(0,5).join(", "),L[t]&&L[t].values&&L[t].values.length>5?l.a.createElement(qe.a,null,"... ",L[t]&&L[t].values&&L[t].values.length-5," more "):""),l.a.createElement("span",{style:{marginLeft:"1em",float:"left"}},l.a.createElement("label",null,l.a.createElement("i",null)," ",l.a.createElement(ge.a,{placeholderText:"Also use values from ",minQueryLength:0,maxSuggestionsLength:50,autoresize:!0,allowNew:!1,tags:a,suggestionComponent:ye,suggestions:e.lookups.listsLookups.map((function(e,t){return{id:t,name:e}})),onDelete:function(e){!function(e,t){var n=W;if(n&&n.entities&&e&&n.entities[e]&&n.entities[e].lists){var a=n.entities[e].lists;a=a.slice(0,t).concat(a.slice(t+1)),n.entities[e].lists=a,P(n),re()}}(t,e)},onAddition:function(e){!function(e,t){if(e&&t&&t.name){var n=W;n.entities||(n.entities={}),n.entities[e]||(n.entities[e]={lists:[]}),Array.isArray(n.entities[e].lists)||(n.entities[e].lists=[]),n.entities[e].lists.push(t.name),n.entities[e].lists=k(n.entities[e].lists).sort(),P(n),re()}else console.log([" missing data"])}(t,e)}})," ")),l.a.createElement("div",{style:{float:"right"}},l.a.createElement(vt,{options:[""].concat(Object(u.a)(f)),title:"Alexa",value:W.entities&&W.entities[t]&&W.entities[t].alexaType?W.entities[t].alexaType:"",selectItem:function(e){!function(e,t){if(W&&e){var n=W;n.entities||(n.entities={}),n.entities[e]||(n.entities[e]={}),n.entities[e].alexaType=t,P(n),console.log("ALEXA"),console.log(n),re()}}(t,e)}}),"\xa0\xa0",l.a.createElement(vt,{options:[""].concat(Object(u.a)(p)),title:"Google",value:W.entities&&W.entities[t]&&W.entities[t].googleType?W.entities[t].googleType:"",selectItem:function(e){!function(e,t){if(W&&e){var n=W;n.entities||(n.entities={}),n.entities[e]||(n.entities[e]={}),n.entities[e].googleType=t,P(n),re()}}(t,e)}})))})))),l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"0.4em",borderTop:"2px solid black"}},l.a.createElement("div",null,l.a.createElement("b",null,"Utterances")),l.a.createElement("div",{style:{clear:"both"}},l.a.createElement("div",{style:{marginLeft:"1em"}},l.a.createElement("label",null,"Utterances",l.a.createElement(ge.a,{placeholderText:"Use utterance ",minQueryLength:0,maxSuggestionsLength:50,autoresize:!0,allowNew:!0,tags:n,suggestionComponent:ye,suggestions:e.lookups.utterancesLookups?e.lookups.utterancesLookups.map((function(e,t){return{id:t,name:e}})):[],onDelete:function(e){!function(e){if(console.log(["RE UTTERANCE",e]),"number"===typeof e&&W&&W.utterances&&W.utterances.length>e){var t=W;t.utterances=[].concat(Object(u.a)(t.utterances.slice(0,e)),Object(u.a)(t.utterances.slice(e+1))),P(t),console.log("RASA"),console.log(t),re()}}(e)},onAddition:function(e){ce(e)}})," ")),l.a.createElement("div",{style:{marginLeft:"1em"}},l.a.createElement("label",null,"Utterance Lists",l.a.createElement(ge.a,{placeholderText:"Use utterances from ",minQueryLength:0,maxSuggestionsLength:50,autoresize:!0,allowNew:!1,tags:a,suggestionComponent:ye,suggestions:e.lookups.utteranceTagsLookups?e.lookups.utteranceTagsLookups.map((function(e,t){return{id:t,name:e}})):[],onDelete:function(e){!function(e){if("number"===typeof e&&W&&W.utterancesLists){var t=W;t.utterancesLists=[].concat(Object(u.a)(t.utterancesLists.slice(0,e)),Object(u.a)(t.utterancesLists.slice(e+1))),P(t),console.log("RASA"),console.log(t),re()}}(e)},onAddition:function(e){!function(e){if(console.log(["ADD UTTERANCE LIST",e,W]),W&&e){var t=W;Array.isArray(t.utterancesLists)||(t.utterancesLists=[]),t.utterancesLists.push(e.name),t.utterancesLists=k(t.utterancesLists),P(t),console.log("add ut list"),console.log(t.utterancesLists),re()}}(e)}})," ")))),l.a.createElement("div",{style:{marginTop:"0.7em",borderTop:"2px solid black"}},l.a.createElement("div",null,l.a.createElement("b",null,"Platform")),l.a.createElement($e.a,{defaultActiveKey:"rasa",id:"platform-tabs"},l.a.createElement(et.a,{eventKey:"rasa",title:"RASA"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em"}},l.a.createElement($e.a,{defaultActiveKey:"slots",id:"platform-rasa"},l.a.createElement(et.a,{eventKey:"slots",title:"Slots"},l.a.createElement("div",{style:{marginLeft:"1.4em",marginTop:"0.7em",borderTop:"2px solid black"}},l.a.createElement("form",{onSubmit:function(e){e.preventDefault(),oe(ae,r)}},l.a.createElement("input",{value:ae,onChange:function(e){le(e.target.value)}}),l.a.createElement(C.a,{size:"sm",onClick:function(){oe(ae,r)}},"New Slot")),l.a.createElement(F.a,null,Object.keys(r).map((function(e,t){return l.a.createElement(F.a.Item,{key:e},l.a.createElement("span",{style:{marginLeft:"1em",float:"left",fontWeight:"bold"}},"\xa0",e),l.a.createElement("div",{style:{float:"right"}},L[e]&&l.a.createElement(vt,{options:m.autofillOptions,title:"Autofill",value:W.slots&&W.entities[e]&&W.slots[e].slotAutofill&&W.slots[e].slotAutofill.trim().length>0?W.slots[e].slotAutofill:"Yes",selectItem:function(t){!function(e,t,n){if(W&&e&&t){var a=W;n[e].slotAutofill=t,a.slots=n,console.log(["RASA autofill",W,e,t,n]),P(a),console.log(a),re()}}(e,t,r)}}),"\xa0\xa0",l.a.createElement(vt,{options:Object.keys(m.slotTypes),title:"Slot",value:W.slots&&W.slots[e]&&W.slots[e].slotType?W.slots[e].slotType:"unfeaturized",selectItem:function(t){!function(e,t,n){if(W&&e&&t){var a=W;n[e].slotType=t,a.slots=n,P(a),console.log("RASA"),console.log(a),re()}}(e,t,r)}}),l.a.createElement(C.a,{variant:"danger",size:"sm",style:{marginLeft:"0.5em",float:"right",fontWeight:"bold",borderRadius:"15px",marginTop:"0.2em"},onClick:function(t){!function(e,t){if(W&&e&&t){var n=W;delete t[e],n.slots=t,P(n),console.log("del slot"),console.log(n),re()}}(e,r)}},"X")))}))))),l.a.createElement(et.a,{eventKey:"actions",title:"Actions"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em",borderTop:"2px solid black"}},l.a.createElement("label",null,l.a.createElement("div",{style:{fontStyle:"italic"}},"One per line, _action will be appended to each line"),l.a.createElement("textarea",{style:{width:"40em",height:"10em"},value:Array.isArray(W.rasaActions)?W.rasaActions.join("\n"):"",onChange:function(e){!function(e){if(W&&e){var t=W;t.rasaActions=e,P(t),re()}}(e.target.value?e.target.value.split("\n"):[])},placeholder:"fred\n    findSname\n    is_whatsi\n    blah name"})))),l.a.createElement(et.a,{eventKey:"config",title:"Config"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em",borderTop:"2px solid black"}},l.a.createElement("label",null,l.a.createElement("textarea",{style:{width:"60em",height:"30em"},value:W.rasaConfig?W.rasaConfig:"",onChange:function(e){!function(e){if(W){var t=W;t.rasaConfig=e,P(t),re()}}(e.target.value)},placeholder:ft.config})))),l.a.createElement(et.a,{eventKey:"stories",title:"Stories"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em",borderTop:"2px solid black"}},l.a.createElement("label",null,l.a.createElement("textarea",{style:{width:"60em",height:"30em"},value:W.rasaStories?W.rasaStories:"",onChange:function(e){!function(e){if(W){var t=W;t.rasaStories=e,P(t),re()}}(e.target.value)},placeholder:ft.stories})))),l.a.createElement(et.a,{eventKey:"credentials",title:"Credentials"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em",borderTop:"2px solid black"}},l.a.createElement("label",null,l.a.createElement("textarea",{style:{width:"60em",height:"30em"},value:W.rasaCredentials?W.rasaCredentials:ft.credentials,onChange:function(e){!function(e){if(W){var t=W;t.rasaCredentials=e,P(t),re()}}(e.target.value)}})))),l.a.createElement(et.a,{eventKey:"endpoints",title:"Endpoints"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em",borderTop:"2px solid black"}},l.a.createElement("label",null,l.a.createElement("textarea",{style:{width:"60em",height:"30em"},value:W.rasaEndpoint?W.rasaEndpoint:ft.endpoint,onChange:function(e){!function(e){if(W){var t=W;t.rasaEndpoint=e,P(t),re()}}(e.target.value)}})))),l.a.createElement(et.a,{eventKey:"session",title:"Session Config"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em",borderTop:"2px solid black"}},l.a.createElement("label",null,l.a.createElement("textarea",{style:{width:"60em",height:"30em"},value:W.rasaSession?W.rasaSession:ft.session,onChange:function(e){!function(e){if(W){var t=W;t.rasaSession=e,P(t),re()}}(e.target.value)}}))))))),l.a.createElement(et.a,{eventKey:"mycroft",title:"Mycroft"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em"}},l.a.createElement("b",null,"not yet"))),l.a.createElement(et.a,{eventKey:"jovo",title:"JOVO"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em"}},l.a.createElement("b",null,"not yet"))),l.a.createElement(et.a,{eventKey:"alex",title:"Alexa"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em"}},l.a.createElement("b",null,"not yet"))),l.a.createElement(et.a,{eventKey:"google_assistant",title:"Google Assistant"},l.a.createElement("div",{style:{marginTop:"0.7em",marginLeft:"1.4em"}},l.a.createElement("b",null,"not yet"))))))}}(e))}var kt=function(e){return l.a.createElement("div",null,l.a.createElement("h3",null,"Search"),l.a.createElement("a",{target:"_new",href:"https://github.com/syntithenai/opennludata/wiki"},l.a.createElement(C.a,null,"Search the WIKI")))};function bt(e){var t={paddingLeft:"0.3em"};return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement("h1",null,"Menu"),l.a.createElement(o.b,{style:t,to:"/sources"},l.a.createElement(C.a,null,"Sources")),l.a.createElement(o.b,{style:t,to:"/import"},l.a.createElement(C.a,null,"Import")),l.a.createElement(o.b,{style:t,to:"/examples"},l.a.createElement(C.a,null,"Organise")),l.a.createElement(o.b,{style:t,to:"/skills"},l.a.createElement(C.a,null,"Skills ")),l.a.createElement(o.b,{style:t,to:"/search"},l.a.createElement(C.a,null,"Search Community ")))}var At=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],i=t[1],s=Object(a.useState)(""),u=Object(r.a)(s,2),m=u[0],p=u[1],f=Object(a.useState)([]),g=Object(r.a)(f,2),d=g[0],y=g[1],v=Object(a.useState)([]),h=Object(r.a)(v,2),E=h[0],k=h[1],b=Object(a.useState)([]),A=Object(r.a)(b,2),S=A[0],O=A[1],I=Object(a.useState)([]),j=Object(r.a)(I,2),L=j[0],T=j[1],w=Object(a.useState)([]),N=Object(r.a)(w,2),C=N[0],F=N[1],V=Object(a.useState)(0),_=Object(r.a)(V,2),M=_[0],z=_[1],D=Object(a.useState)([]),R=Object(r.a)(D,2),W=R[0],P=R[1],Z=Object(a.useState)([]),U=Object(r.a)(Z,2),B=U[0],K=U[1],J=Object(a.useState)([]),Y=Object(r.a)(J,2),q=Y[0],$=Y[1],ee=Object(a.useState)(0),te=Object(r.a)(ee,2),ne=te[0],ae=te[1],le=Object(a.useState)(0),ie=Object(r.a)(le,2),re=ie[0],oe=ie[1],ce=Object(a.useState)({}),ue=Object(r.a)(ce,2),me=ue[0],pe=ue[1],fe=Object(a.useState)({}),ge=Object(r.a)(fe,2),de=ge[0],ye=ge[1],ve=Object(a.useState)(""),he=Object(r.a)(ve,2),Ee=he[0],ke=he[1];function be(){i(!0)}function Se(){setTimeout((function(){i(!1)}),300)}var Oe={utteranceTagsLookups:q,utterancesLookups:W,utteranceListsLookups:B,intentLookups:d,entityLookups:E,tagLookups:S,skillLookups:L,selectedTally:M,listsLookups:C,listTally:ne,selectedListTally:re,listTallyByList:me,selectedListTallyByList:de},xe={updateLookups:function(e){if(e&&e.length>0){var t={},n={},a={},l={},i=0;e.map((function(e){return e&&(e.isSelected&&(i+=1),n[e.intent]=!0,e.tags&&e.tags.length>0&&e.tags.map((function(e){return t[e]=!0,null})),e.skills&&e.skills.length>0&&e.skills.map((function(e){return l[e]=!0,null})),e.entities&&e.entities.length>0&&e.entities.map((function(e){return e.type&&(a[e.type]=!0),null}))),null}));var s=function(e,t,n){return n.indexOf(e)===t};y([].concat(Object.keys(n),d).filter(s)),k([].concat(Object.keys(a),E).filter(s)),O([].concat(Object.keys(t),S).filter(s)),T([].concat(Object.keys(l),L).filter(s)),z(i)}},updateLists:function(e){if(e){var t={},n={},a=0,l=0;e.map((function(e){return e&&e.tags&&e.tags.length>0&&(e.isSelected&&(l+=1),e.tags.map((function(a){return a&&a.trim().length>0&&(e.isSelected?(n[a]=n[a]>0?n[a]+1:1,t[a]=t[a]>0?t[a]+1:1):n[a]=n[a]>0?n[a]+1:1),null})),a+=1),null})),ae(a),oe(l),ye(t),pe(n),F(Object.keys(n))}},updateUtterances:function(){console.log("UPDATE UTTERANCES"),x.a.createInstance({name:"nlutool",storeName:"utterances"}).getItem("alldata",(function(e,t){var n={},a={},l={};Array.isArray(t)&&(t.map((function(e,t){return console.log(["UPDATE UTTERANCE",e]),e.value&&(a[e.value]=!0),e.synonym&&e.synonym.split("\n").map((function(e){return n[e]=!0,null})),e.tags&&e.tags.length>0&&e.tags.map((function(e){return l[e]=!0,null})),null})),P(Object.keys(a)),$(Object.keys(l)),K(Object.keys(n))),console.log(["UPDATE UTTERANCES",a,n])}))}};return l.a.createElement("div",{className:"OpenNluDataApp"},l.a.createElement(o.a,null,l.a.createElement(c.a,{exact:!0,path:"*",render:function(e){return l.a.createElement(Ze,{waiting:n,history:e.history,message:m,setPageMessage:p})}}),l.a.createElement(c.a,{exact:!0,path:"/menu",component:bt}),l.a.createElement(c.a,{path:"/sources",render:function(e){return l.a.createElement(se,Object.assign({},e,{startWaiting:be,stopWaiting:Se,setPageMessage:p,updateFunctions:xe,lookups:Oe}))}}),l.a.createElement(c.a,{exact:!0,path:"/import",render:function(e){return l.a.createElement(Ye,Object.assign({},e,{lookups:Oe,startWaiting:be,stopWaiting:Se,updateFunctions:xe,setPageMessage:p}))}}),l.a.createElement(c.a,{exact:!0,path:"/import/skill/:skillId",render:function(e){return l.a.createElement(Ye,Object.assign({},e,{lookups:Oe,startWaiting:be,stopWaiting:Se,updateFunctions:xe,setPageMessage:p}))}}),l.a.createElement(c.a,{exact:!0,path:"/import/intent/:intentId",render:function(e){return l.a.createElement(Ye,Object.assign({},e,{lookups:Oe,startWaiting:be,stopWaiting:Se,updateFunctions:xe,setPageMessage:p}))}}),l.a.createElement(c.a,{path:"/import/skill/:skillId/intent/:intentId",render:function(e){return l.a.createElement(Ye,Object.assign({},e,{lookups:Oe,startWaiting:be,stopWaiting:Se,updateFunctions:xe,setPageMessage:p}))}}),l.a.createElement(c.a,{exact:!0,path:"/examples",render:function(e){return l.a.createElement(_e,Object.assign({},e,{lookups:Oe,startWaiting:be,stopWaiting:Se,updateFunctions:xe,setPageMessage:p}))}}),l.a.createElement(c.a,{exact:!0,path:"/examples/skill/:skillId",render:function(e){return l.a.createElement(_e,Object.assign({},e,{lookups:Oe,startWaiting:be,stopWaiting:Se,updateFunctions:xe,setPageMessage:p}))}}),l.a.createElement(c.a,{path:"/examples/intent/:intentId",render:function(e){return l.a.createElement(_e,Object.assign({},e,{lookups:Oe,startWaiting:be,stopWaiting:Se,updateFunctions:xe,setPageMessage:p}))}}),l.a.createElement(c.a,{exact:!0,path:"/examples/skill/:skillId/intent/:intentId",render:function(e){return l.a.createElement(_e,Object.assign({},e,{lookups:Oe,startWaiting:be,stopWaiting:Se,updateFunctions:xe,setPageMessage:p}))}}),l.a.createElement(c.a,{exact:!0,path:"/skills/:skillId",render:function(e){return l.a.createElement(Et,Object.assign({},e,{lookups:Oe,startWaiting:be,stopWaiting:Se,updateFunctions:xe,setPageMessage:p}))}}),l.a.createElement(c.a,{exact:!0,path:"/skills/skill/:skillId",render:function(e){return l.a.createElement(Et,Object.assign({},e,{lookups:Oe,startWaiting:be,stopWaiting:Se,updateFunctions:xe,setPageMessage:p}))}}),l.a.createElement(c.a,{exact:!0,path:"/skills",render:function(e){return l.a.createElement(Et,Object.assign({},e,{skillFilterValue:Ee,setSkillFilterValue:ke,lookups:Oe,startWaiting:be,stopWaiting:Se,updateFunctions:xe,setPageMessage:p}))}}),l.a.createElement(c.a,{exact:!0,path:"/lists",render:function(e){return l.a.createElement(Ae,Object.assign({},e,{lookups:Oe,startWaiting:be,stopWaiting:Se,updateFunctions:xe,setPageMessage:p}))}}),l.a.createElement(c.a,{exact:!0,path:"/lists/:listId",render:function(e){return l.a.createElement(Ae,Object.assign({},e,{lookups:Oe,startWaiting:be,stopWaiting:Se,updateFunctions:xe,setPageMessage:p}))}}),l.a.createElement(c.a,{exact:!0,path:"/utterances",render:function(e){return l.a.createElement(Ie,Object.assign({},e,{lookups:Oe,startWaiting:be,stopWaiting:Se,setPageMessage:p,updateFunctions:xe}))}}),l.a.createElement(c.a,{exact:!0,path:"/utterances/:listId",render:function(e){return l.a.createElement(Ie,Object.assign({},e,{lookups:Oe,startWaiting:be,stopWaiting:Se,setPageMessage:p,updateFunctions:xe}))}}),l.a.createElement(c.a,{exact:!0,path:"/help",component:G}),l.a.createElement(c.a,{exact:!0,path:"/helpimport",component:H}),l.a.createElement(c.a,{exact:!0,path:"/helpexport",component:Q}),l.a.createElement(c.a,{exact:!0,path:"/helpabout",component:X}),l.a.createElement(c.a,{exact:!0,path:"/search",component:kt}),l.a.createElement(c.a,{exact:!0,path:"/",component:G})),l.a.createElement("br",null),l.a.createElement("br",null),l.a.createElement("br",null))},St=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ot(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(At,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");St?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ot(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ot(t,e)}))}}()},14:function(e,t,n){e.exports=n.p+"static/media/check.8ab01baf.svg"},20:function(e,t,n){},55:function(e,t,n){e.exports=n.p+"static/media/thumb-down.73b0ce24.svg"},59:function(e,t,n){e.exports=n.p+"static/media/thumb-up.f18de183.svg"},72:function(e,t,n){e.exports=n.p+"static/media/helpoverview.a30e207d.svg"},77:function(e,t,n){e.exports=n.p+"static/media/singingman.5d08cb4f.svg"},78:function(e,t,n){e.exports=n.p+"static/media/waiting.d362cb3f.gif"},79:function(e,t,n){e.exports=n.p+"static/media/arrow-thick-left.f29ee705.svg"},80:function(e,t,n){e.exports=n.p+"static/media/arrow-thick-right.9ba7683e.svg"},85:function(e,t,n){e.exports=n(110)},90:function(e,t,n){}},[[85,1,2]]]);
//# sourceMappingURL=main.6c0bed79.chunk.js.map