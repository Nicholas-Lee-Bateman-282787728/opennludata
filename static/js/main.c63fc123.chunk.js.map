{"version":3,"sources":["utils.js","useDB.js","parsers.js","components/TagAllDropDown.js","components/IntentAllDropDown.js","components/SkillAllDropDown.js","components/ImportListsDropDown.js","components/Components.js","components/JSONTextEditor.js","LocalStorageUploadManager.js","components/ListAllDropDown.js","components/SearchInput.js","components/ListsManagerSearchBar.js","useListItemRow.js","components/SuggestionComponent.js","ListsManagerRow.js","useDBSingleKey.js","useListItemEditor.js","ListsManager.js","components/UtterancesManagerSearchBar.js","UtterancesManagerRow.js","UtterancesManager.js","useNluRow.js","NluExampleRow.js","components/EditorSearchBar.js","useNluEditor.js","NluExampleEditor.js","components/NavbarComponent.js","NluImportRow.js","NluImportEditor.js","export/createZip.js","export/exportJOVO.js","export/exportMycroft.js","export/RASATemplates.js","export/exportRASA.js","export/index.js","export/exportJSON.js","export/exportRASAMD.js","export/exportRASAJSON.js","components/DropDownComponent.js","NluSkillsEditor.js","SearchPage.js","App.js","serviceWorker.js","index.js","images/check.svg","images/thumb-down.svg","images/thumb-up.svg","images/singingman.svg","images/waiting.gif","images/arrow-thick-left.svg","images/arrow-thick-right.svg"],"names":["RASA","slotTypes","autofillOptions","GoogleAssistant","entityTypes","Alexa","toSnakeCase","str","toLowerCase","replace","camelToSnakeCase","letter","generateObjectId","Date","getTime","toString","Math","random","parentUrl","url","split","slice","join","splitSentences","text","final","splits","splitText","trim","length","push","uniquifyArray","a","Array","isArray","index","map","value","Object","keys","uniquifyArrayOfObjects","field","emptyIndex","concat","values","replaceEntities","example","entities","sort","b","start","offset","newExample","entity","type","end","diff","reducer","state","action","parseInt","item","items","Error","useDB","database","databaseTable","useReducer","dispatch","localforageStorage","localforage","createInstance","name","storeName","getId","id","findKeyBy","k","loadAll","then","ipromises","key","Promise","iresolve","ireject","getItem","res","all","saveItem","console","log","isNewItem","setItem","undefined","deleteItem","getIdForIndex","removeItem","setItems","clear","findBy","filter","matchFunction","filtered","i","cleanListItem","extractSynonym","parts","sortListSplits","sortExampleSplits","TagAllDropDown","props","Dropdown","as","ButtonGroup","Toggle","size","Button","Menu","style","display","onSubmit","e","preventDefault","tagAll","target","InputGroup","className","onChange","setTagAllValue","tagAllValue","variant","onClick","lookups","tagLookups","skillKey","Item","untagAll","marginLeft","IntentAllDropDown","intentAll","setIntentAllValue","intentAllValue","intentLookups","intentKey","SkillAllDropDown","skillSetAll","setSkillAllValue","skillAllValue","skillLookups","unskillAll","ImportListsDropDown","useState","importTo","importToValue","setImportToValue","float","importListTo","listsLookups","MatchesTallies","fontWeight","filteredItems","HelpMenu","marginRight","to","HelpText","href","HelpTextImport","HelpTextAbout","HelpTextExport","NewFileButtons","match","FileSelector","FilesList","list","ListGroup","window","confirm","title","importExamples","listName","importLists","width","multiple","handleFileSelection","WithSelectedDropDowns","selectedTally","JSONTextEditor","setTitle","data","setText","isJson","setIsJson","json","setJson","editorMode","setEditorMode","editorOptions","setEditorOptions","params","itemId","useEffect","jsonParsed","JSON","parse","parentLink","linkParts","editorModeOptions","j","minHeight","height","theme","ace","history","mode","allowedModes","stringify","IndexPage","LocalStorageUploadManager","localforageStorageImport","localforageStorageLists","ev","results","forEach","result","file","parsed","generateSplits","newSplits","rasa_nlu_data","common_examples","cleanEntities","el","intent","tags","invocation","intents","l","phrases","phrase","inputs","inputKey","input","markerStart","indexOf","entityi","parseImportText","newTextSplits","textInner","synonym","lists","listKey","uniqueKeys","listItem","q","parseLists","allLists","allListsIndex","listItemIndex","newListItem","setPageMessage","setTimeout","path","render","exact","iprops","ListAllDropDown","SearchInput","searchFilter","setSearchFilter","placeholder","ListsManagerSearchBar","topTagOptions","setTopTagOptions","topTagOptionss","setListFilterValue","unshift","selectedListTally","resetSelection","src","checkImage","alt","selectAll","listFilterValue","createEmptyItem","useListItemRow","splitNumber","selectionState","setSelectionState","setTags","reactTags","React","createRef","tag","onTagDelete","newTags","splice","newItem","newTag","onTagAddition","updateExampleContent","content","updateExampleSynonym","selectItem","isSelected","deselectItem","SuggestionComponent","query","ListsManagerRow","position","textAlign","borderTop","borderRadius","marginTop","placeholderText","minQueryLength","maxSuggestionsLength","autoresize","allowNew","ref","suggestionComponent","suggestions","onDelete","onAddition","singleKey","useListItemEditor","databaseKey","updateLists","useDBSingleKey","setFilteredItems","filteredItemsKeys","setFilteredItemsKeys","listRef","useParams","listId","useHistory","matchText","matchPicklist","itemKeys","location","pathname","val","tagValue","newItems","finalTags","saveItemWrap","current","resetAfterIndex","getItemSize","baseSize","innerWidth","deleteAll","RenderRow","saveNlu","ListsManager","updateFunctions","itemData","itemKey","itemCount","itemSize","renderEditor","UtterancesManagerSearchBar","utteranceTagsLookups","UtterancesManagerRow","UtterancesManager","updateUtterances","useNluRow","newEntity","setNewEntity","intentTitle","setIntentTitle","skills","setSkills","reactSkills","createSelection","createTextRange","selRange","collapse","moveStart","moveEnd","select","setSelectionRange","selectionStart","selectionEnd","focus","entityTypeChanged","entityNumber","newEntities","textSelection","startTextSelection","endTextSelection","skill","onSkillDelete","newSkills","newSkill","onSkillAddition","diffPos","findFirstDiffPos","insertionLength","entityIndex","deletionLength","entityClicked","entityKey","entityType","document","getElementById","intentChanged","entityDelete","setSkill","NluExampleRow","textInput","setTextInput","intentOptions","entitiesDropdowns","entityOptions","entityLookups","textSelectionFrom","thumbdownImage","onFocus","onSelect","getSelection","EditorSearchBar","topskillOptions","setSkillFilterValue","setIntentFilterValue","intentFilterValue","skillFilterValue","useNluEditor","updateLookups","skillId","intentId","intentFilter","skillFilter","searchFilterBool","newIntent","intentValue","skillValue","heightPerLine","tagsPerLine","entitiesPerLine","skillsPerLine","tallyExtras","round","saveAll","lsItems","exampleItems","saveLSItems","saveLSItem","NluExampleEditor","NavbarComponent","ReactGA","pageview","astyle","paddingLeft","currentPage","pages","show","links","link","page","helpButton","helpComponent","Navbar","bg","message","top","left","border","background","padding","minWidth","fireImage","Text","right","waitingImage","zIndex","waiting","initialize","NluImportRow","thumbupImage","NluImportEditor","paddingRight","arrowthickleftImage","arrowthickrightImage","createZip","zipStructure","zip","JSZip","recurseZipStructure","files","options","base64","folders","folder","resolve","reject","generateAsync","exportJOVO","jovo","examples","entityTypeName","googleType","alexaType","dialogflow","alexa","synonyms","synonymsIndex","entityExtrasList","inputTypes","exportMycroft","listsStorage","modelFiles","combinedEntities","RASATemplates","config","credentials","endpoint","actions","single_action","actionName","domain","generateFolderTree","nluContent","fileLookups","actionsContent","configContent","domainContent","credentialsContent","endpointsContent","actionFiles","folderTree","exportFormats","exportFunction","utterancesStorage","usedLists","skillLists","utterances","utterancesLists","allUtterances","thisUtterance","utteranceLookups","exportJSON","blob","Blob","entityLists","entityValue","entityList","synonymsOut","nluOut","intentItem","domainActions","rasaActions","string","group","toUpperCase","snake","substring","domainEntities","domainIntents","domainSlots","domainSlotsMeta","slots","slot","slotType","domainContentParts","utteranceKey","utterance","exportRASA","exportRASAMD","exportRASAJSON","DropDownComponent","filterValue","setFilterValue","optionKey","NluSkillsEditor","currentIntent","setCurrentIntent","setInvocation","entitiesForSkill","setEntitiesForSkill","listsForEntity","setListsForEntity","currentSkill","setCurrentSkill","listsManager","collatedItems","setCollatedItems","collatedTags","setCollatedTags","collatedCounts","setCollatedCounts","newSlotValue","setNewSlotValue","skillsStorage","loadSkill","err","forceReload","rasaConfig","rasaExtraSlots","newSlot","addUtterance","utteranceListsLookups","utterancesLookups","utteranceStorage","entityName","newCollatedItems","newCollatedCounts","newCollatedTags","exportFormat","now","zipBody","saveAs","skillsList","utteranceTags","listItemKey","utteranceListTags","marginBottom","collatedIntent","useCurrentIntent","completionVariant","Badge","collatedEntity","listTags","listIndex","removeListFromSkillEntity","addListToSkillEntity","setAlexaEntityType","setGoogleAssistantEntityType","removeUtterance","removeUtteranceList","addUtteranceList","Tabs","defaultActiveKey","Tab","eventKey","slotAutofill","setRASASlotAutofill","setRASASlotType","deleteSlot","fontStyle","setRASAActions","setRASAConfig","SearchPage","SiteMenu","App","setWaiting","pageMessage","setIntentLookups","setEntityLookups","setTagLookups","setSkillLookups","setListsLookups","setSelectedTally","setUtterancesLookups","setUtteranceListsLookups","setUtteranceTagsLookups","listTally","setListTally","setSelectedListTally","listTallyByList","setListTallyByList","selectedListTallyByList","setSelectedListTallyByList","startWaiting","stopWaiting","selected","distinct","self","newSelectedLists","newLists","tally","utteranceLists","utteranceIndex","component","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","ReactDOM","StrictMode","URL","process","origin","addEventListener","fetch","headers","response","contentType","get","status","ready","unregister","reload","checkValidServiceWorker","module","exports"],"mappings":"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","file":"static/js/main.c63fc123.chunk.js","sourcesContent":["//const yaml = require('js-yaml');\n// FUNCTIONS \n\nconst RASA = {\n    slotTypes : {\n        'unfeaturized': {},\n        'text': {},\n        'bool': {},\n        'list': {},\n        'float': {'min_value':'int', 'max_value':'int'},\n        'categorical': {'values':'list'}\n    },\n    autofillOptions: ['Yes','No']\n}\n\n// https://cloud.google.com/dialogflow/docs/reference/system-entities\nconst GoogleAssistant = {\n    entityTypes: [\"@sys.date-time\",\"@sys.date\",\"@sys.date-period\",\"@sys.time\",\"@sys.time-period\",\"@sys.number\",\"@sys.cardinal\",\"@sys.ordinal\",\"@sys.number-integer\",\"@sys.number-sequence\",\"@sys.flight-number\",\"@sys.unit-area\",\"@sys.unit-currency\",\"@sys.unit-length\",\"@sys.unit-speed\",\"@sys.unit-volume\",\"@sys.unit-weight\",\"@sys.unit-information\",\"@sys.percentage\",\"@sys.temperature\",\"@sys.duration\",\"@sys.age\",\"@sys.currency-name\",\"@sys.unit-area-name\",\"@sys.unit-length-name\",\"@sys.unit-speed-name\",\"@sys.unit-volume-name\",\"@sys.unit-weight-name\",\"@sys.unit-information-name\",\"@sys.address\",\"@sys.zip-code\",\"@sys.geo-capital\",\"@sys.geo-country\",\"@sys.geo-country-code\",\"@sys.geo-city\",\"@sys.geo-state\",\"@sys.place-attraction\",\"@sys.airport\",\"@sys.location\",\"@sys.email\",\"@sys.phone-number\",\"@sys.person\",\"@sys.music-artist\",\"@sys.music-genre\",\"@sys.color\",\"@sys.language\",\"@sys.any\",\"@sys.url\"]\n}\n\n//https://developer.amazon.com/en-US/docs/alexa/custom-skills/slot-type-reference.html\",\nconst Alexa = {\n    entityTypes: [\"AMAZON.DATE\",\"AMAZON.DURATION\",\"AMAZON.FOUR_DIGIT_NUMBER\",\"AMAZON.NUMBER\",\"AMAZON.Ordinal\",\"AMAZON.PhoneNumber\",\"AMAZON.TIME\",\"AMAZON.SearchQuery\",\"AMAZON.Actor\",\"AMAZON.Airline\",\"AMAZON.Airport\",\"AMAZON.Anaphor\",\"AMAZON.Animal\",\"AMAZON.Artist\",\"AMAZON.Author\",\"AMAZON.Book\",\"AMAZON.City\",\"AMAZON.Color\",\"AMAZON.Corporation\",\"AMAZON.Country\",\"AMAZON.CreativeWorkType\",\"AMAZON.DayOfWeek\",\"AMAZON.FictionalCharacter\",\"AMAZON.FirstName\",\"AMAZON.Food\",\"AMAZON.Genre\",\"AMAZON.Language\",\"AMAZON.Month\",\"AMAZON.Movie\",\"AMAZON.MusicAlbum\",\"AMAZON.MusicGroup\",\"AMAZON.Musician\",\"AMAZON.MusicRecording\",\"AMAZON.Person\",\"AMAZON.RadioChannel\",\"AMAZON.Region\",\"AMAZON.RelativePosition\",\"AMAZON.Room\",\"AMAZON.Sport\",\"AMAZON.StreetName\",\"AMAZON.TVSeries\",\"AMAZON.VideoGame\",\"AMAZON.VisualModeTrigger\"]\n}\n\n\nfunction toSnakeCase(str) {\n    return str.toLowerCase().replace(/[^a-z]/g, '_').replace('__','_')\n}\n\nconst snakeToCamelCase = (str) => str.replace(\n    /([-_][a-z])/g,\n    (group) => group.toUpperCase()\n                    .replace('-', '')\n                    .replace('_', '')\n);\n\nconst camelToSnakeCase = str => str.replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`);\n\n\n\nfunction generateObjectId() {\n    var timestamp = (new Date().getTime() / 1000 | 0).toString(16);\n    return timestamp + 'xxxxxxxxxxxxxxxx'.replace(/[x]/g, function() {\n        return (Math.random() * 16 | 0).toString(16);\n    }).toLowerCase();\n}\n   \nfunction parentUrl(url) {\n    return url.split(\"/\").slice(0,-1).join(\"/\") \n}\n\nfunction concatText(text,words) {\n   let parts = text.split(' ')\n   let shorter = parts.slice(0,20).join(' ')\n   return (shorter.length < text.length) ? shorter + '...' : shorter;\n}\n\nfunction splitSentences(text) {\n      var final = []\n      if (text) {\n          // split by newline and full stop\n         var splits = text.split('\\n').join('::::').split('.').join('::::').split('::::') //.map(function(value) { return value.trim()})\n        // trim all splits\n        for (var splitText in splits) {\n            if(splitText.trim().length > 0) final.push(splits[splitText])\n        }\n     }\n     return final;\n}\n\n\n    \n    function findFirstDiffPos(a, b) {\n      if (a === b) return -1;\n      for (var i=0; a[i] === b[i]; i++) {}\n      return i;\n    }\n    \n    function uniquifyArray(a) {\n        //console.log(['UNIQARRAY',a])\n        if (Array.isArray(a)) {\n            var index = {}\n            a.map(function(value) {\n                index[value] = true \n                return null\n            })\n            return Object.keys(index)\n        } else {\n            return []\n        }\n    }\n\n    function uniquifyArrayOfObjects(a,field) {\n         if (Array.isArray(a)) {\n             var index = {}\n            var emptyIndex = null\n            a.map(function(value) {\n                if (value) {\n                    if (value[field]) {\n                        index[value[field]] = value \n                    } else {\n                        emptyIndex = value\n                    }\n                }\n                return null\n            })\n            if (emptyIndex) return [emptyIndex].concat(Object.values(index))\n            else return Object.values(index)\n        } else {\n            return []\n        }\n    }\n    function replaceEntities(example,entities) {\n        // replace entity values with {entityName}\n        // first sort entities by start key\n        entities = entities.sort(function(a,b) {\n          if (a.start < b.start) return -1\n          else return 1  \n        })\n        var offset = 0\n        var newExample = example\n        entities.map(function(entity) {\n            newExample = newExample.slice(0,entity.start + offset)+\"{\"+entity.type+\"}\"+newExample.slice(entity.end + offset)\n            var diff = (entity.end - entity.start) - (entity.type.length + 2)\n            offset -= diff\n            return null\n        })\n        return newExample\n    }\n    \n    \nexport {generateObjectId, parentUrl, concatText , findFirstDiffPos, splitSentences,uniquifyArray, uniquifyArrayOfObjects, replaceEntities, RASA, GoogleAssistant, Alexa, snakeToCamelCase, camelToSnakeCase, toSnakeCase }\n","import {useReducer} from 'react';\nimport {generateObjectId} from './utils'\nimport localforage from 'localforage'\n\n// handle list updates with minimum disruption to top level items\nfunction reducer(state, action) {\n    const index = parseInt(action.index)\n switch (action.type) {\n    case \"append\":\n      if (action.item) {\n        return [...state, action.item];\n      } else return state\n    case \"insert\":\n      if (action.item && typeof index === \"number\" ) {\n          if (state.length > 0) {\n              return [\n                ...state.slice(0, index),\n                action.item,\n                ...state.slice(index)\n              ];\n          } else return state\n        } else return state\n    case \"remove\":\n      if (typeof index === \"number\" ) {\n          return [\n            ...state.slice(0, index),\n            ...state.slice(index + 1)\n          ];\n       } else return state \n    case \"update\":\n       if (action.item && typeof index === \"number\" ) {\n           return  [\n            ...state.slice(0, index),\n            action.item,\n            ...state.slice(index + 1)\n          ];\n        } else return state \n    case \"replaceall\":\n        if (typeof action.items === \"object\") {\n            return action.items\n        } else return state\n    default:\n      throw new Error('Invalid reduction in useDB');\n  }\n}\n   \n\n// state manager with local storage backing\nexport default function useDB(database, databaseTable) {\n     const [items, dispatch] = useReducer(reducer,[]);\n     var localforageStorage = localforage.createInstance({\n       name: database ? database : \"localstoragemanager\",\n       storeName   : databaseTable ? databaseTable : 'data',\n     });\n\n    function getId(item) {\n        if (item && item.id) {\n            return item.id\n        } else {\n            throw new Error(\"Missing ID value in getId\")\n        }\n    }\n    function getIdForIndex(index) {\n        if (items && items[index] && items[index].id) {\n            return items[index].id\n        } else {\n            throw new Error(\"Missing ID value in getIdForIndex\")\n        }\n    }\n    \n\n    function loadAll() {\n        localforageStorage.keys().then(function(keys) {\n            var ipromises = []\n            keys.map(function(key) {\n                ipromises.push(new Promise(function(iresolve,ireject) {\n                   localforageStorage.getItem(key).then(function(res) {\n                       iresolve(res)\n                   })\n                }))\n                return null\n            })\n            Promise.all(ipromises).then(function(res) {\n                dispatch({ type: \"replaceall\", items: res });\n            })\n        })\n        \n    }\n\n    \n    // save or create\n    function saveItem(item,index) {\n        if (item) {\n            console.log(['SAVEDB',item,index])\n            // update sources and save text in seperate localstorage\n            // ensure id\n            var isNewItem = false;\n            if (!item.id) {\n                isNewItem = true;\n                item.id = generateObjectId()\n            }\n            localforageStorage.setItem(item.id,item)\n            if (items.length === 0) {\n                console.log(['SAVEDB len0',item,index])\n                dispatch({ type: \"append\",item: item });\n            } else {\n                if ((index === null || index === undefined)  || isNewItem) {\n                    console.log(['SAVEDB append',item,index])\n                    dispatch({ type: \"append\",item: item });\n                } else {\n                    console.log(['SAVEDB update',item,index])\n                    dispatch({ type: \"update\",item: item, index: index });\n                }\n            }\n            \n        }\n    }\n    \n\n    function findBy(field,value) {\n        var key = findKeyBy(field,value)\n        if (key) return items[key];\n        return null\n    }\n    \n    function findKeyBy(field,value) {\n        for (var k in items) {\n            if (items[k] && items[k][field] === value) return k\n        }\n        return null\n    }\n\n\n    function setItemsWrap(items) {\n        localforageStorage.clear().then(function() {\n            dispatch({ type: \"replaceall\", items: items})\n            if (items) {\n                items.map(function(item) { localforageStorage.setItem(getId(item),item); return null})\n            }\n        })\n        \n    }\n    \n    function deleteItem(index) {\n        var id = getIdForIndex(index)\n        if (id) {\n            localforageStorage.removeItem(id).then(function() {\n                dispatch({ type: \"remove\", index: index})\n            })\n        }\n        \n    }\n    \n    function filter(matchFunction) {\n        var filtered = []\n        if (matchFunction) {\n            items.map(function(item,i) {\n              if (matchFunction(item)) {\n                  filtered.push(item)\n              }  \n              return null\n            })\n        }\n        return filtered\n        \n    }\n    \n    return {getId:getId, loadAll:loadAll, saveItem:saveItem, deleteItem:deleteItem , items:items, setItems:setItemsWrap, findKeyBy:findKeyBy, findBy:findBy, filter: filter}\n    \n}\n","import {splitSentences, generateObjectId} from './utils'\n\nfunction cleanListItem(text) {\n    return text ? text.replace(/[^0-9a-z ,]/gi, '') : ''\n}\n\nfunction extractSynonym(text) {\n    if (text) { \n        var parts = text.split(':')\n        if (parts.length > 1) {\n           return [parts[0],parts.slice(1).join(\":\")]   \n        } else {\n            return ['',text]\n        }\n    } else {\n        return ['','']\n    }\n}\n\nfunction sortListSplits(a,b) {\n    if (a.value < b.value) return -1;  else return 1;\n}\n\nfunction sortExampleSplits(a,b) {\n    if (a.example < b.example) return -1 ;else return 1;\n}\n\nfunction parseLists(text,listName) {\n        var key = listName ? listName : '___'\n        // plain text\n        function generateSplits() {\n            var newTextSplits=[]\n            const splits = splitSentences(text)\n            splits.map(function(textInner,i) {\n                var [synonym, value] = extractSynonym(textInner)\n                value = value.trim().replace(/[^0-9a-z ]/gi, '')\n                if (value && value.length > 0) {\n                    newTextSplits.push({'id':generateObjectId(), 'value':value,'synonym':synonym})\n                }\n                return null\n            })\n            return newTextSplits.sort(sortListSplits);\n        }\n        try {\n            var json = JSON.parse(text)\n            //  JSON ARRAY FORMAT\n            if (Array.isArray(json)) {\n                // value and optional synonyn\n                var lists = {}\n                //console.log(['LISTS',lists])\n                if (json.length > 0 && json[0].value && json[0].value.trim().length > 0) {\n                    for (var i in json) {\n                        var entity = json[i]\n                        if (entity.value && entity.value.trim().length > 0) {\n                            var listKey = entity.list ? entity.list : key\n                            //console.log(['reset push',listKey,lists])\n                            if (!lists[listKey]  ) {\n                                lists[listKey] = []\n                            }\n                            lists[listKey].push({'id':generateObjectId(), 'value':cleanListItem(entity.value),'synonym':entity.synonym})\n                        }\n                    }\n                    // now sort and uniquify each list\n                    \n                    Object.keys(lists).map(function(listKey) {\n                        var list = lists[listKey]\n                        var uniqueKeys = {}\n                        list.map(function(listItem) {\n                           uniqueKeys[listItem.value+':'+listItem.synonym] = listItem\n                           return null\n                        })\n                        lists[listKey] = Object.values(uniqueKeys).sort(sortListSplits)\n                        return null\n                    })\n                    \n                // array of text\n                } else {\n                    var newSplits=[]\n                    for (var q in json) {\n                        var textInner = json[q].trim().replace(/[^0-9a-z]/gi, '')\n                        if (textInner && textInner.length > 0) {\n                            const [synonym, value] = extractSynonym(textInner)\n                            newSplits.push({'id':generateObjectId(), 'value':value,'synonym':synonym, 'list':listName})\n                        }\n                    }\n                    lists[key] = newSplits.sort(sortListSplits)\n                }\n                //console.log(['LISTS',lists])\n                return lists\n                //return items.sort(sortListSplits) \n            // PLAIN TEXT LIST\n            }  else {\n                lists = {}\n                lists[key] = generateSplits() \n                return lists\n            }\n        } catch (e) {\n            console.log(e)\n            // TODO try for yaml\n            //try {\n              //const doc = yaml.safeLoad(text);\n              //console.log(doc);\n            //} catch (e) {\n               // finally text\n                lists = {}\n                lists[key] = generateSplits() \n                return lists\n            //}\n           \n        }  \n}\n\n\nfunction parseImportText(text) {\n        var items = []\n        function generateSplits() {\n            const splits = splitSentences(text)\n            var newSplits=[]\n            splits.map(function(text,i) {\n                if (text && text.trim().length > 0) {\n                 newSplits.push({'id':generateObjectId(), 'example':text,'intent':'',\"entities\":[], \"tags\":[]})\n                }\n                return null\n            })\n            return newSplits.sort(sortExampleSplits)\n        }\n        try {\n            var json = JSON.parse(text)\n            // RASA JSON FORMAT\n            if (json && json.rasa_nlu_data && json.rasa_nlu_data.common_examples) {\n                for (var i in json.rasa_nlu_data.common_examples) {\n                    var entity = json.rasa_nlu_data.common_examples[i]\n                    var cleanEntities = entity.entities && entity.entities.map(function(el,j) { return {type:el.entity, value:el.value, start:el.start, end:el.end} })\n                    if (entity.text && entity.text.trim().length > 0) {\n                        items.push({'id':generateObjectId(), 'example':entity.text,'intent':entity.intent,\"entities\":cleanEntities, tags:[]})\n                    }\n                }\n                return items.sort(sortExampleSplits)\n            // JOVO JSON { \"invocation\": \"my test app\", \"intents\": [{\"name\": \"HelloWorldIntent\",\"phrases\": [\"hello\",\"say hello\"]}] } ,\n            } else if (json && json.invocation && json.intents) {\n                for (var l in json.intents) {\n                    if (json.intents[l] && json.intents[l].phrases) {\n                        for (var k in json.intents[l].phrases) {\n                            if (json.intents[l].phrases[k] && json.intents[l].phrases[k].trim().length > 0)  {\n                                 var phrase = json.intents[l].phrases[k]\n                                 var entities = []\n                                if (json.intents[l].inputs) {\n                                    for (var inputKey in json.intents[l].inputs) {\n                                       var input = json.intents[l].inputs[inputKey]\n                                       //console.log([phrase,input.name])\n                                       const markerStart = phrase.indexOf(\"{\"+input.name+\"}\")\n                                       if (markerStart !== -1)  {\n                                           phrase = phrase.replace(\"{\"+input.name+\"}\",input.name)\n                                       }\n                                       var entityi = {type:input.name, value:input.name , start: markerStart , end: markerStart + input.name.length  }\n                                       entities.push(entityi)\n                                       return null\n                                    }\n                                }\n                                items.push({'id':generateObjectId(), 'example':phrase.trim(),'intent':json.intents[l].name,\"entities\": entities, tags: []})\n                            }\n                        }\n                    }\n                    //console.log(['JOVO IMPORT',items])\n                    //var entity = json.rasa_nlu_data.common_examples[i]\n                    //var cleanEntities = entity.entities && entity.entities.map(function(el,j) { return {type:el.entity, value:el.value, start:el.start, end:el.end} })\n                    //if (entity.text && entity.text.trim().length > 0) items.push({'id':generateObjectId(), 'example':entity.text,'intent':entity.intent,\"entities\":cleanEntities, tags:[]})\n                }\n                return items.sort(sortExampleSplits) //[items, intents, entities, tags]\n            // VANILLA JSON [{example:'',intent:'',entities:[{value:'',start:33,end:45}], tags:['dd']}]\n            } else if (json && json.length > 0 && json[0].example && json[0].example.trim().length > 0) {\n                for (var j in json) {\n                    var item = json[j]\n                    if (item) {\n                        if (item.example && item.example.trim().length > 0) items.push({'id':generateObjectId(), 'example':item.example,'intent':item.intent,\"entities\":item.entities && item.entities.length > 0 && item.entities[0].value ? item.entities : [], tags:item.tags ? item.tags : []})\n                    }\n                }\n                return items.sort(sortExampleSplits) \n            // PLAIN TEXT LIST\n            }  else {\n                return generateSplits()\n            }\n        } catch (e) {\n            console.log(e)\n            // TODO try for yaml\n            //try {\n              //const doc = yaml.safeLoad(text);\n              //console.log(doc);\n            //} catch (e) {\n               // finally text\n            return generateSplits()\n            //}\n           \n        }   \n    }\n    \nexport {parseImportText, parseLists}    \n    \n","import React from 'react';\nimport {Button, Dropdown, ButtonGroup, InputGroup} from 'react-bootstrap'\n\nconst TagAllDropDown = function(props) {\n    return <Dropdown  as={ButtonGroup}>\n          <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button   size=\"sm\" >{'Tag'} </Button>\n          <Dropdown.Menu>\n           <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.tagAll(e.target.value)}} >\n                <InputGroup>\n                  <input type=\"text\" className=\"form-control\" onChange={function(e) {props.setTagAllValue(e.target.value)}}\n                value={props.tagAllValue} />\n                <Button variant=\"success\" onClick={function(e) {props.tagAll(props.tagAllValue)}} >Add</Button>\n                </InputGroup>\n                \n              </form>\n              {props.lookups.tagLookups && props.lookups.tagLookups.sort().map(function(skillKey,i) {\n              return <Dropdown.Item key={i} value={skillKey}  >\n                <Button variant=\"success\" onClick={function(e) {props.setTagAllValue(skillKey); props.tagAll(skillKey)}} >Add {skillKey}</Button>\n                <Button variant=\"danger\" onClick={function(e) { props.untagAll(skillKey)}} style={{marginLeft: '0.5em'}}>Remove</Button></Dropdown.Item>\n    })}\n          </Dropdown.Menu>\n      </Dropdown>\n      \n              //return <Dropdown  as={ButtonGroup}>\n              //<Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n              //<Button   size=\"sm\" >{'Tag'} </Button>\n              //<Dropdown.Menu>\n               //<form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.tagAll(e.target.value)}} >\n                    //<div className=\"form-group\">\n                      //<input type=\"text\" className=\"form-control\" onChange={function(e) {props.setTagAllValue(e.target.value)}}\n                    //value={props.tagAllValue} />\n                    //</div>\n                  //</form>\n                  //{props.lookups.tagLookups && props.lookups.tagLookups.sort().map(function(tagKey,i) {\n                      //return <Dropdown.Item key={i} value={tagKey} onClick={function(e) {props.setTagAllValue(tagKey); props.tagAll(tagKey)}}  >{tagKey}</Dropdown.Item>\n                   //})}\n              //</Dropdown.Menu>\n          //</Dropdown>\n}\nexport default TagAllDropDown\n","import React from 'react';\nimport {Button, Dropdown, ButtonGroup} from 'react-bootstrap'\n\nconst IntentAllDropDown = function(props) {\n    return  <Dropdown  as={ButtonGroup}>\n              <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n              <Button   size=\"sm\" >{'Intent'} </Button>\n              <Dropdown.Menu>\n               <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.intentAll(e.target.value)}} >\n                    <div className=\"form-group\">\n                      <input type=\"text\" className=\"form-control\" onChange={function(e) {props.setIntentAllValue(e.target.value)}}\n                    value={props.intentAllValue} />\n                    </div>\n                  </form>\n                  {props.lookups.intentLookups && props.lookups.intentLookups.sort().map(function(intentKey,i) {\n                      return <Dropdown.Item key={i} value={intentKey} onClick={function(e) {props.setIntentAllValue(intentKey); props.intentAll(intentKey)}}  >{intentKey}</Dropdown.Item>\n                   })}\n              </Dropdown.Menu>\n          </Dropdown>\n}\nexport default IntentAllDropDown\n","import React from 'react';\nimport {Button, Dropdown, ButtonGroup, InputGroup} from 'react-bootstrap'\n\nconst SkillAllDropDown = function(props) {\n    return <Dropdown  as={ButtonGroup}>\n          <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button   size=\"sm\" >{'Skill'} </Button>\n          <Dropdown.Menu>\n           <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.skillSetAll(e.target.value)}} >\n                <InputGroup>\n                  <input type=\"text\" className=\"form-control\" onChange={function(e) {props.setSkillAllValue(e.target.value)}}\n                value={props.skillAllValue} />\n                <Button variant=\"success\" onClick={function(e) {props.skillSetAll(props.tagAllValue)}} >Add</Button>\n                </InputGroup>\n                \n              </form>\n              {props.lookups.skillLookups && props.lookups.skillLookups.sort().map(function(skillKey,i) {\n              return <Dropdown.Item key={i} value={skillKey}  >\n                <Button variant=\"success\" onClick={function(e) {props.setSkillAllValue(skillKey); props.skillSetAll(skillKey)}} >Add to {skillKey}</Button>\n                <Button variant=\"danger\" onClick={function(e) { props.unskillAll(skillKey)}} style={{marginLeft: '0.5em'}}>Remove</Button></Dropdown.Item>\n    })}\n          </Dropdown.Menu>\n      </Dropdown>\n      \n      \n    \n    //return <Dropdown  as={ButtonGroup}>\n          //<Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          //<Button   size=\"sm\" >{'Skill'} </Button>\n          //<Dropdown.Menu>\n           //<form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.skillSetAll(e.target.value)}} >\n                //<div className=\"form-group\">\n                  //<input type=\"text\" className=\"form-control\" onChange={function(e) {props.setSkillAllValue(e.target.value)}}\n                //value={props.skillAllValue} />\n                //</div>\n              //</form>\n              //{props.lookups.skillLookups && props.lookups.skillLookups.sort().map(function(skillKey,i) {\n              //return <Dropdown.Item key={i} value={skillKey} onClick={function(e) {props.setSkillAllValue(skillKey); props.skillSetAll(skillKey)}}  >{skillKey}</Dropdown.Item>\n    //})}\n          //</Dropdown.Menu>\n      //</Dropdown>\n}\nexport default SkillAllDropDown\n","import React, {useState} from 'react';\nimport {Button, Dropdown, ButtonGroup, InputGroup} from 'react-bootstrap'\n\nconst ImportListsDropDown = function(props) {\n    //console.log(props)\n    const [importToValue,setImportToValue] = useState(props.importTo ? props.importTo : '')\n    return <Dropdown style={{float:'right', marginLeft:'0.5em'}} variant=\"success\"  as={ButtonGroup}>\n          <Dropdown.Toggle split  size=\"md\" variant=\"success\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button variant=\"success\"  size=\"md\" >{'Import Entities as'} </Button>\n          <Dropdown.Menu>\n           <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.importListTo(importToValue)}} >\n                <div className=\"form-group\">\n                <InputGroup> \n                    <input type=\"text\" className=\"form-control\" onChange={function(e) {setImportToValue(e.target.value)}}\n                value={importToValue} />\n                    <Button size=\"sm\"  onClick={function(e) {props.importListTo(importToValue)}} >Import</Button>\n                </InputGroup>\n                </div>\n              </form>\n              {props && props.lookups && props.lookups.listsLookups && props.lookups.listsLookups.sort().map(function(skillKey,i) {\n              return <Dropdown.Item key={i} value={skillKey} onClick={function(e) {setImportToValue(skillKey); props.importListTo(skillKey)}}  >{skillKey}</Dropdown.Item>\n    })}\n          </Dropdown.Menu>\n      </Dropdown>\n}\nexport default ImportListsDropDown\n","/* global window */\nimport {Link} from 'react-router-dom'\nimport {Button, ListGroup } from 'react-bootstrap'\nimport React, {Fragment} from 'react';\nimport FileReaderInput from 'react-file-reader-input';\n\nimport TagAllDropDown from './TagAllDropDown'\nimport IntentAllDropDown from './IntentAllDropDown'\nimport SkillAllDropDown from './SkillAllDropDown'\n\nimport ImportListsDropDown from './ImportListsDropDown'\n\nfunction MatchesTallies(props) {\n    return <span style={{float:'left', fontWeight:'bold'}} >&nbsp;{props.filteredItems.length}/{props.items.length} matches </span>\n}\n\nfunction HelpMenu(props) {\n    return <div>\n        <Link style={{marginRight:'1em'}} to=\"/help\" ><Button>Home</Button></Link>\n        <Link style={{marginRight:'1em'}} to=\"/helpimport\" ><Button>Import</Button></Link>\n        <Link style={{marginRight:'1em'}} to=\"/helpexport\" ><Button>Export</Button></Link>\n        <Link style={{marginRight:'1em'}} to=\"/helpabout\" ><Button>About</Button></Link>\n    </div>\n}\n\nfunction HelpText(props) { \n    return <div style={{marginLeft:'0.5em'}}>\n        <HelpMenu/>\n        <h1>NLU tool</h1>\n        <div>This tool is intended to help collect open licensed NLU data. Specifically, it captures sentences with related intent and entity maps.</div>\n        <div>Examples can be tagged for organisation and collected into your own skills for export into various NLU training data formats including RASA, JOVO (Alexa, Google), Mycroft and native JSON.</div>\n        <hr/>\n        <div>This tool is a Progressive Web Application. It works without the Internet. All data is stored locally in your web browser. Source Code at <a target=\"_new\" href=\"https://github.com/syntithenai/opennludata\" >Github</a></div>\n        <div>When the Internet is available, <b>this site uses Google Analytics to measure engagement and improve future versions.</b></div>\n       <hr/>\n       \n        <p>Create <Link to=\"/sources\" ><Button>Sources</Button></Link> from pasted text or uploaded files.</p>\n        <p>Use the <Link to=\"/import\" ><Button>Import</Button></Link> page to break text into sentences and create NLU example records.</p>\n        <p><Link to=\"/examples\" ><Button>Organise</Button></Link> your examples using tags and cleanup untagged examples.</p>\n        <p><Link to=\"/search\" ><Button>Search </Button></Link> the community database of NLU example records.</p>\n        <p><Link to=\"/skills\" ><Button>Collect </Button></Link> examples into a skill for export in various training formats.</p>\n        </div>\n}\n\nfunction HelpTextImport(props) { \n    return <div style={{marginLeft:'0.5em'}}>\n    <HelpMenu/>\n            <h1>Importing Data</h1>\n            <div>This tool can import files two types of data, entities and intents.\n            <ul>\n                <li><h3>Entity Values</h3>\n                    \n                </li>\n                <li><h3>Intent Examples</h3>\n                \n                </li>\n            </ul>\n            \n            </div>\n            <hr/>\n        </div>\n}\n\nfunction HelpTextAbout(props) { \n    return <div style={{marginLeft:'0.5em'}}>\n    <HelpMenu/>\n            <h1>About</h1>\n<br/>\n            <div><h3>Bugs/Feedback</h3>Please share any feedback on the <a target=\"_new\" href=\"https://github.com/syntithenai/opennludata/issues\" >Github Issues Page</a></div>\n            <br/>\n             <div>The source code for this tools is available under an MIT Open Source Licence. It is built using create-react-app with localForage for cross platform local persistence.</div>\n            <hr/>\n            <div>MIT Licenced Open Source Licence  - CopyLeft Steve Ryan (syntithenai@gmail.com)</div>\n            \n             <div>Icons from  <a href='https://thenounproject.com/term/man-singing/642288/' target=\"_new\" >The Noun Project</a> and others.</div>\n            <hr/>\n        </div>\n}\n\nfunction HelpTextExport(props) { \n    return <div style={{marginLeft:'0.5em'}}>\n    <HelpMenu/>\n            <h1>Exporting</h1>\n            <div>This tool can currently export to a number of formats including\n            <ul>\n                <li>Native JSON format</li>\n                <li>Mycroft intents and entities for Padatious NLU</li>\n                <li>RASA training data</li>\n                <li>JOVO model files</li>\n            </ul>\n            </div>\n\n        </div>\n}\n\n\nfunction NewFileButtons(props) {\n    return <span>\n        <Link to={props.match.url + '/text'} style={{float:'right'}} ><Button>Paste Text</Button></Link>\n        <FileSelector {...props}/>   \n    </span>\n}\n\nfunction FilesList(props) {\n    //console.log(['man fl ',props])\n     const { items} = props  \n     if (items) {\n       const list = Object.values(items).map(function(item,i) {\n            return <ListGroup.Item  key={i}  >\n                   <Button style={{float:'right', marginLeft:'0.5em'}} variant=\"danger\" onClick={function(e) {if(window.confirm('Really delete source '+items[i].title)) props.deleteItem(i)}} >Delete</Button>\n                   <Link to={props.match.url+\"/text/\"+item.id} ><Button style={{float:'right',marginLeft:'0.5em'}}  >Edit</Button></Link>\n                   <Button style={{float:'right', marginLeft:'0.5em'}} variant=\"success\" onClick={function(e) { props.importExamples(items[i]) }}    >Import Intents</Button>\n                   <ImportListsDropDown lookups={props.lookups} importListTo={function(listName) {props.importLists(items[i],listName)}} importTo={items[i].title} />\n                   <span style={{width:'90%'}}  >{item.title}</span>\n               </ListGroup.Item>\n        })\n        return <ListGroup>{list}</ListGroup>\n    } else {\n        return null\n    }\n}\n\nfunction ListsList(props) {\n     const { items} = props  \n     if (items) {\n       const list = Object.values(items).map(function(item,i) {\n            return <ListGroup.Item  key={i}  >\n                   <Button style={{float:'right', marginLeft:'0.5em'}} variant=\"danger\" onClick={function(e) {if(window.confirm('Really delete list '+items[i].title)) props.deleteItem(i)}} >Delete</Button>\n                   <Link to={props.match.url+\"/text/\"+item.id} ><Button style={{float:'right',marginLeft:'0.5em'}}  >Edit</Button></Link>\n                   <span style={{width:'90%'}}  >{item.title}</span>\n               </ListGroup.Item>\n        })\n        return <ListGroup>{list}</ListGroup>\n    } else {\n        return null\n    }\n}\n\nfunction FileSelector(props) {\n    return <form onSubmit={function(e) {e.preventDefault()}} style={{float:'right'}}>\n            <FileReaderInput multiple as=\"binary\" id=\"my-file-input\"\n                             onChange={props.handleFileSelection}>\n              <Button style={{ marginRight:'0.5em'}} >Select files</Button>\n            </FileReaderInput>\n          </form>\n}\n\nfunction WithSelectedDropDowns(props) {\n    return <Fragment>\n        <span>With {props.lookups.selectedTally} selected&nbsp;</span>\n               \n        <SkillAllDropDown skillSetAll={props.skillSetAll} skillAllValue={props.skillAllValue}  setSkillAllValue={props.setSkillAllValue}  lookups={props.lookups} untagAll={props.untagAll} unskillAll={props.unskillAll} />\n        <IntentAllDropDown intentAll={props.intentAll} intentAllValue={props.intentAllValue} setIntentAllValue={props.setIntentAllValue}  lookups={props.lookups} untagAll={props.untagAll} unskillAll={props.unskillAll} />\n        <TagAllDropDown tagAll={props.tagAll} tagAllValue={props.tagAllValue} setTagAllValue={props.setTagAllValue}  lookups={props.lookups} untagAll={props.untagAll} unskillAll={props.unskillAll} />\n    </Fragment>\n\n}\n\nexport { MatchesTallies,  HelpTextImport,HelpTextExport,HelpTextAbout,HelpText, NewFileButtons, FilesList, ListsList, FileSelector, WithSelectedDropDowns}\n","import {Link} from 'react-router-dom'\nimport {Button,  Dropdown, ButtonGroup } from 'react-bootstrap'\nimport React, {useState, useEffect} from 'react';\n//import FileReaderInput from 'react-file-reader-input';\nimport {generateObjectId, parentUrl} from '../utils'\nimport { JsonEditor } from 'jsoneditor-react';\nimport 'jsoneditor-react/es/editor.min.css';\nimport ace from 'brace';\nimport 'brace/mode/json';\nimport 'brace/theme/github';\n//import useDB from './useDB'\n//import useDBSingleKey from './useDBSingleKey'\n//import {parseImportText} from './utils'\n//import localforage from 'localforage'\n//import {NewFileButtons, FileSelector, FilesList} from './Components'\n\nexport default function JSONTextEditor(props) {\n    const [title,setTitle] = useState(props.item && props.item.title ? props.item.title : '')\n    const [text, setText ] = useState(props.item && props.item.data ? props.item.data : '') \n    const [isJson, setIsJson ] = useState(false) \n    const [json, setJson ] = useState([]) \n    const [editorMode, setEditorMode] = useState('json')\n    const [editorOptions, setEditorOptions] = useState(['json','text'])\n    \n    const id = props.match.params.itemId ? props.match.params.itemId  : generateObjectId()\n    const { findKeyBy} = props  \n    const index = findKeyBy('id',id)\n   \n    \n    useEffect(() => {\n        try {\n            if ((text[0] === \"[\" && text[text.length - 1] === \"]\") || (text[0] === \"{\" && text[text.length - 1] === \"}\")) {\n                var jsonParsed = JSON.parse(text)\n                setJson(jsonParsed)\n                setIsJson(true)\n                setEditorOptions(['json','text'])\n                setEditorMode('json')\n            } else {\n                setIsJson(false)\n                setEditorOptions(['text'])\n                setEditorMode('text')\n            }\n        } catch (e) {\n            setIsJson(false)\n            setEditorOptions(['text'])\n            setEditorMode('text')\n        }\n    \n    },[text])\n     \n    var parentLink = parentUrl(props.match.url)\n    var linkParts = props.match.url.split(\"/\")\n    // link up two where id is present\n    if (linkParts[linkParts.length -1] !== \"text\") {\n       parentLink = parentUrl(parentUrl(props.match.url)) \n    }\n    var editorModeOptions = editorOptions.map(function(value,j) {\n      return <Dropdown.Item key={j} value={value} onClick={function(e) {setEditorMode(value); }}  >{value}</Dropdown.Item>\n   })\n    \n    return <div style={{minHeight:'60em'}}>\n          <Dropdown variant='info'  as={ButtonGroup}>\n\n          <Dropdown.Toggle variant='info'  split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button variant='info'   size=\"sm\"  >\n          <b>{editorMode}</b>\n          </Button>\n          <Dropdown.Menu>\n              {editorModeOptions}\n          </Dropdown.Menu>\n        </Dropdown>\n\n            <span style={{float:'right'}} >\n                \n                {(text && title) && <Link to={parentLink} ><Button onClick={function(e) {props.saveItem({id:id,title:title,data:text},index)}} variant='success' >Save</Button></Link>}\n                {!(text && title) && <Button variant='secondary' >Save</Button>}\n                \n                <Link  to={parentLink} ><Button variant=\"danger\" >Cancel</Button></Link>\n            </span>\n            <label>&nbsp;Title <input size={60}  type='text' onChange={function(e) { setTitle(e.target.value)}}  value={title} /></label>\n            {(!isJson || editorMode === \"text\") && <textarea style={{marginLeft: '0.2em', height:'100%', minHeight:'60em', width:'98%'}}  onChange={function(e) { setText(e.target.value)}}  value={text} ></textarea>}\n            {(isJson && editorMode === \"json\") && <div style={{marginLeft: '0.2em', height:'100%', minHeight:'60em', width:'98%'}} >\n                <JsonEditor\n                value={json}\n                theme={\"ace/theme/github\"}\n                ace={ace}\n                history={true}\n                mode={'code'}\n                allowedModes={['tree','code']}\n                onChange={function(value) { setText(JSON.stringify(value))}}\n            /></div>}\n           \n    </div>\n}\n","import {Route} from 'react-router-dom'\nimport React, {useEffect} from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport useDB from './useDB'\nimport {parseImportText, parseLists} from './parsers'\nimport localforage from 'localforage'\nimport {NewFileButtons, FilesList} from './components/Components'\nimport JSONTextEditor from './components/JSONTextEditor'\nimport {generateObjectId, uniquifyArray } from './utils'\n\n// COMPONENTS\nfunction IndexPage(props) {\n    //console.log(['man index ',props])\n    return <div>\n                 <NewFileButtons {...props} />\n                 <h1>Sources</h1>\n                 <FilesList {...props} />\n            </div>\n}\n\nexport default function LocalStorageUploadManager(props) {\n    //console.log('man')\n    //console.log(props)\n     var localforageStorageImport = localforage.createInstance({\n       name: 'nlutool',\n       storeName   :'import',\n     });\n     var localforageStorageLists = localforage.createInstance({\n       name: 'nlutool',\n       storeName   :'lists',\n     });\n\n\n     const {loadAll, saveItem, deleteItem ,items, findKeyBy, findBy} = useDB('nlutool','sources');\n    \n    // just on mount \n    useEffect(() => {\n        loadAll()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n    \n    \n    \n    function handleFileSelection(ev, results) {\n        ev.preventDefault()\n        if (results) {\n            results.forEach(result => {\n              const [e, file] = result;\n               var item = {id:null, data:e.target.result, title:file.name}\n                saveItem(item)\n            });\n            \n        }\n    }    \n  \n    function importExamples(item) {\n         //console.log(['import examples',item])\n        if (item && item.id && item.data) {\n            var parsed = parseImportText(item.data)\n            localforageStorageImport.getItem('alldata').then(function(res) {\n                //console.log('IMPORT MERGE',res,parsed,[].concat(parsed,res))\n                localforageStorageImport.setItem('alldata',[].concat(parsed,res)) \n                props.history.push('/import') \n            })\n          } else {\n            throw new Error(\"Missing import data\")\n        }\n    }\n    \n    function importLists(item,title) {\n        //console.log(['import lists',item,title])\n        if (item && item.id && item.data) {\n            var parsed = parseLists(item.data)\n            //console.log(['import lists',parsed])\n            if (parsed) {\n                localforageStorageLists.getItem('alldata').then(function(allLists) {\n                    //console.log(['got list ',allLists])\n                    var allListsIndex = {}\n                    if (!allLists) {\n                        allLists = []\n                    }\n                    // index by value\n                    allLists.map(function(listItem) {\n                        if (listItem && listItem.value && listItem.value.trim().length > 0)  {\n                            allListsIndex[listItem.value] = listItem\n                        }\n                        return null\n                    })\n                    // update incoming list values\n                    Object.keys(parsed).map(function(listName,i) {\n                        var list = parsed[listName]  \n                        if (list) {\n                            list.map(function(listItem,listItemIndex) {\n                                var newListItem = listItem;\n                                // already there, just update tags\n                                if (allListsIndex[listItem.value]) {\n                                    if (listName !== '___') {\n                                        if (listItem.tags) newListItem.tags.push(listName)\n                                        else newListItem.tags = [listName]\n                                    } else {\n                                        newListItem.tags = []\n                                    }\n                                    if (title && title.trim().length > 0) newListItem.tags.push(title.trim())\n                                    // uniquify and sort tags\n                                    newListItem.tags = uniquifyArray(newListItem.tags).sort()\n                                    //var tagsClean = {}\n                                    //newListItem.tags.map(function(tag) {\n                                        //tagsClean[tag] = true \n                                    //})\n                                    //newListItem.tags = Object.keys(tagsClean).sort()\n                                    \n                                    allListsIndex[newListItem.value] = newListItem\n                                // new list item    \n                                } else {\n                                    newListItem = {id: generateObjectId() , value: newListItem.value, synonym: newListItem.synonym ? newListItem.synonym : '', tags:[]}\n                                    \n                                    if (listName !== '___') {\n                                        if (listItem.tags) newListItem.tags.push(listName)\n                                        else newListItem.tags = [listName]\n                                    }\n                                    if (title && title.trim().length > 0) newListItem.tags.push(title.trim())\n                                    // uniquify and sort tags\n                                    newListItem.tags = uniquifyArray(newListItem.tags).sort()\n                                    \n                                    allListsIndex[newListItem.value] = newListItem\n                                }\n                                return null\n                            })\n                        }\n                        return null\n                    })\n                    //console.log('IMPORT MERGE',res,parsed,[].concat(parsed,res))\n                    localforageStorageLists.setItem('alldata',Object.values(allListsIndex)) \n                    props.history.push('/lists') \n                    //props.setPageMessage(<div><b>sdfsdf</b><br/><b>sdfsdf</b><br/><b>sdfsdf</b><br/><b>sdfsdf</b><br/></div>)\n                    props.setPageMessage('Imported '+Object.keys(allListsIndex).length +' entities into the list '+ title)\n                    setTimeout(function() {\n                        props.setPageMessage('')\n                    },2000)\n                })\n            } else {\n                throw new Error(\"Failed import\")\n            }\n        } else {\n            throw new Error(\"Missing import data\")\n        }\n    }\n    \n    //console.log(['RENDER LOMAN',props])\n    return (\n        <div className=\"LocalStorageUploadManager\" >\n            <Route \n                path={[`${props.match.path}/text/:itemId?`, `${props.match.path}/text`]}  \n                render={(props) => <JSONTextEditor {...props} \n                    item={findBy('id',props.match.params.itemId)} \n                    saveItem={saveItem} deleteItem={deleteItem} findKeyBy={findKeyBy} \n                    \n                />}     \n            />\n            <Route {...props} exact path={props.match.path} \n                render={function(iprops) { return  <IndexPage {...props} \n                    items={items}\n                    deleteItem={deleteItem} saveItem={saveItem} importExamples={importExamples} importLists={importLists}\n                    handleFileSelection={handleFileSelection}\n                />}} \n            />\n\n        </div>\n    );\n}\n","import React from 'react';\nimport {Button, Dropdown, ButtonGroup, InputGroup} from 'react-bootstrap'\n\nconst ListAllDropDown = function(props) {\n    return <Dropdown  as={ButtonGroup}>\n          <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button   size=\"sm\" >{'Set List'} </Button>\n          <Dropdown.Menu>\n           <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; props.tagAll(e.target.value)}} >\n                <InputGroup>\n                  <input type=\"text\" className=\"form-control\" onChange={function(e) {props.setTagAllValue(e.target.value)}}\n                value={props.tagAllValue} />\n                <Button variant=\"success\" onClick={function(e) {props.tagAll(props.tagAllValue)}} >Add</Button>\n                </InputGroup>\n                \n              </form>\n              {props.lookups.listsLookups && props.lookups.listsLookups.sort().map(function(skillKey,i) {\n              return <Dropdown.Item key={i} value={skillKey}  >\n                <Button variant=\"success\" onClick={function(e) {props.setTagAllValue(skillKey); props.tagAll(skillKey)}} >Add to {skillKey}</Button>\n                <Button variant=\"danger\" onClick={function(e) { props.untagAll(skillKey)}} style={{marginLeft: '0.5em'}}>Remove</Button></Dropdown.Item>\n    })}\n          </Dropdown.Menu>\n      </Dropdown>\n}\nexport default ListAllDropDown\n","import React from 'react'\nconst SearchInput = function({searchFilter,setSearchFilter}) {\n    return (<input style={{marginLeft:'0.5em'}}  type='text' value={searchFilter} \n            onChange={\n                function(e) {\n                    const filter = e.target.value\n                    setSearchFilter(filter); \n                }\n            } placeholder='Search' />)\n}\n    \nexport default SearchInput\n","import React, {useEffect, useState} from 'react';\n//import {Link} from 'react-router-dom'\nimport {Button, Dropdown, ButtonGroup} from 'react-bootstrap'\nimport SearchInput from './SearchInput'\nimport checkImage from '../images/check.svg'\n\n\nconst ListsManagerSearchBar = function(props) {\n    const [topTagOptions,setTopTagOptions] = useState([])\n    useEffect(() => {\n        //console.log(['kust nabager ',props.lookups.listsLookups])\n        var topTagOptionss = props.lookups.listsLookups && props.lookups.listsLookups.sort().map(function(listKey,i) {\n              return <Dropdown.Item key={i} value={listKey} onClick={function(e) {props.setListFilterValue(listKey)}}  >{listKey}</Dropdown.Item>\n        })\n        topTagOptionss.unshift(<Dropdown.Item key={'empty_key_value_empty'} value={''} onClick={function(e) {props.setListFilterValue('')}}  >&nbsp;</Dropdown.Item>)\n        topTagOptionss.push(<Dropdown.Item key={'Not In A List'} value={'Not In A List'} onClick={function(e) {props.setListFilterValue('Not In A List')}}  ><b>Not In A List</b></Dropdown.Item>)\n        setTopTagOptions(topTagOptionss)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.lookups])\n    \n    return <div>\n            {<span>\n            \n                {props.lookups.selectedListTally > 0 && <Button size=\"lg\"  onClick={function(e) { props.resetSelection(e) }} variant=\"success\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\" /></Button> }\n                {props.lookups.selectedListTally <= 0 && <Button size=\"lg\" onClick={function(e) { props.selectAll(e) }} variant=\"secondary\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Select\" /></Button> }\n                \n                \n           </span>}   \n            {<span style={{marginLeft:'0.4em'}}><SearchInput searchFilter={props.searchFilter} setSearchFilter={props.setSearchFilter} /></span>}   \n            {<Dropdown style={{marginLeft:'0.5em'}}  as={ButtonGroup}>\n                  <Dropdown.Toggle split   id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button  >{'List'+(props.listFilterValue ? ' - '+ props.listFilterValue : '')} </Button>\n                  <Dropdown.Menu>\n                      {topTagOptions}\n                  </Dropdown.Menu>\n                </Dropdown>}\n              <Button  style={{marginLeft:'1em'}} variant=\"success\" onClick={function(e) {props.createEmptyItem(props.listFilterValue)}} >New Entity</Button>\n        </div>\n}\nexport default ListsManagerSearchBar\n","import React, {useState, useEffect} from 'react'\nimport {uniquifyArray, uniquifyArrayOfObjects} from './utils'\nfunction useListItemRow(item, saveItem, splitNumber, style) {\n    const [selectionState, setSelectionState] = useState({})\n    //const [newEntity, setNewEntity] = useState('')\n    // for ReactTags format using objects\n    const [tags, setTags] = useState([])\n    //console.log(['USENLUROW',splitNumber])\n    const reactTags = React.createRef()\n     // tags\n    useEffect(() => {\n        if (item.tags) setTags(item.tags.map(function(tag,i) {return {id:i, name:tag}}))\n    },[item])\n\n     function onTagDelete (i) {\n        const newTags = tags.slice(0)\n        newTags.splice(i, 1)\n        setTags(newTags)\n        var newItem = item\n        newItem.tags = newTags.map(function(newTag) { return newTag.name})\n        saveItem(newItem,splitNumber)\n      }\n     \n     function onTagAddition (tag) {\n        const newTags = [].concat(tags, tag)\n        setTags(uniquifyArrayOfObjects(newTags,'name').sort(function(a,b) {if (a.name > b.name) return 1; else return -1} ))\n        var newItem = item\n        newItem.tags = uniquifyArray(newTags.map(function(newTag) { return newTag.name})).sort()\n        saveItem(newItem,splitNumber)\n      }\n    \n    function updateExampleContent(content) {\n        //console.log(['UPDTEXT', item, content])\n        if (item && typeof content === \"string\") {\n            //console.log('UPDTEXTREAL')\n            const newItem = item //JSON.parse(JSON.stringify(item));\n            \n            newItem.value = content;\n            saveItem(newItem,splitNumber)\n        }\n    }\n    \n     function updateExampleSynonym(content) {\n        //console.log('UPDTEXT')\n        if (item && typeof content === \"string\") {\n            //console.log('UPDTEXTREAL')\n            const newItem = item //JSON.parse(JSON.stringify(item));\n            \n            newItem.synonym = content;\n            saveItem(newItem,splitNumber)\n        }\n    }\n    \n    \n    function selectItem(splitNumber) {\n        var newItem = item\n        item.isSelected = true;\n        saveItem(newItem,splitNumber)\n    }\n   \n    \n    function deselectItem(splitNumber) {\n        var newItem = item\n        item.isSelected = false;\n        saveItem(newItem,splitNumber)\n    } \n    \n    return {    \n        selectionState, setSelectionState, tags, setTags, reactTags, onTagDelete, onTagAddition, updateExampleContent, updateExampleSynonym, selectItem, deselectItem\n    }\n    \n}\nexport default useListItemRow\n","import React from 'react';\nexport default function SuggestionComponent({ item, query }) {\n  return (\n    <span  id={item.id} className={item.name === query ? 'match' : 'no-match'}>\n      {item.name}\n    </span>\n  )\n}\n","/* global window */\nimport {Button } from 'react-bootstrap'\nimport React from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ReactTags from 'react-tag-autocomplete'\nimport useListItemRow from './useListItemRow'\nimport SuggestionComponent from './components/SuggestionComponent'\nimport checkImage from './images/check.svg'\n\nexport default function ListsManagerRow(props) {\n        const  {item, splitNumber , style} = props;\n       const {    \n            tags, reactTags, \n            onTagDelete, onTagAddition, updateExampleContent,updateExampleSynonym,  selectItem, deselectItem\n        } = useListItemRow(props.item, props.saveItem, props.splitNumber, props.style)\n            \n       \n       //var buttonImageStyle={color:'white', height:'2em'}\n       return item && <div style={style} className={splitNumber % 2 ? 'ListItemOdd' : 'ListItemEven'}>\n               <div style={{position:'relative', width: '100%', textAlign:'left',  borderTop: '2px solid black'}}>\n                   \n                   <div style={{float:'right'}} > \n                        <Button  variant=\"danger\"  size=\"sm\" style={{float:'right', fontWeight:'bold', borderRadius:'15px', marginTop:'0.2em'}} onClick={function(e) {if (window.confirm('Really delete')) {props.deleteItem(splitNumber,(item.id ? item.id : ''))}}} >X</Button>\n               \n                    </div>\n                   \n                  <div style={{float:'left'}}>\n                     {!item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"secondary\" onClick={function() {selectItem(splitNumber)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Select\"  /></Button>}\n                      {item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"success\" onClick={function() {deselectItem(splitNumber)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\"  /></Button>}\n                </div>\n                \n                <input style={{float:'left'}} size='25'   \n                       type='text'  value={item.value}  onChange={function(e) { updateExampleContent(e.target.value)}} />\n                    \n                     \n                   \n                     <label style={{float:'left', marginLeft:'0.5em'}} >Synonym <input size='15' type='text' value={item.synonym} onChange={function(e) {updateExampleSynonym(e.target.value)}} /></label>\n                     <label style={{float:'left', marginLeft:'0.5em'}} >\n                     <span  style={{float:'left', marginRight:'0.5em'}}>Tags </span>\n                     <span  style={{float:'left'}}>\n                       <ReactTags\n                        placeholderText=\"Add to list\"\n                        minQueryLength={0}\n                        maxSuggestionsLength={50}\n                        autoresize={false}\n                        allowNew={true}\n                        ref={reactTags}\n                        tags={tags}\n                        suggestionComponent={SuggestionComponent}\n                        suggestions={props.lookups.listsLookups.map(function(listName,i) {return {id: i, name: listName}})}\n                        onDelete={onTagDelete}\n                        onAddition={onTagAddition} /> \n                        </span>\n                    </label>\n                  </div> \n               \n                \n                 \n           \n      </div>\n}\n","// USE A SINGLE LOCALSTORAGE KEY FOR PERSISTENCE\n// this is much faster than using set/getItem for each item\n// workable for many thousands of rows\nimport { useEffect, useReducer} from 'react';\n\nimport {generateObjectId} from './utils'\nimport localforage from 'localforage'\n\n// handle list updates with minimum disruption to top level items\nfunction reducer(state, action) {\n    const index = parseInt(action.index)\n \n    switch (action.type) {\n    case \"append\":\n      if (action.item) {\n        return [...state, action.item];\n      } else return state\n    case \"prepend\":\n      if (action.item) {\n        return [action.item,...state];\n      } else return state\n    case \"insert\":\n      if (action.item && typeof index === \"number\" ) {\n          if (state.length > 0) {\n              return [\n                ...state.slice(0, index),\n                action.item,\n                ...state.slice(index)\n              ];\n          } else return state\n        } else return state\n    case \"remove\":\n      if (typeof index === \"number\" ) {\n          return [\n            ...state.slice(0, index),\n            ...state.slice(index + 1)\n          ];\n       } else return state \n    case \"update\":\n       if (action.item && typeof index === \"number\" ) {\n           return  [\n            ...state.slice(0, index),\n            action.item,\n            ...state.slice(index + 1)\n          ];\n        } else return state \n    case \"replaceall\":\n        if (typeof action.items === \"object\") {\n            return action.items\n        } else return state\n    default:\n      throw new Error('Invalid reduction in useDBSingleKey');\n  }\n    \n}\n\n// state manager with local storage backing\nexport default function useDB(database, databaseTable,singleKey) {\n    if (!singleKey) singleKey = 'data'\n     const [items, dispatch] = useReducer(reducer,[]);\n     var localforageStorage = localforage.createInstance({\n       name: database ? database : \"localstoragemanager\",\n       storeName   : databaseTable ? databaseTable : 'single_key_data',\n     });\n\n    useEffect(function() {\n        localforageStorage.setItem(singleKey,items)  \n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[items])\n\n    function getId(item) {\n        if (item && item.id) {\n            return item.id\n        } else {\n            throw new Error(\"Missing ID value in getId\")\n        }\n    }\n\n    function loadAll() {\n        localforageStorage.getItem(singleKey).then(function(res) {\n          //console.log(['loadall',database, databaseTable,singleKey,res])\n          dispatch({ type: \"replaceall\", items: res ? res : []});\n        })\n    }\n\n    \n    // save or create\n    function saveItem(item,index) {\n        //console.log(['save',item,index])\n        if (item) {\n            // update sources and save text in seperate localstorage\n            // ensure id\n            var isNewItem = false;\n            if (!item.id) {\n                isNewItem = true;\n                item.id = generateObjectId()\n            }\n            if (items.length === 0) {\n                //console.log(['save append len '])\n        \n                dispatch({ type: \"append\",item: item });\n            } else {\n                if ((index === null || index === undefined)  || isNewItem) {\n                //console.log(['save append'])\n                    dispatch({ type: \"prepend\",item: item });\n                } else {\n                    //console.log(['save update'])\n                    dispatch({ type: \"update\",item: item, index: index });\n                }\n            }   \n            \n        }\n    }\n    \n    function findBy(field,value) {\n        var key = findKeyBy(field,value)\n        return items[key];\n    }\n    \n    function findKeyBy(field,value) {\n        for (var k in items) {\n            if (items[k] && items[k][field] === value) return k\n        }\n    }\n\n    function setItemsWrap(items) {\n        localforageStorage.clear().then(function() {\n            dispatch({ type: \"replaceall\", items: items})\n        })\n    }\n    \n    function filter(matchFunction) {\n        var filtered = []\n        if (matchFunction) {\n            items.map(function(item,i) {\n              if (item && matchFunction(item)) {\n                  filtered.push(item)\n              } \n              return null \n            })\n        }\n        return filtered\n        \n    }\n    \n    function deleteItem(index) {\n        dispatch({ type: \"remove\", index: index})\n    }\n    return {getId:getId, loadAll:loadAll, saveItem:saveItem, deleteItem:deleteItem , items:items, setItems:setItemsWrap, findKeyBy:findKeyBy, findBy:findBy, filter: filter}\n    \n}\n","import React, {useState, useEffect} from 'react';\nimport useDBSingleKey from './useDBSingleKey'\nimport {useParams, useHistory} from 'react-router-dom'\n\nfunction useListItemEditor(database, databaseTable, databaseKey, updateLists) {\n    const {loadAll, saveItem, deleteItem , items, setItems, findKeyBy, filter} = useDBSingleKey(database, databaseTable, databaseKey)\n    const [filteredItems, setFilteredItems] = useState([])\n    const [filteredItemsKeys, setFilteredItemsKeys] = useState([])\n    const [searchFilter, setSearchFilter] = useState('')\n    const [tagAllValue, setTagAllValue] = useState('')\n    const listRef = React.createRef()\n    //const [listFilterValue, setListFilterValue] = useState('')\n    \n    var params = useParams()\n    var listFilterValue = params.listId ? params.listId : '';\n    var history = useHistory()\n    function setListFilterValue(value) {\n        var root = history.location.pathname.split(\"/\")\n        var parts=['/'+root[1]]\n        parts.push('/'+value)\n        history.push(parts.join(''))\n    }\n   \n      \n    useEffect(() => {\n         var filteredItems = filter(function(item) {\n            //return true;\n            var matchText = true\n            if (searchFilter && searchFilter.trim().length >0) {\n                if (item.value.indexOf(searchFilter) !== -1) {\n                    matchText = true\n                } else {\n                    matchText = false\n                }\n            }\n            var matchPicklist = true\n            if (listFilterValue === \"Not In A List\") {\n                //console.log(['tags',item.tags])\n                if (!item.tags || (item.tags && item.tags.length === 0)) {\n                    matchPicklist =  true\n                } else {\n                    matchPicklist = false\n                }\n            } else if (listFilterValue && listFilterValue.trim().length >0) {\n                if (item.tags && item.tags.indexOf(listFilterValue) !== -1) {\n                    matchPicklist = true\n                } else {\n                    matchPicklist = false\n                }\n            }\n            \n            return matchText && matchPicklist\n            //return (item.value.indexOf(searchFilter) !== -1 \n                        //|| (item.tags && item.tags.indexOf(searchFilter) !== -1)) ? true : false\n        })\n        var itemKeys = {}\n        filteredItems.map(function(item) {if (item.id) itemKeys[item.id] = true; return null})\n        filteredItems.sort(function(a,b) { return a.value < b.value ? true : false})\n        setFilteredItems(filteredItems)\n        setFilteredItemsKeys(itemKeys)\n        updateLists(items)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[items, searchFilter, listFilterValue])\n    \n    function deleteAll(e)  {\n        if (window.confirm('Really delete all selected')) {\n                if (items) {\n                var newItems = []\n                items.map(function(item,i) {\n                    if (item.id && filteredItemsKeys[item.id]) {\n                       if (!item.isSelected) {\n                           newItems.push(item)\n                       }\n                    } else {\n                        newItems.push(item)\n                    }\n                    return null\n                })\n                setItems(newItems)\n                listRef.current.resetAfterIndex(0);\n            }\n        }\n         \n    }\n    \n    function tagAll(val) {\n        //console.log(['tagall',tagAllValue,val])\n        var tagValue = val ? val : tagAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                \n               if (item.isSelected && item.id && filteredItemsKeys[item.id]) {\n                   var newItem = JSON.parse(JSON.stringify(item));\n                   if (!newItem.tags) newItem.tags=[]\n                   if (newItem.tags.indexOf(tagValue) === -1) newItem.tags.push(tagValue)\n                   newItems.push(newItem)\n               } else {\n                   newItems.push(item)\n               }  \n               return null\n            })\n            setItems(newItems)\n        }\n    }\n\n    function untagAll(val) {\n        //console.log(['untagall',tagAllValue,val])\n        //var tagValue = val ? val : tagAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                \n               if (item.isSelected && item.id && filteredItemsKeys[item.id]) {\n                   var newItem = JSON.parse(JSON.stringify(item));\n                   if (!newItem.tags) newItem.tags=[]\n                   var finalTags = []\n                   newItem.tags.map(function(tag) {\n                       if (tag !== val) {\n                           finalTags.push(tag)\n                       }  \n                       return null\n                   })\n                   newItem.tags = finalTags\n                   newItems.push(newItem)\n               } else {\n                   newItems.push(item)\n               }  \n               return null\n            })\n            setItems(newItems)\n        }\n    }\n    \n    \n    function resetSelection() {\n         //console.log('reset sa')\n         if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n               var newItem = item\n               newItem.isSelected = false\n               newItems.push(newItem)\n               return null\n            })\n            setItems(newItems)\n            \n        }\n    }\n    \n     function selectAll() {\n         if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                if (item) {\n                    if (item.id && filteredItemsKeys[item.id]) {\n                       var newItem = item\n                       newItem.isSelected = true\n                       newItems.push(newItem)\n                    } else {\n                        newItem.isSelected = false\n                        newItems.push(newItem)\n                    }\n                }\n                return null\n            })\n            setItems(newItems)\n        }\n    }\n    \n    function saveItemWrap(item,index) {\n        saveItem(item,index)\n        listRef.current.resetAfterIndex(index);\n        updateLists(items)\n    }\n    \n    function getItemSize(index) {\n        //console.log(window.innerWidth,window.innerHeight)\n        // set parameters for full size > 1024\n        var baseSize = 40\n        //// tiny screen mobile \n        if (window.innerWidth < 430) {\n            baseSize = 120\n        // medium screen tablet\n        } else if (window.innerWidth <= 768) {\n            baseSize = 70\n        }\n        return baseSize\n    }\n    \n   function createEmptyItem(list) {\n       var tags=[]\n        if (list && list !== \"Not In A List\" && list.trim().length > 0) tags.push(list)\n        setSearchFilter('')\n        saveItem({id:null, value:'', synonym:'',tags:tags})\n   }\n    \n    return {\n        loadAll, saveItem, deleteItem , items, setItems, findKeyBy, filter, filteredItems, setFilteredItems,\n        searchFilter, setSearchFilter, tagAllValue, setTagAllValue,listRef, listFilterValue, setListFilterValue,\n        tagAll,untagAll, resetSelection, selectAll, saveItemWrap, getItemSize, deleteAll, createEmptyItem\n    }\n}\nexport default useListItemEditor\n","import React, { useEffect} from 'react';\nimport './App.css';\nimport {Link, useParams, useHistory} from 'react-router-dom'\nimport {Button } from 'react-bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { VariableSizeList as List } from 'react-window';\nimport ListAllDropDown from './components/ListAllDropDown'\n\nimport ListsManagerSearchBar from './components/ListsManagerSearchBar'\nimport ListsManagerRow from './ListsManagerRow'\nimport useListItemEditor from './useListItemEditor'\n\nconst RenderRow = function(props) {\n    const index = props.index\n    const style = props.style\n    const item = props.data.items[index]\n    return <ListsManagerRow  \n         item={item}  splitNumber={index} style={style}\n         saveItem={props.data.saveItem} deleteItem={props.data.deleteItem} saveNlu={props.data.saveNlu}\n         lookups={props.data.lookups} />\n}\n\nexport default  function ListsManager(props) {\n    const {listFilterValue, setListFilterValue, loadAll, deleteItem ,items, findKeyBy, searchFilter, setSearchFilter, tagAllValue, setTagAllValue, listRef, tagAll,untagAll, resetSelection, selectAll, saveItemWrap, getItemSize,  filteredItems, deleteAll, createEmptyItem} = useListItemEditor('nlutool','lists','alldata', props.updateFunctions.updateLists)\n    //const [currentList, setCurrentList] = useState('')\n\n    useEffect(() => {\n        loadAll()\n        props.updateFunctions.updateLists(items)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n    \n    //useEffect(() => {\n        //if (importFrom) {\n            //var parsed = parseImportText(importFrom)\n            //setItems(parsed)\n            //props.setImportFrom('')\n        //}\n    //// eslint-disable-next-line react-hooks/exhaustive-deps\n    //},[props.importFrom])\n    \n    \n  \n    \n    function renderEditor(props) {\n       \n        //if (listFilterValue && listFilterValue.length > 0) {\n            \n            // filter rendered list using callback \n            //var filteredItems = filter(function(item) {\n                //if (!searchFilter || searchFilter.length <=0 ) return true;\n                //const matchSearchFilter = item.example.indexOf(searchFilter) !== -1 \n                        //|| item.intent.indexOf(searchFilter) !== -1 \n                        //|| (item.tags && item.tags.indexOf(searchFilter) !== -1)\n                //return matchSearchFilter && skillFilterValue && item.skills && item.skills.indexOf(skillFilterValue) !== -1\n                \n            //})\n             //var collatedItems={}\n             //var collatedCounts={}\n             //if (filteredItems) {\n                 //filteredItems.map(function(item) {\n                    //if (item.value) {\n                        //if (!collatedItems[item.value]) collatedItems[item.value]=[]\n                        //collatedCounts[item.value] =   (collatedCounts[item.value] > 0) ? collatedCounts[item.value] + 1 : 1;\n                        ////if (collatedItems[item.intent].length < 300) {\n                            //collatedItems[item.value].push(item)\n                        ////}\n                        \n                    //}\n                   //return null;  \n                 //})\n             //}   \n                \n                \n            if (filteredItems && filteredItems.length > 0) {\n               \n               //var tagOptions = props.lookups.tagLookups && props.lookups.tagLookups.sort().map(function(tagKey,i) {\n                  //return <Dropdown.Item key={i} value={tagKey} onClick={function(e) {setTagAllValue(tagKey); tagAll(tagKey)}}  >{tagKey}</Dropdown.Item>\n               //})\n               //var intentOptions = props.lookups.intentLookups && props.lookups.intentLookups.sort().map(function(intentKey,i) {\n                  //return <Dropdown.Item key={i} value={intentKey} onClick={function(e) {setIntentAllValue(intentKey);intentAll(intentKey)}}  >{intentKey}</Dropdown.Item>\n               //})\n                return <div>\n                    <span style={{float:'left', fontWeight:'bold'}} >&nbsp;{filteredItems.length} matches </span>\n                    \n                     \n                     {props.lookups.selectedListTally > 0 && <span style={{float:'right'}}> \n                        \n                        <span>With {props.lookups.selectedListTally} selected&nbsp;</span>\n                        <ListAllDropDown tagAll={tagAll} tagAllValue={tagAllValue} setTagAllValue={setTagAllValue} untagAll={untagAll} lookups={props.lookups}/>\n                        <Button style={{marginLeft:'1em'}} onClick={deleteAll} variant=\"danger\"  >Delete Selected</Button> \n                    </span>} \n                    \n                      <div style={{clear:'both'}}>\n                        <div style={{clear:'both'}}>\n                            <List\n                                key=\"list\"\n                                ref={listRef}\n                                itemData={{items: filteredItems, saveItem: saveItemWrap, deleteItem, findKeyBy, lookups: props.lookups}}\n                                itemKey={index => index}  \n                                className=\"List\"\n                                height={700}\n                                itemCount={filteredItems.length}\n                                itemSize={getItemSize}\n                                width={'100%'}\n                              >{RenderRow}\n                            </List>\n                        </div>\n                    </div>\n               </div>\n\n            }\n                 //<span>{Object.keys(collatedItems).map(function(collatedList, i) {\n                                //var useCurrentList = currentList ? currentList : Object.keys(collatedItems)[0]\n                                \n                                ////const warning = <b>{collatedItems[collatedIntent].length}/{collatedCounts[collatedIntent].length}</b>\n                                ////collatedItems[collatedIntent].length  === collatedCounts[collatedIntent].length ? <b>/dd{collatedCounts[collatedIntent].length}</b> : <b>/{collatedCounts[collatedIntent].length}</b>\n                                //var completionVariant = 'danger'\n                                //if (collatedItems[collatedList].length > 300) {\n                                    //completionVariant = 'success'\n                                //} else if (collatedItems[collatedList].length > 100) {\n                                    //completionVariant = 'primary'\n                                //} else if (collatedItems[collatedList].length > 10) {\n                                    //completionVariant = 'warning'\n                                //} \n                                \n                                \n                                //if (collatedItems[collatedList].length  === collatedCounts[collatedList]) {\n                                        //return <Button key={collatedList} variant={collatedList === useCurrentList ? \"primary\" : \"outline-primary\"} onClick={function() {setCurrentList(collatedList)}}>\n                                            //<Badge variant={completionVariant} > {collatedItems[collatedList].length} </Badge>\n                                            //&nbsp;{collatedList}\n                                        //</Button>\n                                //} else {\n                                    //return <Button variant={collatedList === useCurrentList ? \"primary\" : \"outline-primary\"} onClick={function() {setCurrentList(collatedList)}}>\n                                            //<Badge variant=\"danger\" > {collatedItems[collatedList].length}/{collatedCounts[collatedList]} </Badge>\n                                            //&nbsp;{collatedList}\n                                        //</Button>\n                                //}\n                                \n                        //})}</span>\n                                   \n                                 //} else {\n                                    //return null\n                                //}\n                            //})}\n             //{Object.keys(collatedItems).map(function(collatedList, i) {\n                                //var useCurrentList = currentList ? currentList : Object.keys(collatedItems)[0]\n                                //if (collatedList === useCurrentList) {\n                                    //return \n        //} else {\n            //const skillsList = props.lookups.listLookups ? props.lookups.listLookups.map(function(listItem,i) {return <Button key={i}  onClick={function(e) {setListFilterValue(listItem)}}  style={{marginLeft:'1em'}} >{listItem}</Button>} )   : []\n            //return <div>\n                //<h1>Skills</h1>\n                //{skillsList.length > 0 && skillsList}\n                //{skillsList.length <= 0 && <div>\n                    //You dont have any skills yet. Import some <Link to='/sources'><Button>Sources</Button></Link> \n                //</div>}\n            //</div>\n        //}\n    }\n    \n  \n    return <div>\n       \n                   \n        {<ListsManagerSearchBar {...props} searchFilter={searchFilter} setSearchFilter={setSearchFilter} listFilterValue={listFilterValue} setListFilterValue={setListFilterValue} resetSelection={resetSelection} selectAll={selectAll} createEmptyItem={createEmptyItem} />}\n         \n         \n         {renderEditor(props)}\n    </div>\n            \n}\n      \n\n //{JSON.stringify(items)}\n    //<hr/>\n    \n    \n    //<hr/>\n    //{JSON.stringify(filteredItems)}\n\n\n","import React, {useEffect, useState} from 'react';\n//import {Link} from 'react-router-dom'\nimport {Button, Dropdown, ButtonGroup} from 'react-bootstrap'\nimport SearchInput from './SearchInput'\nimport checkImage from '../images/check.svg'\n\n\nconst UtterancesManagerSearchBar = function(props) {\n    const [topTagOptions,setTopTagOptions] = useState([])\n    useEffect(() => {\n        //console.log(['kust nabager ',props.lookups.listsLookups])\n        var topTagOptionss = props.lookups.utteranceTagsLookups && props.lookups.utteranceTagsLookups.sort().map(function(listKey,i) {\n              return <Dropdown.Item key={i} value={listKey} onClick={function(e) {props.setListFilterValue(listKey)}}  >{listKey}</Dropdown.Item>\n        })\n        topTagOptionss.unshift(<Dropdown.Item key={'empty_key_value_empty'} value={''} onClick={function(e) {props.setListFilterValue('')}}  >&nbsp;</Dropdown.Item>)\n        topTagOptionss.push(<Dropdown.Item key={'Not In A List'} value={'Not In A List'} onClick={function(e) {props.setListFilterValue('Not In A List')}}  ><b>Not In A List</b></Dropdown.Item>)\n        setTopTagOptions(topTagOptionss)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [props.lookups])\n    \n    return <div>\n            {<span>\n            \n                {props.lookups.selectedListTally > 0 && <Button size=\"lg\"  onClick={function(e) { props.resetSelection(e) }} variant=\"success\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\" /></Button> }\n                {props.lookups.selectedListTally <= 0 && <Button size=\"lg\" onClick={function(e) { props.selectAll(e) }} variant=\"secondary\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Select\" /></Button> }\n                \n                \n           </span>}   \n            {<span style={{marginLeft:'0.4em'}}><SearchInput searchFilter={props.searchFilter} setSearchFilter={props.setSearchFilter} /></span>}   \n            {<Dropdown style={{marginLeft:'0.5em'}}  as={ButtonGroup}>\n                  <Dropdown.Toggle split   id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button  >{'List'+(props.listFilterValue ? ' - '+ props.listFilterValue : '')} </Button>\n                  <Dropdown.Menu>\n                      {topTagOptions}\n                  </Dropdown.Menu>\n                </Dropdown>}\n              <Button  style={{marginLeft:'1em'}} variant=\"success\" onClick={function(e) {props.createEmptyItem(props.listFilterValue)}} >New Utterance</Button>\n        </div>\n}\nexport default UtterancesManagerSearchBar\n","/* global window */\nimport {Button } from 'react-bootstrap'\nimport React from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ReactTags from 'react-tag-autocomplete'\nimport useListItemRow from './useListItemRow'\nimport SuggestionComponent from './components/SuggestionComponent'\nimport checkImage from './images/check.svg'\n\nexport default function UtterancesManagerRow(props) {\n        const  {item, splitNumber , style} = props;\n       const {    \n            tags, reactTags, \n            onTagDelete, onTagAddition, updateExampleContent,updateExampleSynonym,  selectItem, deselectItem\n        } = useListItemRow(props.item, props.saveItem, props.splitNumber, props.style)\n            \n       \n       //var buttonImageStyle={color:'white', height:'2em'}\n       return item && <div style={style} className={splitNumber % 2 ? 'ListItemOdd' : 'ListItemEven'}>\n               <div style={{position:'relative', width: '100%', textAlign:'left',  borderTop: '2px solid black'}}>\n                   \n                   <div style={{float:'right'}} > \n                        <Button  variant=\"danger\"  size=\"sm\" style={{float:'right', fontWeight:'bold', borderRadius:'15px', marginTop:'0.2em'}} onClick={function(e) {if (window.confirm('Really delete')) {props.deleteItem(splitNumber,(item.id ? item.id : ''))}}} >X</Button>\n               \n                    </div>\n                   \n                  <div style={{float:'left'}}>\n                     {!item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"secondary\" onClick={function() {selectItem(splitNumber)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Select\"  /></Button>}\n                      {item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"success\" onClick={function() {deselectItem(splitNumber)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\"  /></Button>}\n                </div>\n                \n                <input style={{float:'left'}} size='25'   \n                       type='text'  value={item.value}  onChange={function(e) { updateExampleContent(e.target.value)}} />\n                    \n                     \n                     <label style={{float:'left', marginLeft:'0.5em'}} >\n                     <span  style={{float:'left', marginRight:'0.5em'}}>Lists </span>\n                     <span  style={{float:'left'}}>\n                       <ReactTags\n                        placeholderText=\"Add to list\"\n                        minQueryLength={0}\n                        maxSuggestionsLength={50}\n                        autoresize={false}\n                        allowNew={true}\n                        ref={reactTags}\n                        tags={tags}\n                        suggestionComponent={SuggestionComponent}\n                        suggestions={props.lookups.utteranceTagsLookups.map(function(listName,i) {return {id: i, name: listName}})}\n                        onDelete={onTagDelete}\n                        onAddition={onTagAddition} /> \n                        </span>\n                        </label>\n                        \n                        \n                        \n                    <label style={{float:'left', marginLeft:'0.5em'}} ><span style={{float:'left', marginRight:'0.5em'}}>Alternatives</span> \n                        <textarea style={{width:\"34em\", height:\"5em\"}} type='text' value={item.synonym} onChange={function(e) {updateExampleSynonym(e.target.value)}} />\n                    </label>\n                  </div> \n               \n                \n                 \n           \n      </div>\n}\n","/* global window */\nimport React, { useEffect} from 'react';\nimport './App.css';\nimport {Link, useParams, useHistory} from 'react-router-dom'\nimport {Button } from 'react-bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { VariableSizeList as List } from 'react-window';\nimport ListAllDropDown from './components/ListAllDropDown'\n\nimport UtterancesManagerSearchBar from './components/UtterancesManagerSearchBar'\nimport UtterancesManagerRow from './UtterancesManagerRow'\nimport useListItemEditor from './useListItemEditor'\n\nconst RenderRow = function(props) {\n    const index = props.index\n    const style = props.style\n    const item = props.data.items[index]\n    return <UtterancesManagerRow  \n         item={item}  splitNumber={index} style={style}\n         saveItem={props.data.saveItem} deleteItem={props.data.deleteItem} saveNlu={props.data.saveNlu}\n         lookups={props.data.lookups} />\n}\n\nexport default  function UtterancesManager(props) {\n    const {listFilterValue, setListFilterValue, loadAll, deleteItem ,items, findKeyBy, searchFilter, setSearchFilter, tagAllValue, setTagAllValue, listRef, tagAll,untagAll, resetSelection, selectAll, saveItemWrap,  filteredItems, deleteAll, createEmptyItem} = useListItemEditor('nlutool','utterances','alldata', props.updateFunctions.updateUtterances)\n    //const [currentList, setCurrentList] = useState('')\n\n    function getItemSize() {\n        if (window.innerWidth < 430) {\n               return 220\n        // medium screen tablet\n        } else if (window.innerWidth <= 768) {\n               return 160\n        } else {\n            return 130\n        }\n    }\n\n    useEffect(() => {\n        loadAll()\n        //props.updateFunctions.updateLists(items)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n   \n    \n    function renderEditor(props) {\n            if (filteredItems && filteredItems.length > 0) {\n            \n                return <div>\n                    <span style={{float:'left', fontWeight:'bold'}} >&nbsp;{filteredItems.length} matches </span>\n                     \n                     {props.lookups.selectedListTally > 0 && <span style={{float:'right'}}> \n                        \n                        <span>With {props.lookups.selectedListTally} selected&nbsp;</span>\n                        <ListAllDropDown tagAll={tagAll} tagAllValue={tagAllValue} setTagAllValue={setTagAllValue} untagAll={untagAll} lookups={props.lookups}/>\n                        <Button style={{marginLeft:'1em'}} onClick={deleteAll} variant=\"danger\"  >Delete Selected</Button> \n                    </span>} \n                    \n                      <div style={{clear:'both'}}>\n                        <div style={{clear:'both'}}>\n                            <List\n                                key=\"list\"\n                                ref={listRef}\n                                itemData={{items: filteredItems, saveItem: saveItemWrap, deleteItem, findKeyBy, lookups: props.lookups}}\n                                itemKey={index => index}  \n                                className=\"List\"\n                                height={700}\n                                itemCount={filteredItems.length}\n                                itemSize={getItemSize}\n                                width={'100%'}\n                              >{RenderRow}\n                            </List>\n                        </div>\n                    </div>\n               </div>\n\n            }\n              \n    }\n    \n  \n    return <div>\n       \n                   \n        {<UtterancesManagerSearchBar {...props} searchFilter={searchFilter} setSearchFilter={setSearchFilter} listFilterValue={listFilterValue} setListFilterValue={setListFilterValue} resetSelection={resetSelection} selectAll={selectAll} createEmptyItem={createEmptyItem} />}\n         \n         \n         {renderEditor(props)}\n    </div>\n            \n}\n      \n\n //{JSON.stringify(items)}\n    //<hr/>\n    \n    \n    //<hr/>\n    //{JSON.stringify(filteredItems)}\n\n\n","import React, {useState, useEffect} from 'react'\nimport {findFirstDiffPos, uniquifyArray, uniquifyArrayOfObjects } from './utils'\nfunction useNluRow(item, saveItem, splitNumber, style, setPageMessage) {\n    const [selectionState, setSelectionState] = useState({})\n    const [newEntity, setNewEntity] = useState('')\n    const [intentTitle, setIntentTitle] = useState(item && item.intent ? item.intent : '')\n    // for ReactTags format using objects\n    const [tags, setTags] = useState([])\n    const [skills, setSkills] = useState([])\n    //console.log(['USENLUROW',splitNumber])\n    const reactTags = React.createRef()\n    const reactSkills = React.createRef()\n     // tags\n    useEffect(() => {\n        if (item.tags) setTags(item.tags.map(function(tag,i) {return {id:i, name:tag}}))\n        if (item.skills) setSkills(item.skills.map(function(skill,i) {return {id:i, name:skill}}))\n    },[item])\n\n     function onTagDelete (i) {\n        const newTags = tags.slice(0)\n        newTags.splice(i, 1)\n        setTags(newTags)\n        var newItem = item\n        newItem.tags = newTags.map(function(newTag) { return newTag.name})\n        saveItem(newItem,splitNumber)\n      }\n     \n     function onTagAddition (tag) {\n        const newTags = [].concat(tags, tag)\n        setTags(uniquifyArrayOfObjects(newTags,'name').sort(function(a,b) {if (a.name > b.name) return 1; else return -1} ))\n        var newItem = item\n        newItem.tags = uniquifyArray(newTags.map(function(newTag) { return newTag.name})).sort()\n        saveItem(newItem,splitNumber)\n      }\n      \n      function onSkillDelete (i) {\n        const newSkills = skills.slice(0)\n        newSkills.splice(i, 1)\n        setSkills(newSkills)\n        var newItem = item\n        newItem.skills = newSkills.map(function(newSkill) { return newSkill.name})\n        saveItem(newItem,splitNumber)\n      }\n     \n     function onSkillAddition (skill) {\n        const newSkills = [].concat(skills, skill)\n        setSkills(uniquifyArrayOfObjects(newSkills,'name').sort(function(a,b) {if (a.name > b.name) return 1 ;else return -1} ))\n        var newItem = item\n        newItem.skills = uniquifyArray(newSkills.map(function(newSkill) { return newSkill.name})).sort()\n        saveItem(newItem,splitNumber)\n     }\n    \n        \n    function createSelection(field, start, end) {\n        if (field) {\n            if( field.createTextRange ) {\n                var selRange = field.createTextRange();\n                selRange.collapse(true);\n                selRange.moveStart('character', start);\n                selRange.moveEnd('character', end-start);\n                selRange.select();\n            } else if( field.setSelectionRange ) {\n                field.setSelectionRange(start, end);\n            } else if( field.selectionStart ) {\n                field.selectionStart = start;\n                field.selectionEnd = end;\n            }\n            field.focus();\n        }\n    }\n    \n    function updateExampleContent(content) {\n        //console.log('UPDTEXT')\n        if (item && typeof item.example === \"string\" && typeof content === \"string\") {\n            //console.log('UPDTEXTREAL')\n            const newItem = JSON.parse(JSON.stringify(item));\n            if (item.entities && item.entities.length > 0) {\n                var entities = item.entities\n                // deal with entity ranges * allow for delete multiple\n                const diffPos = findFirstDiffPos(content,item.example)\n                // insertion\n                if (content.length - item.example.length > 0) {\n                    \n                    //console.log('UPDTEXT insert')\n                    const insertionLength = content.length - item.example.length\n                    // update start and end subtract deletionLength\n                    newItem.entities = entities.map(function(entity,entityIndex) {\n                        if (diffPos < entity.start) {\n                            entity.start += insertionLength\n                            entity.end += insertionLength;\n                        } else if (diffPos < entity.end) {\n                            // update entity value\n                            entity.end += insertionLength;\n                            entity.value = content.slice(entity.start,entity.end)\n                        }\n                        return entity \n                    })\n                // replace    \n                } \n                else if (content.length === item.example.length) {\n                    //console.log('UPDTEXT replace')\n                    // check if was inside an entity and update value as required\n                    newItem.entities = entities.map(function(entity,entityIndex) {\n                        if (diffPos >= entity.start && diffPos < entity.end) {\n                            // update entity value\n                            entity.value = content.slice(entity.start,entity.end)\n                        }\n                        return entity \n                    })\n                // deletion\n                } else {\n                    //console.log('UPDTEXT delete')\n                    const deletionLength = content.length - item.example.length\n                    // update start and end subtract deletionLength\n                    newItem.entities = entities.map(function(entity,entityIndex) {\n                        if (diffPos < entity.start) {\n                            entity.start += deletionLength\n                            entity.end += deletionLength;\n                        } else if (diffPos < entity.end) {\n                            // update entity value\n                            entity.end += deletionLength;\n                            entity.value = content.slice(entity.start,entity.end)\n                        }\n                        return entity \n                    })\n                }\n            }\n            newItem.example = content;\n            saveItem(newItem,splitNumber)\n        }\n    }\n    \n    function entityClicked(entityKey,entityType) {\n        if (item.entities)  {\n            var entities = item.entities\n            if (! selectionState || !selectionState.textSelection || selectionState.textSelection.length === 0) {\n                // select text in string\n                if (entities[entityKey]) {\n                   createSelection(document.getElementById('example_input_'+splitNumber),entities[entityKey].start,entities[entityKey].end)\n                }\n            } else {\n                entityTypeChanged(entityKey,entityType);\n            }\n        }\n    }\n    \n    function entityTypeChanged(entityNumber,type) {\n        var newItem = item\n        if (Array.isArray(item.entities)) {\n            var newEntities = item.entities \n            var entity = newEntities[entityNumber] ? newEntities[entityNumber] : {}\n            const typeChanged = !(type && type.length > 0 && type === entity.type)\n        \n            entity.type = type\n            if (selectionState && selectionState.textSelection) {\n                const start = selectionState.startTextSelection\n                const end = selectionState.endTextSelection\n                var isOverlapProblem = false;\n                //if (start > 0 && end > 0) {\n                    //item.entities.map(function(entity) {\n                        //// is OK if updating entity \n                        //const bypass = !typeChanged && entity.type == type\n                        //const isOverlap = (start > entity.start && start < entity.end) || (end > entity.start && end < entity.end)\n                        //console.log(['CHECK ENTITY',entity.type,start,end,entity.start,entity.end,bypass, isOverlap])\n                        //if (!bypass && isOverlap) isOverlapProblem = true\n                    //})\n                //}\n                if (isOverlapProblem) {\n                    setPageMessage('Overlap with existing entity !')\n                    setTimeout(function() {\n                        setPageMessage('')\n                    },2000)\n                } else {\n                    entity.value = selectionState.textSelection\n                    entity.start = selectionState.startTextSelection\n                    entity.end = selectionState.endTextSelection\n                    if (!newEntities[entityNumber]) newEntities.push(entity)\n                    else newEntities[entityNumber] = entity\n                    newItem.entities = newEntities\n                    setSelectionState(null)\n                    saveItem(newItem,splitNumber)\n                }\n            } else {\n                if (!newEntities[entityNumber]) newEntities.push(entity)\n                else newEntities[entityNumber] = entity\n                newItem.entities = newEntities\n                setSelectionState(null)\n                saveItem(newItem,splitNumber)\n            }\n        }\n    }\n    \n    function intentChanged(intent) {\n        var newItem = item \n        newItem.intent = intent\n        saveItem(newItem,splitNumber)\n    }\n \n    \n    function entityDelete(entityNumber) {\n        if (item.entities) {\n            var newItem = item \n            var newEntities = item.entities.slice(0,entityNumber).concat(item.entities.slice(entityNumber + 1))\n            newItem.entities = newEntities\n            saveItem(newItem,splitNumber)\n        }\n    }\n    \n    function selectItem(splitNumber) {\n        var newItem = item\n        item.isSelected = true;\n        saveItem(newItem,splitNumber)\n    }\n    \n    \n    function setSkill(skill, splitNumber) {\n        //var newItem = item\n        //item.isSelected = true;\n        //props.saveItem(newItem,splitNumber)\n    }\n    \n    function deselectItem(splitNumber) {\n        var newItem = item\n        item.isSelected = false;\n        saveItem(newItem,splitNumber)\n    } \n    \n    return {    \n        intentTitle, setIntentTitle, selectionState, setSelectionState, newEntity, setNewEntity, tags, setTags, skills, setSkills, reactTags, reactSkills, onTagDelete, onTagAddition, onSkillDelete,onSkillAddition, createSelection, updateExampleContent, entityClicked, entityTypeChanged, intentChanged, entityDelete, selectItem, setSkill, deselectItem\n    }\n    \n}\nexport default useNluRow\n","/* global window */\nimport {Button,   Dropdown, ButtonGroup } from 'react-bootstrap'\nimport React, {useState} from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ReactTags from 'react-tag-autocomplete'\nimport useNluRow from './useNluRow'\nimport SuggestionComponent from './components/SuggestionComponent'\nimport checkImage from './images/check.svg'\nimport thumbdownImage from './images/thumb-down.svg'\n\nexport default function NluExampleRow(props) {\n       const  {item, splitNumber , style} = props;\n       const {    \n            intentTitle, setIntentTitle, selectionState, setSelectionState, newEntity, setNewEntity, tags, skills, reactTags, reactSkills, \n            onTagDelete, onTagAddition, onSkillDelete,onSkillAddition, updateExampleContent, entityClicked, entityTypeChanged, intentChanged, entityDelete, selectItem,  deselectItem\n        } = useNluRow(props.item, props.saveItem, props.splitNumber, props.style)\n        const [textInput, setTextInput] = useState(props.item && props.item.example ? props.item.example  : '')\n         \n       var intentOptions = props.lookups.intentLookups && props.lookups.intentLookups.sort().map(function(intentKey,i) {\n          return <Dropdown.Item key={i} value={intentKey} onClick={function(e) {intentChanged(intentKey)}}  >{intentKey}</Dropdown.Item>\n       })\n       //var skillOptions = props.lookups.skillLookups && props.lookups.skillLookups.sort().map(function(skillKey,i) {\n          //return <Dropdown.Item key={i} value={skillKey} onClick={function(e) {setSkill(skillKey,props.splitNumber)}}  >{skillKey}</Dropdown.Item>\n       //})\n       // ONE PER ENTITY FOR THIS EXAMPLE\n       var entitiesDropdowns = item && item.entities ? item.entities.map(function(entity,i) {\n           var entityOptions = props.lookups.entityLookups.sort().map(function(entityKey,j) {\n              return <Dropdown.Item  key={j} value={entityKey} onClick={function(e) {entityTypeChanged(i,entityKey)}}  >{entityKey}</Dropdown.Item>\n           })\n           return<Dropdown style={{marginLeft:'0.2em'}} variant='info'  key={i}  as={ButtonGroup}>\n              <Dropdown.Toggle variant='info'  split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n              <Button variant='info'   size=\"sm\"  onClick={function(e) {entityClicked(i,entity.type)}} >\n              <b>{entity.type}</b> \n                -\n              {entity.value ? entity.value : 'Select Entity Type'}\n              </Button>\n              <Button variant=\"info\" size=\"sm\" onClick={function(e) {entityDelete(i,'')}} >X</Button>\n              <Dropdown.Menu>\n                  <form  style={{display:'inline'}}>\n                    <div className=\"form-group\">\n                      <input type=\"text\" className=\"form-control\" onChange={function(e) {entityTypeChanged(i,e.target.value)}}\n                    value={entity.type} />\n                    </div>\n                  </form>\n                  {entityOptions}\n              </Dropdown.Menu>\n            </Dropdown>\n       }) : [];\n        //PLUS CREATE NEW WHEN TEXT IS SELECTED\n       if (selectionState  && selectionState.textSelection && selectionState.textSelection.length > 0 &&  selectionState.textSelectionFrom === splitNumber) {\n           var entityOptions =  props.lookups.entityLookups && props.lookups.entityLookups.sort().map(function(entityKey,j) {\n              return <Dropdown.Item key={j} value={entityKey} onClick={function(e) {entityTypeChanged(-1,entityKey)}}  >{entityKey}</Dropdown.Item>\n           })\n           entitiesDropdowns.push(<Dropdown key=\"new\" variant='success'  as={ButtonGroup}>\n\n          <Dropdown.Toggle variant='success'  split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button  variant='success' size=\"sm\" >New Entity</Button>\n\n          <Dropdown.Menu>\n           <form style={{display:'inline'}} onSubmit={function(e) {e.preventDefault(); entityTypeChanged(-1,newEntity)}}>\n                <div className=\"form-group\">\n                  <input type=\"text\" className=\"form-control\" onChange={function(e) {setNewEntity(e.target.value)}}\n                value={newEntity} />\n                </div>\n              </form>\n              {entityOptions}\n          </Dropdown.Menu>\n        </Dropdown>)\n       }\n       //var buttonImageStyle={color:'white', height:'2em'}\n       return item && <div style={style} className={splitNumber % 2 ? 'ListItemOdd' : 'ListItemEven'}>\n               <div style={{position:'relative', width: '100%', textAlign:'left',  borderTop: '2px solid black'}}>\n                  \n                   {!item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"secondary\" onClick={function() {selectItem(splitNumber)}} ><img  style={{height:'1em'}} src={checkImage} alt=\"Select\" /></Button>}\n                  {item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"success\" onClick={function() {deselectItem(splitNumber)}} ><img  style={{height:'1em'}} src={checkImage} alt=\"Deselect\" /></Button>}\n                  \n                <Button  variant=\"danger\" style={{float:'right'}} onClick={function(e) {if (window.confirm('Really delete')) {props.deleteItem(splitNumber,(item.id ? item.id : ''))}}} ><img src={thumbdownImage} alt=\"Delete\" /> Delete</Button>\n\n                  \n                  <Dropdown  style={{float:'left'}} as={ButtonGroup}>\n                  <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button   size=\"sm\" >{item.intent ? item.intent.toString() : 'Select Intent'} </Button>\n                  <Dropdown.Menu>\n                   <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault(); intentChanged(intentTitle)}}>\n                        <div className=\"form-group\">\n                          <input type=\"text\" className=\"form-control\" value={intentTitle} onChange={function(e) {setIntentTitle(e.target.value)}}\n                         />\n                        </div>\n                      </form>\n                      {intentOptions}\n                  </Dropdown.Menu>\n                  </Dropdown>\n                  <span style={{float:'left'}}>{entitiesDropdowns}</span>\n                 \n                   <div style={{float:'left'}}>\n                   <ReactTags\n                    placeholderText=\"Add to skill\"\n                    minQueryLength={0}\n                    maxSuggestionsLength={50}\n                    autoresize={false}\n                    allowNew={true}\n                    ref={reactSkills}\n                    tags={skills}\n                    suggestionComponent={SuggestionComponent}\n                    suggestions={props.lookups.skillLookups.map(function(tag,i) {return {id: i, name: tag}})}\n                    onDelete={onSkillDelete}\n                    onAddition={onSkillAddition} /> \n                    </div>\n                    \n                  <div style={{float:'left'}}>\n                   <ReactTags\n                    placeholderText=\"Add new tag\"\n                    minQueryLength={0}\n                    maxSuggestionsLength={50}\n                    autoresize={false}\n                    allowNew={true}\n                    ref={reactTags}\n                    tags={tags}\n                    suggestionComponent={SuggestionComponent}\n                    suggestions={props.lookups.tagLookups.map(function(tag,i) {return {id: i, name: tag}})}\n                    onDelete={onTagDelete}\n                    onAddition={onTagAddition} /> \n                    </div>\n                  \n                  <input     \n                   onFocus={ function(e) {\n                       setSelectionState(null)\n                    }}\n                   onSelect={ function(e) {\n                     var textSelection = window.getSelection().toString(); \n                     setSelectionState({textSelection:textSelection, textSelectionFrom: splitNumber, startTextSelection: e.target.selectionStart, endTextSelection: e.target.selectionEnd})\n                  }}  \n                   type='text' style={{width:'80%'}} value={textInput} id={\"example_input_\"+splitNumber} onChange={function(e) { setTextInput(e.target.value); updateExampleContent(e.target.value)}} />\n                  \n                  \n                \n                \n            </div>\n      </div>\n}\n","import React from 'react';\n//import {Link} from 'react-router-dom'\nimport {Button, Dropdown, ButtonGroup} from 'react-bootstrap'\nimport SearchInput from './SearchInput'\nimport checkImage from '../images/check.svg'\n\nconst EditorSearchBar = function(props) {\n    var topskillOptions = props.lookups.skillLookups && props.lookups.skillLookups.sort().map(function(skillKey,i) {\n          return <Dropdown.Item key={i} value={skillKey} onClick={function(e) {props.setSkillFilterValue(skillKey)}}  >{skillKey}</Dropdown.Item>\n    })\n    topskillOptions.unshift(<Dropdown.Item key={'empty_key_value_empty'} value={''} onClick={function(e) {props.setSkillFilterValue('')}}  >&nbsp;</Dropdown.Item>)\n        \n    var intentOptions = props.lookups.intentLookups && props.lookups.intentLookups.sort().map(function(intentKey,i) {\n          return <Dropdown.Item key={i} value={intentKey} onClick={function(e) {props.setIntentFilterValue(intentKey)}}  >{intentKey}</Dropdown.Item>\n    })\n    intentOptions.unshift(<Dropdown.Item key={'empty_key_value_empty'} value={''} onClick={function(e) {props.setIntentFilterValue('')}}  >&nbsp;</Dropdown.Item>)\n        \n    return <div>\n            {<span>\n            \n                {props.lookups.selectedTally > 0 && <Button size=\"lg\"  onClick={function(e) { props.resetSelection(e) }} variant=\"success\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\" /></Button> }\n                {props.lookups.selectedTally <= 0 && <Button size=\"lg\" onClick={function(e) { props.selectAll(e) }} variant=\"secondary\"  ><img style={{height:'1em'}} src={checkImage} alt=\"Select\" /></Button> }\n                \n                \n           </span>}   \n            {<span style={{marginLeft:'0.4em'}}><SearchInput searchFilter={props.searchFilter} setSearchFilter={props.setSearchFilter} /></span>}   \n            \n            {<Dropdown style={{marginLeft:'0.5em'}}  as={ButtonGroup}>\n                  <Dropdown.Toggle split   id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button  >{'Intent '+(props.intentFilterValue ? ' - '+ props.intentFilterValue : '')} </Button>\n                  <Dropdown.Menu>\n                      {intentOptions}\n                  </Dropdown.Menu>\n                </Dropdown>}\n            \n            {<Dropdown style={{marginLeft:'0.5em'}}  as={ButtonGroup}>\n                  <Dropdown.Toggle split   id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button  >{'Skill '+(props.skillFilterValue ? ' - '+ props.skillFilterValue : '')} </Button>\n                  <Dropdown.Menu>\n                      {topskillOptions}\n                  </Dropdown.Menu>\n                </Dropdown>}\n             <Button  style={{marginLeft:'1em'}} variant=\"success\" onClick={function(e) {props.createEmptyItem(props.skillFilterValue, props.intentFilterValue)}} >New Intent</Button>\n        </div>\n}\nexport default EditorSearchBar\n","import React, {useState, useEffect} from 'react';\nimport localforage from 'localforage'\nimport useDBSingleKey from './useDBSingleKey'\nimport {uniquifyArray} from './utils'\nimport {useParams, useHistory} from 'react-router-dom'\n\nfunction useNluEditor(database, databaseTable, databaseKey, updateLookups) {\n    const {loadAll, saveItem, deleteItem , items, setItems, findKeyBy, filter} = useDBSingleKey(database, databaseTable, databaseKey)\n    const [filteredItems, setFilteredItems] = useState([])\n    const [filteredItemsKeys, setFilteredItemsKeys] = useState([])\n    const [searchFilter, setSearchFilter] = useState('')\n    const [tagAllValue, setTagAllValue] = useState('')\n    const [skillAllValue, setSkillAllValue] = useState('')\n    //const [skillFilterValue, setSkillFilterValue] = useState('')\n    //const [intentFilterValue, setIntentFilterValue] = useState('')\n    const [intentAllValue, setIntentAllValue] = useState('')\n    const listRef = React.createRef()\n    \n    const params = useParams()\n    const history = useHistory()\n    var skillFilterValue = params.skillId ? params.skillId : '';\n    function setSkillFilterValue(value) {\n        //console.log('SETSKILLVAL')\n        //console.log(history)\n        var root = history.location.pathname.split(\"/\")\n        var parts=['/'+root[1]]\n        skillFilterValue = value;\n        if (skillFilterValue.length > 0) {\n            parts.push('/skill/'+skillFilterValue)\n        }\n        if (intentFilterValue.length > 0) {\n            parts.push('/intent/'+intentFilterValue)\n        }\n        //console.log(['ssv',parts,value])\n        history.push(parts.join(''))\n    }\n    var intentFilterValue = params.intentId ? params.intentId : '';\n    \n    function setIntentFilterValue(value) {\n        var root = history.location.pathname.split(\"/\")\n        var parts=['/'+root[1]]\n        intentFilterValue = value;\n        if (skillFilterValue.length > 0) {\n            parts.push('/skill/'+skillFilterValue)\n        }\n        if (intentFilterValue.length > 0) {\n            parts.push('/intent/'+intentFilterValue)\n        }\n        history.push(parts.join(''))\n    }\n    \n    //const examplesDB = useDBSingleKey('nlutool','examples','alldata')\n    //var updateLookupsTimeout = null\n    //var updateFilteredTimeout = null\n    //useEffect(() => {\n        ////clearTimeout(updateLookupsTimeout)\n        ////updateLookupsTimeout = setTimeout(function() {\n            \n        ////},2000)\n    //// eslint-disable-next-line react-hooks/exhaustive-deps\n    //},[items])\n     \n    useEffect(() => {\n        //clearTimeout(updateFilteredTimeout)\n        //console.log('UPDATE FILTERED'+intentFilterValue)\n        //updateFilteredTimeout = setTimeout(function() {\n             //console.log('UPDATE FILTERED NOW')\n             var filteredItems = filter(function(item) {\n                if ((!searchFilter || searchFilter.trim().length <=0 ) && (!skillFilterValue || skillFilterValue.trim().length <=0 ) && (!intentFilterValue || intentFilterValue.trim().length <=0 )) return true;\n                var intentFilter = true\n                if (intentFilterValue && intentFilterValue.length > 0) {\n                    if (item.intent === intentFilterValue) {\n                        intentFilter = true\n                    } else {\n                        intentFilter = false\n                    }\n                }\n                var skillFilter = true\n                if (skillFilterValue && skillFilterValue.length > 0) {\n                    if (item.skills && item.skills.indexOf(skillFilterValue) !== -1) {\n                        skillFilter = true\n                    } else {\n                        skillFilter = false\n                    }\n                }\n                var searchFilterBool = true\n                if (searchFilter && searchFilter.length > 0) {\n                    if (item.example && item.example.indexOf(searchFilter) !== -1 ) {\n                        searchFilterBool = true\n                    } else {\n                        searchFilterBool = false\n                    }\n                }         \n                return searchFilterBool && skillFilter && intentFilter;       \n                //intentFilterValue\n                //return (item.example.indexOf(searchFilter) !== -1 \n                            //&& intentFilter \n                            //&& ((skillFilterValue.length <= 0 || (skillFilterValue.length > 0 && typeof item.skills ===\"object\" && item.skills.indexOf(skillFilterValue) !== -1)) ? true : false\n            })\n            var itemKeys = {}\n            filteredItems.map(function(item) {if (item.id) itemKeys[item.id] = true; return null})\n            filteredItems.sort(function(a,b) { return a.example < b.example ? true : false})\n            setFilteredItems(filteredItems)\n            setFilteredItemsKeys(itemKeys)\n            updateLookups(filteredItems)\n        //},800)\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[items, searchFilter, skillFilterValue, intentFilterValue])\n    \n    function deleteAll(e)  {\n        if (window.confirm('Really delete all selected examples')) {\n                if (items) {\n                var newItems = []\n                items.map(function(item,i) {\n                    if (item.id && filteredItemsKeys[item.id]) {\n                       if (!item.isSelected) {\n                           newItems.push(item)\n                       }\n                    } else {\n                        newItems.push(item)\n                    }\n                    return null\n                })\n                setItems(newItems)\n                listRef.current.resetAfterIndex(0);\n            }\n        }\n         \n    }\n    \n    function tagAll(val) {\n        //console.log(['tagall',tagAllValue,val])\n        var tagValue = val ? val : tagAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                \n               if (item.isSelected && item.id && filteredItemsKeys[item.id]) {\n                   var newItem = JSON.parse(JSON.stringify(item));\n                   if (!newItem.tags) newItem.tags=[]\n                   if (newItem.tags.indexOf(tagValue) === -1) newItem.tags.push(tagValue)\n                   newItem.tags = uniquifyArray(newItem.tags)\n                   newItems.push(newItem)\n               } else {\n                   newItems.push(item)\n               }  \n               return null\n            })\n            setItems(newItems)\n        }\n    }\n    \n    function intentAll(val) {\n        //console.log(['intentall',intentAllValue,val])\n        var intentValue = val ? val : intentAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                \n               if (item.isSelected && item.id && filteredItemsKeys[item.id]) {\n                   var newItem = item\n                   newItem.intent = intentValue\n                   newItems.push(newItem)\n               } else {\n                   newItems.push(item)\n               }  \n               return null\n            })\n            setItems(newItems)\n        }\n    }\n    function resetSelection() {\n         if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n               var newItem = item\n               newItem.isSelected = false\n               newItems.push(newItem)\n               return null\n            })\n            setItems(newItems)\n            \n        }\n    }\n    \n     function selectAll() {\n         if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                if (item) {\n                    var newItem = item\n                       \n                    if (item.id && filteredItemsKeys[item.id]) {\n                       newItem.isSelected = true\n                       newItems.push(newItem)\n                    } else {\n                        newItem.isSelected = false\n                        newItems.push(newItem)\n                    }\n                }\n                return null\n            })\n            setItems(newItems)\n        }\n    }\n    \n     function skillSetAll(val) {\n         //console.log(['set skill all',tagAllValue,val])\n        var skillValue = val ? val : skillAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                \n               if (item.isSelected && item.id && filteredItemsKeys[item.id]) {\n                   var newItem = JSON.parse(JSON.stringify(item));\n                   if (!newItem.skills) newItem.skills=[]\n                   if (newItem.skills.indexOf(skillValue) === -1) newItem.skills.push(skillValue)\n                   newItem.skills = uniquifyArray(newItem.skills)\n                   newItems.push(newItem)\n               } else {\n                   newItems.push(item)\n               }  \n               return null\n            })\n            setItems(newItems)\n        }\n    }\n    \n       \n    function saveAll(e)  {\n        //console.log(['save akk',filteredItems])\n        if (items) {\n            var newItems = []\n            var lsItems = []\n            filteredItems.map(function(item,i) {\n                if (item.intent && item.intent.length > 0 && item.id && filteredItemsKeys[item.id]) {\n                   if (item.isSelected) {\n                       lsItems.push(item)\n                   } else {\n                       newItems.push(item)\n                   }\n                } else {\n                    newItems.push(item)\n               }\n               return null\n            })\n            saveLSItems(lsItems)\n            setItems(newItems)\n            listRef.current.resetAfterIndex(0);\n        }\n         \n    }\n   \n    function createEmptyItem(skill, intent) {\n        setSearchFilter('')\n        var skills=[]\n        if (skill && skill.trim().length > 0) skills.push(skill)\n        var newIntent=''\n        if (intent && intent.trim().length > 0) newIntent = intent\n        saveItem({id:null, example:'', intent:newIntent, skills:skills,tags:[]})\n   }\n    \n    function saveItemWrap(item,index) {\n        saveItem(item,index)\n        listRef.current.resetAfterIndex(index);\n        updateLookups(items)\n    }\n    \n    function getItemSize(index) {\n        //console.log(window.innerWidth,window.innerHeight)\n        // set parameters for full size > 1024\n        var baseSize = 100\n        var heightPerLine = 70\n        var tagsPerLine = 10\n        var entitiesPerLine = 8\n        var skillsPerLine = 6\n        // tiny screen mobile \n        if (window.innerWidth < 430) {\n            baseSize = 140\n            heightPerLine = 50\n            tagsPerLine = 4\n            entitiesPerLine = 1\n            skillsPerLine = 1\n        // medium screen tablet\n        } else if (window.innerWidth <= 768) {\n            baseSize = 120\n            heightPerLine = 30\n            tagsPerLine = 2\n            entitiesPerLine = 1\n            skillsPerLine = 2\n        }\n        var tallyExtras = 0;\n        var item = items[index]\n        if (item && item.entities) tallyExtras += item.entities.length/entitiesPerLine;\n        if (item && item.tags) tallyExtras += item.tags.length/tagsPerLine;\n        if (item && item.skills) tallyExtras += item.skills.length/skillsPerLine;\n        var size = baseSize + (Math.round(tallyExtras)) * heightPerLine\n        //console.log(['ITEM SIZE',size, baseSize,heightPerLine,tagsPerLine,entitiesPerLine,tallyExtras,item])\n        return size \n    }\n    \n    function saveLSItem(item) {\n        var localforageStorage = localforage.createInstance({\n           name: 'nlutool',\n           storeName   :'examples',\n         });\n         localforageStorage.getItem('alldata').then(function(exampleItems) {\n                exampleItems.push(item)\n                localforageStorage.setItem('alldata',exampleItems)\n         })\n       \n    }\n    \n    function saveLSItems(newItems) {\n        if (newItems) {\n            var localforageStorage = localforage.createInstance({\n               name: 'nlutool',\n               storeName   :'examples',\n             });\n             localforageStorage.getItem('alldata').then(function(exampleItems) {\n                 if (exampleItems) {\n                    newItems.map(function(newItem) { exampleItems.push(newItem ); return null})\n                    localforageStorage.setItem('alldata',exampleItems)\n                 }\n             })\n        }\n    }\n\n     \n    function saveNlu(splitNumber) {\n        if (items && items[splitNumber]) {\n            //props.saveNluItem(items[splitNumber]) \n            saveLSItem(items[splitNumber])\n            deleteItem(splitNumber)\n        }\n    }\n    \n      function untagAll(val) {\n        //console.log(['untagall',tagAllValue,val])\n        //var tagValue = val ? val : tagAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                \n               if (item.isSelected && item.id && filteredItemsKeys[item.id]) {\n                   var newItem = JSON.parse(JSON.stringify(item));\n                   if (!newItem.tags) newItem.tags=[]\n                   var finalTags = []\n                   newItem.tags.map(function(tag) {\n                       if (tag !== val) {\n                           finalTags.push(tag)\n                       }  \n                       return null\n                   })\n                   newItem.tags = finalTags\n                   newItems.push(newItem)\n               } else {\n                   newItems.push(item)\n               }  \n               return null\n            })\n            setItems(newItems)\n        }\n    }\n    \n       function unskillAll(val) {\n        //console.log(['unskillall',tagAllValue,val])\n        //var tagValue = val ? val : tagAllValue;\n        if (items) {\n            var newItems = []\n            items.map(function(item,i) {\n                \n               if (item.isSelected && item.id && filteredItemsKeys[item.id]) {\n                   var newItem = JSON.parse(JSON.stringify(item));\n                   if (!newItem.skills) newItem.skills=[]\n                   var finalTags = []\n                   newItem.skills.map(function(tag) {\n                       if (tag !== val) {\n                           finalTags.push(tag)\n                       }  \n                       return null\n                   })\n                   newItem.skills = finalTags\n                   newItems.push(newItem)\n               } else {\n                   newItems.push(item)\n               }  \n               return null\n            })\n            setItems(newItems)\n        }\n    }\n    \n    //function sortItems() {\n        \n    //}\n    \n\n    \n    return {\n        loadAll, saveItem, deleteItem , items, setItems, findKeyBy, filter, filteredItems, setFilteredItems,createEmptyItem, \n        searchFilter, setSearchFilter, tagAllValue, setTagAllValue, skillAllValue, setSkillAllValue, skillFilterValue, setSkillFilterValue,intentFilterValue, setIntentFilterValue,\n         intentAllValue, setIntentAllValue, listRef, \n        tagAll,untagAll, unskillAll, intentAll, resetSelection, selectAll,  skillSetAll, saveItemWrap, getItemSize, deleteAll, saveAll, saveNlu\n    }\n}\nexport default useNluEditor\n","import React, { useEffect} from 'react';\nimport './App.css';\nimport {Link} from 'react-router-dom'\nimport {Button} from 'react-bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { VariableSizeList as List } from 'react-window';\nimport NluExampleRow from './NluExampleRow'\nimport EditorSearchBar from './components/EditorSearchBar'\nimport useNluEditor from './useNluEditor'\nimport {MatchesTallies,WithSelectedDropDowns} from './components/Components'\nconst RenderRow = function(props) {\n    const index = props.index\n    const style = props.style\n    const item = props.data.items[index]\n    return <NluExampleRow  \n         item={item} splitNumber={index} style={style}\n         saveItem={props.data.saveItem} deleteItem={props.data.deleteItem} \n         lookups={props.data.lookups} setPageMessage={props.data.setPageMessage} />\n}\n\nexport default function NluExampleEditor(props) {\n    const {loadAll, deleteItem , items, findKeyBy, searchFilter, setSearchFilter, skillFilterValue, setSkillFilterValue, intentFilterValue, setIntentFilterValue, tagAllValue, setTagAllValue, skillAllValue, setSkillAllValue,  intentAllValue, setIntentAllValue, listRef, tagAll,untagAll, unskillAll, intentAll, resetSelection, selectAll,  skillSetAll, saveItemWrap, getItemSize, deleteAll, filteredItems, createEmptyItem} = useNluEditor('nlutool','examples','alldata', props.updateFunctions.updateLookups)\n    useEffect(() => {\n        loadAll()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n    \n    //useEffect(() => {\n        //if (importFrom) {\n            //var parsed = parseImportText(importFrom)\n            //setItems(parsed)\n            //props.setImportFrom('')\n        //}\n    //// eslint-disable-next-line react-hooks/exhaustive-deps\n    //},[props.importFrom])\n    \n\n    function renderEditor(props) {\n        // filter rendered list using callback \n       //var filteredItems = filter(function(item) {\n                //if (!searchFilter || searchFilter.length <=0 ) return true;\n                //const matchSearchFilter = item.example.indexOf(searchFilter) !== -1 \n                        //|| item.intent.indexOf(searchFilter) !== -1 \n                        //|| (item.tags && item.tags.indexOf(searchFilter) !== -1)\n                //return matchSearchFilter && skillFilterValue && item.skills && item.skills.indexOf(skillFilterValue) !== -1\n            //})\n            \n        if (filteredItems && filteredItems.length > 0) {\n            return <div>\n            <MatchesTallies items={items} filteredItems={filteredItems}/>\n             {props.lookups.selectedTally > 0 && <span style={{float:'right'}}> \n                 <WithSelectedDropDowns\n                  skillSetAll={skillSetAll} skillAllValue={skillAllValue}  setSkillAllValue={setSkillAllValue}  untagAll={untagAll} unskillAll={unskillAll} \n                     intentAll={intentAll} intentAllValue={intentAllValue} setIntentAllValue={setIntentAllValue}  \n                     tagAll={tagAll} tagAllValue={tagAllValue} setTagAllValue={setTagAllValue}  lookups={props.lookups}\n                 />\n                 \n                        \n                \n                 <Button style={{marginLeft:'1em'}} onClick={deleteAll} variant=\"danger\"  >Delete Selected</Button> \n               \n            </span> } \n               \n                <List\n                    ref={listRef}\n                    itemData={{items: filteredItems, saveItem: saveItemWrap, deleteItem, findKeyBy, lookups: props.lookups, setPageMessage: props.setPageMessage}}\n                    itemKey={index => index}  \n                    className=\"List\"\n                    height={700}\n                    itemCount={filteredItems.length}\n                    itemSize={getItemSize}\n                    width={'100%'}\n                  >{RenderRow}</List>\n            </div>\n        } else {\n            //{JSON.stringify(filteredItems)}\n            return <div >\n             \n                <div style={{textAlign:'center'}}>\n            <br/><b>No items</b><br/><br/>Upload <Link to=\"/sources\" ><Button>Sources</Button></Link> then <Link to=\"/import\" ><Button>Import</Button></Link>.</div></div>\n        }\n    }\n    \n     return <div>\n        <EditorSearchBar {...props} searchFilter={searchFilter} setSearchFilter={setSearchFilter} skillFilterValue={skillFilterValue} setSkillFilterValue={setSkillFilterValue} resetSelection={resetSelection} selectAll={selectAll}  createEmptyItem={createEmptyItem} intentFilterValue={intentFilterValue} setIntentFilterValue={setIntentFilterValue} untagAll={untagAll} unskillAll={unskillAll}  />\n         {renderEditor(props)}\n    </div>\n    \n}\n      \n\n\n\n\n","/* global window */\nimport React  from 'react';\nimport {Button, Navbar } from 'react-bootstrap'\nimport {Link} from 'react-router-dom'\nimport fireImage from '../images/singingman.svg'\nimport waitingImage from '../images/waiting.gif'\nimport ReactGA from 'react-ga';\n\n\nReactGA.initialize('UA-3712973-4');\n\nexport default function NavbarComponent(props) {\n    //console.log(props)\n    ReactGA.pageview(props.history.location.pathname);\n    var astyle={paddingLeft:'0.3em'}\n    const currentPage = props.history && props.history.location && props.history.location.pathname ? props.history.location.pathname : '/'\n    const pages = {\n        '/': {name: 'NLU Tool',show: false},\n        '/search': {name: 'Search',show: true},//link:'https://github.com/syntithenai/opennludata/wiki'\n        '/sources': {name: 'Sources',show: true},\n        '/import': {name: 'Import',show: true},\n        '/lists': {name: 'Entities',show: true},\n        '/utterances': {name: 'Utterances',show: true},\n        '/examples': {name: 'Intents',show: true},\n        '/skills': {name: 'Skills',show: true},\n        '/help': {name: 'Help',show: false},\n        \n    }\n    \n    const links = Object.keys(pages).map(function(link,k) {\n        const page = pages[link]\n        if (page.show) {\n            if (page.link) {\n                return <a key={k} style={astyle} href={page.link} ><Button variant='primary' >{page.name}</Button></a>                \n            } else {\n                return <Link key={k} style={astyle} to={link} ><Button variant={currentPage.indexOf(link) !== -1 ? 'success' : 'primary'}>{page.name}</Button></Link>\n            }\n        }\n        return null\n    })\n    \n    const helpButton = pages[currentPage] && pages[currentPage].helpComponent ? pages[currentPage].helpComponent : <Link to=\"/help\" ><Button>Help</Button></Link>\n    \n//        <Navbar.Text><Button><img src='/menu.svg' alt='menu' /></Button></Navbar.Text>\n\n    return <Navbar  bg=\"dark\" variant=\"dark\"  >\n        {props.message && <div style={{position:'fixed',top:5,left:window.innerWidth ? (window.innerWidth /2 - 40) : 100, border: '2px solid red', background: 'pink', padding: '0.5em', minWidth:'400px' ,borderRadius:'5px'}} >\n            <Button variant=\"danger\" size=\"sm\"  style={{float:'right', fontWeight: 'bold',borderRadius:'20px',marginLeft:'1em'}} onClick={function(e) {props.setPageMessage('')}}>X</Button>{props.message} \n        </div>}\n    \n        <img src={fireImage}  style={{height:'5em', marginRight:'0.4em'}} alt=\"logo\"/>\n        \n         \n        <div style={{width: '100%'}}>\n        {links}\n        </div>\n        \n        {props.message}\n        <Navbar.Text style={{position:'fixed', top:'2px', right:'2px'}} className=\"justify-content-end\" >{helpButton}</Navbar.Text>\n        <img src={waitingImage} alt='waiting' style={{position:'fixed', top:5, right:5, zIndex:99, display: props.waiting ? 'block' : 'none' }} />\n    </Navbar>\n}\n\n\n        //<Navbar.Text><Link to=\"/organise\" ><Button>Organise</Button></Link></Navbar.Text>\n        //<Navbar.Text><Link to=\"/skills\" ><Button>My Skills</Button></Link></Navbar.Text>\n        //<Navbar.Text><Link to=\"/search\" ><Button>Search Community</Button></Link></Navbar.Text>\n","/* global window */\nimport {Button,   Dropdown, ButtonGroup } from 'react-bootstrap'\nimport React from 'react';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport ReactTags from 'react-tag-autocomplete'\nimport useNluRow from './useNluRow'\nimport SuggestionComponent from './components/SuggestionComponent'\nimport checkImage from './images/check.svg'\nimport thumbdownImage from './images/thumb-down.svg'\nimport thumbupImage from './images/thumb-up.svg'\n\n\nexport default function NluImportRow(props) {\n     const  {item, splitNumber , style} = props;\n       const {    \n            intentTitle, setIntentTitle, selectionState, setSelectionState, newEntity, setNewEntity, tags, skills, reactTags, reactSkills, \n            onTagDelete, onTagAddition, onSkillDelete,onSkillAddition,  updateExampleContent, entityClicked, entityTypeChanged, intentChanged, entityDelete, selectItem,  deselectItem\n        } = useNluRow(props.item, props.saveItem, props.splitNumber, props.style, props.setPageMessage)\n                \n       var intentOptions = props.lookups.intentLookups && props.lookups.intentLookups.sort().map(function(intentKey,i) {\n          return <Dropdown.Item key={i} value={intentKey} onClick={function(e) {intentChanged(intentKey)}}  >{intentKey}</Dropdown.Item>\n       })\n       // ONE PER ENTITY FOR THIS EXAMPLE\n       var entitiesDropdowns = item && item.entities && item.entities.map(function(entity,i) {\n           var entityOptions = props.lookups.entityLookups.sort().map(function(entityKey,j) {\n              return <Dropdown.Item  key={j} value={entityKey} onClick={function(e) {entityTypeChanged(i,entityKey)}}  >{entityKey}</Dropdown.Item>\n           })\n           return<Dropdown style={{marginLeft:'0.2em'}} variant='info'  key={i}  as={ButtonGroup}>\n              <Dropdown.Toggle variant='info'  split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n              <Button variant='info'   size=\"sm\"  onClick={function(e) {entityClicked(i,entity.type)}} >\n              <b>{entity.type}</b> \n                -\n              {entity.value ? entity.value : 'Select Entity Type'}\n              </Button>\n              <Button variant=\"info\" size=\"sm\" onClick={function(e) {entityDelete(i,'')}} >X</Button>\n              <Dropdown.Menu>\n                  <form  style={{display:'inline'}}>\n                    <div className=\"form-group\">\n                      <input type=\"text\" className=\"form-control\" onChange={function(e) {entityTypeChanged(i,e.target.value)}}\n                    value={entity.type} />\n                    </div>\n                  </form>\n                  {entityOptions}\n              </Dropdown.Menu>\n            </Dropdown>\n       }) ;\n        //PLUS CREATE NEW WHEN TEXT IS SELECTED\n       if (selectionState  && selectionState.textSelection && selectionState.textSelection.length > 0 &&  selectionState.textSelectionFrom === splitNumber) {\n           var entityOptions =  props.lookups.entityLookups && props.lookups.entityLookups.sort().map(function(entityKey,j) {\n              return <Dropdown.Item key={j} value={entityKey} onClick={function(e) {entityTypeChanged(-1,entityKey)}}  >{entityKey}</Dropdown.Item>\n           })\n           entitiesDropdowns.push(<Dropdown key=\"new\" variant='success'  as={ButtonGroup}>\n\n          <Dropdown.Toggle variant='success'  split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button  variant='success' size=\"sm\" >New Entity</Button>\n\n          <Dropdown.Menu>\n           <form style={{display:'inline'}} onSubmit={function(e) {e.preventDefault(); entityTypeChanged(-1,newEntity)}}>\n                <div className=\"form-group\">\n                  <input type=\"text\" className=\"form-control\" onChange={function(e) {setNewEntity(e.target.value)}}\n                value={newEntity} />\n                </div>\n              </form>\n              {entityOptions}\n          </Dropdown.Menu>\n        </Dropdown>)\n       }\n       //var buttonImageStyle={color:'white', height:'2em'}\n       return item && <div style={style} className={splitNumber % 2 ? 'ListItemOdd' : 'ListItemEven'}>\n               <div style={{position:'relative', width: '100%', textAlign:'left',  borderTop: '2px solid black'}}>\n                  \n                   {!item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"secondary\" onClick={function() {selectItem(splitNumber)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Select\" /></Button>}\n                  {item.isSelected && <Button style={{float: 'left'}} size=\"lg\" variant=\"success\" onClick={function() {deselectItem(splitNumber)}} ><img style={{height:'1em'}} src={checkImage} alt=\"Deselect\" /></Button>}\n                  \n                  {item.intent && <Button  style={{float:'right', marginLeft:'0.2em'}}  variant=\"success\"  onClick={function() {props.saveNlu(splitNumber)}} ><img src={thumbupImage} alt=\"Save\" /> Save</Button>}\n                  {!item && <Button   style={{float:'right', marginLeft:'0.2em'}} variant=\"secondary\" ><img src={thumbupImage} alt=\"Save\" /> Import</Button>} \n                  <Button  variant=\"danger\" style={{float:'right'}} onClick={function(e) {props.deleteItem(splitNumber,(item.id ? item.id : ''))}} ><img src={thumbdownImage} alt=\"Delete\" /> Delete</Button>\n                  \n                 \n                  <Dropdown  style={{float:'left'}} as={ButtonGroup}>\n                  <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n                  <Button   size=\"sm\" >{item.intent ? item.intent.toString() : 'Select Intent'} </Button>\n                  <Dropdown.Menu>\n                   <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault(); intentChanged(intentTitle)}}>\n                        <div className=\"form-group\">\n                          <input type=\"text\" className=\"form-control\" value={intentTitle} onChange={function(e) {setIntentTitle(e.target.value)}}\n                         />\n                        </div>\n                      </form>\n                      {intentOptions}\n                  </Dropdown.Menu>\n                  </Dropdown>\n                  <span style={{float:'left'}}>{entitiesDropdowns}</span>\n                 \n                  \n                  <div style={{float:'left'}}>\n                   <ReactTags\n                    placeholderText=\"Add to skill\"\n                    minQueryLength={0}\n                    maxSuggestionsLength={50}\n                    autoresize={false}\n                    allowNew={true}\n                    ref={reactSkills}\n                    tags={skills}\n                    suggestionComponent={SuggestionComponent}\n                    suggestions={props.lookups.skillLookups.map(function(tag,i) {return {id: i, name: tag}})}\n                    onDelete={onSkillDelete}\n                    onAddition={onSkillAddition} /> \n                    </div>\n                    \n                  <div style={{float:'left'}}>\n                   <ReactTags\n                    placeholderText=\"Add new tag\"\n                    minQueryLength={0}\n                    maxSuggestionsLength={50}\n                    autoresize={false}\n                    allowNew={true}\n                    ref={reactTags}\n                    tags={tags}\n                    suggestionComponent={SuggestionComponent}\n                    suggestions={props.lookups.tagLookups.map(function(tag,i) {return {id: i, name: tag}})}\n                    onDelete={onTagDelete}\n                    onAddition={onTagAddition} /> \n                    </div>\n                  \n                  <input  \n                 \n                   onFocus={ function(e) {\n                       setSelectionState(null)\n                    }}\n                   onSelect={ function(e) {\n                     var textSelection = window.getSelection().toString(); \n                     setSelectionState({textSelection:textSelection, textSelectionFrom: splitNumber, startTextSelection: e.target.selectionStart, endTextSelection: e.target.selectionEnd})\n                  }}  \n                   type='text'   style={{clear:'both', width:'80%'}}  value={item.example} id={\"example_input_\"+splitNumber} \n                   onChange={function(e) { updateExampleContent(e.target.value)}} />\n                  \n                  \n                \n                \n            </div>\n      </div>\n}\n","import React, {useEffect} from 'react';\nimport './App.css';\nimport {Link} from 'react-router-dom'\nimport {Button} from 'react-bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { VariableSizeList as List } from 'react-window';\nimport NluImportRow from './NluImportRow'\nimport EditorSearchBar from './components/EditorSearchBar'\nimport useNluEditor from './useNluEditor'\nimport TagAllDropDown from './components/TagAllDropDown'\nimport IntentAllDropDown from './components/IntentAllDropDown'\nimport SkillAllDropDown from './components/SkillAllDropDown'\nimport arrowthickleftImage from './images/arrow-thick-left.svg'\nimport arrowthickrightImage from './images/arrow-thick-right.svg'\n\n\nconst RenderRow = function(props) {\n    const index = props.index\n    const style = props.style\n    const item = props.data.items[index]\n    //console.log(['USENLUROW rr',index])\n    return <NluImportRow  \n         item={item}  splitNumber={index} style={style}\n         saveItem={props.data.saveItem} deleteItem={props.data.deleteItem} saveNlu={props.data.saveNlu}\n         lookups={props.data.lookups}  setPageMessage={props.data.setPageMessage} />\n}\n\n\nexport default function NluImportEditor(props) {\n    \n    //const examplesDB = useDBSingleKey('nlutool','examples','alldata')\n    const {loadAll, deleteItem ,items,  findKeyBy, searchFilter, setSearchFilter, tagAllValue, setTagAllValue, skillAllValue, setSkillAllValue, skillFilterValue, setSkillFilterValue, intentFilterValue, setIntentFilterValue, intentAllValue, setIntentAllValue, listRef, tagAll, untagAll, unskillAll, intentAll, resetSelection, selectAll,  skillSetAll, saveItemWrap, getItemSize, deleteAll, saveAll, saveNlu, filteredItems, createEmptyItem} = useNluEditor('nlutool','import','alldata', props.updateFunctions.updateLookups)\n    useEffect(() => {\n        loadAll()\n        //examplesDB.loadAll()\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n    \n    //useEffect(() => {\n        //if (importFrom) {\n            //var parsed = parseImportText(importFrom)\n            //setItems(parsed)\n            //props.setImportFrom('')\n        //}\n    //// eslint-disable-next-line react-hooks/exhaustive-deps\n    //},[props.importFrom])\n    \n    \n    \n   \n    \n    function renderEditor(props) {\n        // filter rendered list using callback \n       \n         //filteredItems.sort(function(oldItem,item) {console.log( ['SORT',oldItem.example,item.example]); return (item.example && oldItem.example && item.example.trim().toLowerCase <= oldItem.example.trim().toLowerCase) })\n           \n        if (filteredItems && filteredItems.length > 0) {\n            \n           //var skillOptions = props.lookups.skillLookups && props.lookups.skillLookups.sort().map(function(skillKey,i) {\n                  //return <Dropdown.Item key={i} value={skillKey} onClick={function(e) {setSkillAllValue(skillKey); skillSetAll(skillKey)}}  >{skillKey}</Dropdown.Item>\n            //})\n            \n            //var tagOptions = props.lookups.tagLookups && props.lookups.tagLookups.sort().map(function(tagKey,i) {\n              //return <Dropdown.Item key={i} value={tagKey} onClick={function(e) {setTagAllValue(tagKey); tagAll(tagKey)}}  >{tagKey}</Dropdown.Item>\n           //})\n           //var intentOptions = props.lookups.intentLookups && props.lookups.intentLookups.sort().map(function(intentKey,i) {\n              //return <Dropdown.Item key={i} value={intentKey} onClick={function(e) {setIntentAllValue(intentKey);intentAll(intentKey)}}  >{intentKey}</Dropdown.Item>\n           //})\n            return <div>\n             <span style={{float:'left', fontWeight:'bold'}} >&nbsp;{filteredItems.length}/{items.length} matches </span>\n             {props.lookups.selectedTally > 0 && <span style={{float:'right'}}> \n                <span>With {props.lookups.selectedTally} selected&nbsp;\n              <SkillAllDropDown skillSetAll={skillSetAll} skillAllValue={skillAllValue}  setSkillAllValue={setSkillAllValue}  lookups={props.lookups}  untagAll={untagAll} unskillAll={unskillAll}/>\n                <IntentAllDropDown intentAll={intentAll} intentAllValue={intentAllValue} setIntentAllValue={setIntentAllValue}  lookups={props.lookups}  untagAll={untagAll} unskillAll={unskillAll}/>\n                <TagAllDropDown tagAll={tagAll} tagAllValue={tagAllValue} setTagAllValue={setTagAllValue}  lookups={props.lookups}  untagAll={untagAll} unskillAll={unskillAll}/>\n                \n                </span>\n                <Button style={{marginLeft:'1em'}} onClick={saveAll} variant=\"success\"  >Save Selected</Button> \n                <Button style={{marginLeft:'1em'}} onClick={deleteAll} variant=\"danger\"  >Delete Selected</Button> \n                \n            </span> } \n                \n              \n                \n                <List\n                    ref={listRef}\n                    itemData={{items: filteredItems, saveItem: saveItemWrap, saveNlu, deleteItem, findKeyBy, lookups:props.lookups, setPageMessage: props.setPageMessage}}\n                    itemKey={index => index}  \n                    className=\"List\"\n                    height={700}\n                    itemCount={filteredItems.length}\n                    itemSize={getItemSize}\n                    width={'100%'}\n                  >{RenderRow}</List>\n            </div>\n            \n            \n        } else {\n            //{JSON.stringify(filteredItems)}\n            return <div >\n                <div style={{textAlign:'center'}}>\n            <br/><b>No more items to import</b><br/><br/>Open <Link to=\"/sources\" ><Button><img style={{height:'1em', paddingRight:'1em'}}  src={arrowthickleftImage} alt=\"Sources\" />Sources</Button></Link> to create more or <Link to=\"/examples\" ><Button>Organise<img src={arrowthickrightImage} alt=\"Intents\" style={{height:'1em', paddingLeft:'1em'}}  /></Button></Link> what you have imported into skills.\n            </div></div>\n        }\n    }\n    // {JSON.stringify(items)}\n    return <div>\n         \n        <EditorSearchBar {...props} searchFilter={searchFilter} setSearchFilter={setSearchFilter} skillFilterValue={skillFilterValue} setSkillFilterValue={setSkillFilterValue} resetSelection={resetSelection} selectAll={selectAll} createEmptyItem={createEmptyItem} untagAll={untagAll} unskillAll={unskillAll} intentFilterValue={intentFilterValue} setIntentFilterValue={setIntentFilterValue}  />\n         {renderEditor(props)}\n    </div>\n    \n    \n}\n      \n\n","import JSZip from 'jszip'\nimport { saveAs } from 'file-saver';\n\nfunction createZip(zipStructure) {\n    var zip = new JSZip();\n     console.log(['ZIP',zipStructure])\n    function recurseZipStructure(zipStructure, path) {\n        if (Array.isArray(zipStructure.files)) {\n            zipStructure.files.map(function(file) {\n                console.log(['ZIP file',file])\n                var options = (file.base64 && file.base64.length > 0) ? {base64: true} : {} \n                if (file.name && file.name.length > 0 && file.content) zip.file(path+\"/\"+file.name,file.content, options);\n                return null\n            })\n        }\n        if (Array.isArray(zipStructure.folders)) {\n            zipStructure.folders.map(function(folder) {\n                console.log(['ZIP folder',folder])\n                if (folder.name && folder.name.length > 0) zip.folder(folder.name);\n                if ((folder.files && folder.files.length > 0) || (folder.folders && folder.folders.length > 0)) {\n                    recurseZipStructure(folder, path+\"/\"+folder.name)\n                }\n                return null\n            })\n        }\n         \n    } \n     \n    recurseZipStructure(zipStructure,'')\n     \n    return new Promise(function(resolve,reject) {\n        zip.generateAsync({type:\"blob\"}).then(function(content) {\n            resolve(content)\n        })\n    })\n}\n\nexport {createZip}\n","import { generateObjectId, uniquifyArray, replaceEntities } from '../utils';\nimport {createZip} from './createZip'\nimport localforage from 'localforage'\n\nasync function exportJOVO(skill) {\n     return new Promise(function(resolve,reject) {\n         var listsStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"lists\",\n         });\n         listsStorage.getItem('alldata').then(function(lists) {\n             var jovo={invocation: skill.invocation}\n             //console.log(['JVO export',skill])\n             var intents = {}\n             var entityTypes={}\n             if (skill.intents) {\n                 Object.keys(skill.intents).map(function(intentKey) {\n                     var examples = skill.intents[intentKey]\n                     if (!intents[intentKey])  intents[intentKey] = {name:intentKey, phrases:[], inputs: []}\n                     var inputs = {}\n                     if (Array.isArray(examples)) {\n                         examples.map(function(example) {\n                            intents[intentKey].phrases.push(replaceEntities(example.example,example.entities))\n                            if (Array.isArray(example.entities)) {\n                                example.entities.map(function(entity) {\n                                   inputs[entity.type] = true  \n                                   if (!Array.isArray(entityTypes[entity.type])) entityTypes[entity.type] = []\n                                   entityTypes[entity.type].push(entity.value)\n                                })\n                            }\n                         })\n                     }\n                     intents[intentKey].phrases = uniquifyArray(intents[intentKey].phrases).sort()\n                     intents[intentKey].inputs = Object.keys(inputs).map(function(entityType) { \n                         var entityTypeName = entityType+\"Type\"\n                         if (skill.entities && skill.entities[entityType] && (skill.entities[entityType].googleType || skill.entities[entityType].alexaType)) {\n                             entityTypeName ={}\n                             if (skill.entities[entityType].googleType) entityTypeName.dialogflow = skill.entities[entityType].googleType\n                             if (skill.entities[entityType].alexaType) entityTypeName.alexa = skill.entities[entityType].alexaType\n                         } \n                         return {name: entityType, type: entityTypeName} \n                    })\n                 }) \n             }\n             jovo.intents = Object.values(intents)\n             //console.log(['skill lists',entityTypes, skill.lists])\n             //var usedLists = {}\n             //if (skill.entities) {\n                //Object.keys(skill.entities).map(function(entity,i) {\n                    //if (skill.entities[entity] && Array.isArray(skill.entities[entity].lists)) {\n                        //skill.entities[entity].lists.map(function(list) {\n                           //usedLists[list] = true  \n                        //})\n                    //}\n                //})\n             //}\n            \n             //lists.map(function(item) {\n                 //console.log(['LIST',item])\n                 //Object.keys(usedLists).map(function(listKey) {\n                    //console.log([listKey,item.tags.indexOf(listKey) !== -1, item.tags])\n                    //if (item && item.tags && item.tags.indexOf(listKey) !== -1) {\n                        //console.log('list item used ')\n                        //entityTypes[listKey].push(item.value)\n                    //}\n                //})\n            //})\n            var synonyms = {}\n            var synonymsIndex = {}\n            lists.map(function(item) {\n                 if (item.value && item.value.trim().length > 0) {\n                    if (item.synonym) {\n                        if (!Array.isArray(synonymsIndex[item.synonym])) synonymsIndex[item.synonym] = [] \n                        synonyms[item.value] = item.synonym\n                        synonymsIndex[item.synonym].push(item.value)\n                    }\n                    Object.keys(entityTypes).map(function(entityType) {\n                        if (skill.entities && skill.entities[entityType]  && skill.entities[entityType].lists)  {\n                            skill.entities[entityType].lists.map(function(entityExtrasList) {\n                                //console.log(['li',entityExtrasList,item.tags,item.tags.indexOf(entityExtrasList)])\n                                if (item && item.tags && item.tags.indexOf(entityExtrasList) !== -1) {\n                                    //console.log(['USE ENTITY',entityType, entityExtrasList,lists[entityExtrasList]])\n                                    entityTypes[entityType].push(item.value)\n                               }\n                            })\n                        }\n                    })\n                }\n            })\n             \n            console.log(['synonyms',synonyms, synonymsIndex])\n        \n            jovo.inputTypes = Object.keys(entityTypes).map(function(entityType) {\n            //console.log(['JOVOEX',lists,entityType])\n                const values = []\n                uniquifyArray(entityTypes[entityType]).sort().map(function(value) {\n                    if (!synonyms[value]) {\n                        if (value && value.trim().length > 0) values.push( {value:value})\n                    }\n                    return null\n                })\n                Object.keys(synonymsIndex).map(function(synonym) {\n                    if (synonym && synonym.trim().length > 0) values.push({value:synonym, synonyms:synonymsIndex[synonym] })\n                    return null\n                })\n                return {name: entityType+\"Type\", values:values}  \n            })\n                    \n            \n            \n            console.log(['inputtypes',jovo.inputTypes])\n            //console.log(['JVO final',jovo])\n            const content = JSON.stringify(jovo)\n             const final =  {folders:[{'name':'models', files:[{name:'en-US.json', content: content}] }]   }\n             //console.log(['JVO final',final])\n             resolve(final)\n              \n        })\n    })\n}\n\n\nasync function exportJOVOZip(skill) {\n    return createZip(await exportJOVO(skill))\n}\n\nexport {exportJOVO, exportJOVOZip}\n","import { generateObjectId, uniquifyArray, replaceEntities } from '../utils';\nimport {createZip} from './createZip'\nimport localforage from 'localforage'\n\n\n\n\nasync function exportMycroft(skill) {\n    return new Promise(function(resolve,reject) {\n        var listsStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"lists\",\n         });\n         var modelFiles=[]\n         listsStorage.getItem('alldata').then(function(lists) {\n            //var usedLists = {}\n            //if (skill.entities) {\n                //Object.keys(skill.entities).map(function(entity,i) {\n                    //if (skill.entities[entity] && Array.isArray(skill.entities[entity].lists)) {\n                        //skill.entities[entity].lists.map(function(list) {\n                           //usedLists[list] = true  \n                        //})\n                    //}\n                    //return null\n                //})\n            //}\n           \n            \n            \n           \n             // intents - \n             // collate examples, one file per intent\n             var intents={}\n             if (skill.intents) {\n                 Object.keys(skill.intents).map(function(intentKey) {\n                     var examples = skill.intents[intentKey]\n                     if (!Array.isArray(intents[intentKey]))  intents[intentKey] = []\n                     if (Array.isArray(examples)) {\n                         examples.map(function(example) {\n                            intents[intentKey].push(replaceEntities(example.example,example.entities))\n                         })\n                     }\n                     intents[intentKey] = uniquifyArray(intents[intentKey]).sort()\n                 }) \n             }\n             // one per file\n             // entities - merge values and lists values , one entity per file\n             var entities={}\n             if (skill.entities) { \n                 Object.keys(skill.entities).map(function(entityKey) {\n                     var combinedEntities = []\n                     var entity = skill.entities[entityKey]\n                     if (entity.values) {\n                         combinedEntities = combinedEntities.concat(entity.values)\n                     } \n                     if (entity.lists) {\n                         //var skillLists = {}\n                         //Object.keys(usedLists).map(function(listKey) {\n                          //skillLists[listKey] = []  \n                          //return null\n                        //})\n                       \n                       console.log(['add from lists',entity.lists])\n                        lists.map(function(item) {\n                            entity.lists.map(function(listKey) {\n                                console.log([listKey,item.tags.indexOf(listKey) !== -1, item.tags])\n                                if (item && item.tags && item.tags.indexOf(listKey) !== -1) {\n                                    console.log('list item used ')\n                                    combinedEntities.push(item.value)\n                                }\n                            })\n                        })\n                     }\n                     entities[entityKey] = uniquifyArray(combinedEntities).sort()\n                 }) \n             }\n             \n             Object.keys(intents).map(function(intent) {\n                 modelFiles.push({name:intent+'.intent',content: intents[intent].join(\"\\n\")})\n                 return null\n             })\n             Object.keys(entities).map(function(entity) {\n                 modelFiles.push({name: entity+'.entity',content: entities[entity].join(\"\\n\")})\n                 return null\n             })\n              resolve( modelFiles)\n        })\n    })\n}\n\n\nasync function exportMycroftZip(skill) {\n    const files = await exportMycroft(skill)\n    return createZip({files:files})\n}\n\nexport {exportMycroft, exportMycroftZip}\n\n","const RASATemplates = {\n    config: `\nlanguage: en\npipeline:\n  - name: WhitespaceTokenizer\n  - name: RegexFeaturizer\n  - name: LexicalSyntacticFeaturizer\n  - name: CountVectorsFeaturizer\n  - name: CountVectorsFeaturizer\n    analyzer: \"char_wb\"\n    min_ngram: 1\n    max_ngram: 4\n  - name: ResponseSelector\n    epochs: 100\n  - name: DIETClassifier\n    epochs: 100\n  - name: EntitySynonymMapper\n\npolicies:\n  - name: FormPolicy\n  - name: MemoizationPolicy\n  - name: TEDPolicy\n    max_history: 5\n    epochs: 100\n  - name: MappingPolicy\n  - name: \"FallbackPolicy\"\n    nlu_threshold: 0.5\n    core_threshold: 0.3\n    fallback_action_name: \"action_default_fallback\"\n    `,\n    credentials: `\n# This file contains the credentials for the voice & chat platforms\n# which your bot is using.\n# https://rasa.com/docs/rasa/user-guide/messaging-and-voice-channels/\n\nrest:\n#  # you don't need to provide anything here - this channel doesn't\n#  # require any credentials\n\n\n#facebook:\n#  verify: \"<verify>\"\n#  secret: \"<your secret>\"\n#  page-access-token: \"<your page access token>\"\n\n#slack:\n#  slack_token: \"<your slack token>\"\n#  slack_channel: \"<the slack channel>\"\n\n#socketio:\n#  user_message_evt: <event name for user message>\n#  bot_message_evt: <event name for but messages>\n#  session_persistence: <true/false>\n\n#mattermost:\n#  url: \"https://<mattermost instance>/api/v4\"\n#  token: \"<bot token>\"\n#  webhook_url: \"<callback URL>\"\n\n#rasa:\n  #url: \"http://localhost:5002/api\"\n \n    `,\n    endpoint: `\n#action_endpoint:\n#  url: http://localhost:5055/webhook\n\n    `,\n    actions:  `\n\"\"\" RASA actions \"\"\"\n \n    `,\n    single_action: function(className, actionName) {\n        return `\n\"\"\" RASA action \"\"\"\nimport sys\nimport logging\nfrom typing import Any, Text, Dict, List\nfrom datetime import datetime\nfrom rasa_sdk import Action, Tracker\nfrom rasa_sdk.executor import CollectingDispatcher\nfrom rasa_sdk.events import SlotSet, FollowupAction\n\nclass `+className+`(Action):\n    def name(self) -> Text:\n        return \"`+actionName+`\"\n    def run(self, dispatcher: CollectingDispatcher,\n            tracker: Tracker,\n            domain: Dict[Text, Any]) -> List[Dict[Text, Any]]:\n        var slotsets = []\n        logger = logging.getLogger(__name__)    \n        logger.debug('Action `+actionName+`')\n        return [SlotSet(\"hermod_force_end\", \"true\"),SlotSet(\"hermod_force_continue\", None)] \n        \n        dispatcher.utter_message(text=\"Action `+actionName+`\")\n        return slotsets\n    \n    `\n    }\n    ,\n    domain: `\nsession_config:\n  carry_over_slots_to_new_session: true\n  session_expiration_time: 5    \n\n`   \n}\nexport default RASATemplates\n","import {  uniquifyArray, snakeToCamelCase, camelToSnakeCase, toSnakeCase} from '../utils';\nimport {createZip} from './createZip'\nimport localforage from 'localforage'\nimport RASATemplates from './RASATemplates'\n\n\n function generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContent, credentialsContent, endpointsContent, actionFiles) {\n    var folderTree = {\n        files:[\n            {name:'actions.py',content:actionsContent},\n            {name:'config.yml',content:configContent},\n            {name:'domain.yml',content:domainContent},\n            {name:'credentials.yml',content:credentialsContent},\n            {name:'endpoints.yml',content:endpointsContent}\n        ], \n        folders:[\n            {name:'actions', files:actionFiles}, \n            {name:'data', \n                files:[{name:'nlu.md', content: nluContent}], \n                folders:[{name:'lookups', files:fileLookups}]\n            }\n        ]\n    }\n    console.log(['TREE GEN',folderTree])\n    return folderTree\n}\n\n// just the models subfolder\n// one file per intent\n// one file per entity\nfunction exportRASA(skill) {\n    //\"rasa_nlu_data\": {\n        //\"common_examples\": [],\n        //\"regex_features\" : [],\n        //\"lookup_tables\"  : [],\n        //\"entity_synonyms\": []\n    //}\n    //{\"rasa_nlu_data\":{\"regex_features\":[],\"entity_synonyms\":[{\"synonyms\":[\"biggest city\",\"capital city\"],\"value\":\"capital\"}],\"common_examples\":[{\"text\":\"sounds good sounds good thank you\",\"intent\":\"affirmative\",\"entities\":[]},\n      //{\"text\":\"what is the use of a actinometer\",\"intent\":\"ask_attribute\",\"entities\":[{\"end\":15,\"entity\":\"attribute\",\"start\":12,\"value\":\"use\"},{\"end\":32,\"entity\":\"thing\",\"start\":21,\"value\":\"actinometer\"}]}\n    console.log(['EXPPORT RASA',skill])\n    return new Promise(function(resolve,reject) {\n         var listsStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"lists\",\n         });\n         var utterancesStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"utterances\",\n         });\n        \n        //resolve({files:[{name:'nlu.md', content: content}]})\n         \n         // LOAD ENTITY LISTS\n         listsStorage.getItem('alldata').then(function(lists) {\n            \n            console.log(['LISTS',lists])\n            \n            // for each entity, collate entity values and lists values\n            var entityLists = {}\n            if (skill.entities) {\n                Object.keys(skill.entities).map(function(entity,i) {\n                    const entityValue = skill.entities[entity]\n                    // values from examples\n                    if (entityValue && entityValue.values) {\n                        entityLists[entity] = entityValue.values\n                    } \n                    // values from tags\n                    if (skill.entities[entity] && Array.isArray(skill.entities[entity].lists)) {\n                        lists.map(function(listItem,listItemIndex) {\n                            skill.entities[entity].lists.map(function(entityList) {\n                               if (listItem.tags && listItem.tags.indexOf(entityList) !== -1) {\n                                   entityLists[entity].push(listItem.value)\n                               }\n                               return null\n                            })\n                            return null\n                        })\n                    }\n                    return null\n                })\n            }\n             console.log(['LISTS2',entityLists])\n             // lookup lists\n             var fileLookups=[]\n             Object.keys(entityLists).map(function(entity) {\n                 var values = entityLists[entity]\n                 fileLookups.push({name:entity+\".txt\",content:values.join(\"\\n\")})\n             })\n             \n            \n            // collate synonyms\n            //var synonyms = {}\n            var synonymsIndex = {}\n            lists.map(function(item) {\n                 if (item.value && item.value.trim().length > 0) {\n                    if (item.synonym) {\n                        if (!Array.isArray(synonymsIndex[item.synonym])) synonymsIndex[item.synonym] = [] \n                        //synonyms[item.value] = item.synonym\n                        synonymsIndex[item.synonym].push(item.value)\n                    }\n                }\n                return null\n            })\n            console.log(['synonyms',synonymsIndex])\n            var synonymsOut = []\n            Object.keys(synonymsIndex).map(function(synonym) {\n                synonymsOut.push('## synonym:'+synonym)\n                uniquifyArray(synonymsIndex[synonym]).sort().map(function(item) {\n                    // TODO CONVERT TO RASA MD EXAMPLE WITH ENTITIES\n                    synonymsOut.push('- '+item)\n                    return null\n                }) \n                synonymsOut.push(\"\\n\")\n                return null\n            })\n            console.log(['synonyms OUT',synonymsOut])\n            \n            // COMMON EXAMPLES  \n            var nluOut=[]\n            if (skill.intents) {\n                console.log(['have intents',skill.intents])\n                Object.keys(skill.intents).map(function(intentKey) {\n                    console.log('have intent '+intentKey)\n                    const intent = skill.intents[intentKey]\n                    nluOut.push('## intent:'+intentKey)\n                    uniquifyArray(intent).sort().map(function(intentItem) {\n                        // TODO CONVERT TO RASA MD EXAMPLE WITH ENTITIES\n                        nluOut.push('- todo ENTITIES '+intentItem.example)\n                        return null\n                    }) \n                    nluOut.push(\"\\n\")\n                    return null\n                })\n            }\n            var nluContent = nluOut.join(\"\\n\")+\"\\n\"+synonymsOut.join(\"\\n\")\n            \n            // CONSTANTS\n            var configContent = RASATemplates.config\n            var domainContent = ''\n            var credentialsContent = RASATemplates.credentials\n            var endpointsContent = RASATemplates.endpoint\n            \n            // RASA ACTIONS\n            var actionsContent = RASATemplates.actions\n            var domainActions = []\n            \n            var actionFiles = []\n            if (Array.isArray(skill.rasaActions)) {\n                skill.rasaActions.map(function(action) {\n                    if (action && action.trim().length > 0) {\n                        var string = snakeToCamelCase(toSnakeCase(camelToSnakeCase(action)))\n                        var snake = camelToSnakeCase(string)+'_action'\n                        domainActions.push(snake)\n                        var name = string && string.trim().length > 0 ? string[0].toUpperCase() + string.substring(1) : ''\n                        actionFiles.push({name:name+'Action.py', content:RASATemplates.single_action(name+'Action',snake)})\n                        actionsContent+=\"\\n import \"+name+'Action.py'\n                    }\n                    return null\n                })\n            }\n            console.log(['action files',domainEntities, domainIntents, domainSlots, domainSlotsMeta])\n            var domainEntities = skill.entities ? Object.keys(skill.entities) : []\n            var domainIntents = skill.intents ? Object.keys(skill.intents) : []\n            var domainSlots = skill.slots ?  Object.keys(skill.slots) : (skill.entities ? Object.keys(skill.entities) : [])\n            var domainSlotsMeta = {}\n            domainSlots.map(function(slot) {\n               domainSlotsMeta[slot] = {\n                   type: skill.slots && skill.slots[slot] &&  skill.slots[slot].slotType ? skill.slots[slot].slotType : 'unfeaturized'\n                }\n               return null\n            })\n            console.log(['DOMAIN',domainEntities, domainIntents, domainSlots, domainSlotsMeta])\n            \n            var domainContentParts=[]\n            if (domainIntents.length > 0) {\n                domainContentParts.push(\"intents:\")\n                domainIntents.map(function(intent) {\n                    domainContentParts.push(\"- \"+intent+\":\")\n                    // TODO\n                    // domainContentParts.push(\"  use_entities:\\n\")\n                    // domainContentParts.push(\"  - \"+entityForIntent)\n                    return null\n                })\n                domainContentParts.push(\"\\n\")\n            }\n            \n            if (domainEntities.length > 0) {\n                domainContentParts.push(\"entities:\")\n                domainEntities.map(function(entity) {\n                    domainContentParts.push(\"- \"+entity+\":\")\n                    return null\n                })\n                domainContentParts.push(\"\\n\")\n            }\n            if (domainSlots.length > 0) {\n                domainContentParts.push(\"slots:\")\n                domainSlots.map(function(slot,i) {\n                    domainContentParts.push(\"  \"+slot+\":\")\n                    domainContentParts.push(\"    type: \"+domainSlotsMeta[slot].type)\n                    return null\n                })\n                domainContentParts.push(\"\\n\")\n            }\n            \n            // UTTERANCES\n            var utterances = {}\n            if (skill.utterancesLists || skill.utterances) { \n                utterancesStorage.getItem('alldata').then(function(allUtterances) {\n                    if (Array.isArray(allUtterances)) {\n                        allUtterances.map(function(thisUtterance) {\n                            if (skill.utterances) { \n                                skill.utterances.map(function(listKey) {\n                                    if (thisUtterance.value === listKey) utterances[thisUtterance.value] = thisUtterance  \n                                    return null\n                                })\n                            }\n                            if (skill.utterancesLists) { \n                                skill.utterancesLists.map(function(listKey) {\n                                    if (thisUtterance.tags && thisUtterance.tags.indexOf(listKey) !== -1) utterances[thisUtterance.value] = thisUtterance  \n                                    return null\n                                })\n                                \n                            }\n                            return null\n                        })\n                        \n                         //fileLookups.push({name:toSnakeCase(utterance.value)+'.txt',content:''})\n                             \n                        \n                         // generate domainContent\n                         if (Object.keys(utterances).length > 0) {\n                             domainContentParts.push('responses:')\n                             Object.keys(utterances).map(function(utteranceKey) {\n                                    var utterance = utterances[utteranceKey]\n                                    domainContentParts.push('utter_'+toSnakeCase(utterance.value))\n                                    domainContentParts.push('- text: '+utterance.value)\n                                    if (utterance.synonyms && utterance.synonyms.length > 0) {\n                                        utterance.synonyms.map(function(synonym) {\n                                            domainContentParts.push('- text: '+synonym)\n                                            return null\n                                        })\n                                    } \n                                    return null\n                             })\n                         }\n                         resolve(generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContentParts.join(\"\\n\"), credentialsContent, endpointsContent, actionFiles) )\n                    } else {\n                        resolve(generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContentParts.join(\"\\n\"), credentialsContent, endpointsContent, actionFiles) )\n                    }\n                })\n               \n                \n            } else {\n                resolve(generateFolderTree(nluContent, fileLookups, actionsContent, configContent, domainContentParts.join(\"\\n\"), credentialsContent, endpointsContent, actionFiles) )\n            }\n        })\n        \n    })\n    \n}\n\n\nfunction exportRASAZip(skill) {\n    return new Promise(function(resolve,reject) {\n        exportRASA(skill).then(function(data) {\n            createZip(data).then(function(res) {\n                resolve(res)\n            })\n        })\n    })\n}\n\nexport {exportRASA, exportRASAZip}\n","import {exportJOVOZip} from './exportJOVO'\nimport {exportJSONZip} from './exportJSON'\nimport {exportMycroftZip} from './exportMycroft'\nimport {exportRASAZip} from './exportRASA'\nimport {exportRASAMDZip} from './exportRASAMD'\nimport {exportRASAJSONZip} from './exportRASAJSON'\n\nvar exportFormats = [\n        {name:'JSON',exportFunction:exportJSONZip},\n        {name:'JOVO',exportFunction:exportJOVOZip},\n        {name:'Mycroft',exportFunction:exportMycroftZip},\n        {name:'RASA',exportFunction:exportRASAZip},\n        {name:'RASA Markdown',exportFunction:exportRASAMDZip},\n        {name:'RASA JSON',exportFunction:exportRASAJSONZip}\n    ]\n\nexport default exportFormats\n\n","import { generateObjectId } from '../utils';\nimport {createZip} from './createZip'\nimport localforage from 'localforage'\n\nfunction exportJSON(skill) {\n    console.log(['EXPPORT JSON',skill])\n    return new Promise(function(resolve,reject) {\n         var listsStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"lists\",\n         });\n         var utterancesStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"utterances\",\n         });\n         listsStorage.getItem('alldata').then(function(lists) {\n             console.log(['LISTS',lists])\n            var usedLists = {}\n            if (skill.entities) {\n                Object.keys(skill.entities).map(function(entity,i) {\n                    if (skill.entities[entity] && Array.isArray(skill.entities[entity].lists)) {\n                        skill.entities[entity].lists.map(function(list) {\n                           usedLists[list] = true  \n                        })\n                    }\n                })\n            }\n            var skillLists = {}\n            Object.keys(usedLists).map(function(listKey) {\n              skillLists[listKey] = []  \n            })\n            lists.map(function(item) {\n                Object.keys(usedLists).map(function(listKey) {\n                    //console.log([listKey,item.tags.indexOf(listKey) !== -1, item.tags])\n                    if (item && item.tags && item.tags.indexOf(listKey) !== -1) {\n                        //console.log('list item used ')\n                        skillLists[listKey].push(item.value)\n                    }\n                })\n            })\n            skill.lists = skillLists\n            \n            var utterances = {}\n            \n            console.log(['SHOULD ADD UTTS',skill.utterancesLists, skill.utterances])\n            if (skill.utterancesLists || skill.utterances) { \n                utterancesStorage.getItem('alldata').then(function(allUtterances) {\n                    if (Array.isArray(allUtterances)) {\n                        allUtterances.map(function(thisUtterance) {\n                            if (skill.utterances) { \n                                skill.utterances.map(function(listKey) {\n                                    if (thisUtterance.value === listKey) utterances[thisUtterance.value] = thisUtterance  \n                                })\n                                \n                            }\n                            if (skill.utterancesLists) { \n                                skill.utterancesLists.map(function(listKey) {\n                                    if (thisUtterance.tags && thisUtterance.tags.indexOf(listKey) !== -1) utterances[thisUtterance.value] = thisUtterance  \n                                })\n                                \n                            }\n                             \n                        })\n                         console.log(['SET UITTER GLOLBA',utterances])\n                         skill.utteranceLookups = utterances\n                         resolve(skill)\n                    } else {\n                         resolve(skill)\n                    }\n                })\n               \n                \n            } else {\n                 resolve(skill)\n            }\n            console.log(['resolve JSON',skill])\n           \n        })\n        \n    })\n}\n\nfunction exportJSONZip(skill) {\n    return new Promise(function(resolve,reject) {\n        exportJSON(skill).then(function(content) {\n            console.log(['content',skill])\n            const blob = new Blob([JSON.stringify(content, null, 2)], {type : 'application/json'});\n            resolve(blob)\n        })\n    })\n    //return createZip({files:[{name:'skill.json', content: await exportJSON(skill)}]})\n}\n\nexport {exportJSON, exportJSONZip}\n","import { generateObjectId , uniquifyArray} from '../utils';\nimport {createZip} from './createZip'\nimport localforage from 'localforage'\n\n// just the models subfolder\n// one file per intent\n// one file per entity\nfunction exportRASAMD(skill) {\n    return new Promise(function(resolve,reject) {\n        //var modelFiles=[]\n        //var cleanEntities = {}\n        //if (skill.entities) {\n            //skill.entities.map(function(entity,entityKey) {\n                //cleanEntities[entityKey] = entity\n                //return null\n            //})\n        //}\n        //var cleanIntents = {}\n        console.log(['EXP RASAS',skill])\n        var nluOut=[]\n        \n        //{\n    //\"rasa_nlu_data\": {\n        //\"common_examples\": [],\n        //\"regex_features\" : [],\n        //\"lookup_tables\"  : [],\n        //\"entity_synonyms\": []\n    //}\n//}\n//{\"rasa_nlu_data\":{\"regex_features\":[],\"entity_synonyms\":[{\"synonyms\":[\"biggest city\",\"capital city\"],\"value\":\"capital\"}],\"common_examples\":[{\"text\":\"sounds good sounds good thank you\",\"intent\":\"affirmative\",\"entities\":[]},\n      \n      \n      //{\"text\":\"what is the use of a actinometer\",\"intent\":\"ask_attribute\",\"entities\":[{\"end\":15,\"entity\":\"attribute\",\"start\":12,\"value\":\"use\"},{\"end\":32,\"entity\":\"thing\",\"start\":21,\"value\":\"actinometer\"}]}\n        \n        if (skill.intents) {\n            Object.keys(skill.intents).map(function(intentKey) {\n                const intent = skill.intents[intentKey]\n                nluOut.push('## intent:'+intentKey)\n                uniquifyArray(intent).sort().map(function(intentItem) {\n                    nluOut.push('- '+intentItem.example)\n                }) \n                nluOut.push(\"\\n\")\n                return null\n            })\n        }\n        //var cleanSkill = {title:skill.title, friendlyTitle: skill.friendlyTitle, intents: Object.values(cleanIntents) , entities: Object.values(cleanEntities)}\n        //var title = skill.friendlyTitle ? skill.friendlyTitle+'.json'  : (skill.title ? skill.title+'.json' : generateObjectId()+'.json') \n        \n//## intent:what_can_i_say\n//- what can i say\n//- help\n        //if (skill.i\n        var content = nluOut.join(\"\\n\")\n        //console.log(['EXPORT json',content])\n        resolve({files:[{name:'nlu.md', content: content}]})\n    })\n}\n\n\nfunction exportRASAMDZip(skill) {\n    return new Promise(function(resolve,reject) {\n        exportRASAMD(skill).then(function(data) {\n            createZip(data).then(function(res) {\n                resolve(res)\n            })\n        })\n    })\n}\n\nexport {exportRASAMD, exportRASAMDZip}\n","import { generateObjectId , uniquifyArray} from '../utils';\nimport {createZip} from './createZip'\nimport localforage from 'localforage'\n\n// just the models subfolder\n// one file per intent\n// one file per entity\nfunction exportRASAJSON(skill) {\n    return new Promise(function(resolve,reject) {\n        //var modelFiles=[]\n        //var cleanEntities = {}\n        //if (skill.entities) {\n            //skill.entities.map(function(entity,entityKey) {\n                //cleanEntities[entityKey] = entity\n                //return null\n            //})\n        //}\n        //var cleanIntents = {}\n        console.log(['EXP RASAS',skill])\n        var nluOut=[]\n        \n        //{\n    //\"rasa_nlu_data\": {\n        //\"common_examples\": [],\n        //\"regex_features\" : [],\n        //\"lookup_tables\"  : [],\n        //\"entity_synonyms\": []\n    //}\n//}\n//{\"rasa_nlu_data\":{\"regex_features\":[],\"entity_synonyms\":[{\"synonyms\":[\"biggest city\",\"capital city\"],\"value\":\"capital\"}],\"common_examples\":[{\"text\":\"sounds good sounds good thank you\",\"intent\":\"affirmative\",\"entities\":[]},\n      \n      \n      //{\"text\":\"what is the use of a actinometer\",\"intent\":\"ask_attribute\",\"entities\":[{\"end\":15,\"entity\":\"attribute\",\"start\":12,\"value\":\"use\"},{\"end\":32,\"entity\":\"thing\",\"start\":21,\"value\":\"actinometer\"}]}\n        \n        if (skill.intents) {\n            Object.keys(skill.intents).map(function(intentKey) {\n                const intent = skill.intents[intentKey]\n                nluOut.push('## intent:'+intentKey)\n                uniquifyArray(intent).sort().map(function(intentItem) {\n                    nluOut.push('- '+intentItem.example)\n                }) \n                nluOut.push(\"\\n\")\n                return null\n            })\n        }\n        //var cleanSkill = {title:skill.title, friendlyTitle: skill.friendlyTitle, intents: Object.values(cleanIntents) , entities: Object.values(cleanEntities)}\n        //var title = skill.friendlyTitle ? skill.friendlyTitle+'.json'  : (skill.title ? skill.title+'.json' : generateObjectId()+'.json') \n        \n//## intent:what_can_i_say\n//- what can i say\n//- help\n        //if (skill.i\n        var content = nluOut.join(\"\\n\")\n        //console.log(['EXPORT json',content])\n        resolve({files:[{name:'nlu.md', content: content}]})\n    })\n}\n\n\nfunction exportRASAJSONZip(skill) {\n    return new Promise(function(resolve,reject) {\n        exportRASAJSON(skill).then(function(data) {\n            createZip(data).then(function(res) {\n                resolve(res)\n            })\n        })\n    })\n}\n\nexport {exportRASAJSON, exportRASAJSONZip}\n","import React, {useState} from 'react';\nimport {Button, Dropdown, ButtonGroup, InputGroup} from 'react-bootstrap'\n\nconst DropDownComponent = function(props) {\n    \n    var [filterValue, setFilterValue] = useState(props.value ? props.value : '')\n    \n    return <Dropdown  as={ButtonGroup}>\n          <Dropdown.Toggle split  size=\"sm\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button   size=\"sm\" >{props.value ? props.title + \" - \" + props.value : props.title} </Button>\n          <Dropdown.Menu>\n               <form  style={{display:'inline'}} onSubmit={function(e) {e.preventDefault() ; }} >\n                <InputGroup>\n                  <input type=\"text\" className=\"form-control\" onChange={function(e) {setFilterValue(e.target.value)}}\n                value={filterValue} />\n                </InputGroup>\n                \n              </form>\n              {Array.isArray(props.options) && props.options.map(function(optionKey,i) {\n                  //console.log([optionKey, filterValue])\n                   //if (filterValue.trim().length == 0 || optionKey.toLowerCase().indexOf(filterValue.toLowerCase()) !== -1) {\n                       return <Dropdown.Item key={i} value={optionKey} onClick={function(e) {setFilterValue(optionKey); props.selectItem(optionKey)}}  >\n                            {optionKey}\n                        </Dropdown.Item>\n                    //} else return null;\n              })}\n          </Dropdown.Menu>\n      </Dropdown>\n\n}\nexport default DropDownComponent\n","import React, {useState, useEffect} from 'react';\nimport './App.css';\nimport {Link} from 'react-router-dom'\nimport {Button, Dropdown, Badge,ButtonGroup, ListGroup , Tabs, Tab} from 'react-bootstrap'\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport useNluEditor from './useNluEditor'\nimport exportFormats from './export/index'\nimport {exportJSON} from './export/exportJSON'\nimport useDB from './useDB'\nimport {generateObjectId, uniquifyArray, RASA, GoogleAssistant, Alexa} from './utils'\nimport ReactTags from 'react-tag-autocomplete'\nimport SuggestionComponent from './components/SuggestionComponent'\nimport DropDownComponent from './components/DropDownComponent'\nimport RASATemplates from './export/RASATemplates'\n//import ExportPage from './ExportPage'\nimport { saveAs } from 'file-saver';\n\n\nimport localforage from 'localforage'\n//const RenderRow = function(props) {\n    //const index = props.index\n    //const style = props.style\n    //const item = props.data.items[index]\n    //return <NluSkillsRow  \n         //item={item}  splitNumber={index} style={style}\n         //saveItem={props.data.saveItem} deleteItem={props.data.deleteItem} saveNlu={props.data.saveNlu}\n         //lookups={props.data.lookups}  setPageMessage={props.setPageMessage} />\n//}\n\n\nexport default  function NluSkillsEditor(props) {\n    const {items, loadAll, skillFilterValue, setSkillFilterValue, filteredItems} = useNluEditor('nlutool','examples','alldata', props.updateFunctions.updateLookups)\n    const [currentIntent, setCurrentIntent] = useState('')\n    const [invocation, setInvocation] = useState('')\n    const [entitiesForSkill, setEntitiesForSkill] = useState({})\n    const [listsForEntity, setListsForEntity] = useState({})\n    const [currentSkill, setCurrentSkill] = useState({id:generateObjectId(), invocation:'', title:skillFilterValue, entities:{}})\n    //const skillsManager = useDB('nlutool','skills')\n    const listsManager = useDB('nlutool','lists')\n    const [showExportDialog, setShowExportDialog] = useState(false)\n    const [collatedItems, setCollatedItems] = useState({})\n    const [collatedTags, setCollatedTags] = useState({})\n    const [collatedCounts, setCollatedCounts] = useState({})\n    const [newSlotValue, setNewSlotValue] = useState('')\n    var skillsStorage = localforage.createInstance({\n       name: \"nlutool\",\n       storeName   : \"skills\",\n     });\n    //const params = useParams()\n    //skillFilterValue = params.skillId;\n    //function setSkillFilterValueWrap(value) {\n        //setSkill\n        //props.history.push('/skills/'+value)\n    //}\n    //const {loadAll, saveItem, deleteItem , items, setItems, findKeyBy, filter} = \n    function loadSkill() {\n        if (skillFilterValue) {\n            //localforage.setItem('key', 'value', function (err) {\n              //// if err is non-null, we got an error\n              skillsStorage.getItem(skillFilterValue, function (err, skill) {\n                // if err is non-null, we got an error. otherwise, value is the value\n                if (err) throw new Error(err)\n                if (skill) {\n                    setCurrentSkill(skill)\n                    setInvocation(skill.invocation)\n                }\n              });\n            //});\n        } \n        \n    }\n    \n    // load all on init\n    useEffect(() => {\n        loadAll()\n        loadSkill()\n        listsManager.loadAll()\n        props.updateFunctions.updateUtterances()\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[])\n    \n    // load skill on change skillFilterValue\n    useEffect(() => {\n        loadSkill()\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[skillFilterValue])\n \n    // load list lookups\n    useEffect(() => {\n        if (listsManager.items.length > 0) { \n            //console.log(['UPD ITEMS',listsManager.items,listsManager.items[0]])\n            props.updateFunctions.updateLists(listsManager.items[0])\n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[listsManager.items])\n    \n    // collate entitiesForSkills from filtered example \n    useEffect(() => {\n        var entities = {}\n        // collate entities from filteredItems\n        if (Array.isArray(filteredItems)) {\n            filteredItems.map(function (item,itemKey) {\n              if (Array.isArray(item.entities)) {\n                  item.entities.map(function(entity,entityKey) {\n                     if (entity && entity.type && entity.type.length > 0) {\n                         if (typeof entities[entity.type] !== \"object\") entities[entity.type] = {}\n                         if (!Array.isArray(entities[entity.type].values )) entities[entity.type].values = []\n                         entities[entity.type].values.push(entity.value)\n                     }\n                     return null\n                  })\n              }\n              return null\n            })\n        }\n        // sort and uniquify\n        Object.keys(entities).map(function(entityName,entityKey) {\n           const entity = entities[entityName]\n           entity.values = uniquifyArray(entity.values).sort()\n           return null\n        })\n        setEntitiesForSkill(entities)\n        \n        // collate intents and tags from items\n         var newCollatedItems = collatedItems\n         var newCollatedCounts = collatedCounts\n         var newCollatedTags = {}\n         if (filteredItems) {\n             filteredItems.map(function(item) {\n                if (item.intent) {\n                    if (!newCollatedItems[item.intent]) newCollatedItems[item.intent]=[]\n                    newCollatedCounts[item.intent] =   (newCollatedCounts[item.intent] > 0) ? newCollatedCounts[item.intent] + 1 : 1;\n                    //if (collatedItems[item.intent].length < 300) {\n                        newCollatedItems[item.intent].push({example: item.example, entities: item.entities})\n                    //}\n                    \n                }\n                if (Array.isArray(item.tags)) {\n                    item.tags.map(function(tag) {\n                        newCollatedTags[tag] = true\n                    })\n                } \n               return null;  \n             })\n             setCollatedItems(newCollatedItems)\n             setCollatedCounts(newCollatedCounts)\n             setCollatedTags(newCollatedTags)\n             var newSkill = currentSkill;\n             if (!newSkill.intents) {\n                console.log(['UPDATE INTENTS WITH COLLATED ITEMS',collatedItems])\n                 newSkill.intents = collatedItems\n            }\n             newSkill.tags = Object.keys(collatedTags)\n             setCurrentSkill(newSkill)\n             //console.log(['UDPATE SKILL WITH INTENTS',currentSkill, collatedItems])\n             \n         }   \n        \n        \n    },[filteredItems])\n    \n    useEffect(() => {\n        \n        //console.log(['UDPATE SKILL WITH INTENTS',JSON.parse(JSON.stringify(newSkill))])  \n    },[collatedItems,collatedTags])\n    \n     // load invocation into skill\n    useEffect(() => {\n        if (currentSkill) {\n          //console.log(['SET INVOCK HAVE CURRENT SKILL',currentSkill,invocation])\n          var skill = currentSkill\n          skill.invocation = invocation\n          setCurrentSkill(skill)\n          //skillsManager.saveItem(currentSkill,null)\n      }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[invocation])\n    \n    useEffect(() => {\n        //console.log('change cs or inv',currentSkill)\n        if (currentSkill && currentSkill.title && currentSkill.title.length > 0) {\n            console.log('change cs or inv real')\n            //var index = skillsManager.findKeyBy('id',newCurrentSkill.id)\n            //if (index != null) {\n            // merge in entity values\n            if (entitiesForSkill) {\n                Object.keys(entitiesForSkill).map(function(entity) {\n                   if (currentSkill.entities && currentSkill.entities[entity]) {\n                       currentSkill.entities[entity].values = entitiesForSkill[entity].values;\n                   }  \n                })\n            }\n            // merge in intents\n            \n            console.log(['save skill ',skillFilterValue,currentSkill])\n            skillsStorage.setItem(skillFilterValue, currentSkill, function (err) {\n                console.log(['saved skill '])\n                if (err)  {\n                    console.log(err)\n                    throw new Error(err)\n                }\n            })\n              //// if err is non-null, we got an error\n            \n            //skillsManager.saveItem(newCurrentSkill,index)\n            //}\n            //\n            //currentSkill.entities = entitiesForSkill\n            //newCurrentSkill.invocation = invocation;\n            //newCurrentSkill.title = skillFilterValue;\n            //console.log(['save now ',index,newCurrentSkill])\n            //setCurrentSkill(newCurrentSkill)\n            \n        }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    },[currentSkill,currentSkill.rasaActions,currentSkill.rasaExtraSlots,listsForEntity, invocation])\n    \n  \n  \n  //function setInvocation(val) {\n      //console.log('SET INVOCK')\n      ////if (currentSkill) {\n          ////console.log(['SET INVOCK HAVE CURRENT SKILL',currentSkill,val])\n          ////var skill = currentSkill\n          ////skill.invocation = val \n          ////setCurrentSkill(skill)\n      ////}\n  //}\n\n    function forceReload() {\n        setListsForEntity(JSON.stringify([currentSkill.rasaConfig,currentSkill.rasaActions,currentSkill.rasaExtraSlots,currentSkill.entities,currentSkill.utterances,currentSkill.utterancesLists, currentSkill.slots]))  \n    }\n\n    function addListToSkillEntity(entity,list) {\n      //console.log(['ADSKOI',currentSkill,currentSkill.entities,entity,list])\n      if (entity && list && list.name) {\n            var skill = currentSkill;\n            if (!skill.entities) skill.entities={}\n            if (!skill.entities[entity]) skill.entities[entity] = {lists:[]}\n            if (!Array.isArray(skill.entities[entity].lists)) skill.entities[entity].lists = []\n            //var newListsForEntity = listsForEntity\n            //console.log(['ADSKOI1.5',skill])\n            skill.entities[entity].lists.push(list.name)\n            skill.entities[entity].lists = uniquifyArray(skill.entities[entity].lists).sort()\n           //newListsForEntity[entity] = uniquifyArray(newListsForEntity).sort()\n            setCurrentSkill(skill)  \n            // force render\n            forceReload()  \n            //} else {\n                //console.log(['ADSKOI new'])\n               //newListsForEntity[entity] = [list.name]\n            //}\n             //console.log(['ADSKOI2 final',newListsForEntity])\n            //setListsForEntity(newListsForEntity)\n       } else {\n           console.log([' missing data'])\n       }\n    }\n  \n    function removeListFromSkillEntity(entity, listIndex) {\n      var skill = currentSkill\n      //console.log(['REMOVESKILLFROMLIST',entity,listIndex])\n      if (skill && skill.entities && entity && skill.entities[entity] && skill.entities[entity].lists) {\n          var lists = skill.entities[entity].lists\n          //lists = uniquifyArray([lists.slice(0, listIndex),lists.slice(listIndex + 1)]).sort()\n          lists = lists.slice(0, listIndex).concat(lists.slice(listIndex + 1))\n          \n          skill.entities[entity].lists = lists\n          setCurrentSkill(skill)  \n          forceReload()  \n          //console.log(['REMOVESKILLFROMLIST ddd',lists])\n      } \n       //var newEntitiesForSkill = entitiesForSkill\n       //if (newEntitiesForSkill[entity]) {\n           //var lists = newEntitiesForSkill[entity].lists && Array.isArray(newEntitiesForSkill[entity].lists) ? newEntitiesForSkill[entity].lists : [];\n           //newEntitiesForSkill[entity].lists = uniquifyArray([lists.slice(0, listIndex),lists.slice(listIndex + 1)]).sort()\n           //setEntitiesForSkill(newEntitiesForSkill)\n       //}\n    }\n  \n    function setGoogleAssistantEntityType(entity, type) {\n        if (currentSkill && entity && type) {\n            var skill = currentSkill;\n            if (!skill.entities) skill.entities={}\n            if (!skill.entities[entity]) skill.entities[entity] = {}\n            skill.entities[entity].googleType = type\n            setCurrentSkill(skill)  \n           forceReload()  \n       } \n    }\n    \n    function setAlexaEntityType(entity, type) {\n        if (currentSkill && entity && type) {\n            var skill = currentSkill;\n            if (!skill.entities) skill.entities={}\n            if (!skill.entities[entity]) skill.entities[entity] = {}\n            skill.entities[entity].alexaType = type\n            setCurrentSkill(skill)  \n            console.log('ALEXA')\n            console.log(skill)\n            forceReload()  \n       } \n    }\n    \n    function setRASASlotType(entity, type, slots) {\n        if (currentSkill && entity && type) {\n            var skill = currentSkill;\n            slots[entity].slotType = type\n            skill.slots = slots\n            setCurrentSkill(skill)  \n            console.log('RASA')\n            console.log(skill)\n            forceReload()  \n       } \n    }\n       \n    function setRASASlotAutofill(entity, type, slots) {\n        if (currentSkill && entity && type) {\n            var skill = currentSkill;\n            slots[entity].slotAutofill = type\n            skill.slots = slots\n            setCurrentSkill(skill)  \n            console.log('RASA autofill')\n            console.log(skill)\n            forceReload()  \n       } \n    }\n    \n    function newSlot(name,slots) {\n        if (name && name.trim().length > 0) {\n            if (!slots) slots = {}\n            slots[name] = {}\n            var skill = currentSkill;\n            skill.slots = slots\n            setCurrentSkill(skill)  \n            setNewSlotValue('')\n            console.log('new slot')\n            console.log(skill)\n            forceReload()  \n        }\n    }\n    \n    function deleteSlot(slot, slots) {\n        if (currentSkill && slot && slots ) {\n            var skill = currentSkill;\n            delete slots[slot]\n            skill.slots = slots\n            setCurrentSkill(skill)  \n            console.log('del slot')\n            console.log(skill)\n            forceReload()  \n        }\n    }\n\n    function setRASAActions(data) {\n          if (currentSkill && data) {\n            var skill = currentSkill;\n            skill.rasaActions = data\n            setCurrentSkill(skill)  \n            forceReload()  \n       }\n    }\n    \n    function setRASAConfig(data) {\n          if (currentSkill) {\n            var skill = currentSkill;\n            skill.rasaConfig = data\n            setCurrentSkill(skill)  \n            forceReload()  \n       }\n    }\n    \n    \n    function addUtterance(utterance) {\n       \n        if (currentSkill && utterance) {\n            var skill = currentSkill;\n            if (!Array.isArray(skill.utterances)) skill.utterances=[]\n            skill.utterances.push(utterance.name)\n            skill.utterances = uniquifyArray(skill.utterances)\n            setCurrentSkill(skill)  \n            console.log('RASA')\n            console.log(skill)\n            // if this is a new utterance, add it to the main database\n            if (!props.lookups.utteranceListsLookups[utterance.name] && !props.lookups.utterancesLookups[utterance.name]) {\n                var utteranceStorage = localforage.createInstance({\n                   name: \"nlutool\",\n                   storeName   : \"utterances\",\n                 });\n                 utteranceStorage.getItem('alldata', function (err,utterances) {\n                     if (err) throw new Error(err)\n                     if (Array.isArray(utterances)) {\n                         utterances.unshift({id:generateObjectId(), value:utterance.name, synonyms:'', tags:[]})\n                         utteranceStorage.setItem('alldata',utterances)\n                     }\n                 })\n            }\n            forceReload()\n       } \n    }\n    \n    function removeUtterance(index) {\n        console.log(['RE UTTERANCE',index])\n        if (typeof index === \"number\" && currentSkill && currentSkill.utterances && currentSkill.utterances.length > index) {\n            var skill = currentSkill;\n            skill.utterances = [...skill.utterances.slice(0,index),...skill.utterances.slice(index+1)]\n            setCurrentSkill(skill)  \n            console.log('RASA')\n            console.log(skill)\n            forceReload()\n        }\n    }\n    function addUtteranceList(utterance) {\n          console.log(['ADD UTTERANCE LIST',utterance, currentSkill])\n          if (currentSkill && utterance) {\n            var skill = currentSkill;\n            if (!Array.isArray(skill.utterancesLists)) skill.utterancesLists=[]\n            skill.utterancesLists.push(utterance.name)\n            skill.utterancesLists = uniquifyArray(skill.utterancesLists)\n            setCurrentSkill(skill)  \n            console.log('add ut list')\n            console.log(skill.utterancesLists)\n            forceReload()\n       } \n    }\n     \n    function removeUtteranceList(index) {\n        if (typeof index === \"number\" && currentSkill && currentSkill.utterancesLists) {\n            var skill = currentSkill;\n            skill.utterancesLists = [...skill.utterancesLists.slice(0,index),...skill.utterancesLists.slice(index+1)]\n            setCurrentSkill(skill)  \n            console.log('RASA')\n            console.log(skill)\n            forceReload()\n        }\n    }    \n    \n    function renderEditor(props) {\n       \n        if (skillFilterValue && skillFilterValue.length > 0) {\n               \n                \n            if (filteredItems && filteredItems.length > 0) {\n               \n                   const utteranceTags = currentSkill && currentSkill.utterances ? currentSkill.utterances.map(function(listItem,listItemKey) {return {id:listItemKey, name:listItem} }) : []\n                const utteranceListTags = currentSkill && currentSkill.utterancesLists ? currentSkill.utterancesLists.map(function(listItem,listItemKey) {return {id:listItemKey, name:listItem} }) : []\n                const slots = currentSkill.slots ? currentSkill.slots : entitiesForSkill;\n                return <div>\n                     <div><h3>{skillFilterValue} </h3></div>\n                        <div>\n                       \n                        <label style={{fontWeight:'bold', marginLeft:'0.5em'}} > Invocation <input type='text' value={invocation} onChange={function(e) {setInvocation(e.target.value)}} /></label>\n                        </div>\n                        <div style={{marginTop:'0.7em', marginBottom:'0.7em'}} >\n                            <b style={{marginRight:'1em', marginLeft:'0.5em'}} >Tags</b>\n                            <span>{currentSkill.tags.join(\", \")}</span>\n                        </div>\n                        <div style={{marginTop:'0.7em', marginBottom:'0.7em', borderTop: '2px solid black'}} >\n                            <b style={{marginRight:'1em', marginLeft:'0.5em'}} >Intents</b>\n                            <span>{Object.keys(collatedItems).sort().map(function(collatedIntent, i) {\n                                    var useCurrentIntent = currentIntent ? currentIntent : Object.keys(collatedItems)[0]\n                                    var completionVariant = 'danger'\n                                    if (collatedItems[collatedIntent].length > 300) {\n                                        completionVariant = 'success'\n                                    } else if (collatedItems[collatedIntent].length > 100) {\n                                        completionVariant = 'primary'\n                                    } else if (collatedItems[collatedIntent].length > 10) {\n                                        completionVariant = 'warning'\n                                    } \n                                    \n                                    \n                                    if (collatedItems[collatedIntent].length  === collatedCounts[collatedIntent]) {\n                                            return <Link key={collatedIntent} to={\"/examples/skill/\"+skillFilterValue+\"/intent/\"+collatedIntent} ><Button key={collatedIntent} variant={collatedIntent === useCurrentIntent ? \"primary\" : \"outline-primary\"} onClick={function() {setCurrentIntent(collatedIntent)}}>\n                                                <Badge variant={completionVariant} > {collatedItems[collatedIntent].length} </Badge>\n                                                &nbsp;{collatedIntent}\n                                            </Button></Link>\n                                    } else {\n                                        return <Link key={collatedIntent} to={\"/examples/skill/\"+skillFilterValue+\"/intent/\"+collatedIntent} ><Button variant={collatedIntent === useCurrentIntent ? \"primary\" : \"outline-primary\"} onClick={function() {setCurrentIntent(collatedIntent)}}>\n                                                <Badge variant=\"danger\" > {collatedItems[collatedIntent].length}/{collatedCounts[collatedIntent]} </Badge>\n                                                &nbsp;{collatedIntent}\n                                            </Button></Link>\n                                    }\n                                    \n                            })}</span>\n                        </div>\n                        <div style={{marginTop:'0.7em', borderTop: '2px solid black'}} >\n                      <b style={{marginRight:'1em', marginLeft:'0.5em'}} >Entities</b><ListGroup>{Object.keys(entitiesForSkill).map(function(collatedEntity, i) {\n                                \n                               \n                                const listTags = currentSkill && currentSkill.entities && currentSkill.entities[collatedEntity] && currentSkill.entities[collatedEntity].lists ? currentSkill.entities[collatedEntity].lists.map(function(listItem,listItemKey) {return {id:listItemKey, name:listItem} }) : []\n                                //console.log(listTags)\n                                    return <ListGroup.Item key={collatedEntity} >\n                                            \n                                             <span style={{marginLeft:'1em', float:'left', fontWeight:'bold'}}>&nbsp;{collatedEntity}</span>\n                                          \n                                            <span style={{marginLeft:'1em', float:'left'}}>&nbsp;{entitiesForSkill[collatedEntity] && entitiesForSkill[collatedEntity].values && entitiesForSkill[collatedEntity].values.slice(0,5).join(\", \")}{entitiesForSkill[collatedEntity] && entitiesForSkill[collatedEntity].values && entitiesForSkill[collatedEntity].values.length > 5 ? <Badge>... {entitiesForSkill[collatedEntity] && entitiesForSkill[collatedEntity].values && entitiesForSkill[collatedEntity].values.length - 5} more </Badge> : ''}</span>\n                                            <span style={{marginLeft:'1em', float:'left'}}>\n                                           <label><i></i> <ReactTags\n                                            placeholderText=\"Also use values from \"\n                                            minQueryLength={0}\n                                            maxSuggestionsLength={50}\n                                            autoresize={true}\n                                            allowNew={false}\n                                            tags={listTags}\n                                            suggestionComponent={SuggestionComponent}\n                                            suggestions={props.lookups.listsLookups.map(function(tag,i) {return {id: i, name: tag}})}\n                                            onDelete={function(index) {removeListFromSkillEntity(collatedEntity, index)}}\n                                            onAddition={function(tag) {addListToSkillEntity(collatedEntity, tag)}} /> </label>\n                                            </span>\n                                            \n                                            <div style={{float:'right'}} >\n                                                <DropDownComponent options={Alexa.entityTypes} title=\"Alexa\" value={currentSkill.entities && currentSkill.entities[collatedEntity] && currentSkill.entities[collatedEntity].alexaType ? currentSkill.entities[collatedEntity].alexaType : ''} selectItem={function(entityType) {\n                                                    setAlexaEntityType(collatedEntity,entityType)\n                                                }} />\n                                                &nbsp;&nbsp;<DropDownComponent options={GoogleAssistant.entityTypes} title=\"Google\" value={currentSkill.entities && currentSkill.entities[collatedEntity] &&  currentSkill.entities[collatedEntity].googleType ? currentSkill.entities[collatedEntity].googleType : ''}  selectItem={function(entityType) {\n                                                    setGoogleAssistantEntityType(collatedEntity,entityType)\n                                                }} />\n                                            </div>\n                                        </ListGroup.Item>\n                                //}\n                                \n                        })}</ListGroup>\n                        </div>\n               \n                        <div style={{marginTop:'0.7em', marginLeft:'0.4em', borderTop: '2px solid black'}} >\n                            <div ><b>Utterances</b></div>\n                          <div style={{clear:'both'}}>\n                                 <div style={{marginLeft:'1em'}}>\n                                <label>Utterances\n                                <ReactTags\n                                placeholderText=\"Use utterance \"\n                                minQueryLength={0}\n                                maxSuggestionsLength={50}\n                                autoresize={true}\n                                allowNew={true}\n                                tags={utteranceTags}\n                                suggestionComponent={SuggestionComponent}\n                                suggestions={props.lookups.utterancesLookups ? props.lookups.utterancesLookups.map(function(tag,i) {return {id: i, name: tag}}):[]}\n                                onDelete={function(index) {removeUtterance(index)}}\n                                onAddition={function(tag) {addUtterance(tag)}} /> </label>\n                                </div>\n                                \n                                 <div style={{marginLeft:'1em'}}>\n                                <label>Utterance Lists\n                                <ReactTags\n                                placeholderText=\"Use utterances from \"\n                                minQueryLength={0}\n                                maxSuggestionsLength={50}\n                                autoresize={true}\n                                allowNew={false}\n                                tags={utteranceListTags}\n                                suggestionComponent={SuggestionComponent}\n                                suggestions={props.lookups.utteranceTagsLookups ? props.lookups.utteranceTagsLookups.map(function(tag,i) {return {id: i, name: tag}}) : []}\n                                onDelete={function(index) {removeUtteranceList(index)}}\n                                onAddition={function(tag) {addUtteranceList(tag)}} /> </label>\n                                </div>\n                                \n                                \n                            </div>\n                    </div>\n                   \n                      <div style={{marginTop:'0.7em', borderTop: '2px solid black'}} >\n                        <div><b>Platform</b></div>\n                        <Tabs defaultActiveKey=\"rasa\" id=\"platform-tabs\">\n                          <Tab eventKey=\"rasa\" title=\"RASA\">\n                                <Tabs defaultActiveKey=\"slots\" id=\"platform-rasa\">\n                                    <Tab eventKey=\"slots\" title=\"Slots\">\n                                         <div style={{marginLeft:'1.4em', marginTop:'0.7em', borderTop: '2px solid black'}} >\n                                             <form onSubmit={function(e) {e.preventDefault(); newSlot(newSlotValue,slots)}} ><input value={newSlotValue} onChange={function(e) {setNewSlotValue(e.target.value)}} /><Button size=\"sm\" onClick={function() {newSlot(newSlotValue,slots)}}>New Slot</Button>\n                                             </form>\n                                              <ListGroup>{Object.keys(slots).map(function(collatedEntity, i) { \n                                                    return <ListGroup.Item key={collatedEntity} >\n                                                                     <span style={{marginLeft:'1em', float:'left', fontWeight:'bold'}}>&nbsp;{collatedEntity}</span>\n                                                                    \n                                                                    <div style={{float:'right'}} >\n                                                                         {entitiesForSkill[collatedEntity] &&  <DropDownComponent options={RASA.autofillOptions} title=\"Autofill\" value={currentSkill.entities && currentSkill.entities[collatedEntity] && currentSkill.entities[collatedEntity].slotAutofill ? currentSkill.entities[collatedEntity].slotAutofill : 'Yes'} selectItem={function(entityType) {\n                                                                            setRASASlotAutofill(collatedEntity,entityType,slots)\n                                                                        }} />}\n                                                                        &nbsp;&nbsp;\n                                                                        <DropDownComponent options={Object.keys(RASA.slotTypes)} title=\"Slot\" value={currentSkill.slots && currentSkill.slots[collatedEntity] && currentSkill.slots[collatedEntity].slotType ? currentSkill.slots[collatedEntity].slotType : 'unfeaturized'} selectItem={function(entityType) {\n                                                                            setRASASlotType(collatedEntity,entityType,slots)\n                                                                        }} />\n                                                                        <Button variant=\"danger\"  size=\"sm\" style={{marginLeft:'0.5em', float:'right', fontWeight:'bold', borderRadius:'15px', marginTop:'0.2em'}} onClick={function(e) {deleteSlot(collatedEntity,slots)}}>X</Button>\n                                                                    </div>\n                                                                </ListGroup.Item>\n                                                        //}\n                                                        \n                                                })}</ListGroup>\n                                        </div>\n                               \n                          \n                                 </Tab>\n                                  <Tab eventKey=\"actions\" title=\"Actions\">\n                                    <div style={{marginTop:'0.7em', marginLeft:'1.4em', borderTop: '2px solid black'}} >\n                                      <label>\n                                      \n                                        <div style={{fontStyle:'italic'}}>One per line, _action will be appended to each line</div>\n                                        <textarea style={{width:'40em', height:'10em'}}  value={Array.isArray(currentSkill.rasaActions) ? currentSkill.rasaActions.join(\"\\n\") : ''} onChange={function(e) {setRASAActions(e.target.value ? e.target.value.split(\"\\n\") : [])}} placeholder={`fred\nfindSname\nis_whatsi\nblah name`} ></textarea>\n                                      </label>\n                                </div>\n                                  </Tab>\n                                   <Tab eventKey=\"config\" title=\"Config\">\n                                    <div style={{marginTop:'0.7em', marginLeft:'1.4em', borderTop: '2px solid black'}} >\n                                      <label>\n                                    \n                                        <textarea style={{width:'40em', height:'10em'}}  value={currentSkill.rasaConfig ? currentSkill.rasaConfig : ''} onChange={function(e) {setRASAConfig(e.target.value)}} placeholder={RASATemplates.config} ></textarea>\n                                      </label>\n                                </div>\n                                  </Tab>\n                                  \n                                  \n                                  \n                                  \n                                </Tabs>\n                                \n                          </Tab>\n                          <Tab eventKey=\"jovo\" title=\"JOVO\">\n                            <b>not yet</b>\n                          </Tab>\n                          <Tab eventKey=\"mycroft\" title=\"Mycroft\">\n                            <b>not yet</b>\n                          </Tab>\n                        </Tabs>\n                     </div>\n                     \n                </div>\n            }\n            \n        } else {\n            const skillsList = props.lookups.skillLookups ? props.lookups.skillLookups.map(function(skill,i) {return <Button key={i}  onClick={function(e) {setSkillFilterValue(skill)}}  style={{marginLeft:'1em'}} >{skill}</Button>} )   : []\n            return <div>\n                <h1>Skills</h1>\n                {skillsList.length > 0 && skillsList}\n                {skillsList.length <= 0 && <div>\n                    You dont have any skills yet. Import some <Link to='/sources'><Button>Sources</Button></Link> \n                </div>}\n            </div>\n        }\n    }\n    \n    \n     var skillOptions = props.lookups.skillLookups && props.lookups.skillLookups.sort().map(function(skillKey,i) {\n          return <Dropdown.Item key={i} value={skillKey} onClick={function(e) {setSkillFilterValue(skillKey)}}  >{skillKey}</Dropdown.Item>\n       })\n       skillOptions.unshift(<Dropdown.Item key={'empty_key_value_empty'} value={''} onClick={function(e) {setSkillFilterValue('')}}  >&nbsp;</Dropdown.Item>)\n   \n        //<Button style={{float:'right',marginLeft:'0.5em'}}  variant=\"success\" onClick={function() {setShowExportDialog(true)}} >Publish</Button>\n         \n    return <div>\n         {skillFilterValue && skillFilterValue.length > 0 && <Dropdown style={{float:'right',marginLeft:'0.5em'}}  as={ButtonGroup}>\n          <Dropdown.Toggle split variant=\"success\"  id=\"dropdown-split-basic\" ></Dropdown.Toggle>\n          <Button  variant=\"success\">Export</Button>\n          <Dropdown.Menu variant=\"success\" >\n              {exportFormats.map(function(exportFormat,i) {\n                  var title = 'opennludata_'+exportFormat.name+'_'+Date.now()\n                return <Dropdown.Item variant=\"success\" key={i} value={exportFormat.name} \n                onClick={function(e) {\n                    exportFormat.exportFunction(currentSkill).then(function(zipBody) {\n                        console.log(['TRIGGER DL',title,zipBody])\n                        if (exportFormat.name==='JSON') {\n                            saveAs(zipBody, title+'.json')\n                        } else {\n                            saveAs(zipBody, title+'.zip')\n                        }\n                })}}  >{exportFormat.name}</Dropdown.Item>\n           })}\n          </Dropdown.Menu>\n        </Dropdown>}\n         {renderEditor(props)}\n    </div>\n            \n}\n      \n","import React, {useState} from 'react';\nimport {CopyToClipboard} from 'react-copy-to-clipboard';\nimport {Button, Modal} from 'react-bootstrap'\nimport { Link  } from 'react-router-dom'\n\nfunction SearchPage(props) {\n    const [copied, setCopied] = useState(false)\n    \n    \n    return <div>\n    <h3>Search</h3>\n    <a target=\"_new\" href=\"https://github.com/syntithenai/opennludata/wiki\" ><Button>Search the WIKI</Button></a>\n    \n    \n    </div>\n    \n    \n}\n\nexport default SearchPage\n","import React from 'react';\nimport {useState} from 'react';\nimport {BrowserRouter as  Router, Route, Link  } from 'react-router-dom'\nimport LocalStorageUploadManager from './LocalStorageUploadManager'\nimport ListsManager from './ListsManager'\nimport UtterancesManager from './UtterancesManager'\nimport NluExampleEditor from './NluExampleEditor'\nimport NavbarComponent from './components/NavbarComponent'\nimport {HelpText, HelpTextImport, HelpTextExport, HelpTextAbout} from './components/Components'\nimport NluImportEditor from './NluImportEditor'\nimport NluSkillsEditor from './NluSkillsEditor'\nimport SearchPage from './SearchPage'\nimport {Button} from 'react-bootstrap'\nimport localforage from 'localforage'\nconst gaTrackingCode = 'UA-3712973-4'\n\n\n\n//import images from './images'\n//console.log(images)\n//const axios = require('axios');\n  //axios.get('https://github.com/syntithenai/opennludata/wiki/test-skill')\n  //.then(function (response) {\n    //// handle success\n    //console.log(response);\n  //})\n  //.catch(function (error) {\n    //// handle error\n    //console.log(error);\n  //})\n//\n\nfunction SiteMenu(props) {\n    var astyle={paddingLeft:'0.3em'}\n    return <div style={{marginLeft:'0.5em'}}>\n            <h1>Menu</h1>\n            \n                <Link style={astyle} to=\"/sources\" ><Button>Sources</Button></Link>\n                <Link style={astyle} to=\"/import\" ><Button>Import</Button></Link>\n                <Link style={astyle} to=\"/examples\" ><Button>Organise</Button></Link>\n                <Link style={astyle} to=\"/skills\" ><Button>Skills </Button></Link>\n                <Link style={astyle} to=\"/search\" ><Button>Search Community </Button></Link>\n        </div>\n}\n\nfunction App() {\n    \n    const [waiting, setWaiting] = useState(false)\n    const [pageMessage, setPageMessage] = useState('')  \n    \n    //const [importFrom, setImportFrom] = useState(null)\n    // example summaries\n    const [intentLookups, setIntentLookups] = useState([])\n    const [entityLookups, setEntityLookups] = useState([])\n    const [tagLookups, setTagLookups] = useState([])\n    const [skillLookups, setSkillLookups] = useState([])\n    const [listsLookups, setListsLookups]= useState([])\n    const [selectedTally, setSelectedTally] = useState(0)\n    const [utterancesLookups, setUtterancesLookups] = useState([])\n    const [utteranceListsLookups, setUtteranceListsLookups] = useState([])\n    const [utteranceTagsLookups, setUtteranceTagsLookups] = useState([])\n    \n    // list summaries\n    const [listTally, setListTally] = useState(0)\n    const [selectedListTally, setSelectedListTally] = useState(0)\n    const [listTallyByList, setListTallyByList] = useState({})\n    const [selectedListTallyByList, setSelectedListTallyByList] = useState({})\n    \n    // search bar\n    //https://github.com/search?q=repo:syntithenai/opennludata&type=Wikis\n    const [skillFilterValue, setSkillFilterValue] = useState('')\n  \n\n    \n    function startWaiting() {\n        setWaiting(true)\n    }\n    \n    function stopWaiting() {\n        setTimeout(function() {\n            setWaiting(false)\n        },300)\n    }\n\n    function updateUtterances() {\n        console.log('UPDATE UTTERANCES')\n        var utteranceStorage = localforage.createInstance({\n           name: \"nlutool\",\n           storeName   : \"utterances\",\n         });\n         utteranceStorage.getItem('alldata', function (err,utterances) {\n                var utteranceLists={}\n                var utteranceIndex={}\n                var utteranceTags={}\n                //console.log(['UPDATE UTTERANCES',err,utterances])\n                if (Array.isArray(utterances)) {\n                    utterances.map(function(utterance,i) {\n                        console.log(['UPDATE UTTERANCE',utterance])\n                         if (utterance.value) {\n                             utteranceIndex[utterance.value]=true\n                         }\n                         if (utterance.synonym) {\n                             utterance.synonym.split(\"\\n\").map(function(tag) {\n                                 utteranceLists[tag] = true\n                                 return null\n                             })\n                         } \n                         if (utterance.tags && utterance.tags.length > 0) {\n                               utterance.tags.map(function(tag) {\n                                  utteranceTags[tag] = true  \n                                  return null\n                               })\n                         }\n                         return null\n                    })\n                    setUtterancesLookups(Object.keys(utteranceIndex))\n                    setUtteranceTagsLookups(Object.keys(utteranceTags))\n                    setUtteranceListsLookups(Object.keys(utteranceLists))\n                }\n                console.log(['UPDATE UTTERANCES',utteranceIndex,utteranceLists])\n                    \n              });\n            //});\n  \n    }\n\n    function updateLists(lists) {\n        if (lists) {\n            var newSelectedLists = {}\n            var newLists = {}\n            var tally = 0;\n             var selectedTally = 0;\n            lists.map(function(listItem) {\n                if (listItem && listItem.tags && listItem.tags.length > 0) {\n                    if (listItem.isSelected) {\n                             selectedTally += 1\n                    }\n                    listItem.tags.map(function(tag) {\n                        if (tag && tag.trim().length > 0) {\n                            if (listItem.isSelected) {\n                                 newLists[tag] = (newLists[tag] > 0) ? newLists[tag] + 1 : 1\n                                 newSelectedLists[tag] = (newSelectedLists[tag] > 0) ? newSelectedLists[tag] + 1 : 1\n                            } else {\n                                newLists[tag] = (newLists[tag] >0) ? newLists[tag] + 1 : 1\n                            }\n                        }\n                        return null\n                    })\n                    tally += 1;\n                }\n                return null\n            })\n            setListTally(tally)\n            setSelectedListTally(selectedTally)\n            setSelectedListTallyByList(newSelectedLists)\n            setListTallyByList(newLists)\n            setListsLookups(Object.keys(newLists))\n            //console.log('updated lists', newLists)\n        }\n    }\n\n    function updateLookups(items) {\n        //console.log(['UPDATELOOKUPS',items])\n        if (items && items.length > 0) {\n            var tags = {}\n            var intents = {}\n            var entities = {}\n            var skills = {}\n            var selected = 0;\n            items.map(function(item) {\n                if (item) {\n                    if (item.isSelected) selected = selected + 1;\n                   intents[item.intent] = true\n                   if (item.tags && item.tags.length > 0) {\n                       item.tags.map(function(tag) {\n                          tags[tag] = true  \n                          return null\n                       })\n                   }\n                   if (item.skills && item.skills.length > 0) {\n                       item.skills.map(function(skill) {\n                          skills[skill] = true  \n                          return null\n                       })\n                   }\n                   if (item.entities && item.entities.length > 0) {\n                       item.entities.map(function(entity) {\n                          if (entity.type) {\n                              entities[entity.type] = true  \n                          }\n                          return null\n                       })\n                   }\n                }\n               return null\n            })\n            const distinct = function(value,index,self) {\n                return self.indexOf(value) === index;\n            }\n            setIntentLookups([].concat(Object.keys(intents),intentLookups).filter(distinct))\n            setEntityLookups([].concat(Object.keys(entities),entityLookups).filter(distinct))\n            setTagLookups([].concat(Object.keys(tags),tagLookups).filter(distinct))\n            setSkillLookups([].concat(Object.keys(skills),skillLookups).filter(distinct))\n            setSelectedTally(selected)\n        }\n    }\n    const lookups = {utteranceTagsLookups:utteranceTagsLookups,utterancesLookups:utterancesLookups,utteranceListsLookups:utteranceListsLookups,intentLookups,entityLookups,tagLookups,skillLookups, selectedTally, listsLookups, listTally, selectedListTally, listTallyByList, selectedListTallyByList}\n    const updateFunctions = {updateLookups, updateLists, updateUtterances}\n  return (\n    <div className=\"OpenNluDataApp\">\n           \n        <Router>\n                <Route exact path='*' render={\n                    (props) => {\n                        return <NavbarComponent waiting={waiting} history={props.history} message={pageMessage} setPageMessage={setPageMessage}    />\n                    }}\n                />\n                \n                <Route exact path='/menu' component={SiteMenu} />\n                <Route path='/sources' render={\n                    (props) => <LocalStorageUploadManager {...props}  startWaiting={startWaiting} stopWaiting={stopWaiting}   setPageMessage={setPageMessage}  updateFunctions={updateFunctions} lookups={lookups}  />\n                }/>\n                <Route exact path='/import' render={\n                    (props) => <NluImportEditor {...props}        lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}  updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />}\n                          \n                />\n                \n                <Route exact path='/import/skill/:skillId' render={\n                    (props) => <NluImportEditor {...props}        lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}  updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />}\n                          \n                />\n                \n                <Route exact path='/import/intent/:intentId' render={\n                    (props) => <NluImportEditor {...props}        lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}  updateFunctions={updateFunctions} setPageMessage={setPageMessage}    />}\n                          \n                />\n                \n                <Route path='/import/skill/:skillId/intent/:intentId' render={\n                    (props) => <NluImportEditor {...props}        lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}  updateFunctions={updateFunctions} setPageMessage={setPageMessage}    />}\n                          \n                />\n                \n                \n                <Route exact  path='/examples' render={(props) => <NluExampleEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                />\n                \n                <Route exact path='/examples/skill/:skillId' render={(props) => <NluExampleEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                />\n                \n                <Route path='/examples/intent/:intentId' render={(props) => <NluExampleEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                />\n                \n                <Route exact path='/examples/skill/:skillId/intent/:intentId' render={(props) => <NluExampleEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                />\n                \n                <Route exact path='/skills/:skillId' render={(props) => <NluSkillsEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                />\n                \n                <Route exact path='/skills/skill/:skillId' render={(props) => <NluSkillsEditor {...props}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                />\n\n                 <Route exact path='/skills' render={(props) => <NluSkillsEditor {...props} skillFilterValue={skillFilterValue} setSkillFilterValue={setSkillFilterValue}     lookups={lookups}  startWaiting={startWaiting} stopWaiting={stopWaiting} updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />} \n                />\n                \n               \n                <Route exact path='/lists' render={\n                    (props) => <ListsManager {...props}   lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}  updateFunctions={updateFunctions}  setPageMessage={setPageMessage}    />}\n                          \n                />\n                <Route exact path='/lists/:listId' render={\n                    (props) => <ListsManager {...props}   lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}  updateFunctions={updateFunctions}  setPageMessage={setPageMessage}   />}\n                          \n                />\n                \n                \n                <Route exact path='/utterances' render={\n                    (props) => <UtterancesManager {...props}   lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}   setPageMessage={setPageMessage}  updateFunctions={updateFunctions}   />}\n                          \n                />\n                <Route exact path='/utterances/:listId' render={\n                    (props) => <UtterancesManager {...props}   lookups={lookups}    startWaiting={startWaiting} stopWaiting={stopWaiting}   setPageMessage={setPageMessage}  updateFunctions={updateFunctions}  />}\n                          \n                />\n                \n                \n                <Route exact path='/help' component={HelpText}     />\n                <Route exact path='/helpimport' component={HelpTextImport}     />\n                <Route exact path='/helpexport' component={HelpTextExport}     />\n                <Route exact path='/helpabout' component={HelpTextAbout}     />\n                \n                 <Route exact path='/search' component={SearchPage}     />\n                <Route exact path='/' component={HelpText} />\n        </Router>\n    </div>\n  );\n}\n                \nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n","module.exports = __webpack_public_path__ + \"static/media/check.8ab01baf.svg\";","module.exports = __webpack_public_path__ + \"static/media/thumb-down.73b0ce24.svg\";","module.exports = __webpack_public_path__ + \"static/media/thumb-up.f18de183.svg\";","module.exports = __webpack_public_path__ + \"static/media/singingman.5d08cb4f.svg\";","module.exports = __webpack_public_path__ + \"static/media/waiting.d362cb3f.gif\";","module.exports = __webpack_public_path__ + \"static/media/arrow-thick-left.f29ee705.svg\";","module.exports = __webpack_public_path__ + \"static/media/arrow-thick-right.9ba7683e.svg\";"],"sourceRoot":""}