(this.webpackJsonpopennludata=this.webpackJsonpopennludata||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),i=n(21),r=n.n(i),s=(n(77),n(2)),o=n(5),c=n(8),u=(n(24),n(25),n(13));function m(){return((new Date).getTime()/1e3|0).toString(16)+"xxxxxxxxxxxxxxxx".replace(/[x]/g,(function(){return(16*Math.random()|0).toString(16)})).toLowerCase()}function p(e){return e.split("/").slice(0,-1).join("/")}function f(e){var t=[];if(e){var n=e.split("\n").join("::::").split(".").join("::::").split("::::");for(var a in n)a.trim().length>0&&t.push(n[a])}return t}function d(e){if(Array.isArray(e)){var t={};return e.map((function(e){return t[e]=!0,null})),Object.keys(t)}return[]}function g(e,t){if(Array.isArray(e)){var n={},a=null;return e.map((function(e){return e&&(e[t]?n[e[t]]=e:a=e),null})),a?[a].concat(Object.values(n)):Object.values(n)}return[]}function v(e,t){t=t.sort((function(e,t){return e.start<t.start?-1:1}));var n=0,a=e;return t.map((function(e){a=a.slice(0,e.start+n)+"{"+e.type+"}"+a.slice(e.end+n);var t=e.end-e.start-(e.type.length+2);n-=t})),a}var h=n(10),y=n.n(h);function E(e,t){switch(t.type){case"append":return t.item?[].concat(Object(u.a)(e),[t.item]):e;case"insert":return t.item&&"number"===typeof t.index&&t.index>=0&&e.length>0?[].concat(Object(u.a)(e.slice(0,t.index)),[t.item],Object(u.a)(e.slice(t.index))):e;case"remove":return"number"===typeof t.index&&t.index>=0?[].concat(Object(u.a)(e.slice(0,t.index)),Object(u.a)(e.slice(t.index+1))):e;case"update":return t.item&&"number"===typeof t.index&&t.index>=0?[].concat(Object(u.a)(e.slice(0,t.index)),[t.item],Object(u.a)(e.slice(t.index+1))):e;case"replaceall":return"object"===typeof t.items?t.items:e;default:throw new Error}}function k(e,t){var n=Object(a.useReducer)(E,[]),l=Object(s.a)(n,2),i=l[0],r=l[1],o=y.a.createInstance({name:e||"localstoragemanager",storeName:t||"data"});function c(e){if(e&&e.id)return e.id;throw new Error("Missing ID value in getId")}function u(e,t){for(var n in i)if(i[n]&&i[n][e]===t)return n;return null}return{getId:c,loadAll:function(){o.keys().then((function(e){var t=[];e.map((function(e){return t.push(new Promise((function(t,n){o.getItem(e).then((function(e){t(e)}))}))),null})),Promise.all(t).then((function(e){r({type:"replaceall",items:e})}))}))},saveItem:function(e,t){if(e){var n=!1;e.id||(n=!0,e.id=m()),o.setItem(e.id,e),0===i.length?(console.log(["SAVEDB len0",e,t]),r({type:"append",item:e})):null===t||void 0===t||n?(console.log(["SAVEDB append",e,t]),r({type:"append",item:e})):(console.log(["SAVEDB update",e,t]),r({type:"update",item:e,index:t}))}},deleteItem:function(e){var t=function(e){if(i&&i[e]&&i[e].id)return i[e].id;throw new Error("Missing ID value in getIdForIndex")}(e);t&&o.removeItem(t).then((function(){r({type:"remove",index:e})}))},items:i,setItems:function(e){o.clear().then((function(){r({type:"replaceall",items:e}),e&&e.map((function(e){return o.setItem(c(e),e),null}))}))},findKeyBy:u,findBy:function(e,t){var n=u(e,t);return n?i[n]:null},filter:function(e){var t=[];return e&&i.map((function(n,a){return e(n)&&t.push(n),null})),t}}}function b(e){return e?e.replace(/[^0-9a-z ,]/gi,""):""}function S(e){if(e){var t=e.split(":");return t.length>1?[t[0],t.slice(1).join(":")]:["",e]}return["",""]}function x(e,t){return e.value<t.value?-1:1}function O(e,t){return e.example<t.example?-1:1}var A=n(58),I=n(110),j=n(53),w=n.n(j),L=n(108),T=n(105),N=n(106),C=function(e){return l.a.createElement(L.a,{as:T.a},l.a.createElement(L.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(A.a,{size:"sm"},"Tag"," "),l.a.createElement(L.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(t){t.preventDefault(),e.tagAll(t.target.value)}},l.a.createElement(N.a,null,l.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){e.setTagAllValue(t.target.value)},value:e.tagAllValue}),l.a.createElement(A.a,{variant:"success",onClick:function(t){e.tagAll(e.tagAllValue)}},"Add"))),e.lookups.tagLookups&&e.lookups.tagLookups.sort().map((function(t,n){return l.a.createElement(L.a.Item,{key:n,value:t},l.a.createElement(A.a,{variant:"success",onClick:function(n){e.setTagAllValue(t),e.tagAll(t)}},"Add to ",t),l.a.createElement(A.a,{variant:"danger",onClick:function(n){e.untagAll(t)},style:{marginLeft:"0.5em"}},"Remove"))}))))},V=function(e){return l.a.createElement(L.a,{as:T.a},l.a.createElement(L.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(A.a,{size:"sm"},"Intent"," "),l.a.createElement(L.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(t){t.preventDefault(),e.intentAll(t.target.value)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){e.setIntentAllValue(t.target.value)},value:e.intentAllValue}))),e.lookups.intentLookups&&e.lookups.intentLookups.sort().map((function(t,n){return l.a.createElement(L.a.Item,{key:n,value:t,onClick:function(n){e.setIntentAllValue(t),e.intentAll(t)}},t)}))))},F=function(e){return l.a.createElement(L.a,{as:T.a},l.a.createElement(L.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(A.a,{size:"sm"},"Skill"," "),l.a.createElement(L.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(t){t.preventDefault(),e.skillSetAll(t.target.value)}},l.a.createElement(N.a,null,l.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){e.setSkillAllValue(t.target.value)},value:e.skillAllValue}),l.a.createElement(A.a,{variant:"success",onClick:function(t){e.skillSetAll(e.tagAllValue)}},"Add"))),e.lookups.skillLookups&&e.lookups.skillLookups.sort().map((function(t,n){return l.a.createElement(L.a.Item,{key:n,value:t},l.a.createElement(A.a,{variant:"success",onClick:function(n){e.setSkillAllValue(t),e.skillSetAll(t)}},"Add to ",t),l.a.createElement(A.a,{variant:"danger",onClick:function(n){e.unskillAll(t)},style:{marginLeft:"0.5em"}},"Remove"))}))))},z=function(e){var t=Object(a.useState)(e.importTo?e.importTo:""),n=Object(s.a)(t,2),i=n[0],r=n[1];return l.a.createElement(L.a,{style:{float:"right",marginLeft:"0.5em"},variant:"success",as:T.a},l.a.createElement(L.a.Toggle,{split:!0,size:"md",variant:"success",id:"dropdown-split-basic"}),l.a.createElement(A.a,{variant:"success",size:"md"},"Import Entities as"," "),l.a.createElement(L.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(t){t.preventDefault(),e.importListTo(t.target.value)}},l.a.createElement("div",{className:"form-group"},l.a.createElement(N.a,null,l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){r(e.target.value)},value:i}),l.a.createElement(A.a,{size:"sm",onClick:function(t){e.importListTo(i)}},"Import")))),e&&e.lookups&&e.lookups.listsLookups&&e.lookups.listsLookups.sort().map((function(t,n){return l.a.createElement(L.a.Item,{key:n,value:t,onClick:function(n){r(t),e.importListTo(t)}},t)}))))};function D(e){return l.a.createElement("span",{style:{float:"left",fontWeight:"bold"}},"\xa0",e.filteredItems.length,"/",e.items.length," matches ")}function W(e){return l.a.createElement("div",null,l.a.createElement(o.b,{style:{marginRight:"1em"},to:"/help"},l.a.createElement(A.a,null,"Home")),l.a.createElement(o.b,{style:{marginRight:"1em"},to:"/helpimport"},l.a.createElement(A.a,null,"Import")),l.a.createElement(o.b,{style:{marginRight:"1em"},to:"/helpexport"},l.a.createElement(A.a,null,"Export")),l.a.createElement(o.b,{style:{marginRight:"1em"},to:"/helpabout"},l.a.createElement(A.a,null,"About")))}function M(e){return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement(W,null),l.a.createElement("h1",null,"NLU tool"),l.a.createElement("div",null,"This tool is intended to help collect open licensed NLU data. "),l.a.createElement("div",null,"Specifically, it captures sentences with related intent and entity maps."),l.a.createElement("div",null,"Examples can be tagged for organisation. eg music player, news reader"),l.a.createElement("div",null,"Examples can be collected into your own skills for export into various NLU training data formats."),l.a.createElement("hr",null),l.a.createElement("p",null,"Create ",l.a.createElement(o.b,{to:"/sources"},l.a.createElement(A.a,null,"Sources"))," from pasted text or uploaded files."),l.a.createElement("p",null,"Use the ",l.a.createElement(o.b,{to:"/import"},l.a.createElement(A.a,null,"Import"))," page to break text into sentences and create NLU example records."),l.a.createElement("p",null,l.a.createElement(o.b,{to:"/examples"},l.a.createElement(A.a,null,"Organise"))," your examples using tags and cleanup untagged examples."),l.a.createElement("p",null,l.a.createElement(o.b,{to:"/search"},l.a.createElement(A.a,null,"Search "))," the community database of NLU example records."),l.a.createElement("p",null,l.a.createElement(o.b,{to:"/skills"},l.a.createElement(A.a,null,"Collect "))," examples into a skill for export in various training formats."))}function R(e){return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement(W,null),l.a.createElement("h1",null,"Importing Data"),l.a.createElement("div",null,"This tool can import files two types of data",l.a.createElement("ul",null,l.a.createElement("li",null,"Entity Values"),l.a.createElement("li",null,"Intent Examples"))),l.a.createElement("hr",null))}function _(e){return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement(W,null),l.a.createElement("h1",null,"About"),l.a.createElement("div",null,"Written by Steve Ryan",l.a.createElement("ul",null,l.a.createElement("li",null,"Entity Values"),l.a.createElement("li",null,"Intent Examples"))),l.a.createElement("hr",null))}function J(e){return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement(W,null),l.a.createElement("h1",null,"Exporting"),l.a.createElement("div",null,"This tool can currently export to a number of formats including",l.a.createElement("ul",null,l.a.createElement("li",null,"Native JSON format"),l.a.createElement("li",null,"Mycroft intents and entities for Padatious NLU"),l.a.createElement("li",null,"RASA training data"),l.a.createElement("li",null,"JOVO model files"))))}function P(e){return l.a.createElement("span",null,l.a.createElement(o.b,{to:e.match.url+"/text",style:{float:"right"}},l.a.createElement(A.a,null,"Paste Text")),l.a.createElement(K,e))}function B(e){var t=e.items;if(t){var n=Object.values(t).map((function(n,a){return l.a.createElement(I.a.Item,{key:a},l.a.createElement(A.a,{style:{float:"right",marginLeft:"0.5em"},variant:"danger",onClick:function(n){window.confirm("Really delete source "+t[a].title)&&e.deleteItem(a)}},"Delete"),l.a.createElement(o.b,{to:e.match.url+"/text/"+n.id},l.a.createElement(A.a,{style:{float:"right",marginLeft:"0.5em"}},"Edit")),l.a.createElement(A.a,{style:{float:"right",marginLeft:"0.5em"},variant:"success",onClick:function(n){e.importExamples(t[a])}},"Import Intents"),l.a.createElement(z,{lookups:e.lookups,importListTo:function(n){e.importLists(t[a],n)},importTo:t[a].title}),l.a.createElement("span",{style:{width:"90%"}},n.title))}));return l.a.createElement(I.a,null,n)}return null}function K(e){return l.a.createElement("form",{onSubmit:function(e){e.preventDefault()},style:{float:"right"}},l.a.createElement(w.a,{multiple:!0,as:"binary",id:"my-file-input",onChange:e.handleFileSelection},l.a.createElement(A.a,{style:{marginRight:"0.5em"}},"Select files")))}function U(e){return l.a.createElement(a.Fragment,null,l.a.createElement("span",null,"With ",e.lookups.selectedTally," selected\xa0"),l.a.createElement(F,{skillSetAll:e.skillSetAll,skillAllValue:e.skillAllValue,setSkillAllValue:e.setSkillAllValue,lookups:e.lookups,untagAll:e.untagAll,unskillAll:e.unskillAll}),l.a.createElement(V,{intentAll:e.intentAll,intentAllValue:e.intentAllValue,setIntentAllValue:e.setIntentAllValue,lookups:e.lookups,untagAll:e.untagAll,unskillAll:e.unskillAll}),l.a.createElement(C,{tagAll:e.tagAll,tagAllValue:e.tagAllValue,setTagAllValue:e.setTagAllValue,lookups:e.lookups,untagAll:e.untagAll,unskillAll:e.unskillAll}))}var H=n(60),Q=(n(84),n(62)),X=n.n(Q);n(85),n(87);function Z(e){var t=Object(a.useState)(e.item&&e.item.title?e.item.title:""),n=Object(s.a)(t,2),i=n[0],r=n[1],c=Object(a.useState)(e.item&&e.item.data?e.item.data:""),u=Object(s.a)(c,2),f=u[0],d=u[1],g=Object(a.useState)(!1),v=Object(s.a)(g,2),h=v[0],y=v[1],E=Object(a.useState)([]),k=Object(s.a)(E,2),b=k[0],S=k[1],x=Object(a.useState)("json"),O=Object(s.a)(x,2),I=O[0],j=O[1],w=Object(a.useState)(["json","text"]),N=Object(s.a)(w,2),C=N[0],V=N[1],F=e.match.params.itemId?e.match.params.itemId:m(),z=(0,e.findKeyBy)("id",F);Object(a.useEffect)((function(){try{if("["===f[0]&&"]"===f[f.length-1]||"{"===f[0]&&"}"===f[f.length-1]){var e=JSON.parse(f);S(e),y(!0),V(["json","text"]),j("json")}else y(!1),V(["text"]),j("text")}catch(t){y(!1),V(["text"]),j("text")}}),[f]);var D=p(e.match.url),W=e.match.url.split("/");"text"!==W[W.length-1]&&(D=p(p(e.match.url)));var M=C.map((function(e,t){return l.a.createElement(L.a.Item,{key:t,value:e,onClick:function(t){j(e)}},e)}));return l.a.createElement("div",{style:{minHeight:"60em"}},l.a.createElement(L.a,{variant:"info",as:T.a},l.a.createElement(L.a.Toggle,{variant:"info",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(A.a,{variant:"info",size:"sm"},l.a.createElement("b",null,I)),l.a.createElement(L.a.Menu,null,M)),l.a.createElement("span",{style:{float:"right"}},f&&i&&l.a.createElement(o.b,{to:D},l.a.createElement(A.a,{onClick:function(t){e.saveItem({id:F,title:i,data:f},z)},variant:"success"},"Save")),!(f&&i)&&l.a.createElement(A.a,{variant:"secondary"},"Save"),l.a.createElement(o.b,{to:D},l.a.createElement(A.a,{variant:"danger"},"Cancel"))),l.a.createElement("label",null,"\xa0Title ",l.a.createElement("input",{size:60,type:"text",onChange:function(e){r(e.target.value)},value:i})),(!h||"text"===I)&&l.a.createElement("textarea",{style:{marginLeft:"0.2em",height:"100%",minHeight:"60em",width:"98%"},onChange:function(e){d(e.target.value)},value:f}),h&&"json"===I&&l.a.createElement("div",{style:{marginLeft:"0.2em",height:"100%",minHeight:"60em",width:"98%"}},l.a.createElement(H.a,{value:b,theme:"ace/theme/github",ace:X.a,history:!0,mode:"code",allowedModes:["tree","code"],onChange:function(e){d(JSON.stringify(e))}})))}function q(e){return l.a.createElement("div",null,l.a.createElement(P,e),l.a.createElement("h1",null,"Sources"),l.a.createElement(B,e))}function Y(e){var t=y.a.createInstance({name:"nlutool",storeName:"import"}),n=y.a.createInstance({name:"nlutool",storeName:"lists"}),i=k("nlutool","sources"),r=i.loadAll,o=i.saveItem,u=i.deleteItem,p=i.items,g=i.findKeyBy,v=i.findBy;function h(e,t){e.preventDefault(),t&&t.forEach((function(e){var t=Object(s.a)(e,2),n=t[0],a=t[1],l={id:null,data:n.target.result,title:a.name};o(l)}))}function E(n){if(!(n&&n.id&&n.data))throw new Error("Missing import data");var a=function(e){var t=[];function n(){var t=f(e),n=[];return t.map((function(e,t){return e&&e.trim().length>0&&n.push({id:m(),example:e,intent:"",entities:[],tags:[]}),null})),n.sort(O)}try{var a=JSON.parse(e);if(a&&a.rasa_nlu_data&&a.rasa_nlu_data.common_examples){for(var l in a.rasa_nlu_data.common_examples){var i=a.rasa_nlu_data.common_examples[l],r=i.entities&&i.entities.map((function(e,t){return{type:e.entity,value:e.value,start:e.start,end:e.end}}));i.text&&i.text.trim().length>0&&t.push({id:m(),example:i.text,intent:i.intent,entities:r,tags:[]})}return t.sort(O)}if(a&&a.invocation&&a.intents){for(var s in a.intents)if(a.intents[s]&&a.intents[s].phrases)for(var o in a.intents[s].phrases)if(a.intents[s].phrases[o]&&a.intents[s].phrases[o].trim().length>0){var c=a.intents[s].phrases[o],u=[];if(a.intents[s].inputs)for(var p in a.intents[s].inputs){var d=a.intents[s].inputs[p],g=c.indexOf("{"+d.name+"}");-1!==g&&(c=c.replace("{"+d.name+"}",d.name));var v={type:d.name,value:d.name,start:g,end:g+d.name.length};return u.push(v),null}t.push({id:m(),example:c.trim(),intent:a.intents[s].name,entities:u,tags:[]})}return t.sort(O)}if(a&&a.length>0&&a[0].example&&a[0].example.trim().length>0){for(var h in a){var y=a[h];y&&y.example&&y.example.trim().length>0&&t.push({id:m(),example:y.example,intent:y.intent,entities:y.entities&&y.entities.length>0&&y.entities[0].value?y.entities:[],tags:y.tags?y.tags:[]})}return t.sort(O)}return n()}catch(E){return console.log(E),n()}}(n.data);t.getItem("alldata").then((function(n){t.setItem("alldata",[].concat(a,n)),e.history.push("/import")}))}function A(t,a){if(!(t&&t.id&&t.data))throw new Error("Missing import data");var l=function(e,t){var n=t||"___";function a(){var t=[];return f(e).map((function(e,n){var a=S(e),l=Object(s.a)(a,2),i=l[0],r=l[1];return(r=r.trim().replace(/[^0-9a-z ]/gi,""))&&r.length>0&&t.push({id:m(),value:r,synonym:i}),null})),t.sort(x)}try{var l=JSON.parse(e);if(Array.isArray(l)){var i={};if(l.length>0&&l[0].value&&l[0].value.trim().length>0){for(var r in l){var o=l[r];if(o.value&&o.value.trim().length>0){var c=o.list?o.list:n;i[c]||(i[c]=[]),i[c].push({id:m(),value:b(o.value),synonym:o.synonym})}}Object.keys(i).map((function(e){var t=i[e],n={};return t.map((function(e){return n[e.value+":"+e.synonym]=e,null})),i[e]=Object.values(n).sort(x),null}))}else{var u=[];for(var p in l){var d=l[p].trim().replace(/[^0-9a-z]/gi,"");if(d&&d.length>0){var g=S(d),v=Object(s.a)(g,2),h=v[0],y=v[1];u.push({id:m(),value:y,synonym:h,list:t})}}i[n]=u.sort(x)}return i}return(i={})[n]=a(),i}catch(E){return console.log(E),(i={})[n]=a(),i}}(t.data);if(!l)throw new Error("Failed import");n.getItem("alldata").then((function(t){var i={};t||(t=[]),t.map((function(e){return e&&e.value&&e.value.trim().length>0&&(i[e.value]=e),null})),Object.keys(l).map((function(e,t){var n=l[e];return n&&n.map((function(t,n){var l=t;return i[t.value]?("___"!==e?t.tags?l.tags.push(e):l.tags=[e]:l.tags=[],a&&a.trim().length>0&&l.tags.push(a.trim()),l.tags=d(l.tags).sort(),i[l.value]=l):(l={id:m(),value:l.value,synonym:l.synonym?l.synonym:"",tags:[]},"___"!==e&&(t.tags?l.tags.push(e):l.tags=[e]),a&&a.trim().length>0&&l.tags.push(a.trim()),l.tags=d(l.tags).sort(),i[l.value]=l),null})),null})),n.setItem("alldata",Object.values(i)),e.history.push("/lists"),e.setPageMessage("Imported "+Object.keys(i).length+" entities into the list "+a),setTimeout((function(){e.setPageMessage("")}),2e3)}))}return Object(a.useEffect)((function(){r()}),[]),l.a.createElement("div",{className:"LocalStorageUploadManager"},l.a.createElement(c.a,{path:["".concat(e.match.path,"/text/:itemId?"),"".concat(e.match.path,"/text")],render:function(e){return l.a.createElement(Z,Object.assign({},e,{item:v("id",e.match.params.itemId),saveItem:o,deleteItem:u,findKeyBy:g}))}}),l.a.createElement(c.a,Object.assign({},e,{exact:!0,path:e.match.path,render:function(t){return l.a.createElement(q,Object.assign({},e,{items:p,deleteItem:u,saveItem:o,importExamples:E,importLists:A,handleFileSelection:h}))}})))}var $=n(32),G=function(e){return l.a.createElement(L.a,{as:T.a},l.a.createElement(L.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(A.a,{size:"sm"},"Set List"," "),l.a.createElement(L.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(t){t.preventDefault(),e.tagAll(t.target.value)}},l.a.createElement(N.a,null,l.a.createElement("input",{type:"text",className:"form-control",onChange:function(t){e.setTagAllValue(t.target.value)},value:e.tagAllValue}),l.a.createElement(A.a,{variant:"success",onClick:function(t){e.tagAll(e.tagAllValue)}},"Add"))),e.lookups.listsLookups&&e.lookups.listsLookups.sort().map((function(t,n){return l.a.createElement(L.a.Item,{key:n,value:t},l.a.createElement(A.a,{variant:"success",onClick:function(n){e.setTagAllValue(t),e.tagAll(t)}},"Add to ",t),l.a.createElement(A.a,{variant:"danger",onClick:function(n){e.untagAll(t)},style:{marginLeft:"0.5em"}},"Remove"))}))))},ee=function(e){var t=e.searchFilter,n=e.setSearchFilter;return l.a.createElement("input",{style:{marginLeft:"0.5em"},type:"text",value:t,onChange:function(e){var t=e.target.value;n(t)},placeholder:"Search"})},te=n(15),ne=n.n(te),ae=function(e){var t=Object(a.useState)([]),n=Object(s.a)(t,2),i=n[0],r=n[1];return Object(a.useEffect)((function(){var t=e.lookups.listsLookups&&e.lookups.listsLookups.sort().map((function(t,n){return l.a.createElement(L.a.Item,{key:n,value:t,onClick:function(n){e.setListFilterValue(t)}},t)}));t.unshift(l.a.createElement(L.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(t){e.setListFilterValue("")}},"\xa0")),t.push(l.a.createElement(L.a.Item,{key:"Not In A List",value:"Not In A List",onClick:function(t){e.setListFilterValue("Not In A List")}},l.a.createElement("b",null,"Not In A List"))),r(t)}),[e.lookups]),l.a.createElement("div",null,l.a.createElement("span",null,e.lookups.selectedListTally>0&&l.a.createElement(A.a,{size:"lg",onClick:function(t){e.resetSelection(t)},variant:"success"},l.a.createElement("img",{style:{height:"1em"},src:ne.a,alt:"Deselect"})),e.lookups.selectedListTally<=0&&l.a.createElement(A.a,{size:"lg",onClick:function(t){e.selectAll(t)},variant:"secondary"},l.a.createElement("img",{style:{height:"1em"},src:ne.a,alt:"Select"}))),l.a.createElement("span",{style:{marginLeft:"0.4em"}},l.a.createElement(ee,{searchFilter:e.searchFilter,setSearchFilter:e.setSearchFilter})),l.a.createElement(L.a,{style:{marginLeft:"0.5em"},as:T.a},l.a.createElement(L.a.Toggle,{split:!0,id:"dropdown-split-basic"}),l.a.createElement(A.a,null,"List"+(e.listFilterValue?" - "+e.listFilterValue:"")," "),l.a.createElement(L.a.Menu,null,i)),l.a.createElement(A.a,{style:{marginLeft:"1em"},variant:"success",onClick:function(t){e.createEmptyItem(e.listFilterValue)}},"New Entity"))},le=n(19),ie=n.n(le);var re=function(e,t,n,i){var r=Object(a.useState)({}),o=Object(s.a)(r,2),c=o[0],u=o[1],m=Object(a.useState)([]),p=Object(s.a)(m,2),f=p[0],v=p[1],h=l.a.createRef();return Object(a.useEffect)((function(){e.tags&&v(e.tags.map((function(e,t){return{id:t,name:e}})))}),[e]),{selectionState:c,setSelectionState:u,tags:f,setTags:v,reactTags:h,onTagDelete:function(a){var l=f.slice(0);l.splice(a,1),v(l);var i=e;i.tags=l.map((function(e){return e.name})),t(i,n)},onTagAddition:function(a){var l=[].concat(f,a);v(g(l,"name").sort((function(e,t){return e.name>t.name?1:-1})));var i=e;i.tags=d(l.map((function(e){return e.name}))).sort(),t(i,n)},updateExampleContent:function(a){if(e&&"string"===typeof a){var l=e;l.value=a,t(l,n)}},updateExampleSynonym:function(a){if(e&&"string"===typeof a){var l=e;l.synonym=a,t(l,n)}},selectItem:function(n){var a=e;e.isSelected=!0,t(a,n)},deselectItem:function(n){var a=e;e.isSelected=!1,t(a,n)}}};function se(e){var t=e.item,n=e.query;return l.a.createElement("span",{id:t.id,className:t.name===n?"match":"no-match"},t.name)}function oe(e){var t=e.item,n=e.splitNumber,a=e.style,i=re(e.item,e.saveItem,e.splitNumber,e.style),r=i.tags,s=i.reactTags,o=i.onTagDelete,c=i.onTagAddition,u=i.updateExampleContent,m=i.updateExampleSynonym,p=i.selectItem,f=i.deselectItem;return t&&l.a.createElement("div",{style:a,className:n%2?"ListItemOdd":"ListItemEven"},l.a.createElement("div",{style:{position:"relative",width:"100%",textAlign:"left",borderTop:"2px solid black"}},l.a.createElement("div",{style:{float:"right"}},l.a.createElement(A.a,{variant:"danger",size:"sm",style:{float:"right",fontWeight:"bold",borderRadius:"15px",marginTop:"0.2em"},onClick:function(a){window.confirm("Really delete")&&e.deleteItem(n,t.id?t.id:"")}},"X")),l.a.createElement("div",{style:{float:"left"}},!t.isSelected&&l.a.createElement(A.a,{style:{float:"left"},size:"lg",variant:"secondary",onClick:function(){p(n)}},l.a.createElement("img",{style:{height:"1em"},src:ne.a,alt:"Select"})),t.isSelected&&l.a.createElement(A.a,{style:{float:"left"},size:"lg",variant:"success",onClick:function(){f(n)}},l.a.createElement("img",{style:{height:"1em"},src:ne.a,alt:"Deselect"}))),l.a.createElement("input",{style:{float:"left"},size:"25",type:"text",value:t.value,onChange:function(e){u(e.target.value)}}),l.a.createElement("label",{style:{float:"left",marginLeft:"0.5em"}},"Synonym ",l.a.createElement("input",{size:"15",type:"text",value:t.synonym,onChange:function(e){m(e.target.value)}})),l.a.createElement("span",{style:{float:"left"}},l.a.createElement(ie.a,{placeholderText:"Add to list",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:s,tags:r,suggestionComponent:se,suggestions:e.lookups.listsLookups.map((function(e,t){return{id:t,name:e}})),onDelete:o,onAddition:c}))))}function ce(e,t){switch(t.type){case"append":return t.item?[].concat(Object(u.a)(e),[t.item]):e;case"prepend":return t.item?[t.item].concat(Object(u.a)(e)):e;case"insert":if(t.item&&"number"===typeof t.index&&t.index>=0)return[].concat(Object(u.a)(e.slice(0,t.index)),[t.item],Object(u.a)(e.slice(t.index)));throw new Error("Missing item or index on reduce insert");case"remove":if("number"===typeof t.index&&t.index>=0)return[].concat(Object(u.a)(e.slice(0,t.index)),Object(u.a)(e.slice(t.index+1)));throw new Error("Missing index on reduce remove");case"update":if(t.item&&"number"===typeof t.index&&t.index>=0)return[].concat(Object(u.a)(e.slice(0,t.index)),[t.item],Object(u.a)(e.slice(t.index+1)));throw new Error("Missing item or index on reduce update");case"replaceall":return t.items;default:throw new Error}}function ue(e,t,n){n||(n="data");var l=Object(a.useReducer)(ce,[]),i=Object(s.a)(l,2),r=i[0],o=i[1],c=y.a.createInstance({name:e||"localstoragemanager",storeName:t||"single_key_data"});function u(e,t){for(var n in r)if(r[n]&&r[n][e]===t)return n}return Object(a.useEffect)((function(){c.setItem(n,r)}),[r]),{getId:function(e){if(e&&e.id)return e.id;throw new Error("Missing ID value in getId")},loadAll:function(){c.getItem(n).then((function(e){o({type:"replaceall",items:e||[]})}))},saveItem:function(e,t){if(e){var n=!1;e.id||(n=!0,e.id=m()),0===r.length?o({type:"append",item:e}):o(null===t||void 0===t||n?{type:"prepend",item:e}:{type:"update",item:e,index:t})}},deleteItem:function(e){o({type:"remove",index:e})},items:r,setItems:function(e){c.clear().then((function(){o({type:"replaceall",items:e})}))},findKeyBy:u,findBy:function(e,t){var n=u(e,t);return r[n]},filter:function(e){var t=[];return e&&r.map((function(n,a){return n&&e(n)&&t.push(n),null})),t}}}var me=function(e,t,n,i){var r=ue(e,t,n),o=r.loadAll,c=r.saveItem,u=r.deleteItem,m=r.items,p=r.setItems,f=r.findKeyBy,d=r.filter,g=Object(a.useState)([]),v=Object(s.a)(g,2),h=v[0],y=v[1],E=Object(a.useState)([]),k=Object(s.a)(E,2),b=k[0],S=k[1],x=Object(a.useState)(""),O=Object(s.a)(x,2),A=O[0],I=O[1],j=Object(a.useState)(""),w=Object(s.a)(j,2),L=w[0],T=w[1],N=l.a.createRef(),C=Object(a.useState)(""),V=Object(s.a)(C,2),F=V[0],z=V[1];return Object(a.useEffect)((function(){var e=d((function(e){var t=!0;A&&A.trim().length>0&&(t=-1!==e.value.indexOf(A));var n=!0;return"Not In A List"===F?n=!(e.tags&&(!e.tags||0!==e.tags.length)):F&&F.trim().length>0&&(n=!(!e.tags||-1===e.tags.indexOf(F))),t&&n})),t={};e.map((function(e){return e.id&&(t[e.id]=!0),null})),e.sort((function(e,t){return e.value<t.value})),y(e),S(t),i(m)}),[m,A,F]),{loadAll:o,saveItem:c,deleteItem:u,items:m,setItems:p,findKeyBy:f,filter:d,filteredItems:h,setFilteredItems:y,searchFilter:A,setSearchFilter:I,tagAllValue:L,setTagAllValue:T,listRef:N,listFilterValue:F,setListFilterValue:z,tagAll:function(e){var t=e||L;if(m){var n=[];m.map((function(e,a){if(e.isSelected&&e.id&&b[e.id]){var l=JSON.parse(JSON.stringify(e));l.tags||(l.tags=[]),-1===l.tags.indexOf(t)&&l.tags.push(t),n.push(l)}else n.push(e);return null})),p(n)}},untagAll:function(e){if(m){var t=[];m.map((function(n,a){if(n.isSelected&&n.id&&b[n.id]){var l=JSON.parse(JSON.stringify(n));l.tags||(l.tags=[]);var i=[];l.tags.map((function(t){return t!==e&&i.push(t),null})),l.tags=i,t.push(l)}else t.push(n);return null})),p(t)}},resetSelection:function(){if(m){var e=[];m.map((function(t,n){var a=t;return a.isSelected=!1,e.push(a),null})),p(e)}},selectAll:function(){if(m){var e=[];m.map((function(t,n){if(t.id&&b[t.id]){var a=t;a.isSelected=!0,e.push(a)}else a.isSelected=!1,e.push(a);return null})),p(e)}},saveItemWrap:function(e,t){c(e,t),N.current.resetAfterIndex(t),i(m)},getItemSize:function(e){var t=40;return window.innerWidth<430?t=120:window.innerWidth<=768&&(t=70),t},deleteAll:function(e){if(window.confirm("Really delete all selected")&&m){var t=[];m.map((function(e,n){return e.id&&b[e.id]&&e.isSelected||t.push(e),null})),p(t),N.current.resetAfterIndex(0)}},createEmptyItem:function(e){var t=[];e&&"Not In A List"!==e&&e.trim().length>0&&t.push(e),I(""),c({id:null,value:"",synonym:"",tags:t})}}},pe=function(e){var t=e.index,n=e.style,a=e.data.items[t];return l.a.createElement(oe,{item:a,splitNumber:t,style:n,saveItem:e.data.saveItem,deleteItem:e.data.deleteItem,saveNlu:e.data.saveNlu,lookups:e.data.lookups})};function fe(e){var t=me("nlutool","lists","alldata",e.updateLists),n=t.loadAll,i=t.deleteItem,r=t.items,s=t.findKeyBy,c=t.searchFilter,u=t.setSearchFilter,m=t.tagAllValue,p=t.setTagAllValue,f=t.listRef,d=t.tagAll,g=t.untagAll,v=t.resetSelection,h=t.selectAll,y=t.saveItemWrap,E=t.getItemSize,k=t.filteredItems,b=t.listFilterValue,S=t.setListFilterValue,x=t.deleteAll,O=t.createEmptyItem;return Object(a.useEffect)((function(){n(),e.updateLists(r)}),[]),l.a.createElement("div",null,l.a.createElement(o.b,{style:{float:"right"},to:"/sources"},l.a.createElement(A.a,{variant:"success"},"Sources")),l.a.createElement(ae,Object.assign({},e,{searchFilter:c,setSearchFilter:u,listFilterValue:b,setListFilterValue:S,resetSelection:v,selectAll:h,createEmptyItem:O})),function(e){if(k&&k.length>0)return l.a.createElement("div",null,l.a.createElement("span",{style:{float:"left",fontWeight:"bold"}},"\xa0",k.length," matches "),e.lookups.selectedListTally>0&&l.a.createElement("span",{style:{float:"right"}},l.a.createElement("span",null,"With ",e.lookups.selectedListTally," selected\xa0"),l.a.createElement(G,{tagAll:d,tagAllValue:m,setTagAllValue:p,untagAll:g,lookups:e.lookups}),l.a.createElement(A.a,{style:{marginLeft:"1em"},onClick:x,variant:"danger"},"Delete Selected")),l.a.createElement("div",{style:{clear:"both"}},l.a.createElement("div",{style:{clear:"both"}},l.a.createElement($.a,{key:"list",ref:f,itemData:{items:k,saveItem:y,deleteItem:i,findKeyBy:s,lookups:e.lookups},itemKey:function(e){return e},className:"List",height:700,itemCount:k.length,itemSize:E,width:"100%"},pe))))}(e))}var de=function(e,t,n,i){var r=Object(a.useState)({}),o=Object(s.a)(r,2),c=o[0],u=o[1],m=Object(a.useState)(""),p=Object(s.a)(m,2),f=p[0],v=p[1],h=Object(a.useState)(e&&e.intent?e.intent:""),y=Object(s.a)(h,2),E=y[0],k=y[1],b=Object(a.useState)([]),S=Object(s.a)(b,2),x=S[0],O=S[1],A=Object(a.useState)([]),I=Object(s.a)(A,2),j=I[0],w=I[1],L=l.a.createRef(),T=l.a.createRef();function N(e,t,n){if(e){if(e.createTextRange){var a=e.createTextRange();a.collapse(!0),a.moveStart("character",t),a.moveEnd("character",n-t),a.select()}else e.setSelectionRange?e.setSelectionRange(t,n):e.selectionStart&&(e.selectionStart=t,e.selectionEnd=n);e.focus()}}function C(a,l){var i=e;if(e.entities){var r=e.entities?e.entities:[],s=r[a]?r[a]:{};s.type=l,c&&c.textSelection&&(s.value=c.textSelection,s.start=c.startTextSelection,s.end=c.endTextSelection),r[a]?r[a]=s:r.push(s),i.entities=r,u(null),t(i,n)}}return Object(a.useEffect)((function(){e.tags&&O(e.tags.map((function(e,t){return{id:t,name:e}}))),e.skills&&w(e.skills.map((function(e,t){return{id:t,name:e}})))}),[e]),{intentTitle:E,setIntentTitle:k,selectionState:c,setSelectionState:u,newEntity:f,setNewEntity:v,tags:x,setTags:O,skills:j,setSkills:w,reactTags:L,reactSkills:T,onTagDelete:function(a){var l=x.slice(0);l.splice(a,1),O(l);var i=e;i.tags=l.map((function(e){return e.name})),t(i,n)},onTagAddition:function(a){var l=[].concat(x,a);O(g(l,"name").sort((function(e,t){return e.name>t.name?1:-1})));var i=e;i.tags=d(l.map((function(e){return e.name}))).sort(),t(i,n)},onSkillDelete:function(a){var l=j.slice(0);l.splice(a,1),w(l);var i=e;i.skills=l.map((function(e){return e.name})),t(i,n)},onSkillAddition:function(a){var l=[].concat(j,a);w(g(l,"name").sort((function(e,t){return e.name>t.name?1:-1})));var i=e;i.skills=d(l.map((function(e){return e.name}))).sort(),t(i,n)},createSelection:N,updateExampleContent:function(a){if(e&&"string"===typeof e.example&&"string"===typeof a){var l=JSON.parse(JSON.stringify(e));if(e.entities&&e.entities.length>0){var i=e.entities,r=function(e,t){if(e===t)return-1;for(var n=0;e[n]===t[n];n++);return n}(a,e.example);if(a.length-e.example.length>0){var s=a.length-e.example.length;l.entities=i.map((function(e,t){return r<e.start?(e.start+=s,e.end+=s):r<e.end&&(e.end+=s,e.value=a.slice(e.start,e.end)),e}))}else if(a.length===e.example.length)l.entities=i.map((function(e,t){return r>=e.start&&r<e.end&&(e.value=a.slice(e.start,e.end)),e}));else{var o=a.length-e.example.length;l.entities=i.map((function(e,t){return r<e.start?(e.start+=o,e.end+=o):r<e.end&&(e.end+=o,e.value=a.slice(e.start,e.end)),e}))}}l.example=a,t(l,n)}},entityClicked:function(t,a){if(e.entities){var l=e.entities;c&&c.textSelection&&0!==c.textSelection.length?C(t,a):l[t]&&N(document.getElementById("example_input_"+n),l[t].start,l[t].end)}},entityTypeChanged:C,intentChanged:function(a){var l=e;l.intent=a,t(l,n)},entityDelete:function(a){if(e.entities){var l=e,i=e.entities.slice(0,a).concat(e.entities.slice(a+1));l.entities=i,t(l,n)}},selectItem:function(n){var a=e;e.isSelected=!0,t(a,n)},setSkill:function(e,t){},deselectItem:function(n){var a=e;e.isSelected=!1,t(a,n)}}},ge=n(44),ve=n.n(ge);function he(e){var t=e.item,n=e.splitNumber,i=e.style,r=de(e.item,e.saveItem,e.splitNumber,e.style),o=r.intentTitle,c=r.setIntentTitle,u=r.selectionState,m=r.setSelectionState,p=r.newEntity,f=r.setNewEntity,d=r.tags,g=r.skills,v=r.reactTags,h=r.reactSkills,y=r.onTagDelete,E=r.onTagAddition,k=r.onSkillDelete,b=r.onSkillAddition,S=r.updateExampleContent,x=r.entityClicked,O=r.entityTypeChanged,I=r.intentChanged,j=r.entityDelete,w=r.selectItem,N=r.deselectItem,C=Object(a.useState)(e.item&&e.item.example?e.item.example:""),V=Object(s.a)(C,2),F=V[0],z=V[1],D=e.lookups.intentLookups&&e.lookups.intentLookups.sort().map((function(e,t){return l.a.createElement(L.a.Item,{key:t,value:e,onClick:function(t){I(e)}},e)})),W=t&&t.entities&&t.entities.map((function(t,n){var a=e.lookups.entityLookups.sort().map((function(e,t){return l.a.createElement(L.a.Item,{key:t,value:e,onClick:function(t){O(n,e)}},e)}));return l.a.createElement(L.a,{style:{marginLeft:"0.2em"},variant:"info",key:n,as:T.a},l.a.createElement(L.a.Toggle,{variant:"info",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(A.a,{variant:"info",size:"sm",onClick:function(e){x(n,t.type)}},l.a.createElement("b",null,t.type),"-",t.value?t.value:"Select Entity Type"),l.a.createElement(A.a,{variant:"info",size:"sm",onClick:function(e){j(n,"")}},"X"),l.a.createElement(L.a.Menu,null,l.a.createElement("form",{style:{display:"inline"}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){O(n,e.target.value)},value:t.type}))),a))}));if(u&&u.textSelection&&u.textSelection.length>0&&u.textSelectionFrom===n){var M=e.lookups.entityLookups&&e.lookups.entityLookups.sort().map((function(e,t){return l.a.createElement(L.a.Item,{key:t,value:e,onClick:function(t){O(-1,e)}},e)}));W.push(l.a.createElement(L.a,{key:"new",variant:"success",as:T.a},l.a.createElement(L.a.Toggle,{variant:"success",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(A.a,{variant:"success",size:"sm"},"New Entity"),l.a.createElement(L.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(e){e.preventDefault(),O(-1,p)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){f(e.target.value)},value:p}))),M)))}return t&&l.a.createElement("div",{style:i,className:n%2?"ListItemOdd":"ListItemEven"},l.a.createElement("div",{style:{position:"relative",width:"100%",textAlign:"left",borderTop:"2px solid black"}},!t.isSelected&&l.a.createElement(A.a,{style:{float:"left"},size:"lg",variant:"secondary",onClick:function(){w(n)}},l.a.createElement("img",{style:{height:"1em"},src:ne.a,alt:"Select"})),t.isSelected&&l.a.createElement(A.a,{style:{float:"left"},size:"lg",variant:"success",onClick:function(){N(n)}},l.a.createElement("img",{style:{height:"1em"},src:ne.a,alt:"Deselect"})),l.a.createElement(A.a,{variant:"danger",style:{float:"right"},onClick:function(a){window.confirm("Really delete")&&e.deleteItem(n,t.id?t.id:"")}},l.a.createElement("img",{src:ve.a,alt:"Delete"})," Delete"),l.a.createElement(L.a,{style:{float:"left"},as:T.a},l.a.createElement(L.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(A.a,{size:"sm"},t.intent?t.intent.toString():"Select Intent"," "),l.a.createElement(L.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(e){e.preventDefault(),I(o)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",value:o,onChange:function(e){c(e.target.value)}}))),D)),l.a.createElement("span",{style:{float:"left"}},W),l.a.createElement("div",{style:{float:"left"}},l.a.createElement(ie.a,{placeholderText:"Add to skill",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:h,tags:g,suggestionComponent:se,suggestions:e.lookups.skillLookups.map((function(e,t){return{id:t,name:e}})),onDelete:k,onAddition:b})),l.a.createElement("div",{style:{float:"left"}},l.a.createElement(ie.a,{placeholderText:"Add new tag",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:v,tags:d,suggestionComponent:se,suggestions:e.lookups.tagLookups.map((function(e,t){return{id:t,name:e}})),onDelete:y,onAddition:E})),l.a.createElement("input",{onFocus:function(e){m(null)},onSelect:function(e){var t=window.getSelection().toString();m({textSelection:t,textSelectionFrom:n,startTextSelection:e.target.selectionStart,endTextSelection:e.target.selectionEnd})},type:"text",style:{width:"80%"},value:F,id:"example_input_"+n,onChange:function(e){z(e.target.value),S(e.target.value)}})))}var ye=function(e){var t=e.lookups.skillLookups&&e.lookups.skillLookups.sort().map((function(t,n){return l.a.createElement(L.a.Item,{key:n,value:t,onClick:function(n){e.setSkillFilterValue(t)}},t)}));t.unshift(l.a.createElement(L.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(t){e.setSkillFilterValue("")}},"\xa0"));var n=e.lookups.intentLookups&&e.lookups.intentLookups.sort().map((function(t,n){return l.a.createElement(L.a.Item,{key:n,value:t,onClick:function(n){e.setIntentFilterValue(t)}},t)}));return n.unshift(l.a.createElement(L.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(t){e.setIntentFilterValue("")}},"\xa0")),l.a.createElement("div",null,l.a.createElement("span",null,e.lookups.selectedTally>0&&l.a.createElement(A.a,{size:"lg",onClick:function(t){e.resetSelection(t)},variant:"success"},l.a.createElement("img",{style:{height:"1em"},src:ne.a,alt:"Deselect"})),e.lookups.selectedTally<=0&&l.a.createElement(A.a,{size:"lg",onClick:function(t){e.selectAll(t)},variant:"secondary"},l.a.createElement("img",{style:{height:"1em"},src:ne.a,alt:"Select"}))),l.a.createElement("span",{style:{marginLeft:"0.4em"}},l.a.createElement(ee,{searchFilter:e.searchFilter,setSearchFilter:e.setSearchFilter})),l.a.createElement(L.a,{style:{marginLeft:"0.5em"},as:T.a},l.a.createElement(L.a.Toggle,{split:!0,id:"dropdown-split-basic"}),l.a.createElement(A.a,null,"Intent "+(e.intentFilterValue?" - "+e.intentFilterValue:"")," "),l.a.createElement(L.a.Menu,null,n)),l.a.createElement(L.a,{style:{marginLeft:"0.5em"},as:T.a},l.a.createElement(L.a.Toggle,{split:!0,id:"dropdown-split-basic"}),l.a.createElement(A.a,null,"Skill "+(e.skillFilterValue?" - "+e.skillFilterValue:"")," "),l.a.createElement(L.a.Menu,null,t)),l.a.createElement(A.a,{style:{marginLeft:"1em"},variant:"success",onClick:function(t){e.createEmptyItem(e.skillFilterValue,e.intentFilterValue)}},"New Intent"))};var Ee=function(e,t,n,i){var r=ue(e,t,n),o=r.loadAll,u=r.saveItem,m=r.deleteItem,p=r.items,f=r.setItems,g=r.findKeyBy,v=r.filter,h=Object(a.useState)([]),E=Object(s.a)(h,2),k=E[0],b=E[1],S=Object(a.useState)([]),x=Object(s.a)(S,2),O=x[0],A=x[1],I=Object(a.useState)(""),j=Object(s.a)(I,2),w=j[0],L=j[1],T=Object(a.useState)(""),N=Object(s.a)(T,2),C=N[0],V=N[1],F=Object(a.useState)(""),z=Object(s.a)(F,2),D=z[0],W=z[1],M=Object(a.useState)(""),R=Object(s.a)(M,2),_=R[0],J=R[1],P=l.a.createRef(),B=Object(c.f)(),K=Object(c.e)(),U=B.skillId?B.skillId:"",H=B.intentId?B.intentId:"";return Object(a.useEffect)((function(){var e=v((function(e){if((!w||w.trim().length<=0)&&(!U||U.trim().length<=0)&&(!H||H.trim().length<=0))return!0;var t=!0;H&&H.length>0&&(t=e.intent===H);var n=!0;U&&U.length>0&&(n=!(!e.skills||-1===e.skills.indexOf(U)));var a=!0;return w&&w.length>0&&(a=!(!e.example||-1===e.example.indexOf(w))),a&&n&&t})),t={};e.map((function(e){return e.id&&(t[e.id]=!0),null})),e.sort((function(e,t){return e.example<t.example})),b(e),A(t),i(e)}),[p,w,U,H]),{loadAll:o,saveItem:u,deleteItem:m,items:p,setItems:f,findKeyBy:g,filter:v,filteredItems:k,setFilteredItems:b,createEmptyItem:function(e,t){L("");var n=[];e&&e.trim().length>0&&n.push(e);var a="";t&&t.trim().length>0&&(a=t),u({id:null,example:"",intent:a,skills:n,tags:[]})},searchFilter:w,setSearchFilter:L,tagAllValue:C,setTagAllValue:V,skillAllValue:D,setSkillAllValue:W,skillFilterValue:U,setSkillFilterValue:function(e){var t=["/"+K.location.pathname.split("/")[1]];(U=e).length>0&&t.push("/skill/"+U),H.length>0&&t.push("/intent/"+H),K.push(t.join(""))},intentFilterValue:H,setIntentFilterValue:function(e){var t=["/examples"];H=e,U.length>0&&t.push("/skill/"+U),H.length>0&&t.push("/intent/"+H),K.push(t.join(""))},intentAllValue:_,setIntentAllValue:J,listRef:P,tagAll:function(e){var t=e||C;if(p){var n=[];p.map((function(e,a){if(e.isSelected&&e.id&&O[e.id]){var l=JSON.parse(JSON.stringify(e));l.tags||(l.tags=[]),-1===l.tags.indexOf(t)&&l.tags.push(t),l.tags=d(l.tags),n.push(l)}else n.push(e);return null})),f(n)}},untagAll:function(e){if(p){var t=[];p.map((function(n,a){if(n.isSelected&&n.id&&O[n.id]){var l=JSON.parse(JSON.stringify(n));l.tags||(l.tags=[]);var i=[];l.tags.map((function(t){return t!==e&&i.push(t),null})),l.tags=i,t.push(l)}else t.push(n);return null})),f(t)}},unskillAll:function(e){if(p){var t=[];p.map((function(n,a){if(n.isSelected&&n.id&&O[n.id]){var l=JSON.parse(JSON.stringify(n));l.skills||(l.skills=[]);var i=[];l.skills.map((function(t){return t!==e&&i.push(t),null})),l.skills=i,t.push(l)}else t.push(n);return null})),f(t)}},intentAll:function(e){var t=e||_;if(p){var n=[];p.map((function(e,a){if(e.isSelected&&e.id&&O[e.id]){var l=e;l.intent=t,n.push(l)}else n.push(e);return null})),f(n)}},resetSelection:function(){if(p){var e=[];p.map((function(t,n){var a=t;return a.isSelected=!1,e.push(a),null})),f(e)}},selectAll:function(){if(p){var e=[];p.map((function(t,n){if(t.id&&O[t.id]){var a=t;a.isSelected=!0,e.push(a)}else a.isSelected=!1,e.push(a);return null})),f(e)}},skillSetAll:function(e){var t=e||D;if(p){var n=[];p.map((function(e,a){if(e.isSelected&&e.id&&O[e.id]){var l=JSON.parse(JSON.stringify(e));l.skills||(l.skills=[]),-1===l.skills.indexOf(t)&&l.skills.push(t),l.skills=d(l.skills),n.push(l)}else n.push(e);return null})),f(n)}},saveItemWrap:function(e,t){u(e,t),P.current.resetAfterIndex(t),i(p)},getItemSize:function(e){var t=100,n=70,a=10,l=8,i=6;window.innerWidth<430?(t=140,n=50,a=4,l=1,i=1):window.innerWidth<=768&&(t=120,n=30,a=2,l=1,i=2);var r=0,s=p[e];return s&&s.entities&&(r+=s.entities.length/l),s&&s.tags&&(r+=s.tags.length/a),s&&s.skills&&(r+=s.skills.length/i),t+Math.round(r)*n},deleteAll:function(e){if(window.confirm("Really delete all selected examples")&&p){var t=[];p.map((function(e,n){return e.id&&O[e.id]&&e.isSelected||t.push(e),null})),f(t),P.current.resetAfterIndex(0)}},saveAll:function(e){if(p){var t=[],n=[];k.map((function(e,a){return e.intent&&e.intent.length>0&&e.id&&O[e.id]&&e.isSelected?n.push(e):t.push(e),null})),function(e){var t=y.a.createInstance({name:"nlutool",storeName:"examples"});t.getItem("alldata").then((function(n){e.map((function(e){return n.push(e),null})),t.setItem("alldata",n)}))}(n),f(t),P.current.resetAfterIndex(0)}},saveNlu:function(e){p&&p[e]&&(!function(e){var t=y.a.createInstance({name:"nlutool",storeName:"examples"});t.getItem("alldata").then((function(n){n.push(e),t.setItem("alldata",n)}))}(p[e]),m(e))}}},ke=function(e){var t=e.index,n=e.style,a=e.data.items[t];return l.a.createElement(he,{item:a,splitNumber:t,style:n,saveItem:e.data.saveItem,deleteItem:e.data.deleteItem,lookups:e.data.lookups})};function be(e){var t=Ee("nlutool","examples","alldata",e.updateLookups),n=t.loadAll,i=t.deleteItem,r=t.items,s=t.findKeyBy,c=t.searchFilter,u=t.setSearchFilter,m=t.skillFilterValue,p=t.setSkillFilterValue,f=t.intentFilterValue,d=t.setIntentFilterValue,g=t.tagAllValue,v=t.setTagAllValue,h=t.skillAllValue,y=t.setSkillAllValue,E=t.intentAllValue,k=t.setIntentAllValue,b=t.listRef,S=t.tagAll,x=t.untagAll,O=t.unskillAll,I=t.intentAll,j=t.resetSelection,w=t.selectAll,L=t.skillSetAll,T=t.saveItemWrap,N=t.getItemSize,C=t.deleteAll,V=t.filteredItems,F=t.createEmptyItem;return Object(a.useEffect)((function(){n()}),[]),l.a.createElement("div",null,l.a.createElement(o.b,{style:{float:"right"},to:"/import"},l.a.createElement(A.a,{variant:"warning"},"Current Import")),l.a.createElement(ye,Object.assign({},e,{searchFilter:c,setSearchFilter:u,skillFilterValue:m,setSkillFilterValue:p,resetSelection:j,selectAll:w,createEmptyItem:F,intentFilterValue:f,setIntentFilterValue:d,untagAll:x,unskillAll:O})),function(e){return V&&V.length>0?l.a.createElement("div",null,l.a.createElement(D,{items:r,filteredItems:V}),e.lookups.selectedTally>0&&l.a.createElement("span",{style:{float:"right"}},l.a.createElement(U,{skillSetAll:L,skillAllValue:h,setSkillAllValue:y,untagAll:x,unskillAll:O,intentAll:I,intentAllValue:E,setIntentAllValue:k,tagAll:S,tagAllValue:g,setTagAllValue:v,lookups:e.lookups}),l.a.createElement(A.a,{style:{marginLeft:"1em"},onClick:C,variant:"danger"},"Delete Selected")),l.a.createElement($.a,{ref:b,itemData:{items:V,saveItem:T,deleteItem:i,findKeyBy:s,lookups:e.lookups},itemKey:function(e){return e},className:"List",height:700,itemCount:V.length,itemSize:N,width:"100%"},ke)):l.a.createElement("div",null,l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("br",null),l.a.createElement("b",null,"No items"),l.a.createElement("br",null),l.a.createElement("br",null),"Upload ",l.a.createElement(o.b,{to:"/sources"},l.a.createElement(A.a,null,"Sources"))," then ",l.a.createElement(o.b,{to:"/import"},l.a.createElement(A.a,null,"Import")),"."))}(e))}var Se=n(109),xe=n(63),Oe=n.n(xe),Ae=n(64),Ie=n.n(Ae);function je(e){var t={paddingLeft:"0.3em"},n=e.history&&e.history.location&&e.history.location.pathname?e.history.location.pathname:"/",a={"/":{name:"NLU Tool",show:!1},"/search":{name:"Search",show:!0,link:"https://github.com/syntithenai/opennludata/wiki"},"/sources":{name:"Sources",show:!1},"/import":{name:"Import",show:!1},"/lists":{name:"Entities",show:!0},"/examples":{name:"Intents",show:!0},"/skills":{name:"Skills",show:!0},"/help":{name:"Help",show:!1}},i=Object.keys(a).map((function(e,i){var r=a[e];return r.show?r.link?l.a.createElement("a",{key:i,style:t,href:r.link},l.a.createElement(A.a,{variant:"primary"},r.name)):l.a.createElement(o.b,{key:i,style:t,to:e},l.a.createElement(A.a,{variant:e===n?"success":"primary"},r.name)):null})),r=a[n]&&a[n].helpComponent?a[n].helpComponent:l.a.createElement(o.b,{to:"/help"},l.a.createElement(A.a,null,"Help"));return l.a.createElement(Se.a,{bg:"dark",variant:"dark"},e.message&&l.a.createElement("div",{style:{position:"fixed",top:5,left:window.innerWidth?window.innerWidth/2-40:100,border:"2px solid red",background:"pink",padding:"0.5em",minWidth:"400px",borderRadius:"5px"}},l.a.createElement(A.a,{variant:"danger",size:"sm",style:{float:"right",fontWeight:"bold",borderRadius:"20px",marginLeft:"1em"},onClick:function(t){e.setPageMessage("")}},"X"),e.message),l.a.createElement("img",{src:Oe.a,style:{height:"1.8em"},alt:"logo"}),l.a.createElement("div",{style:{width:"100%"}},i),e.message,l.a.createElement(Se.a.Text,{style:{position:"fixed",top:"2px",right:"2px"},className:"justify-content-end"},r),l.a.createElement("img",{src:Ie.a,alt:"waiting",style:{position:"fixed",top:5,right:5,zIndex:99,display:e.waiting?"block":"none"}}))}var we=n(65),Le=n.n(we);function Te(e){var t=e.item,n=e.splitNumber,a=e.style,i=de(e.item,e.saveItem,e.splitNumber,e.style),r=i.intentTitle,s=i.setIntentTitle,o=i.selectionState,c=i.setSelectionState,u=i.newEntity,m=i.setNewEntity,p=i.tags,f=i.skills,d=i.reactTags,g=i.reactSkills,v=i.onTagDelete,h=i.onTagAddition,y=i.onSkillDelete,E=i.onSkillAddition,k=i.updateExampleContent,b=i.entityClicked,S=i.entityTypeChanged,x=i.intentChanged,O=i.entityDelete,I=i.selectItem,j=i.deselectItem,w=e.lookups.intentLookups&&e.lookups.intentLookups.sort().map((function(e,t){return l.a.createElement(L.a.Item,{key:t,value:e,onClick:function(t){x(e)}},e)})),N=t&&t.entities&&t.entities.map((function(t,n){var a=e.lookups.entityLookups.sort().map((function(e,t){return l.a.createElement(L.a.Item,{key:t,value:e,onClick:function(t){S(n,e)}},e)}));return l.a.createElement(L.a,{style:{marginLeft:"0.2em"},variant:"info",key:n,as:T.a},l.a.createElement(L.a.Toggle,{variant:"info",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(A.a,{variant:"info",size:"sm",onClick:function(e){b(n,t.type)}},l.a.createElement("b",null,t.type),"-",t.value?t.value:"Select Entity Type"),l.a.createElement(A.a,{variant:"info",size:"sm",onClick:function(e){O(n,"")}},"X"),l.a.createElement(L.a.Menu,null,l.a.createElement("form",{style:{display:"inline"}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){S(n,e.target.value)},value:t.type}))),a))}));if(o&&o.textSelection&&o.textSelection.length>0&&o.textSelectionFrom===n){var C=e.lookups.entityLookups&&e.lookups.entityLookups.sort().map((function(e,t){return l.a.createElement(L.a.Item,{key:t,value:e,onClick:function(t){S(-1,e)}},e)}));N.push(l.a.createElement(L.a,{key:"new",variant:"success",as:T.a},l.a.createElement(L.a.Toggle,{variant:"success",split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(A.a,{variant:"success",size:"sm"},"New Entity"),l.a.createElement(L.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(e){e.preventDefault(),S(-1,u)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",onChange:function(e){m(e.target.value)},value:u}))),C)))}return t&&l.a.createElement("div",{style:a,className:n%2?"ListItemOdd":"ListItemEven"},l.a.createElement("div",{style:{position:"relative",width:"100%",textAlign:"left",borderTop:"2px solid black"}},!t.isSelected&&l.a.createElement(A.a,{style:{float:"left"},size:"lg",variant:"secondary",onClick:function(){I(n)}},l.a.createElement("img",{style:{height:"1em"},src:ne.a,alt:"Select"})),t.isSelected&&l.a.createElement(A.a,{style:{float:"left"},size:"lg",variant:"success",onClick:function(){j(n)}},l.a.createElement("img",{style:{height:"1em"},src:ne.a,alt:"Deselect"})),t.intent&&l.a.createElement(A.a,{style:{float:"right",marginLeft:"0.2em"},variant:"success",onClick:function(){e.saveNlu(n)}},l.a.createElement("img",{src:"/thumb-up.svg",alt:"Save"})," Save"),!t&&l.a.createElement(A.a,{style:{float:"right",marginLeft:"0.2em"},variant:"secondary"},l.a.createElement("img",{src:Le.a,alt:"Save"})," Import"),l.a.createElement(A.a,{variant:"danger",style:{float:"right"},onClick:function(a){e.deleteItem(n,t.id?t.id:"")}},l.a.createElement("img",{src:ve.a,alt:"Delete"})," Delete"),l.a.createElement(L.a,{style:{float:"left"},as:T.a},l.a.createElement(L.a.Toggle,{split:!0,size:"sm",id:"dropdown-split-basic"}),l.a.createElement(A.a,{size:"sm"},t.intent?t.intent.toString():"Select Intent"," "),l.a.createElement(L.a.Menu,null,l.a.createElement("form",{style:{display:"inline"},onSubmit:function(e){e.preventDefault(),x(r)}},l.a.createElement("div",{className:"form-group"},l.a.createElement("input",{type:"text",className:"form-control",value:r,onChange:function(e){s(e.target.value)}}))),w)),l.a.createElement("span",{style:{float:"left"}},N),l.a.createElement("div",{style:{float:"left"}},l.a.createElement(ie.a,{placeholderText:"Add to skill",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:g,tags:f,suggestionComponent:se,suggestions:e.lookups.skillLookups.map((function(e,t){return{id:t,name:e}})),onDelete:y,onAddition:E})),l.a.createElement("div",{style:{float:"left"}},l.a.createElement(ie.a,{placeholderText:"Add new tag",minQueryLength:0,maxSuggestionsLength:50,autoresize:!1,allowNew:!0,ref:d,tags:p,suggestionComponent:se,suggestions:e.lookups.tagLookups.map((function(e,t){return{id:t,name:e}})),onDelete:v,onAddition:h})),l.a.createElement("input",{onFocus:function(e){c(null)},onSelect:function(e){var t=window.getSelection().toString();c({textSelection:t,textSelectionFrom:n,startTextSelection:e.target.selectionStart,endTextSelection:e.target.selectionEnd})},type:"text",style:{clear:"both",width:"80%"},value:t.example,id:"example_input_"+n,onChange:function(e){k(e.target.value)}})))}var Ne=n(66),Ce=n.n(Ne),Ve=n(67),Fe=n.n(Ve),ze=function(e){var t=e.index,n=e.style,a=e.data.items[t];return l.a.createElement(Te,{item:a,splitNumber:t,style:n,saveItem:e.data.saveItem,deleteItem:e.data.deleteItem,saveNlu:e.data.saveNlu,lookups:e.data.lookups})};function De(e){var t=Ee("nlutool","import","alldata",e.updateLookups),n=t.loadAll,i=t.deleteItem,r=t.items,s=t.findKeyBy,c=t.searchFilter,u=t.setSearchFilter,m=t.tagAllValue,p=t.setTagAllValue,f=t.skillAllValue,d=t.setSkillAllValue,g=t.skillFilterValue,v=t.setSkillFilterValue,h=t.intentAllValue,y=t.setIntentAllValue,E=t.listRef,k=t.tagAll,b=t.untagAll,S=t.unskillAll,x=t.intentAll,O=t.resetSelection,I=t.selectAll,j=t.skillSetAll,w=t.saveItemWrap,L=t.getItemSize,T=t.deleteAll,N=t.saveAll,z=t.saveNlu,D=t.filteredItems,W=t.createEmptyItem;return Object(a.useEffect)((function(){n()}),[]),l.a.createElement("div",null,l.a.createElement(o.b,{style:{float:"right"},to:"/sources"},l.a.createElement(A.a,{variant:"success"},"Sources")),l.a.createElement(ye,Object.assign({},e,{searchFilter:c,setSearchFilter:u,skillFilterValue:g,setSkillFilterValue:v,resetSelection:O,selectAll:I,createEmptyItem:W,untagAll:b,unskillAll:S})),function(e){return D&&D.length>0?l.a.createElement("div",null,l.a.createElement("span",{style:{float:"left",fontWeight:"bold"}},"\xa0",D.length,"/",r.length," matches "),e.lookups.selectedTally>0&&l.a.createElement("span",{style:{float:"right"}},l.a.createElement("span",null,"With ",e.lookups.selectedTally," selected\xa0",l.a.createElement(F,{skillSetAll:j,skillAllValue:f,setSkillAllValue:d,lookups:e.lookups}),l.a.createElement(V,{intentAll:x,intentAllValue:h,setIntentAllValue:y,lookups:e.lookups}),l.a.createElement(C,{tagAll:k,tagAllValue:m,setTagAllValue:p,lookups:e.lookups})),l.a.createElement(A.a,{style:{marginLeft:"1em"},onClick:N,variant:"success"},"Save Selected"),l.a.createElement(A.a,{style:{marginLeft:"1em"},onClick:T,variant:"danger"},"Delete Selected")),l.a.createElement($.a,{ref:E,itemData:{items:D,saveItem:w,saveNlu:z,deleteItem:i,findKeyBy:s,lookups:e.lookups},itemKey:function(e){return e},className:"List",height:700,itemCount:D.length,itemSize:L,width:"100%"},ze)):l.a.createElement("div",null,l.a.createElement("div",{style:{textAlign:"center"}},l.a.createElement("br",null),l.a.createElement("b",null,"No more items to import"),l.a.createElement("br",null),l.a.createElement("br",null),"Open ",l.a.createElement(o.b,{to:"/sources"},l.a.createElement(A.a,null,l.a.createElement("img",{style:{height:"1em",paddingRight:"1em"},src:Ce.a,alt:"Sources"}),"Sources"))," to create more or ",l.a.createElement(o.b,{to:"/examples"},l.a.createElement(A.a,null,"Organise",l.a.createElement("img",{src:Fe.a,alt:"Intents",style:{height:"1em",paddingLeft:"1em"}})))," what you have imported into skills."))}(e))}var We=n(107),Me=n(16),Re=n.n(Me),_e=n(23),Je=n(68),Pe=n.n(Je),Be=n(47);function Ke(e){var t=new Pe.a;return console.log(["ZIP",e]),function e(n,a){Array.isArray(n.files)&&n.files.map((function(e){console.log(["ZIP file",e]);var n=e.base64&&e.base64.length>0?{base64:!0}:{};return e.name&&e.name.length>0&&e.content&&t.file(a+"/"+e.name,e.content,n),null})),Array.isArray(n.folders)&&n.folders.map((function(n){return console.log(["ZIP folder",n]),n.name&&n.name.length>0&&t.folder(n.name),(n.files&&n.files.length>0||n.folders&&n.folders.length>0)&&e(n,a+"/"+n.name),null}))}(e,""),new Promise((function(e,n){t.generateAsync({type:"blob"}).then((function(t){e(t)}))}))}function Ue(e){return He.apply(this,arguments)}function He(){return(He=Object(_e.a)(Re.a.mark((function e(t){return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){y.a.createInstance({name:"nlutool",storeName:"lists"});var a={invocation:t.invocation},l={},i={};t.intents&&Object.keys(t.intents).map((function(e){var n=t.intents[e];l[e]||(l[e]={name:e,phrases:[],inputs:[]});var a={};Array.isArray(n)&&n.map((function(t){l[e].phrases.push(v(t.example,t.entities)),Array.isArray(t.entities)&&t.entities.map((function(e){a[e.type]=!0,Array.isArray(i[e.type])||(i[e.type]=[]),i[e.type].push(e.value)}))})),l[e].phrases=d(l[e].phrases).sort(),l[e].inputs=Object.keys(a).map((function(e){return{name:e,type:e+"Type"}}))})),a.intents=Object.values(l),Object.keys(i).map((function(e){t.entities&&t.entities[e]&&t.entities[e].lists&&t.entities[e].lists.map((function(n){t.lists[n]&&i[e].concat(t.lists[n])}))})),a.inputTypes=Object.keys(i).map((function(e){return{name:e+"Type",values:d(i[e]).sort().map((function(e){return{value:e}}))}})),e({folders:[{name:"models",files:[{name:"en-US.json",content:JSON.stringify(a)}]}]})})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(){return(Qe=Object(_e.a)(Re.a.mark((function e(t){return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=Ke,e.next=3,Ue(t);case 3:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=Object(_e.a)(Re.a.mark((function e(t){return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(["EXPPORT JSON",t]),y.a.createInstance({name:"nlutool",storeName:"lists"}).getItem("alldata").then((function(e){var n={};t.entities&&Object.keys(t.entities).map((function(e,a){t.entities[e]&&Array.isArray(t.entities[e].lists)&&t.entities[e].lists.map((function(e){n[e]=!0}))}));var a={};Object.keys(n).map((function(e){a[e]=[]})),e.map((function(e){Object.keys(n).map((function(t){e&&e.tags&&-1!==e.tags.indexOf(t)&&a[t].push(e.value)}))})),t.lists=a})),e.abrupt("return",JSON.stringify(t));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(){return(qe=Object(_e.a)(Re.a.mark((function e(t){var n;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe(t);case 2:return n=e.sent,e.abrupt("return",JSON.stringify(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e){return $e.apply(this,arguments)}function $e(){return($e=Object(_e.a)(Re.a.mark((function e(t){return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var a=y.a.createInstance({name:"nlutool",storeName:"lists"}),l=[];a.getItem("alldata").then((function(n){var a={};t.entities&&Object.keys(t.entities).map((function(e,n){return t.entities[e]&&Array.isArray(t.entities[e].lists)&&t.entities[e].lists.map((function(e){a[e]=!0})),null}));var i={};Object.keys(a).map((function(e){return i[e]=[],null})),n.map((function(e){Object.keys(a).map((function(t){return e&&e.tags&&-1!==e.tags.indexOf(t)&&i[t].push(e.value),null}))}));var r={};t.intents&&Object.keys(t.intents).map((function(e){var n=t.intents[e];Array.isArray(r[e])||(r[e]=[]),Array.isArray(n)&&n.map((function(t){r[e].push(v(t.example,t.entities))})),r[e]=d(r[e]).sort()}));var s={};t.entities&&Object.keys(t.entities).map((function(e){var n=[],a=t.entities[e];a.values&&(n=n.concat(a.values)),a.lists&&a.lists.map((function(a){t.lists&&t.lists[e]&&(n=n.concat(t.lists[e]))})),s[e]=d(n).sort()})),Object.keys(r).map((function(e){return l.push({name:e+".intent",content:r[e].join("\n")}),null})),Object.keys(s).map((function(e){return l.push({name:e+".entity",content:s[e].join("\n")}),null})),e(l)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ge(){return(Ge=Object(_e.a)(Re.a.mark((function e(t){var n;return Re.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ye(t);case 2:return n=e.sent,e.abrupt("return",Ke({files:n}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e){var t={};e.entities&&e.entities.map((function(e,n){return t[n]=e,null}));var n={};e.intents&&e.intents.map((function(e,t){return n[t]=e,null}));var a={title:e.title,friendlyTitle:e.friendlyTitle,intents:Object.values(n),entities:Object.values(t)},l=e.friendlyTitle?e.friendlyTitle+".json":e.title?e.title+".json":m()+".json";JSON.stringify(a);return Ke(l)}var tt=[{name:"JSON",exportFunction:function(e){return qe.apply(this,arguments)}},{name:"JOVO",exportFunction:function(e){return Qe.apply(this,arguments)}},{name:"RASA",exportFunction:function(e){return Ke({files:[{name:"skill.json",content:et(e)}]})}},{name:"Mycroft",exportFunction:function(e){return Ge.apply(this,arguments)}}];function nt(e){var t=Ee("nlutool","examples","alldata",e.updateLookups),n=(t.items,t.loadAll),i=t.skillFilterValue,r=t.setSkillFilterValue,c=t.filteredItems,u=Object(a.useState)(""),p=Object(s.a)(u,2),f=p[0],g=p[1],v=Object(a.useState)(""),h=Object(s.a)(v,2),E=h[0],b=h[1],S=Object(a.useState)({}),x=Object(s.a)(S,2),O=x[0],j=x[1],w=Object(a.useState)({}),N=Object(s.a)(w,2),C=N[0],V=N[1],F=Object(a.useState)({id:m(),invocation:"",title:i,entities:{}}),z=Object(s.a)(F,2),D=z[0],W=z[1],M=k("nlutool","lists"),R=Object(a.useState)(!1),_=Object(s.a)(R,2),J=(_[0],_[1],Object(a.useState)({})),P=Object(s.a)(J,2),B=P[0],K=P[1],U=Object(a.useState)({}),H=Object(s.a)(U,2),Q=H[0],X=H[1],Z=y.a.createInstance({name:"nlutool",storeName:"skills"});return Object(a.useEffect)((function(){n(),i&&Z.getItem(i,(function(e,t){if(e)throw new Error(e);t&&(W(t),b(t.invocation))})),M.loadAll()}),[]),Object(a.useEffect)((function(){i&&Z.getItem(i,(function(e,t){if(e)throw new Error(e);t&&(W(t),b(t.invocation))}))}),[i]),Object(a.useEffect)((function(){M.items.length>0&&e.updateLists(M.items[0])}),[M.items]),Object(a.useEffect)((function(){var e={};c.map((function(t,n){return Array.isArray(t.entities)&&t.entities.map((function(t,n){return t&&t.type&&t.type.length>0&&("object"!==typeof e[t.type]&&(e[t.type]={}),Array.isArray(e[t.type].values)||(e[t.type].values=[]),e[t.type].values.push(t.value)),null})),null})),Object.keys(e).map((function(t,n){var a=e[t];return a.values=d(a.values).sort(),null})),j(e);var t=B,n=Q;if(c){c.map((function(e){return e.intent&&(t[e.intent]||(t[e.intent]=[]),n[e.intent]=n[e.intent]>0?n[e.intent]+1:1,t[e.intent].push({example:e.example,entities:e.entities})),null})),K(t),X(n),console.log(["UDPATE SKILL WITH INTENTS",D,B]);var a=D;a.intents=B,W(a),console.log(["UDPATE SKILL WITH INTENTS",JSON.parse(JSON.stringify(a))])}}),[c]),Object(a.useEffect)((function(){if(D){var e=D;e.invocation=E,W(e)}}),[E]),Object(a.useEffect)((function(){console.log("change cs or inv",D),D&&D.title&&D.title.length>0&&(console.log("change cs or inv real"),O&&Object.keys(O).map((function(e){D.entities&&D.entities[e]&&(D.entities[e].values=O[e].values)})),console.log(["save skill ",i,D]),Z.setItem(i,D,(function(e){if(console.log(["saved skill "]),e)throw console.log(e),new Error(e)})))}),[D,C,E]),(e.lookups.skillLookups&&e.lookups.skillLookups.sort().map((function(e,t){return l.a.createElement(L.a.Item,{key:t,value:e,onClick:function(t){r(e)}},e)}))).unshift(l.a.createElement(L.a.Item,{key:"empty_key_value_empty",value:"",onClick:function(e){r("")}},"\xa0")),l.a.createElement("div",null,i&&i.length>0&&l.a.createElement(L.a,{style:{float:"right",marginLeft:"0.5em"},as:T.a},l.a.createElement(L.a.Toggle,{split:!0,variant:"success",id:"dropdown-split-basic"}),l.a.createElement(A.a,{variant:"success"},"Export"),l.a.createElement(L.a.Menu,{variant:"success"},tt.map((function(e,t){var n="opennludata_"+e.name+"_"+Date.now();return l.a.createElement(L.a.Item,{variant:"success",key:t,value:e.name,onClick:function(t){e.exportFunction(D).then((function(e){Object(Be.saveAs)(e,n)}))}},e.name)})))),function(e){if(!(i&&i.length>0)){var t=e.lookups.skillLookups?e.lookups.skillLookups.map((function(e,t){return l.a.createElement(A.a,{key:t,onClick:function(t){r(e)},style:{marginLeft:"1em"}},e)})):[];return l.a.createElement("div",null,l.a.createElement("h1",null,"Skills"),t.length>0&&t,t.length<=0&&l.a.createElement("div",null,"You dont have any skills yet. Import some ",l.a.createElement(o.b,{to:"/sources"},l.a.createElement(A.a,null,"Sources"))))}if(c&&c.length>0)return l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement("h3",null,i," ")),l.a.createElement("div",null,l.a.createElement("label",{style:{fontWeight:"bold",marginLeft:"0.5em"}}," Invocation ",l.a.createElement("input",{type:"text",value:E,onChange:function(e){b(e.target.value)}}))),l.a.createElement("div",null,l.a.createElement("b",{style:{marginRight:"1em",marginLeft:"0.5em"}},"Tags"),l.a.createElement("span",null)),l.a.createElement("b",{style:{marginRight:"1em",marginLeft:"0.5em"}},"Intents"),l.a.createElement("span",null,Object.keys(B).sort().map((function(e,t){var n=f||Object.keys(B)[0],a="danger";return B[e].length>300?a="success":B[e].length>100?a="primary":B[e].length>10&&(a="warning"),B[e].length===Q[e]?l.a.createElement(o.b,{key:e,to:"/examples/skill/"+i+"/intent/"+e},l.a.createElement(A.a,{key:e,variant:e===n?"primary":"outline-primary",onClick:function(){g(e)}},l.a.createElement(We.a,{variant:a}," ",B[e].length," "),"\xa0",e)):l.a.createElement(o.b,{key:e,to:"/examples/skill/"+i+"/intent/"+e},l.a.createElement(A.a,{variant:e===n?"primary":"outline-primary",onClick:function(){g(e)}},l.a.createElement(We.a,{variant:"danger"}," ",B[e].length,"/",Q[e]," "),"\xa0",e))}))),l.a.createElement("div",{style:{marginTop:"0.7em"}},l.a.createElement("b",{style:{marginRight:"1em",marginLeft:"0.5em"}},"Entities"),l.a.createElement(I.a,null,Object.keys(O).map((function(t,n){var a=D&&D.entities&&D.entities[t]&&D.entities[t].lists?D.entities[t].lists.map((function(e,t){return{id:t,name:e}})):[];return l.a.createElement(I.a.Item,{key:t},l.a.createElement("span",{style:{marginLeft:"1em",float:"left",fontWeight:"bold"}},"\xa0",t),l.a.createElement("span",{style:{marginLeft:"1em",float:"left"}},"\xa0",O[t].values.slice(0,5).join(", "),O[t].values.length>5?l.a.createElement(We.a,null,"... ",O[t].values.length-5," more "):""),l.a.createElement("span",{style:{marginLeft:"1em",float:"left"}},l.a.createElement("label",null,l.a.createElement("i",null)," ",l.a.createElement(ie.a,{placeholderText:"Also use values from ",minQueryLength:0,maxSuggestionsLength:50,autoresize:!0,allowNew:!1,tags:a,suggestionComponent:se,suggestions:e.lookups.listsLookups.map((function(e,t){return{id:t,name:e}})),onDelete:function(e){!function(e,t){var n=D;if(n&&n.entities&&e&&n.entities[e]&&n.entities[e].lists){var a=n.entities[e].lists;a=a.slice(0,t).concat(a.slice(t+1)),n.entities[e].lists=a,W(n),V(JSON.stringify(n.entities))}}(t,e)},onAddition:function(e){!function(e,t){if(e&&t&&t.name){var n=D;n.entities||(n.entities={}),n.entities[e]||(n.entities[e]={lists:[]}),Array.isArray(n.entities[e].lists)||(n.entities[e].lists=[]),n.entities[e].lists.push(t.name),n.entities[e].lists=d(n.entities[e].lists).sort(),W(n),V(JSON.stringify(n.entities))}else console.log([" missing data"])}(t,e)}})," ")))})))))}(e))}n(96);var at=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2);return n[0],n[1],l.a.createElement("div",null,l.a.createElement("h3",null,"Search"),l.a.createElement("iframe",{src:"https://github.com/syntithenai/opennludata/wiki"}))};function lt(e){var t={paddingLeft:"0.3em"};return l.a.createElement("div",{style:{marginLeft:"0.5em"}},l.a.createElement("h1",null,"Menu"),l.a.createElement(o.b,{style:t,to:"/sources"},l.a.createElement(A.a,null,"Sources")),l.a.createElement(o.b,{style:t,to:"/import"},l.a.createElement(A.a,null,"Import")),l.a.createElement(o.b,{style:t,to:"/examples"},l.a.createElement(A.a,null,"Organise")),l.a.createElement(o.b,{style:t,to:"/skills"},l.a.createElement(A.a,null,"Skills ")),l.a.createElement(o.b,{style:t,to:"/search"},l.a.createElement(A.a,null,"Search Community ")))}var it=function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],i=t[1],r=Object(a.useState)(""),u=Object(s.a)(r,2),m=u[0],p=u[1],f=Object(a.useState)([]),d=Object(s.a)(f,2),g=d[0],v=d[1],h=Object(a.useState)([]),y=Object(s.a)(h,2),E=y[0],k=y[1],b=Object(a.useState)([]),S=Object(s.a)(b,2),x=S[0],O=S[1],A=Object(a.useState)([]),I=Object(s.a)(A,2),j=I[0],w=I[1],L=Object(a.useState)([]),T=Object(s.a)(L,2),N=T[0],C=T[1],V=Object(a.useState)(0),F=Object(s.a)(V,2),z=F[0],D=F[1],W=Object(a.useState)(0),P=Object(s.a)(W,2),B=P[0],K=P[1],U=Object(a.useState)(0),H=Object(s.a)(U,2),Q=H[0],X=H[1],Z=Object(a.useState)({}),q=Object(s.a)(Z,2),$=q[0],G=q[1],ee=Object(a.useState)({}),te=Object(s.a)(ee,2),ne=te[0],ae=te[1],le=Object(a.useState)(""),ie=Object(s.a)(le,2),re=ie[0],se=ie[1];function oe(){i(!0)}function ce(){setTimeout((function(){i(!1)}),300)}function ue(e){if(e){var t={},n={},a=0,l=0;e.map((function(e){return e&&e.tags&&e.tags.length>0&&(e.isSelected&&(l+=1),e.tags.map((function(a){return a&&a.trim().length>0&&(e.isSelected?(n[a]=n[a]>0?n[a]+1:1,t[a]=t[a]>0?t[a]+1:1):n[a]=n[a]>0?n[a]+1:1),null})),a+=1),null})),K(a),X(l),ae(t),G(n),C(Object.keys(n))}}function me(e){if(e&&e.length>0){var t={},n={},a={},l={},i=0;e.map((function(e){return e.isSelected&&(i+=1),n[e.intent]=!0,e.tags&&e.tags.length>0&&e.tags.map((function(e){return t[e]=!0,null})),e.skills&&e.skills.length>0&&e.skills.map((function(e){return l[e]=!0,null})),e.entities&&e.entities.length>0&&e.entities.map((function(e){return e.type&&(a[e.type]=!0),null})),null}));var r=function(e,t,n){return n.indexOf(e)===t};v([].concat(Object.keys(n),g).filter(r)),k([].concat(Object.keys(a),E).filter(r)),O([].concat(Object.keys(t),x).filter(r)),w([].concat(Object.keys(l),j).filter(r)),D(i)}}var pe={intentLookups:g,entityLookups:E,tagLookups:x,skillLookups:j,selectedTally:z,listsLookups:N,listTally:B,selectedListTally:Q,listTallyByList:$,selectedListTallyByList:ne};return l.a.createElement("div",{className:"OpenNluDataApp"},l.a.createElement(o.a,null,l.a.createElement(c.a,{exact:!0,path:"*",render:function(e){return l.a.createElement(je,{waiting:n,history:e.history,message:m,setPageMessage:p})}}),l.a.createElement(c.a,{exact:!0,path:"/menu",component:lt}),l.a.createElement(c.a,{path:"/sources",render:function(e){return l.a.createElement(Y,Object.assign({},e,{startWaiting:oe,stopWaiting:ce,setPageMessage:p,updateLookups:me,updateLists:ue,lookups:pe}))}}),l.a.createElement(c.a,{path:"/import",render:function(e){return l.a.createElement(De,Object.assign({},e,{lookups:pe,startWaiting:oe,stopWaiting:ce,updateLookups:me,setPageMessage:p}))}}),l.a.createElement(c.a,{exact:!0,path:"/examples",render:function(e){return l.a.createElement(be,Object.assign({},e,{lookups:pe,startWaiting:oe,stopWaiting:ce,updateLookups:me,setPageMessage:p}))}}),l.a.createElement(c.a,{exact:!0,path:"/examples/skill/:skillId",render:function(e){return l.a.createElement(be,Object.assign({},e,{lookups:pe,startWaiting:oe,stopWaiting:ce,updateLookups:me,updateLists:ue,setPageMessage:p}))}}),l.a.createElement(c.a,{path:"/examples/intent/:intentId",render:function(e){return l.a.createElement(be,Object.assign({},e,{lookups:pe,startWaiting:oe,stopWaiting:ce,updateLookups:me,updateLists:ue,setPageMessage:p}))}}),l.a.createElement(c.a,{exact:!0,path:"/examples/skill/:skillId/intent/:intentId",render:function(e){return l.a.createElement(be,Object.assign({},e,{lookups:pe,startWaiting:oe,stopWaiting:ce,updateLookups:me,updateLists:ue,setPageMessage:p}))}}),l.a.createElement(c.a,{exact:!0,path:"/skills/:skillId",render:function(e){return l.a.createElement(nt,Object.assign({},e,{lookups:pe,startWaiting:oe,stopWaiting:ce,updateLookups:me,updateLists:ue,setPageMessage:p}))}}),l.a.createElement(c.a,{exact:!0,path:"/skills/skill/:skillId",render:function(e){return l.a.createElement(nt,Object.assign({},e,{lookups:pe,startWaiting:oe,stopWaiting:ce,updateLookups:me,updateLists:ue,setPageMessage:p}))}}),l.a.createElement(c.a,{exact:!0,path:"/skills",render:function(e){return l.a.createElement(nt,Object.assign({},e,{skillFilterValue:re,setSkillFilterValue:se,lookups:pe,startWaiting:oe,stopWaiting:ce,updateLookups:me,updateLists:ue,setPageMessage:p}))}}),l.a.createElement(c.a,{path:"/lists",render:function(e){return l.a.createElement(fe,Object.assign({},e,{lookups:pe,startWaiting:oe,stopWaiting:ce,updateLookups:me,setPageMessage:p,updateLists:ue}))}}),l.a.createElement(c.a,{exact:!0,path:"/help",component:M}),l.a.createElement(c.a,{exact:!0,path:"/helpimport",component:R}),l.a.createElement(c.a,{exact:!0,path:"/helpexport",component:J}),l.a.createElement(c.a,{exact:!0,path:"/helpabout",component:_}),l.a.createElement(c.a,{exact:!0,path:"/search",component:at}),l.a.createElement(c.a,{exact:!0,path:"/",component:M})))},rt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function st(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(it,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");rt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):st(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):st(t,e)}))}}()},15:function(e,t,n){e.exports=n.p+"static/media/check.8ab01baf.svg"},24:function(e,t,n){},44:function(e,t,n){e.exports=n.p+"static/media/thumb-down.73b0ce24.svg"},63:function(e,t,n){e.exports=n.p+"static/media/fire.ecd49b13.svg"},64:function(e,t,n){e.exports=n.p+"static/media/waiting.d362cb3f.gif"},65:function(e,t,n){e.exports=n.p+"static/media/thumb-up.f18de183.svg"},66:function(e,t,n){e.exports=n.p+"static/media/arrow-thick-left.f29ee705.svg"},67:function(e,t,n){e.exports=n.p+"static/media/arrow-thick-right.9ba7683e.svg"},72:function(e,t,n){e.exports=n(100)},77:function(e,t,n){}},[[72,1,2]]]);
//# sourceMappingURL=main.c5252227.chunk.js.map